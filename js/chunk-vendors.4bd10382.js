(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),a={};a[i]="z",t.exports="[object z]"===String(a)},"011b":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("76c2"),i=n("a3f7"),a=n("c77c"),s=n("b9b9"),o=n("54ef"),u=n("6791"),c=n("a09b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(i["a"])(t,"a","div"),o=Object(i["a"])(e,"b","div");[n,o]=Object(r["makeTypesMatch"])(n,o);const l=Object(a["a"])(n,o),d=Object(c["a"])(l),h=Object(s["a"])(o,d);return Object(u["a"])(h,d,l)}const d=Object(o["b"])({divNoNan_:l})},"015f":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("eb7e"),i=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e){if((Object(r["isTypedArray"])(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Object(r["isTypedArray"])(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");const n=[],a=[];return Object(i["a"])(t,n,a,e)}},"0280":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("043e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(r);const i=Object(r["a"])(t,"int32"),a=Object(r["a"])([n.length,t.length],"int32");for(let r=0;r<n.length;r++){const e=i.indexToLoc(n[r]),s=r*t.length;a.values.set(e,s)}return a.toTensor()}},"043e":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("34d7"),i=n("6ad5");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e="float32",n){return e=e||"float32",i["c"](t),new r["b"](t,e,n)}},"04b8":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},"04f8":function(t,e,n){var r=n("2d00"),i=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"05bb":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("a3f7"),i=n("6ad5"),a=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n){if(Object(i["d"])(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const s=Object(r["c"])(t,n);if(3!==s.length&&1!==s.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===s.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(a["a"])(t,e,s,n)}},"06cf":function(t,e,n){var r=n("83ab"),i=n("c65b"),a=n("d1e7"),s=n("5c6c"),o=n("fc6a"),u=n("a04b"),c=n("1a2d"),l=n("0cfb"),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(t,e){if(t=o(t),e=u(e),l)try{return d(t,e)}catch(n){}if(c(t,e))return s(!i(a.f,t,e),t[e])}},"0777":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"real","complex"),o=Object(a["a"])(e,"imag","complex");s["e"](n.shape,o.shape,`real and imag shapes, ${n.shape} and ${o.shape}, must match in call to tf.complex().`);const u={real:n,imag:o};return r["a"].runKernel(i["A"],u)}const c=Object(o["b"])({complex_:u})},"07d6":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"07fa":function(t,e,n){var r=n("50c4");t.exports=function(t){return r(t.length)}},"083a":function(t,e,n){"use strict";var r=n("0d51"),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+r(e)+" of "+r(t))}},"08a9":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","round"),n={x:e};return r["a"].runKernel(i["Dc"],n)}const u=Object(s["b"])({round_:o})},"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("deb3"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(s["a"])(t,"a","maximum"),c=Object(s["a"])(e,"b","maximum");[n,c]=Object(a["makeTypesMatch"])(n,c),"bool"===n.dtype&&(n=Object(u["a"])(n,"int32"),c=Object(u["a"])(c,"int32")),Object(o["assertAndGetBroadcastShape"])(n.shape,c.shape);const l={a:n,b:c};return r["a"].runKernel(i["Sb"],l)}const d=Object(c["b"])({maximum_:l})},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),a=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},"0d26":function(t,e,n){var r=n("e330"),i=Error,a=r("".replace),s=function(t){return String(i(t).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,u=o.test(s);t.exports=function(t,e){if(u&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=a(t,o,"");return t}},"0d51":function(t,e){var n=String;t.exports=function(t){try{return n(t)}catch(e){return"Object"}}},"0db5":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","onesLike"),n={x:e};return r["a"].runKernel(i["gc"],n)}const u=Object(s["b"])({onesLike_:o})},"0eb5":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n=0){const s=Object(a["a"])(t,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},u={x:s};return r["a"].runKernel(i["ic"],u,o)}const u=Object(s["b"])({pad_:o})},"0ef4":function(t,e,n){"use strict";n.d(e,"d",(function(){return xt["a"]})),n.d(e,"e",(function(){return Ot["a"]})),n.d(e,"f",(function(){return St["a"]})),n.d(e,"g",(function(){return kt["a"]})),n.d(e,"gc",(function(){return Tt["a"]})),n.d(e,"rc",(function(){return _t["a"]})),n.d(e,"sc",(function(){return At})),n.d(e,"zc",(function(){return It["a"]})),n.d(e,"Uc",(function(){return Ct["a"]})),n.d(e,"zd",(function(){return nt["a"]})),n.d(e,"Ad",(function(){return nt["b"]})),n.d(e,"Jd",(function(){return nt["c"]})),n.d(e,"Ec",(function(){return Et["a"]})),n.d(e,"ji",(function(){return Et["b"]})),n.d(e,"Hi",(function(){return Et["c"]})),n.d(e,"Md",(function(){return Nt["b"]})),n.d(e,"Nd",(function(){return Nt["c"]})),n.d(e,"Od",(function(){return Nt["d"]})),n.d(e,"Pd",(function(){return Nt["e"]})),n.d(e,"Qd",(function(){return Nt["f"]})),n.d(e,"Rd",(function(){return Nt["g"]})),n.d(e,"Sd",(function(){return Nt["h"]})),n.d(e,"Td",(function(){return Nt["i"]})),n.d(e,"Ud",(function(){return Nt["j"]})),n.d(e,"Vd",(function(){return Nt["k"]})),n.d(e,"Wd",(function(){return Nt["l"]})),n.d(e,"Xd",(function(){return Nt["m"]})),n.d(e,"Yd",(function(){return Nt["n"]})),n.d(e,"Zd",(function(){return Nt["o"]})),n.d(e,"ae",(function(){return Nt["p"]})),n.d(e,"be",(function(){return Nt["q"]})),n.d(e,"ee",(function(){return Nt["r"]})),n.d(e,"je",(function(){return Nt["w"]})),n.d(e,"fe",(function(){return Nt["s"]})),n.d(e,"ge",(function(){return Nt["t"]})),n.d(e,"he",(function(){return Nt["u"]})),n.d(e,"ie",(function(){return Nt["v"]})),n.d(e,"ke",(function(){return Nt["x"]})),n.d(e,"me",(function(){return Nt["z"]})),n.d(e,"ne",(function(){return Nt["A"]})),n.d(e,"qe",(function(){return Nt["B"]})),n.d(e,"re",(function(){return Nt["C"]})),n.d(e,"se",(function(){return Nt["D"]})),n.d(e,"te",(function(){return Nt["E"]})),n.d(e,"ue",(function(){return Nt["F"]})),n.d(e,"ve",(function(){return Nt["G"]})),n.d(e,"we",(function(){return Nt["H"]})),n.d(e,"xe",(function(){return Nt["I"]})),n.d(e,"ye",(function(){return Nt["J"]})),n.d(e,"ze",(function(){return Nt["K"]})),n.d(e,"Ae",(function(){return Nt["L"]})),n.d(e,"Be",(function(){return Nt["M"]})),n.d(e,"Ce",(function(){return Nt["N"]})),n.d(e,"De",(function(){return Nt["O"]})),n.d(e,"Ee",(function(){return Nt["P"]})),n.d(e,"Fe",(function(){return Nt["Q"]})),n.d(e,"He",(function(){return Nt["R"]})),n.d(e,"Ie",(function(){return Nt["S"]})),n.d(e,"Ke",(function(){return Nt["U"]})),n.d(e,"Le",(function(){return Nt["V"]})),n.d(e,"Ne",(function(){return Nt["W"]})),n.d(e,"Pe",(function(){return Nt["X"]})),n.d(e,"Qe",(function(){return Nt["Y"]})),n.d(e,"Se",(function(){return Nt["Z"]})),n.d(e,"Te",(function(){return Nt["ab"]})),n.d(e,"Xe",(function(){return Nt["bb"]})),n.d(e,"Ye",(function(){return Nt["cb"]})),n.d(e,"Ze",(function(){return Nt["db"]})),n.d(e,"bf",(function(){return Nt["fb"]})),n.d(e,"cf",(function(){return Nt["gb"]})),n.d(e,"if",(function(){return Nt["ib"]})),n.d(e,"jf",(function(){return Nt["jb"]})),n.d(e,"kf",(function(){return Nt["kb"]})),n.d(e,"lf",(function(){return Nt["lb"]})),n.d(e,"mf",(function(){return Nt["mb"]})),n.d(e,"nf",(function(){return Nt["nb"]})),n.d(e,"of",(function(){return Nt["ob"]})),n.d(e,"qf",(function(){return Nt["qb"]})),n.d(e,"tf",(function(){return Nt["rb"]})),n.d(e,"uf",(function(){return Nt["sb"]})),n.d(e,"wf",(function(){return Nt["ub"]})),n.d(e,"Ff",(function(){return Nt["wb"]})),n.d(e,"Gf",(function(){return Nt["xb"]})),n.d(e,"If",(function(){return Nt["zb"]})),n.d(e,"Nf",(function(){return Nt["Db"]})),n.d(e,"Of",(function(){return Nt["Eb"]})),n.d(e,"Pf",(function(){return Nt["Fb"]})),n.d(e,"Sf",(function(){return Nt["Gb"]})),n.d(e,"Tf",(function(){return Nt["Hb"]})),n.d(e,"Uf",(function(){return Nt["Ib"]})),n.d(e,"Wf",(function(){return Nt["Kb"]})),n.d(e,"Xf",(function(){return Nt["Lb"]})),n.d(e,"Yf",(function(){return Nt["Mb"]})),n.d(e,"Zf",(function(){return Nt["Nb"]})),n.d(e,"ag",(function(){return Nt["Ob"]})),n.d(e,"bg",(function(){return Nt["Pb"]})),n.d(e,"cg",(function(){return Nt["Qb"]})),n.d(e,"dg",(function(){return Nt["Rb"]})),n.d(e,"eg",(function(){return Nt["Sb"]})),n.d(e,"fg",(function(){return Nt["Tb"]})),n.d(e,"gg",(function(){return Nt["Ub"]})),n.d(e,"ig",(function(){return Nt["Wb"]})),n.d(e,"jg",(function(){return Nt["Xb"]})),n.d(e,"lg",(function(){return Nt["Yb"]})),n.d(e,"mg",(function(){return Nt["Zb"]})),n.d(e,"ng",(function(){return Nt["ac"]})),n.d(e,"og",(function(){return Nt["bc"]})),n.d(e,"pg",(function(){return Nt["cc"]})),n.d(e,"qg",(function(){return Nt["dc"]})),n.d(e,"sg",(function(){return Nt["ec"]})),n.d(e,"tg",(function(){return Nt["fc"]})),n.d(e,"ug",(function(){return Nt["gc"]})),n.d(e,"vg",(function(){return Nt["hc"]})),n.d(e,"wg",(function(){return Nt["ic"]})),n.d(e,"xg",(function(){return Nt["jc"]})),n.d(e,"zg",(function(){return Nt["lc"]})),n.d(e,"Ag",(function(){return Nt["mc"]})),n.d(e,"Bg",(function(){return Nt["nc"]})),n.d(e,"Cg",(function(){return Nt["oc"]})),n.d(e,"Fg",(function(){return Nt["qc"]})),n.d(e,"Gg",(function(){return Nt["rc"]})),n.d(e,"Hg",(function(){return Nt["sc"]})),n.d(e,"Ig",(function(){return Nt["tc"]})),n.d(e,"Kg",(function(){return Nt["vc"]})),n.d(e,"Lg",(function(){return Nt["wc"]})),n.d(e,"Mg",(function(){return Nt["xc"]})),n.d(e,"Ng",(function(){return Nt["yc"]})),n.d(e,"Og",(function(){return Nt["zc"]})),n.d(e,"Pg",(function(){return Nt["Ac"]})),n.d(e,"Qg",(function(){return Nt["Bc"]})),n.d(e,"Rg",(function(){return Nt["Cc"]})),n.d(e,"Sg",(function(){return Nt["Dc"]})),n.d(e,"Tg",(function(){return Nt["Ec"]})),n.d(e,"Ug",(function(){return Nt["Fc"]})),n.d(e,"Wg",(function(){return Nt["Gc"]})),n.d(e,"Xg",(function(){return Nt["Hc"]})),n.d(e,"Yg",(function(){return Nt["Ic"]})),n.d(e,"Zg",(function(){return Nt["Jc"]})),n.d(e,"ah",(function(){return Nt["Kc"]})),n.d(e,"bh",(function(){return Nt["Lc"]})),n.d(e,"ch",(function(){return Nt["Mc"]})),n.d(e,"dh",(function(){return Nt["Nc"]})),n.d(e,"eh",(function(){return Nt["Oc"]})),n.d(e,"gh",(function(){return Nt["Pc"]})),n.d(e,"hh",(function(){return Nt["Qc"]})),n.d(e,"lh",(function(){return Nt["Rc"]})),n.d(e,"mh",(function(){return Nt["Sc"]})),n.d(e,"oh",(function(){return Nt["Tc"]})),n.d(e,"ph",(function(){return Nt["Uc"]})),n.d(e,"qh",(function(){return Nt["Vc"]})),n.d(e,"rh",(function(){return Nt["Wc"]})),n.d(e,"sh",(function(){return Nt["Xc"]})),n.d(e,"th",(function(){return Nt["Yc"]})),n.d(e,"vh",(function(){return Nt["ad"]})),n.d(e,"wh",(function(){return Nt["bd"]})),n.d(e,"xh",(function(){return Nt["cd"]})),n.d(e,"Bh",(function(){return Nt["fd"]})),n.d(e,"Ch",(function(){return Nt["gd"]})),n.d(e,"Gh",(function(){return Nt["hd"]})),n.d(e,"Hh",(function(){return Nt["id"]})),n.d(e,"Ih",(function(){return Nt["jd"]})),n.d(e,"Kh",(function(){return Nt["ld"]})),n.d(e,"Lh",(function(){return Nt["md"]})),n.d(e,"Mh",(function(){return Nt["nd"]})),n.d(e,"Nh",(function(){return Nt["od"]})),n.d(e,"Oh",(function(){return Nt["pd"]})),n.d(e,"Ph",(function(){return Nt["qd"]})),n.d(e,"Qh",(function(){return Nt["rd"]})),n.d(e,"Sh",(function(){return Nt["sd"]})),n.d(e,"Th",(function(){return Nt["td"]})),n.d(e,"Uh",(function(){return Nt["ud"]})),n.d(e,"pf",(function(){return Nt["pb"]})),n.d(e,"Hf",(function(){return Nt["yb"]})),n.d(e,"Mf",(function(){return Nt["Cb"]})),n.d(e,"uh",(function(){return Nt["Zc"]})),n.d(e,"Yh",(function(){return Nt["yd"]})),n.d(e,"Zh",(function(){return Nt["zd"]})),n.d(e,"ai",(function(){return Nt["Ad"]})),n.d(e,"bi",(function(){return Nt["Bd"]})),n.d(e,"ci",(function(){return Nt["Cd"]})),n.d(e,"di",(function(){return Nt["Dd"]})),n.d(e,"ei",(function(){return Nt["Ed"]})),n.d(e,"fi",(function(){return Nt["Fd"]})),n.d(e,"hi",(function(){return Nt["Hd"]})),n.d(e,"ii",(function(){return Nt["Id"]})),n.d(e,"ki",(function(){return Nt["Jd"]})),n.d(e,"li",(function(){return Nt["Kd"]})),n.d(e,"mi",(function(){return Nt["Ld"]})),n.d(e,"ni",(function(){return Nt["Md"]})),n.d(e,"oi",(function(){return Nt["Nd"]})),n.d(e,"pi",(function(){return Nt["Od"]})),n.d(e,"qi",(function(){return Nt["Pd"]})),n.d(e,"ri",(function(){return Nt["Qd"]})),n.d(e,"si",(function(){return Nt["Rd"]})),n.d(e,"wi",(function(){return Nt["Sd"]})),n.d(e,"yi",(function(){return Nt["Td"]})),n.d(e,"Bi",(function(){return Nt["Vd"]})),n.d(e,"Ci",(function(){return Nt["Wd"]})),n.d(e,"Fi",(function(){return Nt["Xd"]})),n.d(e,"Gi",(function(){return Nt["Yd"]})),n.d(e,"Ii",(function(){return Nt["Zd"]})),n.d(e,"Mi",(function(){return Nt["ae"]})),n.d(e,"Pi",(function(){return Nt["be"]})),n.d(e,"Qi",(function(){return Nt["ce"]})),n.d(e,"Ri",(function(){return Nt["de"]})),n.d(e,"Si",(function(){return Nt["ee"]})),n.d(e,"le",(function(){return Nt["y"]})),n.d(e,"Ai",(function(){return Nt["Ud"]})),n.d(e,"Eg",(function(){return Nt["pc"]})),n.d(e,"yg",(function(){return Nt["kc"]})),n.d(e,"yh",(function(){return Nt["dd"]})),n.d(e,"Ah",(function(){return Nt["ed"]})),n.d(e,"Wh",(function(){return Nt["wd"]})),n.d(e,"xf",(function(){return Nt["vb"]})),n.d(e,"af",(function(){return Nt["eb"]})),n.d(e,"ff",(function(){return Nt["hb"]})),n.d(e,"Je",(function(){return Nt["T"]})),n.d(e,"Kf",(function(){return Nt["Bb"]})),n.d(e,"Jg",(function(){return Nt["uc"]})),n.d(e,"oc",(function(){return Nt["a"]})),n.d(e,"Jf",(function(){return Nt["Ab"]})),n.d(e,"Vf",(function(){return Nt["Jb"]})),n.d(e,"hg",(function(){return Nt["Vb"]})),n.d(e,"Xh",(function(){return Nt["xd"]})),n.d(e,"vf",(function(){return Nt["tb"]})),n.d(e,"Jh",(function(){return Nt["kd"]})),n.d(e,"Vh",(function(){return Nt["vd"]})),n.d(e,"gi",(function(){return Nt["Gd"]})),n.d(e,"Ic",(function(){return jt["a"]})),n.d(e,"zi",(function(){return Dt})),n.d(e,"ef",(function(){return $t["g"]})),n.d(e,"df",(function(){return $t["f"]})),n.d(e,"Ue",(function(){return $t["c"]})),n.d(e,"Oe",(function(){return $t["b"]})),n.d(e,"We",(function(){return $t["e"]})),n.d(e,"gf",(function(){return $t["h"]})),n.d(e,"rg",(function(){return $t["m"]})),n.d(e,"Vg",(function(){return $t["n"]})),n.d(e,"vi",(function(){return $t["t"]})),n.d(e,"Ve",(function(){return $t["d"]})),n.d(e,"Qf",(function(){return $t["l"]})),n.d(e,"xi",(function(){return $t["u"]})),n.d(e,"Eh",(function(){return $t["r"]})),n.d(e,"fh",(function(){return $t["o"]})),n.d(e,"zf",(function(){return $t["k"]})),n.d(e,"nh",(function(){return $t["q"]})),n.d(e,"rf",(function(){return $t["i"]})),n.d(e,"sf",(function(){return $t["j"]})),n.d(e,"ih",(function(){return $t["p"]})),n.d(e,"ce",(function(){return $t["a"]})),n.d(e,"Fh",(function(){return $t["s"]})),n.d(e,"Bf",(function(){return et["c"]})),n.d(e,"Af",(function(){return et["b"]})),n.d(e,"Cf",(function(){return et["d"]})),n.d(e,"kh",(function(){return et["f"]})),n.d(e,"jh",(function(){return et["e"]})),n.d(e,"Ei",(function(){return et["h"]})),n.d(e,"Di",(function(){return et["g"]})),n.d(e,"Ge",(function(){return et["a"]})),n.d(e,"Me",(function(){return Rt["a"]})),n.d(e,"Df",(function(){return Rt["b"]})),n.d(e,"Ef",(function(){return Rt["c"]})),n.d(e,"Ki",(function(){return Rt["d"]})),n.d(e,"Li",(function(){return Rt["e"]})),n.d(e,"Ni",(function(){return Rt["f"]})),n.d(e,"gb",(function(){return l["b"]})),n.d(e,"hf",(function(){return l["c"]})),n.d(e,"cb",(function(){return l["a"]})),n.d(e,"Oi",(function(){return wt})),n.d(e,"Dg",(function(){return Pt})),n.d(e,"pe",(function(){return a})),n.d(e,"Lf",(function(){return r})),n.d(e,"kg",(function(){return i})),n.d(e,"Dh",(function(){return gt})),n.d(e,"ui",(function(){return yt})),n.d(e,"Ji",(function(){return vt})),n.d(e,"de",(function(){return u})),n.d(e,"oe",(function(){return Z})),n.d(e,"ti",(function(){return bt})),n.d(e,"Rh",(function(){return mt})),n.d(e,"yf",(function(){return s})),n.d(e,"zh",(function(){return ft})),n.d(e,"Re",(function(){return He})),n.d(e,"Rf",(function(){return c})),n.d(e,"Fb",(function(){return Ke["b"]})),n.d(e,"S",(function(){return Ke["a"]})),n.d(e,"a",(function(){return tt["a"]})),n.d(e,"b",(function(){return tt["b"]})),n.d(e,"c",(function(){return tt["c"]})),n.d(e,"h",(function(){return tt["d"]})),n.d(e,"i",(function(){return tt["e"]})),n.d(e,"j",(function(){return tt["f"]})),n.d(e,"k",(function(){return tt["g"]})),n.d(e,"l",(function(){return tt["h"]})),n.d(e,"m",(function(){return tt["i"]})),n.d(e,"n",(function(){return tt["j"]})),n.d(e,"o",(function(){return tt["k"]})),n.d(e,"p",(function(){return tt["l"]})),n.d(e,"r",(function(){return tt["n"]})),n.d(e,"q",(function(){return tt["m"]})),n.d(e,"s",(function(){return tt["o"]})),n.d(e,"v",(function(){return tt["r"]})),n.d(e,"t",(function(){return tt["p"]})),n.d(e,"u",(function(){return tt["q"]})),n.d(e,"w",(function(){return tt["s"]})),n.d(e,"x",(function(){return tt["t"]})),n.d(e,"y",(function(){return tt["u"]})),n.d(e,"A",(function(){return tt["w"]})),n.d(e,"z",(function(){return tt["v"]})),n.d(e,"B",(function(){return tt["x"]})),n.d(e,"C",(function(){return tt["y"]})),n.d(e,"D",(function(){return tt["z"]})),n.d(e,"E",(function(){return tt["A"]})),n.d(e,"F",(function(){return tt["B"]})),n.d(e,"G",(function(){return tt["C"]})),n.d(e,"H",(function(){return tt["D"]})),n.d(e,"I",(function(){return tt["E"]})),n.d(e,"J",(function(){return tt["F"]})),n.d(e,"K",(function(){return tt["G"]})),n.d(e,"L",(function(){return tt["H"]})),n.d(e,"M",(function(){return tt["I"]})),n.d(e,"N",(function(){return tt["J"]})),n.d(e,"O",(function(){return tt["K"]})),n.d(e,"Q",(function(){return tt["M"]})),n.d(e,"R",(function(){return tt["N"]})),n.d(e,"P",(function(){return tt["L"]})),n.d(e,"T",(function(){return tt["O"]})),n.d(e,"U",(function(){return tt["P"]})),n.d(e,"V",(function(){return tt["Q"]})),n.d(e,"W",(function(){return tt["R"]})),n.d(e,"X",(function(){return tt["S"]})),n.d(e,"Y",(function(){return tt["T"]})),n.d(e,"Z",(function(){return tt["U"]})),n.d(e,"bb",(function(){return tt["W"]})),n.d(e,"ab",(function(){return tt["V"]})),n.d(e,"Gc",(function(){return tt["sc"]})),n.d(e,"db",(function(){return tt["X"]})),n.d(e,"eb",(function(){return tt["Y"]})),n.d(e,"fb",(function(){return tt["Z"]})),n.d(e,"ib",(function(){return tt["bb"]})),n.d(e,"hb",(function(){return tt["ab"]})),n.d(e,"jb",(function(){return tt["cb"]})),n.d(e,"kb",(function(){return tt["db"]})),n.d(e,"lb",(function(){return tt["eb"]})),n.d(e,"mb",(function(){return tt["fb"]})),n.d(e,"nb",(function(){return tt["gb"]})),n.d(e,"ob",(function(){return tt["hb"]})),n.d(e,"pb",(function(){return tt["ib"]})),n.d(e,"qb",(function(){return tt["jb"]})),n.d(e,"sb",(function(){return tt["lb"]})),n.d(e,"wb",(function(){return tt["pb"]})),n.d(e,"vb",(function(){return tt["ob"]})),n.d(e,"xb",(function(){return tt["qb"]})),n.d(e,"yb",(function(){return tt["rb"]})),n.d(e,"Ab",(function(){return tt["tb"]})),n.d(e,"zb",(function(){return tt["sb"]})),n.d(e,"Bb",(function(){return tt["ub"]})),n.d(e,"Cb",(function(){return tt["vb"]})),n.d(e,"Db",(function(){return tt["wb"]})),n.d(e,"Eb",(function(){return tt["xb"]})),n.d(e,"Ib",(function(){return tt["Ab"]})),n.d(e,"Jb",(function(){return tt["Bb"]})),n.d(e,"Kb",(function(){return tt["Cb"]})),n.d(e,"Lb",(function(){return tt["Db"]})),n.d(e,"Mb",(function(){return tt["Eb"]})),n.d(e,"Nb",(function(){return tt["Fb"]})),n.d(e,"Pb",(function(){return tt["Hb"]})),n.d(e,"Qb",(function(){return tt["Ib"]})),n.d(e,"Rb",(function(){return tt["Jb"]})),n.d(e,"Sb",(function(){return tt["Kb"]})),n.d(e,"Ob",(function(){return tt["Gb"]})),n.d(e,"Tb",(function(){return tt["Lb"]})),n.d(e,"Gb",(function(){return tt["yb"]})),n.d(e,"Hb",(function(){return tt["zb"]})),n.d(e,"Ub",(function(){return tt["Mb"]})),n.d(e,"ac",(function(){return tt["Sb"]})),n.d(e,"Vb",(function(){return tt["Nb"]})),n.d(e,"Yb",(function(){return tt["Qb"]})),n.d(e,"Wb",(function(){return tt["Ob"]})),n.d(e,"Xb",(function(){return tt["Pb"]})),n.d(e,"Zb",(function(){return tt["Rb"]})),n.d(e,"bc",(function(){return tt["Tb"]})),n.d(e,"cc",(function(){return tt["Ub"]})),n.d(e,"dc",(function(){return tt["Vb"]})),n.d(e,"ec",(function(){return tt["Wb"]})),n.d(e,"fc",(function(){return tt["Xb"]})),n.d(e,"hc",(function(){return tt["Yb"]})),n.d(e,"ic",(function(){return tt["Zb"]})),n.d(e,"jc",(function(){return tt["ac"]})),n.d(e,"nc",(function(){return tt["ec"]})),n.d(e,"kc",(function(){return tt["bc"]})),n.d(e,"lc",(function(){return tt["cc"]})),n.d(e,"mc",(function(){return tt["dc"]})),n.d(e,"qc",(function(){return tt["gc"]})),n.d(e,"pc",(function(){return tt["fc"]})),n.d(e,"tc",(function(){return tt["hc"]})),n.d(e,"uc",(function(){return tt["ic"]})),n.d(e,"vc",(function(){return tt["jc"]})),n.d(e,"wc",(function(){return tt["kc"]})),n.d(e,"xc",(function(){return tt["lc"]})),n.d(e,"yc",(function(){return tt["mc"]})),n.d(e,"Ac",(function(){return tt["nc"]})),n.d(e,"Bc",(function(){return tt["oc"]})),n.d(e,"Cc",(function(){return tt["pc"]})),n.d(e,"Dc",(function(){return tt["qc"]})),n.d(e,"Fc",(function(){return tt["rc"]})),n.d(e,"Hc",(function(){return tt["tc"]})),n.d(e,"Jc",(function(){return tt["uc"]})),n.d(e,"Lc",(function(){return tt["wc"]})),n.d(e,"Oc",(function(){return tt["zc"]})),n.d(e,"Pc",(function(){return tt["Ac"]})),n.d(e,"Mc",(function(){return tt["xc"]})),n.d(e,"Nc",(function(){return tt["yc"]})),n.d(e,"Kc",(function(){return tt["vc"]})),n.d(e,"Qc",(function(){return tt["Bc"]})),n.d(e,"Sc",(function(){return tt["Dc"]})),n.d(e,"Tc",(function(){return tt["Ec"]})),n.d(e,"Vc",(function(){return tt["Fc"]})),n.d(e,"Wc",(function(){return tt["Gc"]})),n.d(e,"Xc",(function(){return tt["Hc"]})),n.d(e,"Yc",(function(){return tt["Ic"]})),n.d(e,"dd",(function(){return tt["Nc"]})),n.d(e,"bd",(function(){return tt["Lc"]})),n.d(e,"cd",(function(){return tt["Mc"]})),n.d(e,"ad",(function(){return tt["Kc"]})),n.d(e,"Zc",(function(){return tt["Jc"]})),n.d(e,"fd",(function(){return tt["Pc"]})),n.d(e,"nd",(function(){return tt["Xc"]})),n.d(e,"wd",(function(){return tt["gd"]})),n.d(e,"gd",(function(){return tt["Qc"]})),n.d(e,"md",(function(){return tt["Wc"]})),n.d(e,"ed",(function(){return tt["Oc"]})),n.d(e,"hd",(function(){return tt["Rc"]})),n.d(e,"id",(function(){return tt["Sc"]})),n.d(e,"jd",(function(){return tt["Tc"]})),n.d(e,"kd",(function(){return tt["Uc"]})),n.d(e,"ld",(function(){return tt["Vc"]})),n.d(e,"pd",(function(){return tt["Zc"]})),n.d(e,"od",(function(){return tt["Yc"]})),n.d(e,"rd",(function(){return tt["bd"]})),n.d(e,"sd",(function(){return tt["cd"]})),n.d(e,"td",(function(){return tt["dd"]})),n.d(e,"ud",(function(){return tt["ed"]})),n.d(e,"vd",(function(){return tt["fd"]})),n.d(e,"xd",(function(){return tt["hd"]})),n.d(e,"yd",(function(){return tt["id"]})),n.d(e,"Bd",(function(){return tt["jd"]})),n.d(e,"Cd",(function(){return tt["kd"]})),n.d(e,"Dd",(function(){return tt["ld"]})),n.d(e,"Ed",(function(){return tt["md"]})),n.d(e,"Fd",(function(){return tt["nd"]})),n.d(e,"Gd",(function(){return tt["od"]})),n.d(e,"Hd",(function(){return tt["pd"]})),n.d(e,"Id",(function(){return tt["qd"]})),n.d(e,"Kd",(function(){return tt["rd"]})),n.d(e,"qd",(function(){return tt["ad"]})),n.d(e,"rb",(function(){return tt["kb"]})),n.d(e,"Rc",(function(){return tt["Cc"]})),n.d(e,"Ld",(function(){return tt["sd"]})),n.d(e,"tb",(function(){return tt["mb"]})),n.d(e,"ub",(function(){return tt["nb"]}));var r={};n.r(r),n.d(r,"copyModel",(function(){return U["b"]})),n.d(r,"listModels",(function(){return U["c"]})),n.d(r,"moveModel",(function(){return U["d"]})),n.d(r,"removeModel",(function(){return U["e"]})),n.d(r,"browserFiles",(function(){return x})),n.d(r,"browserHTTPRequest",(function(){return R})),n.d(r,"concatenateArrayBuffers",(function(){return d["d"]})),n.d(r,"decodeWeights",(function(){return d["e"]})),n.d(r,"encodeWeights",(function(){return d["f"]})),n.d(r,"fromMemory",(function(){return L})),n.d(r,"fromMemorySync",(function(){return B})),n.d(r,"getLoadHandlers",(function(){return h["b"]})),n.d(r,"getModelArtifactsForJSON",(function(){return d["g"]})),n.d(r,"getModelArtifactsForJSONSync",(function(){return d["h"]})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return d["i"]})),n.d(r,"getSaveHandlers",(function(){return h["c"]})),n.d(r,"getWeightSpecs",(function(){return d["k"]})),n.d(r,"http",(function(){return $})),n.d(r,"isHTTPScheme",(function(){return j})),n.d(r,"loadWeights",(function(){return _})),n.d(r,"registerLoadRouter",(function(){return h["d"]})),n.d(r,"registerSaveRouter",(function(){return h["e"]})),n.d(r,"weightsLoaderFactory",(function(){return I})),n.d(r,"withSaveHandler",(function(){return z})),n.d(r,"withSaveHandlerSync",(function(){return V}));var i={};n.r(i),n.d(i,"confusionMatrix",(function(){return Y}));var a={};n.r(a),n.d(a,"fromPixelsAsync",(function(){return lt})),n.d(a,"toPixels",(function(){return dt})),n.d(a,"fromPixels",(function(){return ht}));var s={};n.r(s),n.d(s,"prepareAndValidate",(function(){return pt}));var o={};n.r(o),n.d(o,"segOpComputeOptimalWindowSize",(function(){return ze})),n.d(o,"computeOutShape",(function(){return Ve})),n.d(o,"collectGatherOpShapeInfo",(function(){return Ue}));var u={};n.r(u),n.d(u,"axesAreInnerMostDims",(function(){return Mt["b"]})),n.d(u,"combineLocations",(function(){return Mt["c"]})),n.d(u,"computeOutAndReduceShapes",(function(){return Mt["d"]})),n.d(u,"expandShapeToKeepDim",(function(){return Mt["e"]})),n.d(u,"assertAxesAreInnerMostDims",(function(){return Mt["a"]})),n.d(u,"getAxesPermutation",(function(){return Mt["f"]})),n.d(u,"getUndoAxesPermutation",(function(){return Mt["h"]})),n.d(u,"getInnerMostAxes",(function(){return Mt["g"]})),n.d(u,"getBroadcastDims",(function(){return Z["getBroadcastDims"]})),n.d(u,"getReductionAxes",(function(){return Z["getReductionAxes"]})),n.d(u,"assertAndGetBroadcastShape",(function(){return Z["assertAndGetBroadcastShape"]})),n.d(u,"assertParamsConsistent",(function(){return Lt})),n.d(u,"computeOutShape",(function(){return Bt})),n.d(u,"computeDilation2DInfo",(function(){return Vt["e"]})),n.d(u,"computePool2DInfo",(function(){return Vt["f"]})),n.d(u,"computePool3DInfo",(function(){return Vt["g"]})),n.d(u,"computeConv2DInfo",(function(){return Vt["b"]})),n.d(u,"computeConv3DInfo",(function(){return Vt["c"]})),n.d(u,"computeDefaultPad",(function(){return Vt["d"]})),n.d(u,"tupleValuesAreOne",(function(){return Vt["k"]})),n.d(u,"eitherStridesOrDilationsAreOne",(function(){return Vt["i"]})),n.d(u,"stridesOrDilationsArePositive",(function(){return Vt["j"]})),n.d(u,"convertConv2DDataFormat",(function(){return Vt["h"]})),n.d(u,"checkPadOnDimRoundingMode",(function(){return Vt["a"]})),n.d(u,"getFusedDyActivation",(function(){return Ut["c"]})),n.d(u,"getFusedBiasGradient",(function(){return Ut["b"]})),n.d(u,"applyActivation",(function(){return Ut["a"]})),n.d(u,"shouldFuse",(function(){return Ut["d"]})),n.d(u,"RowPartitionType",(function(){return zt})),n.d(u,"combineRaggedTensorToTensorShapes",(function(){return Wt})),n.d(u,"getRowPartitionTypesHelper",(function(){return Gt})),n.d(u,"getRaggedRank",(function(){return Ht})),n.d(u,"validateDefaultValueShape",(function(){return qt})),n.d(u,"PARALLELIZE_THRESHOLD",(function(){return Jt})),n.d(u,"computeOptimalWindowSize",(function(){return Kt})),n.d(u,"slice_util",(function(){return mt})),n.d(u,"upcastType",(function(){return Et["c"]})),n.d(u,"getImageCenter",(function(){return Xt})),n.d(u,"getReshaped",(function(){return Yt})),n.d(u,"getPermuted",(function(){return Zt})),n.d(u,"getReshapedPermuted",(function(){return Qt})),n.d(u,"getSliceBeginCoords",(function(){return te})),n.d(u,"getSliceSize",(function(){return ee})),n.d(u,"prepareAndValidate",(function(){return pt})),n.d(u,"validateUpdateShape",(function(){return ft["validateUpdateShape"]})),n.d(u,"validateInput",(function(){return ft["validateInput"]})),n.d(u,"calculateShapes",(function(){return ft["calculateShapes"]})),n.d(u,"SELU_SCALEALPHA",(function(){return ne["b"]})),n.d(u,"SELU_SCALE",(function(){return ne["a"]})),n.d(u,"ERF_P",(function(){return re})),n.d(u,"ERF_A1",(function(){return ie})),n.d(u,"ERF_A2",(function(){return ae})),n.d(u,"ERF_A3",(function(){return se})),n.d(u,"ERF_A4",(function(){return oe})),n.d(u,"ERF_A5",(function(){return ue})),n.d(u,"warn",(function(){return ce["b"]})),n.d(u,"log",(function(){return ce["a"]})),n.d(u,"mergeRealAndImagArrays",(function(){return le})),n.d(u,"splitRealAndImagArrays",(function(){return de})),n.d(u,"complexWithEvenIndex",(function(){return he})),n.d(u,"complexWithOddIndex",(function(){return pe})),n.d(u,"getComplexWithIndex",(function(){return fe})),n.d(u,"assignToTypedArray",(function(){return me})),n.d(u,"exponents",(function(){return ge})),n.d(u,"exponent",(function(){return be})),n.d(u,"decodeEinsumEquation",(function(){return Oe})),n.d(u,"getEinsumPermutation",(function(){return Se})),n.d(u,"checkEinsumDimSizes",(function(){return ke})),n.d(u,"getEinsumComputePath",(function(){return Te})),n.d(u,"isIdentityPermutation",(function(){return _e})),n.d(u,"prepareSplitSize",(function(){return Ce})),n.d(u,"getSparseFillEmptyRowsIndicesDenseShapeMismatch",(function(){return Ae})),n.d(u,"getSparseFillEmptyRowsNegativeIndexErrorMessage",(function(){return Ee})),n.d(u,"getSparseFillEmptyRowsOutOfRangeIndexErrorMessage",(function(){return Ne})),n.d(u,"getSparseReshapeMultipleNegativeOneOutputDimErrorMessage",(function(){return je})),n.d(u,"getSparseReshapeNegativeOutputDimErrorMessage",(function(){return De})),n.d(u,"getSparseReshapeEmptyTensorZeroOutputDimErrorMessage",(function(){return $e})),n.d(u,"getSparseReshapeInputOutputMultipleErrorMessage",(function(){return Re})),n.d(u,"getSparseReshapeInputOutputMismatchErrorMessage",(function(){return Fe})),n.d(u,"getSparseSegmentReductionNegativeSegmentIdsErrorMessage",(function(){return Pe})),n.d(u,"getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage",(function(){return Me})),n.d(u,"getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage",(function(){return Le})),n.d(u,"getSparseSegmentReductionIndicesOutOfRangeErrorMessage",(function(){return Be})),n.d(u,"segment_util",(function(){return o})),n.d(u,"fromUint8ToStringArray",(function(){return We})),n.d(u,"fromStringArrayToUint8",(function(){return Ge}));var c={};n.r(c),n.d(c,"nonMaxSuppressionV3Impl",(function(){return qe["a"]})),n.d(c,"nonMaxSuppressionV4Impl",(function(){return qe["b"]})),n.d(c,"nonMaxSuppressionV5Impl",(function(){return qe["c"]})),n.d(c,"whereImpl",(function(){return Je["a"]}));n("c742"),n("ef0f"),n("29a8");var l=n("b333"),d=n("350f"),h=n("931f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const p="model",f=".json",m=".weights.bin";function g(t){return new Promise(t=>setTimeout(t)).then(t)}class b{constructor(t){if(!Object(l["c"])().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(b.URL_SCHEME)&&(t=t.slice(b.URL_SCHEME.length)),null!=t&&0!==t.length||(t=p),this.modelJsonFileName=t+f,this.weightDataFileName=t+m}async save(t){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r=Object(d["j"])(t,n),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await g(()=>a.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await g(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Object(d["i"])(t)}}}}b.URL_SCHEME="downloads://";class y{constructor(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,e)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i)return void e(new Error("modelTopology field is missing from file "+this.jsonFile.name));const a=r.weightsManifest;if(null==a)return void e(new Error("weightManifest field is missing from file "+this.jsonFile.name));if(0===this.weightsFiles.length)return void t({modelTopology:i});const s=Object(d["g"])(r,t=>this.loadWeights(t));t(s)},n.onerror=t=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(t){const e=[],n=[];for(const a of t)e.push(...a.weights),n.push(...a.paths);const r=this.checkManifestAndWeightFiles(t),i=n.map(t=>this.loadWeightsFile(t,r[t]));return Promise.all(i).then(t=>[e,Object(d["d"])(t)])}loadWeightsFile(t,e){return new Promise((n,r)=>{const i=new FileReader;i.onload=t=>{const e=t.target.result;n(e)},i.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),i.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(t){const e=[],n=this.weightsFiles.map(t=>Object(d["c"])(t.name)),r={};for(const i of t)i.paths.forEach(t=>{const i=Object(d["c"])(t);if(-1!==e.indexOf(i))throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(e.push(i),-1===n.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);r[t]=this.weightsFiles[n.indexOf(i)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}const v=t=>Object(l["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(b.URL_SCHEME)?w(t.slice(b.URL_SCHEME.length)):null;function w(t="model"){return new b(t)}function x(t){return new y(t)}h["a"].registerSaveRouter(v);var O=n("6ad5");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S(t,e,n,r){s(t),n=null==n?0:n,r=null==r?1:r,o(n,r);let i=0;const a=a=>(a.then(a=>{const s=n+ ++i/t.length*(r-n);return e(s),a}),a);function s(t){Object(O["b"])(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}function o(t,e){Object(O["b"])(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+t),Object(O["b"])(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+e),Object(O["b"])(e>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction `+e)}return Promise.all(t.map(a))}var k=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function T(t,e){null==e&&(e={});const n=null==e.fetchFunc?Object(l["c"])().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),i=0,a=.5,s=null==e.onProgress?await Promise.all(r):await S(r,e.onProgress,i,a),o=s.map(t=>t.arrayBuffer()),u=.5,c=1,d=null==e.onProgress?await Promise.all(o):await S(o,e.onProgress,u,c);return d}async function _(t,e="",n,r){const i=t=>T(t,{requestInit:r}),a=I(i);return a(t,e,n)}function I(t){return async(e,n="",r)=>{const i=e.map(()=>!1),a={},s=null!=r?r.map(()=>!1):[],o=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{const u="quantization"in t?t.quantization.dtype:t.dtype,c=k["a"][u]*O["N"](t.shape),l=()=>{i[e]=!0,null==a[e]&&(a[e]=[]),a[e].push({manifestEntry:t,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((e,n)=>{e===t.name&&(l(),s[n]=!0)}):l(),o.push(t.name),n+=c})}),!s.every(t=>t)){const t=r.filter((t,e)=>!s[e]);throw new Error("Could not find weights in manifest with names: "+t.join(", ")+". \nManifest JSON has weights with names: "+o.join(", ")+".")}const u=i.reduce((t,e,n)=>(e&&t.push(n),t),[]),c=[];u.forEach(t=>{e[t].paths.forEach(t=>{const e=n+(n.endsWith("/")?"":"/")+t;c.push(e)})});const l=await t(c),h={};let p=0;return u.forEach(t=>{const n=e[t].paths.length;let r=0;for(let e=0;e<n;e++)r+=l[p+e].byteLength;const i=new ArrayBuffer(r),s=new Uint8Array(i);let o=0;for(let e=0;e<n;e++){const t=new Uint8Array(l[p+e]);s.set(t,o),o+=t.byteLength}const u=a[t];u.forEach(t=>{const e=i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=Object(d["e"])(e,[t.manifestEntry]);for(const r in n)h[r]=n[r]}),p+=n}),h}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C="application/octet-stream",A="application/json";class E{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?(Object(O["b"])("function"===typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=Object(l["c"])().platform.fetch,Object(O["b"])(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&Object(O["b"])(2===t.length,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r=Object(d["j"])(t,n);e.body.append("model.json",new Blob([JSON.stringify(r)],{type:A}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:C}),"model.weights.bin");const i=await this.fetch(this.path,e);if(i.ok)return{modelArtifactsInfo:Object(d["i"])(t),responses:[i]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+t.status+". Please verify this URL points to the model JSON of the model to load.");let e;try{e=await t.json()}catch(i){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Object(d["g"])(e,t=>this.loadWeights(t))}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=N(e),i=this.weightPathPrefix||n,a=Object(d["k"])(t),s=[],o=[];for(const c of t)for(const t of c.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(t)):s.push(i+t+r);this.weightUrlConverter&&s.push(...await Promise.all(o));const u=await T(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,Object(d["d"])(u)]}}function N(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function j(t){return null!=t.match(E.URL_SCHEME_REGEX)}E.URL_SCHEME_REGEX=/^https?:\/\//;const D=(t,e)=>{if("undefined"===typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(t=>j(t)):j(t),n)return $(t,e)}return null};function $(t,e){return new E(t,e)}function R(t,e){return $(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */h["a"].registerSaveRouter(D),h["a"].registerLoadRouter(D);class F{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class P{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class M{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=e=>Promise.resolve(t.save(e)))}}function L(t,e,n,r){const i=arguments;return new M(B(...i))}function B(t,e,n,r){if(1===arguments.length){const e=null!=t.modelTopology||null!=t.weightSpecs;return e?new F(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new F({modelTopology:t}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new F({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})}function z(t){return new P(t)}function V(t){return new P(t)}var U=n("5508"),W=n("a3f7"),G=n("deb3"),H=n("487b"),q=n("e22c"),J=n("54ef"),K=n("c912");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function X(t,e,n){const r=Object(W["a"])(t,"labels","confusionMatrix"),i=Object(W["a"])(e,"predictions","confusionMatrix");O["b"](null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),O["b"](1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),O["b"](1===i.rank,()=>"Expected the rank of predictions to be 1, but got "+i.rank),O["b"](r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),O["b"](n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);const a=Object(q["a"])(Object(G["a"])(r,"int32"),n),s=Object(q["a"])(Object(G["a"])(i,"int32"),n),o=Object(K["a"])(a),u=Object(H["a"])(o,s);return Object(G["a"])(u,"int32")}const Y=Object(J["b"])({confusionMatrix_:X});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Z=n("526f"),Q=n("6ae2"),tt=n("c05b"),et=n("73b8"),nt=n("34d7"),rt=n("05bb");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let it;function at(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,a=!1,s=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)a=!0;else if(null!=t.getContext)s=!0;else{if(!("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}const u=Object(et["c"])(tt["kb"],Q["a"].backendName);if(null!=u){const n={pixels:t},r={numChannels:e};return Q["a"].runKernel(tt["kb"],n,r)}const[c,l]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d,h;if(s)d=t.getContext("2d").getImageData(0,0,c,l).data;else if(r||n)d=t.data;else if(a||i||o){if(null==it)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");it=new OffscreenCanvas(1,1).getContext("2d")}else it=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});it.canvas.width=c,it.canvas.height=l,it.drawImage(t,0,0,c,l),d=it.getImageData(0,0,c,l).data}if(4===e)h=new Int32Array(d);else{const t=c*l;h=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)h[n*e+t]=d[4*n+t]}const p=[l,c,e];return Object(rt["a"])(h,p,"int32")}function st(t){return null!=t&&t.data instanceof Uint8Array}function ot(){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")}function ut(t){return null!=t&&0!==t.width&&0!==t.height}function ct(t){return ot()&&!(t instanceof ImageBitmap)&&ut(t)&&!st(t)}async function lt(t,e=3){let n=null;if(Object(l["c"])().getBool("WRAP_TO_IMAGEBITMAP")&&ct(t)){let e;try{e=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch(r){e=null}n=null!=e&&e.width===t.width&&e.height===t.height?e:t}else n=t;return at(n,e)}async function dt(t,e){let n=Object(W["a"])(t,"img","toPixels");if(!(t instanceof nt["a"])){const t=n;n=Object(G["a"])(t,"int32"),t.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2];if(a>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const s=await n.data(),o="float32"===n.dtype?255:1,u=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){const t=[0,0,0,255];for(let r=0;r<a;r++){const e=s[c*a+r];if("float32"===n.dtype){if(e<0||e>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${e}.`)}else if("int32"===n.dtype&&(e<0||e>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${e}.`);1===a?(t[0]=e*o,t[1]=e*o,t[2]=e*o):t[r]=e*o}const e=4*c;u[e+0]=Math.round(t[0]),u[e+1]=Math.round(t[1]),u[e+2]=Math.round(t[2]),u[e+3]=Math.round(t[3])}if(null!=e){e.width=i,e.height=r;const t=e.getContext("2d"),n=new ImageData(u,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),u}const ht=Object(J["b"])({fromPixels_:at});function pt(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==e.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(0===Object(O["N"])(t.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,a=i[i.length-1];let s=1;for(let d=0;d<i.length-1;++d)s*=i[d];const o=t.shape,u=i.slice();u.pop();let c=1;for(let d=a;d<n;++d)c*=o[d],u.push(o[d]);const l=[...Object(O["j"])(t.shape).map(t=>t/c),1].slice(0,a);return[u,s,c,l]}var ft=n("a34f"),mt=n("5ebd"),gt=n("6cae"),bt=n("76c2"),yt=n("d565"),vt=n("eb7e");
/** @license See the LICENSE file. */
const wt="4.2.0";var xt=n("9f31"),Ot=n("d0ca"),St=n("de1a"),kt=n("92e0"),Tt=n("6336"),_t=n("b2d6"),It=n("6eb5"),Ct=n("5fad");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class At{static sgd(t){return new Ct["a"](t)}static momentum(t,e,n=!1){return new Tt["a"](t,e,n)}static rmsprop(t,e=.9,n=0,r=null,i=!1){return new It["a"](t,e,n,r,i)}static adam(t=.001,e=.9,n=.999,r=null){return new St["a"](t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new xt["a"](t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,i=0){return new kt["a"](t,e,n,r,i)}static adagrad(t,e=.1){return new Ot["a"](t,e)}}var Et=n("23bf"),Nt=n("132b"),jt=n("57e0");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Dt=At;var $t=n("c04e"),Rt=n("538e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ft=(()=>"undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:t=>t())();function Pt(){return new Promise(t=>Ft(()=>t()))}var Mt=n("36e5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lt(t,e){const n=t[0].length;t.forEach((t,e)=>{O["b"](t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`)}),O["b"](e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((t,i)=>{for(let a=0;a<n;a++)O["b"](a===e||t[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${t}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Bt(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var zt,Vt=n("b818"),Ut=n("4749");function Wt(t,e,n){let r=new Array;if(null==n&&null==e)return r;if(null==e)while(r.length<t+n.length)r.push(-1);else r=e.slice();if(null==n)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],s=r[r.length-n.length+i],o=r[s];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${a} but shape[${i+t}] = ${o}`)}else r[s]=a}return r}function Gt(t){const e={FIRST_DIM_SIZE:zt.FIRST_DIM_SIZE,VALUE_ROWIDS:zt.VALUE_ROWIDS,ROW_LENGTHS:zt.ROW_LENGTHS,ROW_SPLITS:zt.ROW_SPLITS,ROW_LIMITS:zt.ROW_LIMITS,ROW_STARTS:zt.ROW_STARTS},n=[];for(const r of t){if(!(r in e))break;n.push(e[r])}return n}function Ht(t){return 0===t.length?0:t[0]===zt.FIRST_DIM_SIZE?t.length-1:t.length}function qt(t,e){if(null==t||null==e)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const n=t[i],r=e[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${n} but ragged tensor input.flatValues.shape[${i-t.length}] = ${r}`)}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(function(t){t[t["FIRST_DIM_SIZE"]=0]="FIRST_DIM_SIZE",t[t["VALUE_ROWIDS"]=1]="VALUE_ROWIDS",t[t["ROW_LENGTHS"]=2]="ROW_LENGTHS",t[t["ROW_SPLITS"]=3]="ROW_SPLITS",t[t["ROW_LIMITS"]=4]="ROW_LIMITS",t[t["ROW_STARTS"]=5]="ROW_STARTS"})(zt||(zt={}));const Jt=30;function Kt(t){return t<=Jt?t:Object(O["F"])(t,Math.floor(Math.sqrt(t)))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xt(t,e,n){const r=n*("number"===typeof t?t:t[0]),i=e*("number"===typeof t?t:t[1]);return[r,i]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function Zt(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2===1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function Qt(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function te(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function ee(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}var ne=n("7cde");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const re=.3275911,ie=.254829592,ae=-.284496736,se=1.421413741,oe=-1.453152027,ue=1.061405429;var ce=n("b294");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function le(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function de(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function he(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function pe(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function fe(t,e){const n=t[2*e],r=t[2*e+1];return{real:n,imag:r}}function me(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function ge(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function be(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ye="->",ve=/->/g,we=",",xe="...";function Oe(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(ve,"").length)/ye.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${ye}").`);const[r,i]=t.split(ye);Object(O["b"])(-1===r.indexOf(xe),()=>`The ellipsis notation ("${xe}") is not supported yet.`);const a=r.split(we),s=a.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let h=0;h<i.length;++h){const t=i[h];if(!a.some(e=>-1!==e.indexOf(t)))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===o.indexOf(t)&&o.push(t)}for(let h=0;h<r.length;++h){const t=r[h];-1===o.indexOf(t)&&t!==we&&o.push(t)}const u=new Array(a.length);for(let h=0;h<s;++h){if(new Set(a[h].split("")).size!==a[h].length)throw new Error(`Found duplicate axes in input component ${a[h]}. Support for duplicate axes in input is not implemented yet.`);u[h]=[];for(let t=0;t<a[h].length;++t)u[h].push(o.indexOf(a[h][t]))}const c=o.length,l=i.length,d=[];for(let h=l;h<c;++h)d.push(h);return{allDims:o,summedDims:d,idDims:u}}function Se(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)-1===n[i]&&r.push(i);return n=n.filter(t=>-1!==t),{permutationIndices:n,expandDims:r}}function ke(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const t=n[i].shape;for(let n=0;n<e[i].length;++n)void 0===r[e[i][n]]?r[e[i][n]]=t[n]:Object(O["b"])(r[e[i][n]]===t[n],()=>`Expected dimension ${r[e[i][n]]} at axis ${n} of input shaped ${JSON.stringify(t)}, but got dimension `+t[n])}}function Te(t,e){const n=t,r=[];let i=0;0===t.length&&n.push(-1),i=t.length+1;for(let s=0;s<i;++s)r.push([]);const a=[];for(let s=0;s<n.length;++s){const t=n[s],i=Ie(e,t);for(const e of i)-1===a.indexOf(e)&&(r[s].push(e),a.push(e))}return{path:n,steps:r}}function _e(t){return t.every((t,e)=>t===e)}function Ie(t,e){const n=[];for(let r=0;r<t.length;++r)0!==t[r].length&&-1===t[r].indexOf(e)&&-1!==e||n.push(r);return n}function Ce(t,e,n=0){let r=[];if("number"===typeof e)Object(O["b"])(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((t,e)=>(-1===e&&(t+=1),t),0);Object(O["b"])(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(-1!==a){const r=e.reduce((t,e)=>e>0?t+e:t);e[a]=t.shape[n]-r}Object(O["b"])(t.shape[n]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = "+t}function Ee(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Ne(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function je(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function De(t,e){return`size ${t} must be non-negative, not ${e}`}function $e(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Re(t,e){const n=Object(O["N"])(t),r=Object(O["N"])(e);return`Input to reshape is a SparseTensor with ${n}\n  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Fe(t,e){const n=Object(O["N"])(t),r=Object(O["N"])(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pe(){return"segment ids must be >= 0"}function Me(){return"segment ids are not increasing"}function Le(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Be(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ze(t,e){let n,r=!1;t<=Jt?(n=t,r=!0):n=Object(O["F"])(t,Math.floor(Math.sqrt(t)));while(!r)n>e||n===t?r=!0:n=Object(O["F"])(t,n+1);return n}function Ve(t,e,n){const r=[],i=t.length;for(let a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}function Ue(t,e,n,r){const i=e.shape.length,a=t.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const s=t.shape[n],o=[];let u=1,c=1,l=1;for(let d=0;d<r;++d)o.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<n;d++)o.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)o.push(e.shape[d]);for(let d=n+1;d<a;d++)o.push(t.shape[d]),l*=t.shape[d];return{batchSize:u,sliceSize:l,outerSize:c,dimSize:s,outputShape:o}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function We(t){try{return t.map(t=>Object(vt["decodeString"])(t))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+e)}}function Ge(t){return t.map(t=>Object(vt["encodeString"])(t))}var He=n("7ed6"),qe=n("8389"),Je=n("0280"),Ke=n("8b87")},"0f6f":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("6ad5"),s=n("b818"),o=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,o,c,l="NHWC",d){let h=t;3===t.rank&&(h=Object(u["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let p=e;3===p.rank&&(p=Object(u["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]])),a["b"](4===h.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+h.shape+"."),a["b"](4===p.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+p.shape+"."),a["b"](4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+".");const f="NHWC"===l?h.shape[3]:h.shape[1],m="NHWC"===l?p.shape[3]:p.shape[1];a["b"](f===n[2],()=>`Error in conv2dDerFilter: depth of input ${f}) must match input depth in filter (${n[2]}.`),a["b"](m===n[3],()=>`Error in conv2dDerFilter: depth of dy (${m}) must match output depth for filter (${n[3]}).`),s["a"]("conv2dDerFilter",c,d);const g={x:h,dy:p},b={strides:o,pad:c,dataFormat:l,dimRoundingMode:d,filterShape:n};return r["a"].runKernel(i["E"],g,b)}const l=Object(o["b"])({conv2DBackpropFilter_:c})},"0f86":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n=!1,o=!1){const c=Object(a["a"])(t,"images","resizeNearestNeighbor");s["b"](3===c.rank||4===c.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${c.rank}.`),s["b"](2===e.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),s["b"]("float32"===c.dtype||"int32"===c.dtype,()=>"`images` must have `int32` or `float32` as dtype"),s["b"](!1===o||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let l=c,d=!1;3===c.rank&&(d=!0,l=Object(u["a"])(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const[]=e,h={images:l},p={alignCorners:n,halfPixelCenters:o,size:e},f=r["a"].runKernel(i["zc"],h,p);return d?Object(u["a"])(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const l=Object(o["b"])({resizeNearestNeighbor_:c})},"113e":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},"116b":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("a3f7"),i=n("6ad5"),a=n("dd7e"),s=n("838f"),o=n("54ef"),u=n("35c9");function c(t,e,n,o,c,l=[1,1],d="NHWC"){const h=Object(r["a"])(t,"x","separableConv2d"),p=Object(r["a"])(e,"depthwiseFilter","separableConv2d"),f=Object(r["a"])(n,"pointwiseFilter","separableConv2d");let m=h,g=!1;if(3===h.rank&&(g=!0,m=Object(u["a"])(h,[1,h.shape[0],h.shape[1],h.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");i["b"](4===m.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${m.rank}.`),i["b"](4===p.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${p.rank}.`),i["b"](4===f.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${p.rank}.`),i["b"](1===f.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${f.shape[0]}.`),i["b"](1===f.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${f.shape[1]}.`);const b=p.shape[2],y=p.shape[3];i["b"](f.shape[2]===b*y,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${b*y}, but got ${f.shape[2]}.`);const v=Object(s["a"])(m,p,o,c,d,l),w=1,x=Object(a["a"])(v,f,w,"valid",d);return g?Object(u["a"])(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const l=Object(o["b"])({separableConv2d_:c})},1212:function(t,e,n){(function(t){var r;(function(t,i,a){function s(t){var e=this,n=c();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new s(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}function c(){var t=4022871197,e=function(e){e=String(e);for(var n=0;n<e.length;n++){t+=e.charCodeAt(n);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return 2.3283064365386963e-10*(t>>>0)};return e}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.alea=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"122e":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=null,n=!1){const s=Object(a["a"])(t,"x","mean"),o={x:s},u={axis:e,keepDims:n};return r["a"].runKernel(i["Tb"],o,u)}const u=Object(s["b"])({mean_:o})},"132b":function(t,e,n){"use strict";n.d(e,"b",(function(){return i["a"]})),n.d(e,"c",(function(){return a["a"]})),n.d(e,"d",(function(){return s["a"]})),n.d(e,"e",(function(){return o["a"]})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return m["a"]})),n.d(e,"h",(function(){return g["a"]})),n.d(e,"i",(function(){return b["a"]})),n.d(e,"j",(function(){return y["a"]})),n.d(e,"k",(function(){return v["a"]})),n.d(e,"l",(function(){return w["a"]})),n.d(e,"m",(function(){return x["a"]})),n.d(e,"n",(function(){return O["a"]})),n.d(e,"o",(function(){return S["a"]})),n.d(e,"p",(function(){return k["a"]})),n.d(e,"q",(function(){return A})),n.d(e,"r",(function(){return P})),n.d(e,"w",(function(){return M["a"]})),n.d(e,"s",(function(){return L["a"]})),n.d(e,"t",(function(){return z})),n.d(e,"u",(function(){return U})),n.d(e,"v",(function(){return G})),n.d(e,"x",(function(){return q})),n.d(e,"z",(function(){return K})),n.d(e,"A",(function(){return X["a"]})),n.d(e,"B",(function(){return Y["a"]})),n.d(e,"C",(function(){return T["a"]})),n.d(e,"D",(function(){return Z["a"]})),n.d(e,"E",(function(){return Q["a"]})),n.d(e,"F",(function(){return tt["a"]})),n.d(e,"G",(function(){return et["a"]})),n.d(e,"H",(function(){return E["a"]})),n.d(e,"I",(function(){return rt})),n.d(e,"J",(function(){return at})),n.d(e,"K",(function(){return ot})),n.d(e,"L",(function(){return ct})),n.d(e,"M",(function(){return lt["a"]})),n.d(e,"N",(function(){return dt["a"]})),n.d(e,"O",(function(){return ht["a"]})),n.d(e,"P",(function(){return ft})),n.d(e,"Q",(function(){return bt})),n.d(e,"R",(function(){return yt["a"]})),n.d(e,"S",(function(){return vt["a"]})),n.d(e,"U",(function(){return wt["a"]})),n.d(e,"V",(function(){return xt["a"]})),n.d(e,"W",(function(){return St})),n.d(e,"X",(function(){return kt["a"]})),n.d(e,"Y",(function(){return Tt["a"]})),n.d(e,"Z",(function(){return It})),n.d(e,"ab",(function(){return Ct["a"]})),n.d(e,"bb",(function(){return At["a"]})),n.d(e,"cb",(function(){return Et["a"]})),n.d(e,"db",(function(){return Nt["a"]})),n.d(e,"fb",(function(){return Dt})),n.d(e,"gb",(function(){return $t["a"]})),n.d(e,"ib",(function(){return Rt["a"]})),n.d(e,"jb",(function(){return Ft["a"]})),n.d(e,"kb",(function(){return Pt["a"]})),n.d(e,"lb",(function(){return Mt["a"]})),n.d(e,"mb",(function(){return Lt["a"]})),n.d(e,"nb",(function(){return Bt["a"]})),n.d(e,"ob",(function(){return Ut})),n.d(e,"qb",(function(){return Wt["a"]})),n.d(e,"rb",(function(){return Gt["a"]})),n.d(e,"sb",(function(){return Ht["a"]})),n.d(e,"ub",(function(){return qt["a"]})),n.d(e,"wb",(function(){return Jt["a"]})),n.d(e,"xb",(function(){return Kt["a"]})),n.d(e,"zb",(function(){return Xt["a"]})),n.d(e,"Db",(function(){return Yt["a"]})),n.d(e,"Eb",(function(){return Zt["a"]})),n.d(e,"Fb",(function(){return Qt["a"]})),n.d(e,"Gb",(function(){return te["a"]})),n.d(e,"Hb",(function(){return ee["a"]})),n.d(e,"Ib",(function(){return ne["a"]})),n.d(e,"Kb",(function(){return re})),n.d(e,"Lb",(function(){return ie["a"]})),n.d(e,"Mb",(function(){return ae["a"]})),n.d(e,"Nb",(function(){return se["a"]})),n.d(e,"Ob",(function(){return oe["a"]})),n.d(e,"Pb",(function(){return ue["a"]})),n.d(e,"Qb",(function(){return ce["a"]})),n.d(e,"Rb",(function(){return le["a"]})),n.d(e,"Sb",(function(){return de["a"]})),n.d(e,"Tb",(function(){return he["a"]})),n.d(e,"Ub",(function(){return pe["a"]})),n.d(e,"Wb",(function(){return be})),n.d(e,"Xb",(function(){return N["a"]})),n.d(e,"Yb",(function(){return ye["a"]})),n.d(e,"Zb",(function(){return ve["a"]})),n.d(e,"ac",(function(){return xe})),n.d(e,"bc",(function(){return Se})),n.d(e,"cc",(function(){return ke["a"]})),n.d(e,"dc",(function(){return Te["a"]})),n.d(e,"ec",(function(){return Ce})),n.d(e,"fc",(function(){return Ae["a"]})),n.d(e,"gc",(function(){return Ee["a"]})),n.d(e,"hc",(function(){return Ne["a"]})),n.d(e,"ic",(function(){return je["a"]})),n.d(e,"jc",(function(){return Pe})),n.d(e,"lc",(function(){return j["a"]})),n.d(e,"mc",(function(){return Le})),n.d(e,"nc",(function(){return ze})),n.d(e,"oc",(function(){return Ve["a"]})),n.d(e,"qc",(function(){return Ue["a"]})),n.d(e,"rc",(function(){return We["a"]})),n.d(e,"sc",(function(){return _e["a"]})),n.d(e,"tc",(function(){return Ge["a"]})),n.d(e,"vc",(function(){return qe})),n.d(e,"wc",(function(){return Je["a"]})),n.d(e,"xc",(function(){return Xe})),n.d(e,"yc",(function(){return Ze})),n.d(e,"zc",(function(){return tn})),n.d(e,"Ac",(function(){return nn})),n.d(e,"Bc",(function(){return rn["a"]})),n.d(e,"Cc",(function(){return an["a"]})),n.d(e,"Dc",(function(){return sn["a"]})),n.d(e,"Ec",(function(){return on["a"]})),n.d(e,"Fc",(function(){return un["a"]})),n.d(e,"Gc",(function(){return ln})),n.d(e,"Hc",(function(){return hn})),n.d(e,"Ic",(function(){return fn})),n.d(e,"Jc",(function(){return gn})),n.d(e,"Kc",(function(){return On})),n.d(e,"Lc",(function(){return kn})),n.d(e,"Mc",(function(){return _n})),n.d(e,"Nc",(function(){return Cn})),n.d(e,"Oc",(function(){return An})),n.d(e,"Pc",(function(){return En["a"]})),n.d(e,"Qc",(function(){return Nn["a"]})),n.d(e,"Rc",(function(){return jn["a"]})),n.d(e,"Sc",(function(){return Dn["a"]})),n.d(e,"Tc",(function(){return I["a"]})),n.d(e,"Uc",(function(){return $n["a"]})),n.d(e,"Vc",(function(){return Fn})),n.d(e,"Wc",(function(){return Mn})),n.d(e,"Xc",(function(){return Bn})),n.d(e,"Yc",(function(){return Vn})),n.d(e,"ad",(function(){return Un["a"]})),n.d(e,"bd",(function(){return Wn["a"]})),n.d(e,"cd",(function(){return Gn["a"]})),n.d(e,"fd",(function(){return Hn["a"]})),n.d(e,"gd",(function(){return qn["a"]})),n.d(e,"hd",(function(){return Kn})),n.d(e,"id",(function(){return D["a"]})),n.d(e,"jd",(function(){return Xn["a"]})),n.d(e,"ld",(function(){return Yn["a"]})),n.d(e,"md",(function(){return Zn["a"]})),n.d(e,"nd",(function(){return $["a"]})),n.d(e,"od",(function(){return tr})),n.d(e,"pd",(function(){return nr})),n.d(e,"qd",(function(){return ir})),n.d(e,"rd",(function(){return sr})),n.d(e,"sd",(function(){return or["a"]})),n.d(e,"td",(function(){return ur["a"]})),n.d(e,"ud",(function(){return cr["a"]})),n.d(e,"pb",(function(){return lr["a"]})),n.d(e,"yb",(function(){return dr["a"]})),n.d(e,"Cb",(function(){return hr["a"]})),n.d(e,"Zc",(function(){return pr["a"]})),n.d(e,"yd",(function(){return fr["a"]})),n.d(e,"zd",(function(){return mr["a"]})),n.d(e,"Ad",(function(){return $e["a"]})),n.d(e,"Bd",(function(){return gr["a"]})),n.d(e,"Cd",(function(){return br["a"]})),n.d(e,"Dd",(function(){return yr["a"]})),n.d(e,"Ed",(function(){return vr["a"]})),n.d(e,"Fd",(function(){return wr["a"]})),n.d(e,"Hd",(function(){return Re["a"]})),n.d(e,"Id",(function(){return xr["a"]})),n.d(e,"Jd",(function(){return Or["a"]})),n.d(e,"Kd",(function(){return R["a"]})),n.d(e,"Ld",(function(){return Sr["a"]})),n.d(e,"Md",(function(){return Tr})),n.d(e,"Nd",(function(){return _r})),n.d(e,"Od",(function(){return Ir["a"]})),n.d(e,"Pd",(function(){return Cr})),n.d(e,"Qd",(function(){return Ar})),n.d(e,"Rd",(function(){return Er})),n.d(e,"Sd",(function(){return zt["a"]})),n.d(e,"Td",(function(){return Nr["a"]})),n.d(e,"Vd",(function(){return Dr})),n.d(e,"Wd",(function(){return $r["a"]})),n.d(e,"Xd",(function(){return Rr["a"]})),n.d(e,"Yd",(function(){return Fr["a"]})),n.d(e,"Zd",(function(){return Pr})),n.d(e,"ae",(function(){return Mr})),n.d(e,"be",(function(){return Lr["a"]})),n.d(e,"ce",(function(){return Vr})),n.d(e,"de",(function(){return Ur["a"]})),n.d(e,"ee",(function(){return Wr["a"]})),n.d(e,"y",(function(){return Hr})),n.d(e,"Ud",(function(){return qr["a"]})),n.d(e,"pc",(function(){return Jr["a"]})),n.d(e,"kc",(function(){return Yr})),n.d(e,"dd",(function(){return ti})),n.d(e,"ed",(function(){return ge})),n.d(e,"wd",(function(){return ri})),n.d(e,"vb",(function(){return ai})),n.d(e,"eb",(function(){return ui})),n.d(e,"hb",(function(){return ci})),n.d(e,"T",(function(){return li})),n.d(e,"Bb",(function(){return hi})),n.d(e,"uc",(function(){return h["b"]})),n.d(e,"a",(function(){return h["a"]})),n.d(e,"Ab",(function(){return ts})),n.d(e,"Jb",(function(){return es})),n.d(e,"Vb",(function(){return ns})),n.d(e,"xd",(function(){return Za})),n.d(e,"tb",(function(){return r})),n.d(e,"kd",(function(){return Qa})),n.d(e,"vd",(function(){return rs})),n.d(e,"Gd",(function(){return is}));var r={};n.r(r),n.d(r,"conv2d",(function(){return vi})),n.d(r,"depthwiseConv2d",(function(){return Si})),n.d(r,"matMul",(function(){return Ti}));var i=n("8ae0"),a=n("a374"),s=n("4615"),o=n("9117"),u=n("6ae2"),c=n("c05b"),l=n("a3f7"),d=n("6ad5"),h=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p(t){d["b"](Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),d["b"](t.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+t.length);const e=t.map((t,e)=>Object(l["a"])(t,"tensors"+e,"addN")),n=e[0];e.forEach(t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!d["a"](t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return u["a"].runKernel(c["e"],r)}const f=Object(h["b"])({addN_:p});var m=n("df81"),g=n("4516"),b=n("e89f"),y=n("db49"),v=n("220f"),w=n("dc59"),x=n("7e36"),O=n("6002"),S=n("d1a8"),k=n("9748"),T=n("deb3"),_=n("b818"),I=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function C(t,e,n,r,i,a="NDHWC"){const s=Object(l["a"])(t,"x","avgPool3d","float32");let o=s,h=!1;4===s.rank&&(h=!0,o=Object(I["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),d["b"](5===o.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),d["b"]("NDHWC"===a,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a),d["b"]("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Object(_["a"])("avgPool3d",r,i);const p={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let m=u["a"].runKernel(c["p"],p,f);return m=Object(T["a"])(m,o.dtype),h?Object(I["a"])(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const A=Object(h["b"])({avgPool3d_:C});var E=n("649e"),N=n("487b"),j=n("a5aa"),D=n("ffb3"),$=n("6d3c"),R=n("8888");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function F(t,e,n,r,i,a){const s=Object(l["a"])(t,"forgetBias","basicLSTMCell"),u=Object(l["a"])(e,"lstmKernel","basicLSTMCell"),c=Object(l["a"])(n,"lstmBias","basicLSTMCell"),d=Object(l["a"])(r,"data","basicLSTMCell"),h=Object(l["a"])(i,"c","basicLSTMCell"),p=Object(l["a"])(a,"h","basicLSTMCell"),f=Object(E["a"])([d,p],1),m=Object(N["a"])(f,u),g=Object(o["a"])(m,c),b=g.shape[0],y=g.shape[1]/4,v=[b,y],w=Object($["a"])(g,[0,0],v),x=Object($["a"])(g,[0,y],v),O=Object($["a"])(g,[0,2*y],v),S=Object($["a"])(g,[0,3*y],v),k=Object(o["a"])(Object(j["a"])(Object(D["a"])(w),Object(R["a"])(x)),Object(j["a"])(h,Object(D["a"])(Object(o["a"])(s,O)))),T=Object(j["a"])(Object(R["a"])(k),Object(D["a"])(S));return[k,T]}const P=Object(h["b"])({basicLSTMCell_:F});var M=n("3b28"),L=n("71db");function B(t,e,n,r,i,a){const s=Object(l["a"])(t,"x","batchNorm"),o=Object(l["a"])(e,"mean","batchNorm"),u=Object(l["a"])(n,"variance","batchNorm");let c,h;return null!=i&&(c=Object(l["a"])(i,"scale","batchNorm")),null!=r&&(h=Object(l["a"])(r,"offset","batchNorm")),d["b"](2===s.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+s.rank+"."),d["b"](2===o.rank||1===o.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),d["b"](2===u.rank||1===u.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=c&&d["b"](2===c.rank||1===c.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=h&&d["b"](2===h.rank||1===h.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),Object(L["a"])(s,o,u,h,c,a)}const z=Object(h["b"])({batchNorm2d_:B});function V(t,e,n,r,i,a){const s=Object(l["a"])(t,"x","batchNorm"),o=Object(l["a"])(e,"mean","batchNorm"),u=Object(l["a"])(n,"variance","batchNorm");let c,h;return null!=i&&(c=Object(l["a"])(i,"scale","batchNorm")),null!=r&&(h=Object(l["a"])(r,"offset","batchNorm")),d["b"](3===s.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."),d["b"](3===o.rank||1===o.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),d["b"](3===u.rank||1===u.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=c&&d["b"](3===c.rank||1===c.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=h&&d["b"](3===h.rank||1===h.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),Object(L["a"])(s,o,u,h,c,a)}const U=Object(h["b"])({batchNorm3d_:V});function W(t,e,n,r,i,a){const s=Object(l["a"])(t,"x","batchNorm"),o=Object(l["a"])(e,"mean","batchNorm"),u=Object(l["a"])(n,"variance","batchNorm");let c,h;return null!=i&&(c=Object(l["a"])(i,"scale","batchNorm")),null!=r&&(h=Object(l["a"])(r,"offset","batchNorm")),d["b"](4===s.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+s.rank+"."),d["b"](4===o.rank||1===o.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),d["b"](4===u.rank||1===u.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=c&&d["b"](4===c.rank||1===c.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=h&&d["b"](4===h.rank||1===h.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),Object(L["a"])(s,o,u,h,c,a)}const G=Object(h["b"])({batchNorm4d_:W});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H(t,e,n){const r=Object(l["a"])(t,"x","bincount"),i=Object(l["a"])(e,"weights","bincount");d["b"]("int32"===r.dtype,()=>"Error in bincount: input dtype must be int32, but got "+r.dtype),d["b"](n>=0,()=>`size must be non-negative, but got ${n}.`),d["b"](i.size===r.size||0===i.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: `+i.shape+".");const a={x:r,weights:i},s={size:n};return u["a"].runKernel(c["u"],a,s)}const q=Object(h["b"])({bincount_:H});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J(t,e){const n=Object(l["a"])(t,"s0","broadcastArgs","int32"),r=Object(l["a"])(e,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank "+n.rank);if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank "+r.rank);const i={s0:n,s1:r};return u["a"].runKernel(c["v"],i)}const K=Object(h["b"])({broadcastArgs_:J});var X=n("48db"),Y=n("043e"),Z=n("5960"),Q=n("c08f"),tt=n("f0a9"),et=n("0777");function nt(t){return Object(E["a"])(t,0)}const rt=Object(h["b"])({concat1d_:nt});function it(t,e){return Object(E["a"])(t,e)}const at=Object(h["b"])({concat2d_:it});function st(t,e){return Object(E["a"])(t,e)}const ot=Object(h["b"])({concat3d_:st});function ut(t,e){return Object(E["a"])(t,e)}const ct=Object(h["b"])({concat4d_:ut});var lt=n("7675"),dt=n("dd7e"),ht=n("cd1f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pt(t,e,n,r,i="NDHWC",a=[1,1,1]){const s=Object(l["a"])(t,"x","conv3d"),o=Object(l["a"])(e,"filter","conv3d");let h=s,p=!1;4===s.rank&&(p=!0,h=Object(I["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),d["b"](5===h.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${h.rank}.`),d["b"](5===o.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+o.rank+"."),d["b"](h.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${h.shape[4]}) must match input depth for filter ${o.shape[3]}.`),d["b"](Object(_["i"])(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),d["b"]("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),d["b"](Object(_["j"])(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),d["b"](Object(_["j"])(n),()=>"Error in conv3D: Strides should be larger than 0.");const f={x:h,filter:o},m={strides:n,pad:r,dataFormat:i,dilations:a},g=u["a"].runKernel(c["G"],f,m);return p?Object(I["a"])(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const ft=Object(h["b"])({conv3d_:pt});var mt=n("99d0");function gt(t,e,n,r,i){const a=Object(l["a"])(t,"x","conv3dTranspose"),s=Object(l["a"])(e,"filter","conv3dTranspose");return Object(mt["a"])(n,a,s,r,i)}const bt=Object(h["b"])({conv3dTranspose_:gt});var yt=n("eff7"),vt=n("c1a2"),wt=n("17a3"),xt=n("1e68");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ot(t,e,n,r=!1){const i=Object(l["a"])(t,"x","denseBincount"),a=Object(l["a"])(e,"weights","denseBincount");d["b"]("int32"===i.dtype,()=>"Error in denseBincount: input dtype must be int32, but got "+i.dtype),d["b"](i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),d["b"](n>=0,()=>`size must be non-negative, but got ${n}.`),d["b"](a.size===i.size||0===a.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: `+a.shape+".");const s={x:i,weights:a},o={size:n,binaryOutput:r};return u["a"].runKernel(c["O"],s,o)}const St=Object(h["b"])({denseBincount_:Ot});var kt=n("364e"),Tt=n("838f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _t(t){const e=Object(l["a"])(t,"x","diag"),n={x:e};return u["a"].runKernel(c["T"],n)}const It=Object(h["b"])({diag_:_t});var Ct=n("c170"),At=n("c77c"),Et=n("011b"),Nt=n("29fc");
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jt(t,...e){const n=e.map((t,e)=>Object(l["a"])(t,"tensors"+e,"einsum")),r={equation:t};return u["a"].runKernel(c["X"],n,r)}const Dt=Object(h["b"])({einsum_:jt});var $t=n("9e38"),Rt=n("b9b9"),Ft=n("8e05"),Pt=n("4e53"),Mt=n("4f20"),Lt=n("dae8"),Bt=n("1ba2"),zt=n("8d71");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vt(t,e,n,r="float32"){null==e&&(e=t);const i=Object(Y["a"])([t,e],r),a=t<=e?t:e;for(let o=0;o<a;++o)i.set(1,o,o);const s=Object(I["a"])(i.toTensor(),[t,e]);if(null==n)return s;if(1===n.length)return Object(zt["a"])(Object(Lt["a"])(s,0),[n[0],1,1]);if(2===n.length)return Object(zt["a"])(Object(Lt["a"])(Object(Lt["a"])(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(zt["a"])(Object(Lt["a"])(Object(Lt["a"])(Object(Lt["a"])(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Ut=Object(h["b"])({eye_:Vt});var Wt=n("46b8"),Gt=n("d369"),Ht=n("508f"),qt=n("91a3"),Jt=n("cef0"),Kt=n("bb2d"),Xt=n("24b0"),Yt=n("fc0b"),Zt=n("5980"),Qt=n("6fef"),te=n("6f37"),ee=n("e1fd"),ne=n("b21c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function re(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return u["a"].runKernel(c["Db"],{},r)}var ie=n("e101"),ae=n("1359"),se=n("46b1"),oe=n("c314"),ue=n("804a"),ce=n("afda"),le=n("e333"),de=n("ef00"),he=n("f183"),pe=n("d25f");
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const fe=2147483648;function me(t,e,n="left"){const r=Object(l["a"])(t,"sortedSequence","searchSorted"),i=Object(l["a"])(e,"values","searchSorted"),a=r.shape[r.shape.length-1],s=i.shape[i.shape.length-1],o=Object(I["a"])(r,[-1,a]),h=Object(I["a"])(i,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==h.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Object(d["N"])(h.shape)>=fe)throw new Error("values tensor size must less than "+fe);if(o.shape[1]>=fe)throw new Error(`trailing dim_size must less than ${fe} for int32 output type, was ${o.shape[1]}`);const p={sortedSequence:o,values:h},f={side:n};return u["a"].runKernel(c["Gc"],p,f)}const ge=Object(h["b"])({searchSorted_:me});
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function be(t,e){return ge(t,e,"left")}var ye=n("c021"),ve=n("9fe6");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function we(t,e=[1,1,1],n,r,i,a="NDHWC"){const s=Object(l["a"])(t,"x","maxPool3d");let o=s,h=!1;4===s.rank&&(h=!0,o=Object(I["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),d["b"](5===o.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),d["b"]("NDHWC"===a,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a),Object(_["a"])("maxPool3d",r,i);const p={x:o},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},m=u["a"].runKernel(c["Ob"],p,f);return h?Object(I["a"])(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const xe=Object(h["b"])({maxPool3d_:we});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oe(t,e,n,r,i=!1){const a=Object(l["a"])(t,"x","maxPoolWithArgmax"),s={x:a},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:i},d=u["a"].runKernel(c["Rb"],s,o);return{result:d[0],indexes:d[1]}}const Se=Object(h["b"])({maxPoolWithArgmax_:Oe});var ke=n("09f4"),Te=n("122e"),_e=n("c22a"),Ie=n("34d7");
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ce(t,e,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(n+" is not a valid third argument to meshgrid");if(void 0===t)return[];let r=Object(l["a"])(t,"x","meshgrid",t instanceof Ie["a"]?t.dtype:"float32");if(void 0===e)return[r];let i=Object(l["a"])(e,"y","meshgrid",e instanceof Ie["a"]?e.dtype:"float32");const a=Object(d["N"])(r.shape),s=Object(d["N"])(i.shape);return"xy"===n?(r=Object(I["a"])(r,[1,-1]),i=Object(I["a"])(i,[-1,1]),[Object(N["a"])(Object(_e["a"])([s,1],r.dtype),r),Object(N["a"])(i,Object(_e["a"])([1,a],i.dtype))]):(r=Object(I["a"])(r,[-1,1]),i=Object(I["a"])(i,[1,-1]),[Object(N["a"])(r,Object(_e["a"])([1,s],r.dtype)),Object(N["a"])(Object(_e["a"])([a,1],i.dtype),i)])}var Ae=n("ae6d"),Ee=n("f0e5"),Ne=n("93db"),je=n("4611"),De=n("36e5"),$e=n("93b2"),Re=n("a009");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fe(t,e=null,n=!1){t=Object(l["a"])(t,"x","moments");const r=Object(d["H"])(e,t.shape),i=Object(Te["a"])(t,r,n);let a=i.shape;n||(a=Object(De["e"])(i.shape,r));const s=Object($e["a"])(Object(Re["a"])(Object(T["a"])(t,"float32"),Object(I["a"])(i,a))),o=Object(Te["a"])(s,r,n);return{mean:i,variance:o}}const Pe=Object(h["b"])({moments_:Fe});function Me(t,e,n,r){const i=Object(l["a"])(e,"data","multiRNNCell"),a=Object(l["b"])(n,"c","multiRNNCell"),s=Object(l["b"])(r,"h","multiRNNCell");let o=i;const u=[];for(let l=0;l<t.length;l++){const e=t[l](o,a[l],s[l]);u.push(e[0]),u.push(e[1]),o=e[1]}const c=[],d=[];for(let l=0;l<u.length;l+=2)c.push(u[l]),d.push(u[l+1]);return[c,d]}const Le=Object(h["b"])({multiRNNCell_:Me});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(t,e,n,r=!1){const i=Object(l["a"])(t,"logits","multinomial"),a=i.size,s=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);n=n||Math.random();const o=1===s?Object(I["a"])(i,[1,-1]):i,d={logits:o},h={numSamples:e,seed:n,normalized:r},p=u["a"].runKernel(c["Yb"],d,h);return 1===s?Object(I["a"])(p,[p.size]):p}const ze=Object(h["b"])({multinomial_:Be});var Ve=n("3bb7"),Ue=n("d4de"),We=n("e22c"),Ge=n("0db5");function He(t,e){const n=Object(l["a"])(t,"v1","outerProduct"),r=Object(l["a"])(e,"v2","outerProduct");d["b"](1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=Object(I["a"])(n,[-1,1]),a=Object(I["a"])(r,[1,-1]);return Object(N["a"])(i,a)}const qe=Object(h["b"])({outerProduct_:He});var Je=n("0eb5");function Ke(t,e,n=0){return Object(d["b"])(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),Object(Je["a"])(t,[e],n)}const Xe=Object(h["b"])({pad1d_:Ke});function Ye(t,e,n=0){return Object(d["b"])(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),Object(Je["a"])(t,e,n)}const Ze=Object(h["b"])({pad2d_:Ye});function Qe(t,e,n=0){return Object(d["b"])(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),Object(Je["a"])(t,e,n)}const tn=Object(h["b"])({pad3d_:Qe});function en(t,e,n=0){return Object(d["b"])(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),Object(Je["a"])(t,e,n)}const nn=Object(h["b"])({pad4d_:en});var rn=n("eaf4"),an=n("c9f1"),sn=n("520f"),on=n("7568"),un=n("f3ae");
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cn(t,e,n,r){const i=t.map((t,e)=>Object(l["a"])(t,"tensors"+e,"raggedGather","int32")),a=Object(l["a"])(e,"paramsDenseValues","raggedGather"),s=Object(l["a"])(n,"indices","raggedGather","int32"),o={paramsNestedSplits:i,paramsDenseValues:a,indices:s},d={outputRaggedRank:r},h=u["a"].runKernel(c["nc"],o,d);return{outputNestedSplits:h.slice(0,h.length-1),outputDenseValues:h[h.length-1]}}const ln=Object(h["b"])({raggedGather_:cn});
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dn(t,e,n){const r=Object(l["a"])(t,"starts","raggedRange"),i=Object(l["a"])(e,"limits","raggedRange",r.dtype),a=Object(l["a"])(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:i,deltas:a},o=u["a"].runKernel(c["oc"],s);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const hn=Object(h["b"])({raggedRange_:dn});
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(t,e,n,r,i){const a=Object(l["a"])(t,"shape","raggedTensorToTensor","int32"),s=Object(l["a"])(e,"values","raggedTensorToTensor"),o=Object(l["a"])(n,"defaultValue","raggedTensorToTensor",s.dtype),d=r.map((t,e)=>Object(l["a"])(t,"tensors"+e,"raggedTensorToTensor","int32")),h={shape:a,values:s,defaultValue:o,rowPartitionTensors:d},p={rowPartitionTypes:i};return u["a"].runKernel(c["pc"],h,p)}const fn=Object(h["b"])({raggedTensorToTensor_:pn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mn(t,e,n){Object(d["c"])(t);const r=Object(d["N"])(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(let a=0;a<r;a++)i[a]=e();return u["a"].makeTensor(i,t,n)}const gn=Object(h["b"])({rand_:mn});var bn=n("6125");n("d565");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yn{constructor(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=i||Math.random();this.random=bn["alea"](a.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;while(!n){let r,i,a;do{r=2*this.random()-1,i=2*this.random()-1,a=r*r+i*i}while(a>=1||0===a);const s=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*r*s,e=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class vn{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;const i=r||Math.random();this.randu=bn["alea"](i.toString()),this.randn=new yn(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,a;while(1){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=r*r,e=1-.331*t*t,n=.5*t+this.d*(1-a+Math.log(a)),i=this.randu(),i<e||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class wn{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=bn["alea"](r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xn(t,e,n=1,r="float32",i){if(Object(d["c"])(t),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);const a=new vn(e,n,r,i),s=Object(Y["a"])(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const On=Object(h["b"])({randomGamma_:xn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sn(t,e=0,n=1,r,i){if(Object(d["c"])(t),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);const a=new yn(e,n,r,!1,i),s=Object(Y["a"])(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const kn=Object(h["b"])({randomNormal_:Sn});
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tn(t,e,n){if(null!=e&&"bool"===e)throw new Error("Unsupported data type "+e);return kn(t,0,1,e,n)}const _n=Object(h["b"])({randomStandardNormal_:Tn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function In(t,e=0,n=1,r="float32",i){Object(d["c"])(t);const a=Object(Y["a"])(t,r),s=new wn(e,n,null,i);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const Cn=Object(h["b"])({randomUniform_:In});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function An(t,e,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return u["a"].runKernel(c["qc"],{},i)}var En=n("d7b0"),Nn=n("b500"),jn=n("917a"),Dn=n("46a8"),$n=n("d08e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rn(t){const e=Object(l["a"])(t,"x","reverse");return d["b"](1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Object($n["a"])(e,0)}const Fn=Object(h["b"])({reverse1d_:Rn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(t,e){const n=Object(l["a"])(t,"x","reverse");return d["b"](2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Object($n["a"])(n,e)}const Mn=Object(h["b"])({reverse2d_:Pn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(t,e){const n=Object(l["a"])(t,"x","reverse");return d["b"](3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Object($n["a"])(n,e)}const Bn=Object(h["b"])({reverse3d_:Ln});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zn(t,e){const n=Object(l["a"])(t,"x","reverse");return d["b"](4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Object($n["a"])(n,e)}const Vn=Object(h["b"])({reverse4d_:zn});var Un=n("08a9"),Wn=n("5f2a"),Gn=n("015f"),Hn=n("b39e"),qn=n("116b");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function Jn(t,e){const n=Object(l["a"])(t,"x","setdiff1d"),r=Object(l["a"])(e,"y","setdiff1d");d["b"](n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),d["b"](1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),d["b"](1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),a=await r.data(),s=new Set(a);let o=0;for(let l=0;l<i.length;l++)s.has(i[l])||o++;const u=new Ie["b"]([o],n.dtype),c=new Ie["b"]([o],"int32");for(let l=0,d=0;l<i.length;l++)s.has(i[l])||(u.values[d]=i[l],c.values[d]=l,d++);return[u.toTensor(),c.toTensor()]}const Kn=Jn;var Xn=n("1df6"),Yn=n("6932"),Zn=n("5dc4");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qn(t,e,n){const r=Object(l["a"])(t,"x","slice1d");return d["b"](1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Object($["a"])(r,[e],[n])}const tr=Object(h["b"])({slice1d_:Qn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function er(t,e,n){const r=Object(l["a"])(t,"x","slice2d");return d["b"](2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Object($["a"])(r,e,n)}const nr=Object(h["b"])({slice2d_:er});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rr(t,e,n){const r=Object(l["a"])(t,"x","slice3d");return d["b"](3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Object($["a"])(r,e,n)}const ir=Object(h["b"])({slice3d_:rr});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(t,e,n){const r=Object(l["a"])(t,"x","slice4d");return d["b"](4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Object($["a"])(r,e,n)}const sr=Object(h["b"])({slice4d_:ar});var or=n("5f87"),ur=n("9ffd"),cr=n("7580"),lr=n("1ab7"),dr=n("4c7a"),hr=n("69dc"),pr=n("b61d"),fr=n("45bb"),mr=n("163a"),gr=n("4184"),br=n("d1f4"),yr=n("d54d"),vr=n("2fb1"),wr=n("de1a6"),xr=n("e053"),Or=n("d30a"),Sr=n("357d"),kr=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tr(t,e){Object(d["d"])(t);const n=Object(l["c"])(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");const r=null;return Object(kr["a"])(t,r,n,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _r(t,e,n){if(Object(d["d"])(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Object(l["c"])(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(kr["a"])(t,e,r,n)}var Ir=n("05bb");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e,n){if(Object(d["d"])(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Object(l["c"])(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(kr["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(t,e,n){if(Object(d["d"])(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Object(l["c"])(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(kr["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Er(t,e,n){if(Object(d["d"])(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Object(l["c"])(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Object(kr["a"])(t,e,r,n)}var Nr=n("5616");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(t,e=0,n=1,r,i){if(Object(d["c"])(t),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new yn(e,n,r,!0,i),s=Object(Y["a"])(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const Dr=Object(h["b"])({truncatedNormal_:jr});var $r=n("853e"),Rr=n("53f2"),Fr=n("3a44");
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pr(t,e){return ge(t,e,"right")}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mr(t,e=!0,n,r){return u["a"].makeVariable(t,e,n,r)}var Lr=n("6791"),Br=n("0280");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function zr(t){const e=Object(l["a"])(t,"condition","whereAsync","bool"),n=await e.data(),r=Object(Br["a"])(e.shape,n);return t!==e&&e.dispose(),r}const Vr=zr;var Ur=n("5a2c"),Wr=n("a09b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function Gr(t,e,n){const r=Object(l["a"])(t,"tensor","boolMask"),i=Object(l["a"])(e,"mask","boolMask","bool"),a=null==n?0:n,s=i.rank,o=r.shape;d["b"](s>0,()=>"mask cannot be scalar"),d["e"](o.slice(a,a+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let l=a;l<a+s;l++)u*=o[l];const c=o.slice(0,a).concat([u],o.slice(a+s)),h=Object(I["a"])(r,c),p=Object(I["a"])(i,[-1]),f=await Vr(p),m=Object(br["a"])(f,[1]),g=Object(qt["a"])(h,m,a);return t!==r&&r.dispose(),e!==i&&i.dispose(),m.dispose(),h.dispose(),p.dispose(),f.dispose(),g}const Hr=Gr;var qr=n("c912"),Jr=n("f757"),Kr=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xr(t,e,n,r,i=!0){const a=Object(l["a"])(t,"v","movingAverage"),s=Object(l["a"])(e,"x","movingAverage"),u=Object(l["a"])(n,"decay","movingAverage");Object(Kr["assertTypesMatch"])(a,s),d["b"](d["a"](a.shape,s.shape),()=>"Shape mismatch in v and x");const c=Object(Gn["a"])(1),h=Object(Re["a"])(c,u);let p=Object(j["a"])(Object(Re["a"])(s,a),h);if(i){d["b"](null!=r,()=>"When using zeroDebias: true, step is required.");const t=Object(l["a"])(r,"step","movingAverage");p=Object(At["a"])(p,Object(Re["a"])(c,Object(an["a"])(u,t)))}return Object(o["a"])(a,p)}const Yr=Object(h["b"])({movingAverage_:Xr});var Zr=n("a34f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qr(t,e,n){Object(d["c"])(n);const r=Object(l["a"])(t,"indices","scatterND","int32"),i=Object(l["a"])(e,"updates","scatterND");Zr["validateInput"](i,r,n);const a={indices:r,updates:i},s={shape:n};return u["a"].runKernel(c["Fc"],a,s)}const ti=Object(h["b"])({scatterND_:Qr});function ei(t,e,n,r){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const s=e.size;if(0!==e.rank&&(1!==e.rank||s!==i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ni(t,e,n,r=0){Object(d["c"])(n);const i=Object(l["a"])(t,"sparseIndices","sparseToDense","int32"),a=Object(l["a"])(e,"sparseValues","sparseToDense","string_or_numeric"),s=Object(l["a"])(r,"defaultValue","sparseToDense",a.dtype);ei(i,a,n,s);const o={sparseIndices:i,sparseValues:a,defaultValue:s},h={outputShape:n};return u["a"].runKernel(c["Vc"],o,h)}const ri=Object(h["b"])({sparseToDense_:ni});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ii(t,e){const n=Object(l["a"])(e,"indices","gatherND","int32"),r=Object(l["a"])(t,"x","gatherND","string_or_numeric"),i={params:r,indices:n};return u["a"].runKernel(c["ob"],i)}const ai=Object(h["b"])({gatherND_:ii});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(t,e){if(null==e)return t.shape.slice();if(d["a"](t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oi(t,e,n,r){const i=Object(l["a"])(t,"x","dropout");if(d["b"]("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),d["b"](e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof Ie["a"]?i.clone():i;const a=si(i,n),s=1-e,u=Object(At["a"])(Object(Gt["a"])(Object(o["a"])(Cn(a,0,1,"float32",r),s)),s);return Object(j["a"])(i,u)}const ui=Object(h["b"])({dropout_:oi});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function li(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let a=0;a<t;++a){const s=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(s)}return Tr(i,"float32")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function di(t,e,n=1){const r=Object(l["a"])(t,"predictions","inTopK"),i=Object(l["a"])(e,"targets","inTopK");Object(d["b"])(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),Object(d["b"])(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Object(d["e"])(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Object(d["b"])(n>0&&n<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`);const s=await r.data(),o=await i.data(),[u,c]=[s.length/a,a],h=Object(d["o"])("bool",u);for(let l=0;l<u;l++){const t=l*c,e=s.subarray(t,t+c),r=[];for(let n=0;n<e.length;n++)r.push({value:e[n],index:n});r.sort((t,e)=>e.value-t.value),h[l]=0;for(let i=0;i<n;i++)if(r[i].index===o[l]){h[l]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),Object(Sr["a"])(h,i.shape,"bool")}const hi=di;var pi=n("538e"),fi=n("526f"),mi=n("0f6f"),gi=n("73d3"),bi=n("4749");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yi({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:h,activation:p="linear",preluActivationWeights:f,leakyreluAlpha:m}){if(p=p||"linear",!1===Object(bi["d"])(u["a"].state.gradientDepth,p)){d["b"]("NHWC"===i,()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let u=Object(dt["a"])(t,e,n,r,i,a,s);return null!=h&&(u=Object(o["a"])(u,h)),Object(bi["a"])(u,p,f,m)}const g=Object(l["a"])(t,"x","conv2d","float32"),b=Object(l["a"])(e,"filter","conv2d","float32");let y=g,v=!1;3===g.rank&&(v=!0,y=Object(I["a"])(g,[1,g.shape[0],g.shape[1],g.shape[2]])),d["b"](4===y.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."),d["b"](4===b.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."),_["a"]("fused conv2d",r,s);const w="NHWC"===i?y.shape[3]:y.shape[1];d["b"](b.shape[2]===w,()=>`Error in conv2d: depth of input (${w}) must match input depth for filter ${b.shape[2]}.`),d["b"](_["i"](n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const x=_["b"](y.shape,b.shape,n,a,r,s);let O,S;if(null!=h&&(O=Object(l["a"])(h,"bias","fused conv2d"),[O]=Object(Kr["makeTypesMatch"])(O,g),"NHWC"===i?fi["assertAndGetBroadcastShape"](x.outShape,O.shape):(d["b"](O.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${O.shape.length}.`),d["b"](0===O.shape.length||O.shape[0]===x.outChannels||1===O.shape[0],()=>`Error in fused conv2d: bias shape (${O.shape}) is not compatible with the number of output channels (${x.outChannels})`))),null!=f){const t=f.shape;if(d["b"](t.length<=1||3===t.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${t.length}.`),1===t.length)d["b"](1===t[0]||t[0]===x.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${t}) is not compatible with the number of output channels (${x.outChannels}).`);else if(3===t.length)try{fi["assertAndGetBroadcastShape"](t,x.outShape)}catch(A){const e=`Error in fused conv2d: PReLU activation weights (${t}) is not compatible with the output shape of the conv2d (${x.outShape}).`;throw Error(e)}S=Object(l["a"])(f,"prelu weights","fused conv2d")}const k=(t,e)=>{d["b"]("NHWC"===i,()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[s,o,u,c]=e,l=Object(bi["c"])(t,u,p);d["b"](_["k"](a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const h=Object(gi["a"])(o.shape,l,s,n,r),f=Object(mi["a"])(o,l,s.shape,n,r),m=[h,f];if(null!=c){const t=Object(bi["b"])(c,l);m.push(t)}return m},T={x:y,filter:b,bias:O,preluActivationWeights:S},C={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:p,leakyreluAlpha:m};if(null==h){const t=Object(pi["a"])((t,e,n)=>{let r=u["a"].runKernel(c["mb"],T,C);return n([e,t,r]),v&&(r=Object(I["a"])(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:k}});return t(y,b)}{const t=Object(pi["a"])((t,e,n,r)=>{let i=u["a"].runKernel(c["mb"],T,C);return r([e,t,i,n]),v&&(i=Object(I["a"])(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:k}});return t(y,b,O)}}const vi=Object(h["b"])({fusedConv2d_:yi});var wi=n("6926"),xi=n("8cb0");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Oi({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:h,activation:p="linear",preluActivationWeights:f,leakyreluAlpha:m}){if(!1===Object(bi["d"])(u["a"].state.gradientDepth,p)){let u=Object(Tt["a"])(t,e,n,r,i,a,s);return null!=h&&(u=Object(o["a"])(u,h)),Object(bi["a"])(u,p,f,m)}const g=Object(l["a"])(t,"x","depthwiseConv2d","float32"),b=Object(l["a"])(e,"filter","depthwiseConv2d","float32");let y=g,v=!1;3===g.rank&&(v=!0,y=Object(I["a"])(g,[1,g.shape[0],g.shape[1],g.shape[2]])),d["b"](4===y.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${y.rank}.`),d["b"](4===b.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${b.rank}.`),d["b"](y.shape[3]===b.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${y.shape[3]}) must match the inChannels dimension in filter ${b.shape[2]}.`),null==a&&(a=[1,1]),d["b"](_["i"](n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),_["a"]("fused depthwiseConv2d",r,s);const w=_["b"](y.shape,b.shape,n,a,r,s,!0);let x,O;null!=h&&(x=Object(l["a"])(h,"bias","fused conv2d"),[x]=Object(Kr["makeTypesMatch"])(x,g),fi["assertAndGetBroadcastShape"](w.outShape,x.shape)),null!=f&&(O=Object(l["a"])(f,"prelu weights","fused depthwiseConv2d"));const S=(t,e)=>{d["b"](_["k"](a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[i,o,u,c]=e,l=Object(bi["c"])(t,u,p),h=Object(xi["a"])(o.shape,l,i,n,r,a,s),f=Object(wi["a"])(o,l,i.shape,n,r,a,s);if(null!=c){const t=Object(bi["b"])(x,l);return[h,f,t]}return[h,f]},k={x:y,filter:b,bias:x,preluActivationWeights:O},T={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:p,leakyreluAlpha:m};if(null==h){const t=Object(pi["a"])((t,e,n)=>{let r=u["a"].runKernel(c["nb"],k,T);return n([e,t,r]),v&&(r=Object(I["a"])(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}});return t(y,b)}{const t=Object(pi["a"])((t,e,n,r)=>{let i=u["a"].runKernel(c["nb"],k,T);return r([e,t,i,n]),v&&(i=Object(I["a"])(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:S}});return t(y,b,x)}}const Si=Object(h["b"])({fusedDepthwiseConv2d_:Oi});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ki({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:h=.2}){if(!1===Object(bi["d"])(u["a"].state.gradientDepth,a)){let u=Object(N["a"])(t,e,n,r);return null!=i&&(u=Object(o["a"])(u,i)),Object(bi["a"])(u,a,s,h)}let p=Object(l["a"])(t,"a","fused matMul"),f=Object(l["a"])(e,"b","fused matMul");[p,f]=Object(Kr["makeTypesMatch"])(p,f);const m=n?p.shape[p.rank-2]:p.shape[p.rank-1],g=r?f.shape[f.rank-1]:f.shape[f.rank-2],b=n?p.shape[p.rank-1]:p.shape[p.rank-2],y=r?f.shape[f.rank-2]:f.shape[f.rank-1],v=p.shape.slice(0,-2),w=f.shape.slice(0,-2),x=d["N"](v),O=d["N"](w);d["b"](m===g,()=>`Error in fused matMul: inner shapes (${m}) and (${g}) of Tensors with shapes ${p.shape} and ${f.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=fi["assertAndGetBroadcastShape"](p.shape.slice(0,-2),f.shape.slice(0,-2)),k=S.concat([b,y]),T=n?Object(I["a"])(p,[x,m,b]):Object(I["a"])(p,[x,b,m]),_=r?Object(I["a"])(f,[O,y,g]):Object(I["a"])(f,[O,g,y]);let C,A;null!=i&&(C=Object(l["a"])(i,"bias","fused matMul"),[C]=Object(Kr["makeTypesMatch"])(C,p),fi["assertAndGetBroadcastShape"](k,C.shape)),null!=s&&(A=Object(l["a"])(s,"prelu weights","fused matMul"));const E=(t,e)=>{const[s,o,u,c]=e,l=Object(bi["c"])(Object(I["a"])(t,u.shape),u,a);let d,h;if(n||r?!n&&r?(d=Object(N["a"])(l,o,!1,!1),h=Object(N["a"])(l,s,!0,!1)):n&&!r?(d=Object(N["a"])(o,l,!1,!0),h=Object(N["a"])(s,l,!1,!1)):(d=Object(N["a"])(o,l,!0,!0),h=Object(N["a"])(l,s,!0,!0)):(d=Object(N["a"])(l,o,!1,!0),h=Object(N["a"])(s,l,!0,!1)),null!=i){const t=Object(bi["b"])(c,l);return[d,h,t]}return[d,h]},j={a:T,b:_,bias:C,preluActivationWeights:A},D={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:h};if(null==i){const t=Object(pi["a"])((t,e,n)=>{const r=u["a"].runKernel(c["sd"],j,D);return n([t,e,r]),{value:Object(I["a"])(r,k),gradFunc:E}});return t(T,_)}{const t=Object(pi["a"])((t,e,n,r)=>{const i=u["a"].runKernel(c["sd"],j,D);return r([t,e,i,n]),{value:Object(I["a"])(i,k),gradFunc:E}});return t(T,_,C)}}const Ti=Object(h["b"])({fusedMatMul_:ki});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _i(t){return li(t,.54,.46)}const Ii=Object(h["b"])({hammingWindow_:_i});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ci(t){return li(t,.5,.5)}const Ai=Object(h["b"])({hannWindow_:Ci});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(t,e,n,r=!1,i=0){let a=0;const s=[];while(a+e<=t.size)s.push(Object($["a"])(t,a,e)),a+=n;if(r)while(a<t.size){const r=a+e-t.size,o=Object(E["a"])([Object($["a"])(t,a,e-r),Object(Wt["a"])([r],i)]);s.push(o),a+=n}return 0===s.length?_r([],[0,e]):Object(I["a"])(Object(E["a"])(s),[s.length,e])}const Ni=Object(h["b"])({frame_:Ei});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ji(t,e,n,r,i=Ai){null==r&&(r=ci(e));const a=Ni(t,e,n),s=Object(j["a"])(a,i(e));return Object(pr["a"])(s,r)}const Di=Object(h["b"])({stft_:ji});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(t,e,n,r,i="bilinear",a=0){const s=Object(l["a"])(t,"image","cropAndResize"),o=Object(l["a"])(e,"boxes","cropAndResize","float32"),h=Object(l["a"])(n,"boxInd","cropAndResize","int32"),p=o.shape[0];d["b"](4===s.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),d["b"](2===o.rank&&4===o.shape[1],()=>`Error in cropAndResize: boxes must be have size [${p},4] but had shape ${o.shape}.`),d["b"](1===h.rank&&h.shape[0]===p,()=>`Error in cropAndResize: boxInd must be have size [${p}] but had shape ${o.shape}.`),d["b"](2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),d["b"](r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),d["b"]("bilinear"===i||"nearest"===i,()=>"method must be bilinear or nearest, but was "+i);const f={image:s,boxes:o,boxInd:h},m={method:i,extrapolationValue:a,cropSize:r},g=u["a"].runKernel(c["L"],f,m);return g}const Ri=Object(h["b"])({cropAndResize_:$i});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(t){const e=Object(l["a"])(t,"image","flipLeftRight","float32");d["b"](4===e.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e},r=u["a"].runKernel(c["hb"],n,{});return r}const Pi=Object(h["b"])({flipLeftRight_:Fi});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(t){const e=Object(l["a"])(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];d["b"](e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),d["b"](1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Object(zt["a"])(e,i)}const Li=Object(h["b"])({grayscaleToRGB_:Mi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bi(t,e,n=0,r=.5){const i=Object(l["a"])(t,"image","rotateWithOffset","float32");d["b"](4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},s={radians:e,fillValue:n,center:r},o=u["a"].runKernel(c["Cc"],a,s);return o}const zi=Object(h["b"])({rotateWithOffset_:Bi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vi(t,e,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);const s=t.shape[0];return n=Math.min(n,s),d["b"](0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),d["b"](2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),d["b"](4===t.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]),d["b"](1===e.rank,()=>"scores must be a 1D tensor"),d["b"](e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was `+e.shape[0]),d["b"](0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ui(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=Object(l["a"])(t,"boxes","nonMaxSuppression","float32"),s=Object(l["a"])(e,"scores","nonMaxSuppression","float32"),o=Vi(a,s,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const d={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return u["a"].runKernel(c["bc"],{boxes:a,scores:s},d)}const Wi=Object(h["b"])({nonMaxSuppression_:Ui});var Gi=n("8389");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Hi(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=Object(l["a"])(t,"boxes","nonMaxSuppressionAsync"),s=Object(l["a"])(e,"scores","nonMaxSuppressionAsync"),o=Vi(a,s,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const u=await Promise.all([a.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:h}=Object(Gi["a"])(c,d,n,r,i);return a!==t&&a.dispose(),s!==e&&s.dispose(),Tr(h,"int32")}const qi=Hi;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ji(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const s=Object(l["a"])(t,"boxes","nonMaxSuppression"),o=Object(l["a"])(e,"scores","nonMaxSuppression"),d=Vi(s,o,n,r,i,a);n=d.maxOutputSize,r=d.iouThreshold,i=d.scoreThreshold,a=d.softNmsSigma;const h={boxes:s,scores:o},p={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},f=u["a"].runKernel(c["dc"],h,p);return{selectedIndices:f[0],selectedScores:f[1]}}const Ki=Object(h["b"])({nonMaxSuppressionWithScore_:Ji});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Xi(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const s=Object(l["a"])(t,"boxes","nonMaxSuppressionAsync"),o=Object(l["a"])(e,"scores","nonMaxSuppressionAsync"),u=Vi(s,o,n,r,i,a);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const c=await Promise.all([s.data(),o.data()]),d=c[0],h=c[1],{selectedIndices:p,selectedScores:f}=Object(Gi["c"])(d,h,n,r,i,a);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:Tr(p,"int32"),selectedScores:Tr(f)}}const Yi=Xi;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zi(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const s=Object(l["a"])(t,"boxes","nonMaxSuppression"),o=Object(l["a"])(e,"scores","nonMaxSuppression"),d=Vi(s,o,n,r,i,null),h=d.maxOutputSize,p=d.iouThreshold,f=d.scoreThreshold,m={boxes:s,scores:o},g={maxOutputSize:h,iouThreshold:p,scoreThreshold:f,padToMaxOutputSize:a},b=u["a"].runKernel(c["cc"],m,g);return{selectedIndices:b[0],validOutputs:b[1]}}const Qi=Object(h["b"])({nonMaxSuppressionPadded_:Zi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ta(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const s=Object(l["a"])(t,"boxes","nonMaxSuppressionAsync"),o=Object(l["a"])(e,"scores","nonMaxSuppressionAsync"),u=Vi(s,o,n,r,i,null),c=u.maxOutputSize,d=u.iouThreshold,h=u.scoreThreshold,[p,f]=await Promise.all([s.data(),o.data()]),{selectedIndices:m,validOutputs:g}=Object(Gi["b"])(p,f,c,d,h,a);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:Tr(m,"int32"),validOutputs:Object(Gn["a"])(g,"int32")}}const ea=ta;var na=n("73f8"),ra=n("0f86");
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ia(t,e="binary",n=!1,r=.5){const i=Object(l["a"])(t,"image","threshold"),a=.2989,s=.587,u=.114,c=i.shape[0]*i.shape[1];let h,p,f,m,g=Object(j["a"])(Tr([r]),255);if(d["b"](3===i.rank,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),d["b"](3===i.shape[2]||1===i.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),d["b"]("int32"===i.dtype||"float32"===i.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),d["b"]("otsu"===e||"binary"===e,()=>"Method must be binary or otsu, but was "+e),3===i.shape[2]){[h,p,f]=Object(fr["a"])(i,[1,1,1],-1);const t=Object(j["a"])(h,a),e=Object(j["a"])(p,s),n=Object(j["a"])(f,u);m=Object(o["a"])(Object(o["a"])(t,e),n)}else m=t;if("otsu"===e){const t=q(Object(T["a"])(Object(Un["a"])(m),"int32"),Object(Sr["a"])([]),256);g=aa(t,c)}const b=n?Object(ne["a"])(m,g):Object(Jt["a"])(m,g),y=Object(T["a"])(Object(j["a"])(b,255),"int32");return y}function aa(t,e){let n,r,i,a,s,u,c=Tr([-1]),l=Tr([0]),d=Tr([0]);for(let h=0;h<t.size-1;h++){n=Object($["a"])(t,0,h+1),r=Object($["a"])(t,h+1),s=Object(At["a"])(Object(xr["a"])(n),e),u=Object(At["a"])(Object(xr["a"])(r),e);const p=Object(xr["a"])(Object(j["a"])(n,An(0,n.size)));i=Object(At["a"])(p,Object(xr["a"])(n));const f=Object(Wt["a"])(r.shape,n.size),m=Object(o["a"])(An(0,r.size),f),g=Object(j["a"])(r,m);a=Object(At["a"])(Object(xr["a"])(g),Object(xr["a"])(r));const b=Object(Re["a"])(i,a),y=Object(Re["a"])(i,a),v=Object(j["a"])(s,u);d=Object(j["a"])(Object(j["a"])(v,b),y);const w=Object(Jt["a"])(d,l);l=Object(Lr["a"])(w,d,l),c=Object(Lr["a"])(w,Tr([h]),c)}return c}const sa=Object(h["b"])({threshold_:ia});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oa(t,e,n="nearest",r="constant",i=0,a){const s=Object(l["a"])(t,"image","transform","float32"),o=Object(l["a"])(e,"transforms","transform","float32");d["b"](4===s.rank,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),d["b"](2===o.rank&&(o.shape[0]===s.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),d["b"](null==a||2===a.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const h={image:s,transforms:o},p={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return u["a"].runKernel(c["ld"],h,p)}const ua=Object(h["b"])({transform_:oa});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(t,e,n){Object(d["b"])(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Object(d["b"])(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=Object(l["a"])(t,"a","bandPart");Object(d["b"])(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,s]=r.shape.slice(-2);if(!(e<=a))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`);if(!(n<=s))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`);e<0&&(e=a),n<0&&(n=s);const o=Object(I["a"])(An(0,a,1,"int32"),[-1,1]),u=An(0,s,1,"int32"),c=Object(Re["a"])(o,u),h=Object(le["a"])(Object(ne["a"])(c,Object(Gn["a"])(+e,"int32")),Object(Kt["a"])(c,Object(Gn["a"])(-n,"int32"))),p=Object(Ur["a"])([a,s],r.dtype);return Object(I["a"])(Object(yr["a"])(Object(Fr["a"])(Object(I["a"])(r,[-1,a,s])).map(t=>Object(Lr["a"])(h,t,p))),i)}const la=Object(h["b"])({bandPart_:ca});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function da(t){let e;if(Array.isArray(t)){e=!1,Object(d["b"])(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)Object(d["b"])(t[e].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[e].shape[0]} vs. ${n})`)}else e=!0,t=Object(fr["a"])(t,t.shape[0],0).map(t=>Object(br["a"])(t,[0]));Object(d["b"])(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(u["a"].tidy(()=>{let t=r[i];if(i>0)for(let e=0;e<i;++e){const r=Object(j["a"])(Object(xr["a"])(Object(j["a"])(n[e],t)),n[e]);t=Object(Re["a"])(t,r)}return Object(At["a"])(t,Object(Jr["a"])(t,"euclidean"))}));return e?Object(yr["a"])(n,0):n}const ha=Object(h["b"])({gramSchmidt_:da});var pa=n("c04e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fa(t,e=!1){if(Object(d["b"])(t.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+t.rank),2===t.rank)return ma(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=Object(Fr["a"])(Object(I["a"])(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];r.forEach(t=>{const[n,r]=ma(t,e);i.push(n),a.push(r)});const s=Object(I["a"])(Object(yr["a"])(i,0),t.shape),o=Object(I["a"])(Object(yr["a"])(a,0),t.shape);return[s,o]}}function ma(t,e=!1){return u["a"].tidy(()=>{Object(d["b"])(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=Ut(n),a=Object(tt["a"])(t);const s=_r([[1]],[1,1]);let o=Object(tt["a"])(s);const c=n>=r?r:n;for(let t=0;t<c;++t){const e=a,c=o,l=i;[o,a,i]=u["a"].tidy(()=>{const e=Object($["a"])(a,[t,t],[n-t,1]),u=Object(Jr["a"])(e),c=Object($["a"])(a,[t,t],[1,1]),l=Object(Lr["a"])(Object(Jt["a"])(c,0),_r([[-1]]),_r([[1]])),d=Object(Re["a"])(c,Object(j["a"])(l,u)),h=Object(At["a"])(e,d);o=1===h.shape[0]?Object(tt["a"])(s):Object(E["a"])([s,Object($["a"])(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=Object(Ve["a"])(Object(At["a"])(Object(N["a"])(l,d),u)),f=Object($["a"])(a,[t,0],[n-t,r]),m=Object(j["a"])(p,o),g=Object(qr["a"])(o);if(0===t)a=Object(Re["a"])(f,Object(N["a"])(m,Object(N["a"])(g,f)));else{const e=Object(Re["a"])(f,Object(N["a"])(m,Object(N["a"])(g,f)));a=Object(E["a"])([Object($["a"])(a,[0,0],[t,r]),e],0)}const b=Object(qr["a"])(m),y=Object($["a"])(i,[0,t],[n,i.shape[1]-t]);if(0===t)i=Object(Re["a"])(y,Object(N["a"])(Object(N["a"])(y,o),b));else{const e=Object(Re["a"])(y,Object(N["a"])(Object(N["a"])(y,o),b));i=Object(E["a"])([Object($["a"])(i,[0,0],[n,t]),e],1)}return[o,a,i]}),Object(pa["d"])([e,c,l])}return!e&&n>r&&(i=Object($["a"])(i,[0,0],[n,r]),a=Object($["a"])(a,[0,0],[r,r])),[i,a]})}const ga=Object(h["b"])({qr_:fa});var ba=n("57e0");function ya(t,e,n=ba["a"].SUM_BY_NONZERO_WEIGHTS){const r=Object(l["a"])(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=Object(l["a"])(e,"weights","computeWeightedLoss"));const a=null==i?r:Object(j["a"])(r,i);if(n===ba["a"].NONE)return a;if(n===ba["a"].SUM)return Object(xr["a"])(a);if(n===ba["a"].MEAN){if(null==i)return Object(Te["a"])(a);{const t=r.size/i.size,e=Object(At["a"])(Object(xr["a"])(a),Object(xr["a"])(i));return t>1?Object(At["a"])(e,Object(Gn["a"])(t)):e}}if(n===ba["a"].SUM_BY_NONZERO_WEIGHTS){if(null==i)return Object(At["a"])(Object(xr["a"])(a),Object(Gn["a"])(r.size));{const t=Object(j["a"])(i,Object(_e["a"])(r.shape)),e=Object(T["a"])(Object(xr["a"])(Object(Ue["a"])(t,Object(Gn["a"])(0))),"float32");return Object(At["a"])(Object(xr["a"])(a),e)}}throw Error("Unknown reduction: "+n)}const va=Object(h["b"])({computeWeightedLoss_:ya});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wa(t,e,n,r=ba["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object(l["a"])(t,"labels","absoluteDifference"),s=Object(l["a"])(e,"predictions","absoluteDifference");let o=null;null!=n&&(o=Object(l["a"])(n,"weights","absoluteDifference")),Object(d["e"])(a.shape,s.shape,"Error in absoluteDifference: ");const u=Object(i["a"])(Object(Re["a"])(a,s));return va(u,o,r)}const xa=Object(h["b"])({absoluteDifference_:wa});function Oa(t,e,n,r,i=ba["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object(l["a"])(t,"labels","cosineDistance"),s=Object(l["a"])(e,"predictions","cosineDistance");let o=null;null!=r&&(o=Object(l["a"])(r,"weights","cosineDistance")),Object(d["e"])(a.shape,s.shape,"Error in cosineDistance: ");const u=Object(Gn["a"])(1),c=Object(Re["a"])(u,Object(xr["a"])(Object(j["a"])(a,s),n,!0));return va(c,o,i)}const Sa=Object(h["b"])({cosineDistance_:Oa});function ka(t,e,n,r=ba["a"].SUM_BY_NONZERO_WEIGHTS){let i=Object(l["a"])(t,"labels","hingeLoss");const a=Object(l["a"])(e,"predictions","hingeLoss");let s=null;null!=n&&(s=Object(l["a"])(n,"weights","hingeLoss")),Object(d["e"])(i.shape,a.shape,"Error in hingeLoss: ");const o=Object(Gn["a"])(1);i=Object(Re["a"])(Object(j["a"])(Object(Gn["a"])(2),i),o);const u=Object(jn["a"])(Object(Re["a"])(o,Object(j["a"])(i,a)));return va(u,s,r)}const Ta=Object(h["b"])({hingeLoss_:ka});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _a(t,e,n,r=1,a=ba["a"].SUM_BY_NONZERO_WEIGHTS){const s=Object(l["a"])(t,"labels","huberLoss"),u=Object(l["a"])(e,"predictions","huberLoss");let c=null;null!=n&&(c=Object(l["a"])(n,"weights","huberLoss")),Object(d["e"])(s.shape,u.shape,"Error in huberLoss: ");const h=Object(Gn["a"])(r),p=Object(i["a"])(Object(Re["a"])(u,s)),f=Object(Ee["a"])(p,h),m=Object(Re["a"])(p,f),g=Object(o["a"])(Object(j["a"])(Object(Gn["a"])(.5),Object($e["a"])(f)),Object(j["a"])(h,m));return va(g,c,a)}const Ia=Object(h["b"])({huberLoss_:_a});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ca(t,e,n,r=1e-7,i=ba["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object(l["a"])(t,"labels","logLoss"),s=Object(l["a"])(e,"predictions","logLoss");let u=null;null!=n&&(u=Object(l["a"])(n,"weights","logLoss")),Object(d["e"])(a.shape,s.shape,"Error in logLoss: ");const c=Object(Gn["a"])(1),h=Object(Gn["a"])(r),p=Object(Ve["a"])(Object(j["a"])(a,Object(ae["a"])(Object(o["a"])(s,h)))),f=Object(j["a"])(Object(Re["a"])(c,a),Object(ae["a"])(Object(o["a"])(Object(Re["a"])(c,s),h))),m=Object(Re["a"])(p,f);return va(m,u,i)}const Aa=Object(h["b"])({logLoss_:Ca});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(t,e,n,r=ba["a"].SUM_BY_NONZERO_WEIGHTS){const i=Object(l["a"])(t,"labels","meanSquaredError"),a=Object(l["a"])(e,"predictions","meanSquaredError");let s=null;null!=n&&(s=Object(l["a"])(n,"weights","meanSquaredError")),Object(d["e"])(i.shape,a.shape,"Error in meanSquaredError: ");const o=Object(gr["a"])(i,a);return va(o,s,r)}const Na=Object(h["b"])({meanSquaredError_:Ea});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(t,e){const n=Object(l["a"])(t,"labels","sigmoidCrossEntropyWithLogits"),r=Object(l["a"])(e,"logits","sigmoidCrossEntropyWithLogits");Object(d["e"])(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Object(jn["a"])(r),s=Object(j["a"])(r,n),u=Object(se["a"])(Object(Mt["a"])(Object(Ve["a"])(Object(i["a"])(r))));return Object(o["a"])(Object(Re["a"])(a,s),u)}function Da(t,e,n,r=0,i=ba["a"].SUM_BY_NONZERO_WEIGHTS){let a=Object(l["a"])(t,"multiClassLabels","sigmoidCrossEntropy");const s=Object(l["a"])(e,"logits","sigmoidCrossEntropy");let u=null;if(null!=n&&(u=Object(l["a"])(n,"weights","sigmoidCrossEntropy")),Object(d["e"])(a.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=Object(Gn["a"])(r),e=Object(Gn["a"])(1),n=Object(Gn["a"])(.5);a=Object(o["a"])(Object(j["a"])(a,Object(Re["a"])(e,t)),Object(j["a"])(n,t))}const c=ja(a,s);return va(c,u,i)}const $a=Object(h["b"])({sigmoidCrossEntropy_:Da});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ra(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was `+n);const r=Object(pi["a"])((t,e,r)=>{const i=!0,a=Object(ce["a"])(e,[n],i),s=Object(Re["a"])(Object(T["a"])(e,"float32"),a);r([t,s]);const o=Object(Ve["a"])(Object(j["a"])(s,t)),u=Object(xr["a"])(o,[n]),c=(t,e)=>{const[r,i]=e,a=Object(De["e"])(t.shape,[n]);return[Object(j["a"])(Object(I["a"])(t,a),Object(Re["a"])(Object(T["a"])(r,"float32"),Object(Mt["a"])(i))),Object(j["a"])(Object(I["a"])(t,a),Object(Re["a"])(Object(Mt["a"])(i),Object(T["a"])(r,"float32")))]};return{value:u,gradFunc:c}});return r(t,e)}function Fa(t,e,n,r=0,i=ba["a"].SUM_BY_NONZERO_WEIGHTS){let a=Object(l["a"])(t,"onehotLabels","softmaxCrossEntropy");const s=Object(l["a"])(e,"logits","softmaxCrossEntropy");let u=null;if(null!=n&&(u=Object(l["a"])(n,"weights","softmaxCrossEntropy")),Object(d["e"])(a.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){const t=Object(Gn["a"])(r),e=Object(Gn["a"])(1),n=Object(Gn["a"])(a.shape[1]);a=Object(o["a"])(Object(j["a"])(a,Object(Re["a"])(e,t)),Object(At["a"])(t,n))}const c=Ra(a,s);return va(c,u,i)}const Pa=Object(h["b"])({softmaxCrossEntropy_:Fa});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ma(t,e,n,r){const i=Object(l["a"])(t,"indices","sparseFillEmptyRows","int32"),a=Object(l["a"])(e,"values","sparseFillEmptyRows"),s=Object(l["a"])(n,"denseShape","sparseFillEmptyRows","int32"),o=Object(l["a"])(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==i.rank)throw new Error("Indices should be Tensor2D but received shape\n        "+i.shape);if(1!==a.rank)throw new Error("Values should be Tensor1D but received shape "+a.shape);if(1!==s.rank)throw new Error("Dense shape should be Tensor1D but received shape "+s.shape);if(0!==o.rank)throw new Error("Default value should be a scalar but received shape "+o.shape);const d={indices:i,values:a,denseShape:s,defaultValue:o},h=u["a"].runKernel(c["Rc"],d);return{outputIndices:h[0],outputValues:h[1],emptyRowIndicator:h[2],reverseIndexMap:h[3]}}const La=Object(h["b"])({sparseFillEmptyRows_:Ma});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ba(t,e,n){const r=Object(l["a"])(t,"inputIndices","sparseReshape","int32"),i=Object(l["a"])(e,"inputShape","sparseReshape","int32"),a=Object(l["a"])(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        "+r.shape);if(1!==i.rank)throw new Error("Input shape should be Tensor1D but received shape "+i.shape);if(1!==a.rank)throw new Error("New shape should be Tensor1D but received shape "+a.shape);const s={inputIndices:r,inputShape:i,newShape:a},o=u["a"].runKernel(c["Sc"],s);return{outputIndices:o[0],outputShape:o[1]}}const za=Object(h["b"])({sparseReshape_:Ba});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Va(t,e,n){const r=Object(l["a"])(t,"data","sparseSegmentMean"),i=Object(l["a"])(e,"indices","sparseSegmentMean","int32"),a=Object(l["a"])(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n          "+i.shape);if(1!==a.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          "+a.shape);const s={data:r,indices:i,segmentIds:a};return u["a"].runKernel(c["Tc"],s)}const Ua=Object(h["b"])({sparseSegmentMean_:Va});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wa(t,e,n){const r=Object(l["a"])(t,"data","sparseSegmentSum"),i=Object(l["a"])(e,"indices","sparseSegmentSum","int32"),a=Object(l["a"])(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n         "+i.shape);if(1!==a.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         "+a.shape);const s={data:r,indices:i,segmentIds:a};return u["a"].runKernel(c["Uc"],s)}const Ga=Object(h["b"])({sparseSegmentSum_:Wa});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ha(t,e,n,r,i,a,s,o){const d=Object(l["a"])(t,"data","stringNGrams","string");if("string"!==d.dtype)throw new Error("Data must be of datatype string");if(1!==d.shape.length)throw new Error("Data must be a vector, saw: "+d.shape);const h=Object(l["a"])(e,"dataSplits","stringNGrams");if("int32"!==h.dtype)throw new Error("Data splits must be of datatype int32");const p={separator:n,nGramWidths:r,leftPad:i,rightPad:a,padWidth:s,preserveShortSequences:o},f={data:d,dataSplits:h},m=u["a"].runKernel(c["cd"],f,p);return{nGrams:m[0],nGramsSplits:m[1]}}const qa=Object(h["b"])({stringNGrams_:Ha});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ja(t,e,n=!0){const r=Object(l["a"])(t,"input","stringSplit","string"),i=Object(l["a"])(e,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape "+r.shape);if(0!==i.rank)throw new Error("Delimiter should be a scalar but received shape "+i.shape);const a={skipEmpty:n},s={input:r,delimiter:i},o=u["a"].runKernel(c["dd"],s,a);return{indices:o[0],values:o[1],shape:o[2]}}const Ka=Object(h["b"])({stringSplit_:Ja});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(t,e){const n=Object(l["a"])(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return u["a"].runKernel(c["ed"],i,r)}const Ya=Object(h["b"])({stringToHashBucketFast_:Xa}),Za={fft:lr["a"],ifft:dr["a"],rfft:pr["a"],irfft:hr["a"]},Qa={hammingWindow:Ii,hannWindow:Ai,frame:Ni,stft:Di},ts={flipLeftRight:Pi,grayscaleToRGB:Li,resizeNearestNeighbor:ra["a"],resizeBilinear:na["a"],rotateWithOffset:zi,cropAndResize:Ri,nonMaxSuppression:Wi,nonMaxSuppressionAsync:qi,nonMaxSuppressionWithScore:Ki,nonMaxSuppressionWithScoreAsync:Yi,nonMaxSuppressionPadded:Qi,nonMaxSuppressionPaddedAsync:ea,threshold:sa,transform:ua},es={bandPart:la,gramSchmidt:ha,qr:ga},ns={absoluteDifference:xa,computeWeightedLoss:va,cosineDistance:Sa,hingeLoss:Ta,huberLoss:Ia,logLoss:Aa,meanSquaredError:Na,sigmoidCrossEntropy:$a,softmaxCrossEntropy:Pa},rs={sparseFillEmptyRows:La,sparseReshape:za,sparseSegmentMean:Ua,sparseSegmentSum:Ga},is={stringNGrams:qa,stringSplit:Ka,stringToHashBucketFast:Ya};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},1359:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","log","float32"),n={x:e};return r["a"].runKernel(i["Eb"],n)}const u=Object(s["b"])({log_:o})},"13d2":function(t,e,n){var r=n("e330"),i=n("d039"),a=n("1626"),s=n("1a2d"),o=n("83ab"),u=n("5e77").CONFIGURABLE,c=n("8925"),l=n("69f3"),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,m=r("".slice),g=r("".replace),b=r([].join),y=o&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),v=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===m(p(e),0,7)&&(e="["+g(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||u&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=d(t);return s(r,"source")||(r.source=b(v,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return a(this)&&h(this).source||c(this)}),"toString")},"14d9":function(t,e,n){"use strict";var r=n("23e7"),i=n("7b0b"),a=n("07fa"),s=n("3a34"),o=n("3511"),u=n("d039"),c=u((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=c||!l();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var e=i(this),n=a(e),r=arguments.length;o(n+r);for(var u=0;u<r;u++)e[n]=arguments[u],n++;return s(e,n),n}})},1626:function(t,e,n){var r=n("8ea1"),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},"163a":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","sqrt","float32"),n={x:e};return r["a"].runKernel(i["Xc"],n)}const u=Object(s["b"])({sqrt_:o})},"17a3":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0,n=!1,s=!1){const o=Object(a["a"])(t,"x","cumprod"),u={x:o},c={axis:e,exclusive:n,reverse:s};return r["a"].runKernel(i["M"],u,c)}const u=Object(s["b"])({cumprod_:o})},1906:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]},"1a2d":function(t,e,n){var r=n("e330"),i=n("7b0b"),a=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return a(i(t),e)}},"1ab7":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("6ad5"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){Object(a["b"])("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return r["a"].runKernel(i["fb"],e)}const u=Object(s["b"])({fft_:o})},"1ba2":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","expm1"),n={x:e};return r["a"].runKernel(i["eb"],n)}const u=Object(s["b"])({expm1_:o})},"1d2b":function(t,e,n){"use strict";function r(t,e){return function(){return t.apply(e,arguments)}}n.d(e,"a",(function(){return r}))},"1d80":function(t,e,n){var r=n("7234"),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},"1df6":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","sign"),n={x:e};return r["a"].runKernel(i["Kc"],n)}const u=Object(s["b"])({sign_:o})},"1e68":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0,n=!1,s=!1){const o=Object(a["a"])(t,"x","cumsum"),u={x:o},c={axis:e,exclusive:n,reverse:s};return r["a"].runKernel(i["N"],u,c)}const u=Object(s["b"])({cumsum_:o})},"1fb5":function(t,e,n){"use strict";e.byteLength=l,e.toByteArray=h,e.fromByteArray=m;for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function l(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function d(t,e,n){return 3*(e+n)/4-n}function h(t){var e,n,r=c(t),s=r[0],o=r[1],u=new a(d(t,s,o)),l=0,h=o>0?s-4:s;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===o&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===o&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u}function p(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function f(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(p(r));return i.join("")}function m(t){for(var e,n=t.length,i=n%3,a=[],s=16383,o=0,u=n-i;o<u;o+=s)a.push(f(t,o,o+s>u?u:o+s));return 1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"220f":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","asin"),n={x:e};return r["a"].runKernel(i["j"],n)}const u=Object(s["b"])({asin_:o})},"23bf":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r,i,a,s,o;n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),function(t){t["R0"]="R0",t["R1"]="R1",t["R2"]="R2",t["R3"]="R3",t["R4"]="R4",t["R5"]="R5",t["R6"]="R6"}(r||(r={})),function(t){t["float32"]="float32",t["int32"]="int32",t["bool"]="int32",t["complex64"]="complex64"}(i||(i={})),function(t){t["float32"]="float32",t["int32"]="int32",t["bool"]="bool",t["complex64"]="complex64"}(a||(a={})),function(t){t["float32"]="float32",t["int32"]="float32",t["bool"]="float32",t["complex64"]="complex64"}(s||(s={})),function(t){t["float32"]="complex64",t["int32"]="complex64",t["bool"]="complex64",t["complex64"]="complex64"}(o||(o={}));const u={float32:s,int32:i,bool:a,complex64:o};function c(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return u[t][e]}function l(t){return c(t,"int32")}},"23cb":function(t,e,n){var r=n("5926"),i=Math.max,a=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):a(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,a=n("9112"),s=n("cb2d"),o=n("6374"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,d,h,p,f,m=t.target,g=t.global,b=t.stat;if(l=g?r:b?r[m]||o(m,{}):(r[m]||{}).prototype,l)for(d in e){if(p=e[d],t.dontCallGetSet?(f=i(l,d),h=f&&f.value):h=l[d],n=c(g?d:m+(b?".":"#")+d,t.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;u(p,h)}(t.sham||h&&h.sham)&&a(p,"sham",!0),s(l,d,p,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),a=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},"24b0":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"input","imag"),n={input:e};return r["a"].runKernel(i["ub"],n)}const u=Object(s["b"])({imag_:o})},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,a,s,o){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),s?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=u):i&&(u=o?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},"289d":function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e,n){return f=p()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),a=new i;return n&&h(a,n.prototype),a},f.apply(null,arguments)}function m(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function g(t){var e="function"===typeof Map?new Map:void 0;return g=function(t){if(null===t||!m(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)},g(t)}function b(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function y(t,e){if(null==t)return{};var n,r,i=b(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?v(t):e}function x(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function O(t,e){return _(t)||C(t,e)||E()}function S(t){return _(t)||I(t)||E()}function k(t){return T(t)||I(t)||A()}function T(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _(t){if(Array.isArray(t))return t}function I(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function C(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function N(t){return t<0?-1:t>0?1:0}var j=Math.sign||N;function D(t,e){return(t&e)===e}function $(t,e){return(t%e+e)%e}function R(t,e,n){return Math.max(e,Math.min(n,t))}function F(t,e){return e.split(".").reduce((function(t,e){return t?t[e]:null}),t)}function P(t,e,n){if(!t)return-1;if(!n||"function"!==typeof n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(t[r],e))return r;return-1}var M=function(t){return"object"===r(t)&&!Array.isArray(t)},L=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r||!Object.assign){var i=function(t){return M(n[t])&&null!==e&&e.hasOwnProperty(t)&&M(e[t])},a=Object.getOwnPropertyNames(n).map((function(a){return o({},a,i(a)?t(e[a],n[a],r):n[a])})).reduce((function(t,e){return c({},t,{},e)}),{});return c({},e,{},a)}return Object.assign(e,n)},B=L,z={Android:function(){return"undefined"!==typeof window&&window.navigator.userAgent.match(/Android/i)},BlackBerry:function(){return"undefined"!==typeof window&&window.navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return"undefined"!==typeof window&&(window.navigator.userAgent.match(/iPhone|iPad|iPod/i)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1)},Opera:function(){return"undefined"!==typeof window&&window.navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return"undefined"!==typeof window&&window.navigator.userAgent.match(/IEMobile/i)},any:function(){return z.Android()||z.BlackBerry()||z.iOS()||z.Opera()||z.Windows()}};function V(t){"undefined"!==typeof t.remove?t.remove():"undefined"!==typeof t.parentNode&&null!==t.parentNode&&t.parentNode.removeChild(t)}function U(t){var e=document.createElement("div");e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.width="100%";var n=document.createElement("div");return e.appendChild(n),n.appendChild(t),document.body.appendChild(e),e}function W(t){return t&&t._isVue}function G(t){return t?t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):t}function H(t){return t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t}function q(t,e){var n=JSON.parse(JSON.stringify(t)),r=function(t){return function(e,n){return t.map((function(t){var r=1;"-"===t[0]&&(r=-1,t=t.substring(1));var i=F(e,t),a=F(n,t);return i>a?r:i<a?-r:0})).reduce((function(t,e){return t||e}),0)}};return n.sort(r(e))}function J(t){return void 0===t?null:isNaN(t)?t:t+"px"}function K(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",n=[],r=0;r<12;r++)n.push(new Date(2e3,r,15));var i=new Intl.DateTimeFormat(t,{month:e});return n.map((function(t){return i.format(t)}))}function X(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"narrow",n=[],r=0;r<7;r++){var i=new Date(2e3,0,r+1);n[i.getDay()]=i}var a=new Intl.DateTimeFormat(t,{weekday:e});return n.map((function(t){return a.format(t)}))}function Y(t,e){var n=e.match(t);return t.toString().match(/<(.+?)>/g).map((function(t){var e=t.match(/<(.+)>/);return!e||e.length<=0?null:t.match(/<(.+)>/)[1]})).reduce((function(t,e,r,i){return n&&n.length>r?t[e]=n[r+1]:t[e]=null,t}),{})}function Z(){return new Promise((function(t){var e=new Image;e.onerror=function(){return t(!1)},e.onload=function(){return t(1===e.width)},e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})).catch((function(){return!1}))}function Q(t){return"shadowRoot"in t.$root.$options}var tt,et=function(t){return void 0!==t},nt=function(t){return null===t||void 0===t},rt={defaultContainerElement:null,defaultIconPack:"mdi",defaultIconComponent:null,defaultIconPrev:"chevron-left",defaultIconNext:"chevron-right",defaultLocale:void 0,defaultDialogConfirmText:null,defaultDialogCancelText:null,defaultSnackbarDuration:3500,defaultSnackbarPosition:null,defaultToastDuration:2e3,defaultToastPosition:null,defaultNotificationDuration:2e3,defaultNotificationPosition:null,defaultTooltipType:"is-primary",defaultTooltipDelay:null,defaultTooltipCloseDelay:null,defaultSidebarDelay:null,defaultInputAutocomplete:"on",defaultDateFormatter:null,defaultDateParser:null,defaultDateCreator:null,defaultTimeCreator:null,defaultDayNames:null,defaultMonthNames:null,defaultFirstDayOfWeek:null,defaultUnselectableDaysOfWeek:null,defaultTimeFormatter:null,defaultTimeParser:null,defaultModalCanCancel:["escape","x","outside","button"],defaultModalScroll:null,defaultDatepickerMobileNative:!0,defaultTimepickerMobileNative:!0,defaultNoticeQueue:!0,defaultInputHasCounter:!0,defaultTaginputHasCounter:!0,defaultUseHtml5Validation:!0,defaultDropdownMobileModal:!0,defaultFieldLabelPosition:null,defaultDatepickerYearsRange:[-100,10],defaultDatepickerNearbyMonthDays:!0,defaultDatepickerNearbySelectableMonthDays:!1,defaultDatepickerShowWeekNumber:!1,defaultDatepickerWeekNumberClickable:!1,defaultDatepickerMobileModal:!0,defaultTrapFocus:!0,defaultAutoFocus:!0,defaultButtonRounded:!1,defaultSwitchRounded:!0,defaultCarouselInterval:3500,defaultTabsExpanded:!1,defaultTabsAnimated:!0,defaultTabsType:null,defaultStatusIcon:!0,defaultProgrammaticPromise:!1,defaultLinkTags:["a","button","input","router-link","nuxt-link","n-link","RouterLink","NuxtLink","NLink"],defaultImageWebpFallback:null,defaultImageLazy:!0,defaultImageResponsive:!0,defaultImageRatio:null,defaultImageSrcsetFormatter:null,defaultBreadcrumbTag:"a",defaultBreadcrumbAlign:"is-left",defaultBreadcrumbSeparator:"",defaultBreadcrumbSize:"is-medium",customIconPacks:null},it=function(t){rt=t},at=function(t){tt=t};function st(t,e,n,r,i,a,s,o,u,c){"boolean"!==typeof s&&(u=o,o=s,s=!1);var l,d="function"===typeof n?n.options:n;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),r&&(d._scopeId=r),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=l):e&&(l=s?function(){e.call(this,c(this.$root.$options.shadowRoot))}:function(t){e.call(this,o(t))}),l)if(d.functional){var h=d.render;d.render=function(t,e){return l.call(e),h(t,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,l):[l]}return n}var ot=st,ut=function(t){"undefined"!==typeof window&&window.Vue&&window.Vue.use(t)},ct=function(t,e){t.component(e.name,e)},lt=function(t,e,n){t.prototype.$buefy||(t.prototype.$buefy={}),t.prototype.$buefy[e]=n},dt={props:{size:String,expanded:Boolean,loading:Boolean,rounded:Boolean,icon:String,iconPack:String,autocomplete:String,maxlength:[Number,String],useHtml5Validation:{type:Boolean,default:function(){return rt.defaultUseHtml5Validation}},validationMessage:String,locale:{type:[String,Array],default:function(){return rt.defaultLocale}},statusIcon:{type:Boolean,default:function(){return rt.defaultStatusIcon}}},data:function(){return{isValid:!0,isFocused:!1,newIconPack:this.iconPack||rt.defaultIconPack}},computed:{parentField:function(){for(var t=this.$parent,e=0;e<3;e++)t&&!t.$data._isField&&(t=t.$parent);return t},statusType:function(){var t=this.parentField||{},e=t.newType;if(e){if("string"===typeof e)return e;for(var n in e)if(e[n])return n}},statusMessage:function(){if(this.parentField)return this.parentField.newMessage||this.parentField.$slots.message},iconSize:function(){switch(this.size){case"is-small":return this.size;case"is-medium":return;case"is-large":return"mdi"===this.newIconPack?"is-medium":""}}},methods:{focus:function(){var t=this.getElement();void 0!==t&&this.$nextTick((function(){t&&t.focus()}))},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t),this.checkHtml5Validity()},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},getElement:function(){var t=this.$refs[this.$data._elementRef];while(W(t))t=t.$refs[t.$data._elementRef];return t},setInvalid:function(){var t="is-danger",e=this.validationMessage||this.getElement().validationMessage;this.setValidity(t,e)},setValidity:function(t,e){var n=this;this.$nextTick((function(){n.parentField&&(n.parentField.type||(n.parentField.newType=t),n.parentField.message||(n.parentField.newMessage=e))}))},checkHtml5Validity:function(){if(this.useHtml5Validation){var t=this.getElement();if(void 0!==t)return t.checkValidity()?(this.setValidity(null,null),this.isValid=!0):(this.setInvalid(),this.isValid=!1),this.isValid}}}},ht={sizes:{default:"mdi-24px","is-small":null,"is-medium":"mdi-36px","is-large":"mdi-48px"},iconPrefix:"mdi-"},pt=function(){var t=rt&&rt.defaultIconComponent?"":"fa-";return{sizes:{default:null,"is-small":null,"is-medium":t+"lg","is-large":t+"2x"},iconPrefix:t,internalIcons:{information:"info-circle",alert:"exclamation-triangle","alert-circle":"exclamation-circle","chevron-right":"angle-right","chevron-left":"angle-left","chevron-down":"angle-down","eye-off":"eye-slash","menu-down":"caret-down","menu-up":"caret-up","close-circle":"times-circle"}}},ft=function(){var t={mdi:ht,fa:pt(),fas:pt(),far:pt(),fad:pt(),fab:pt(),fal:pt(),"fa-solid":pt(),"fa-regular":pt(),"fa-light":pt(),"fa-thin":pt(),"fa-duotone":pt(),"fa-brands":pt()};return rt&&rt.customIconPacks&&(t=B(t,rt.customIconPacks,!0)),t},mt={name:"BIcon",props:{type:[String,Object],component:String,pack:String,icon:String,size:String,customSize:String,customClass:String,both:Boolean},computed:{iconConfig:function(){var t=ft();return t[this.newPack]},iconPrefix:function(){return this.iconConfig&&this.iconConfig.iconPrefix?this.iconConfig.iconPrefix:""},newIcon:function(){return"".concat(this.iconPrefix).concat(this.getEquivalentIconOf(this.icon))},newPack:function(){return this.pack||rt.defaultIconPack},newType:function(){if(this.type){var t=[];if("string"===typeof this.type)t=this.type.split("-");else for(var e in this.type)if(this.type[e]){t=e.split("-");break}if(!(t.length<=1)){var n=t,r=S(n),i=r.slice(1);return"has-text-".concat(i.join("-"))}}},newCustomSize:function(){return this.customSize||this.customSizeByPack},customSizeByPack:function(){if(this.iconConfig&&this.iconConfig.sizes){if(this.size&&void 0!==this.iconConfig.sizes[this.size])return this.iconConfig.sizes[this.size];if(this.iconConfig.sizes.default)return this.iconConfig.sizes.default}return null},useIconComponent:function(){return this.component||rt.defaultIconComponent}},methods:{getEquivalentIconOf:function(t){return this.both&&this.iconConfig&&this.iconConfig.internalIcons&&this.iconConfig.internalIcons[t]?this.iconConfig.internalIcons[t]:t}}};const gt=mt;var bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon",class:[t.newType,t.size]},[t.useIconComponent?n(t.useIconComponent,{tag:"component",class:[t.customClass],attrs:{icon:[t.newPack,t.newIcon],size:t.newCustomSize}}):n("i",{class:[t.newPack,t.newIcon,t.newCustomSize,t.customClass]})],1)},yt=[];const vt=void 0,wt=void 0,xt=void 0,Ot=!1;var St=ot({render:bt,staticRenderFns:yt},vt,gt,wt,Ot,xt,void 0,void 0),kt={name:"BInput",components:o({},St.name,St),mixins:[dt],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},lazy:{type:Boolean,default:!1},passwordReveal:Boolean,iconClickable:Boolean,hasCounter:{type:Boolean,default:function(){return rt.defaultInputHasCounter}},customClass:{type:String,default:""},iconRight:String,iconRightClickable:Boolean,iconRightType:String},data:function(){return{newValue:this.value,newType:this.type,newAutocomplete:this.autocomplete||rt.defaultInputAutocomplete,isPasswordVisible:!1,_elementRef:"textarea"===this.type?"textarea":"input"}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}},rootClasses:function(){return[this.iconPosition,this.size,{"is-expanded":this.expanded,"is-loading":this.loading,"is-clearfix":!this.hasMessage}]},inputClasses:function(){return[this.statusType,this.size,{"is-rounded":this.rounded}]},hasIconRight:function(){return this.passwordReveal||this.loading||this.statusIcon&&this.statusTypeIcon||this.iconRight},rightIcon:function(){return this.passwordReveal?this.passwordVisibleIcon:this.iconRight?this.iconRight:this.statusTypeIcon},rightIconType:function(){return this.passwordReveal?"is-primary":this.iconRight?this.iconRightType||null:this.statusType},iconPosition:function(){var t="";return this.icon&&(t+="has-icons-left "),this.hasIconRight&&(t+="has-icons-right"),t},statusTypeIcon:function(){switch(this.statusType){case"is-success":return"check";case"is-danger":return"alert-circle";case"is-info":return"information";case"is-warning":return"alert"}},hasMessage:function(){return!!this.statusMessage},passwordVisibleIcon:function(){return this.isPasswordVisible?"eye-off":"eye"},valueLength:function(){return"string"===typeof this.computedValue?Array.from(this.computedValue).length:"number"===typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value:function(t){this.newValue=t},type:function(t){this.newType=t}},methods:{togglePasswordVisibility:function(){var t=this;this.isPasswordVisible=!this.isPasswordVisible,this.newType=this.isPasswordVisible?"text":"password",this.$nextTick((function(){t.focus()}))},iconClick:function(t,e){var n=this;this.$emit(t,e),this.$nextTick((function(){n.focus()}))},rightIconClick:function(t){this.passwordReveal?this.togglePasswordVisibility():this.iconRightClickable&&this.iconClick("icon-right-click",t)},onInput:function(t){if(!this.lazy){var e=t.target.value;this.updateValue(e)}},onChange:function(t){if(this.lazy){var e=t.target.value;this.updateValue(e)}},updateValue:function(t){this.computedValue=t,!this.isValid&&this.checkHtml5Validity()}}};const Tt=kt;var _t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:t.rootClasses},["textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"input",class:[t.inputClasses,t.customClass],attrs:{type:t.newType,autocomplete:t.newAutocomplete,maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,change:t.onChange,blur:t.onBlur,focus:t.onFocus}},"input",t.$attrs,!1)):n("textarea",t._b({ref:"textarea",staticClass:"textarea",class:[t.inputClasses,t.customClass],attrs:{maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,change:t.onChange,blur:t.onBlur,focus:t.onFocus}},"textarea",t.$attrs,!1)),t.icon?n("b-icon",{staticClass:"is-left",class:{"is-clickable":t.iconClickable},attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize},nativeOn:{click:function(e){return t.iconClick("icon-click",e)}}}):t._e(),!t.loading&&t.hasIconRight?n("b-icon",{staticClass:"is-right",class:{"is-clickable":t.passwordReveal||t.iconRightClickable},attrs:{icon:t.rightIcon,pack:t.iconPack,size:t.iconSize,type:t.rightIconType,both:""},nativeOn:{click:function(e){return t.rightIconClick(e)}}}):t._e(),t.maxlength&&t.hasCounter&&"number"!==t.type?n("small",{staticClass:"help counter",class:{"is-invisible":!t.isFocused}},[t._v(" "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+" ")]):t._e()],1)},It=[];const Ct=void 0,At=void 0,Et=void 0,Nt=!1;var jt=ot({render:_t,staticRenderFns:It},Ct,Tt,At,Nt,Et,void 0,void 0),Dt={name:"BAutocomplete",components:o({},jt.name,jt),mixins:[dt],inheritAttrs:!1,props:{value:[Number,String],data:{type:Array,default:function(){return[]}},field:{type:String,default:"value"},keepFirst:Boolean,clearOnSelect:Boolean,openOnFocus:Boolean,customFormatter:Function,checkInfiniteScroll:Boolean,keepOpen:Boolean,selectOnClickOutside:Boolean,clearable:Boolean,maxHeight:[String,Number],dropdownPosition:{type:String,default:"auto"},groupField:String,groupOptions:String,iconRight:String,iconRightClickable:Boolean,appendToBody:Boolean,type:{type:String,default:"text"},confirmKeys:{type:Array,default:function(){return["Tab","Enter"]}},selectableHeader:Boolean,selectableFooter:Boolean},data:function(){return{selected:null,hovered:null,headerHovered:null,footerHovered:null,isActive:!1,newValue:this.value,newAutocomplete:this.autocomplete||"off",ariaAutocomplete:this.keepFirst?"both":"list",isListInViewportVertically:!0,hasFocus:!1,style:{},_isAutocomplete:!0,_elementRef:"input",_bodyEl:void 0}},computed:{computedData:function(){var t=this;if(this.groupField){if(this.groupOptions){var e=[];return this.data.forEach((function(n){var r=F(n,t.groupField),i=F(n,t.groupOptions);e.push({group:r,items:i})})),e}var n={};this.data.forEach((function(e){var r=F(e,t.groupField);n[r]||(n[r]=[]),n[r].push(e)}));var r=[];return Object.keys(n).forEach((function(t){r.push({group:t,items:n[t]})})),r}return[{items:this.data}]},isEmpty:function(){return!this.computedData||!this.computedData.some((function(t){return t.items&&t.items.length}))},whiteList:function(){var t=[];if(t.push(this.$refs.input.$el.querySelector("input")),t.push(this.$refs.dropdown),void 0!==this.$refs.dropdown){var e=this.$refs.dropdown.querySelectorAll("*"),n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.push(o)}}catch(m){r=!0,i=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}if(this.$parent.$data._isTaginput){t.push(this.$parent.$el);var u=this.$parent.$el.querySelectorAll("*"),c=!0,l=!1,d=void 0;try{for(var h,p=u[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;t.push(f)}}catch(m){l=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(l)throw d}}}return t},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasGroupSlot:function(){return!!this.$scopedSlots.group},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer},isOpenedTop:function(){return"top"===this.dropdownPosition||"auto"===this.dropdownPosition&&!this.isListInViewportVertically},newIconRight:function(){return this.clearable&&this.newValue?"close-circle":this.iconRight},newIconRightClickable:function(){return!!this.clearable||this.iconRightClickable},contentStyle:function(){return{maxHeight:J(this.maxHeight)}}},watch:{isActive:function(t){var e=this;"auto"===this.dropdownPosition&&(t?this.calcDropdownInViewportVertical():setTimeout((function(){e.calcDropdownInViewportVertical()}),100))},checkInfiniteScroll:function(t){if(!1!==(this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content"))){var e=this.$refs.dropdown.querySelector(".dropdown-content");!0!==t?e.removeEventListener("scroll",this.checkIfReachedTheEndOfScroll):e.addEventListener("scroll",this.checkIfReachedTheEndOfScroll)}},newValue:function(t){this.$emit("input",t);var e=this.getValue(this.selected);e&&e!==t&&this.setSelected(null,!1),!this.hasFocus||this.openOnFocus&&!t||(this.isActive=!!t)},value:function(t){this.newValue=t},data:function(){var t=this;if(this.keepFirst)this.$nextTick((function(){t.isActive?t.selectFirstOption(t.computedData):t.setHovered(null)}));else if(this.hovered){var e=this.getValue(this.hovered),n=this.computedData.map((function(t){return t.items})).reduce((function(t,e){return[].concat(k(t),k(e))}),[]);n.some((function(n){return t.getValue(n)===e}))||this.setHovered(null)}}},methods:{setHovered:function(t){void 0!==t&&(this.hovered=t)},setSelected:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0!==t){if(this.selected=t,this.$emit("select",this.selected,r),null!==this.selected){if(this.clearOnSelect){var i=this.$refs.input;i.newValue="",i.$refs.input.value=""}else this.newValue=this.getValue(this.selected);this.setHovered(null)}n&&this.$nextTick((function(){e.isActive=!1})),this.checkValidity()}},selectFirstOption:function(t){var e=this;this.$nextTick((function(){var n=t.filter((function(t){return t.items&&t.items.length}));if(n.length){var r=n[0].items[0];e.setHovered(r)}else e.setHovered(null)}))},keydown:function(t){var e=t.key;if("Enter"===e&&t.preventDefault(),"Escape"!==e&&"Tab"!==e||(this.isActive=!1),this.confirmKeys.indexOf(e)>=0){","===e&&t.preventDefault();var n=!this.keepOpen||"Tab"===e;if(null===this.hovered)return void this.checkIfHeaderOrFooterSelected(t,null,n);this.setSelected(this.hovered,n,t)}},selectHeaderOrFoterByClick:function(t,e){this.checkIfHeaderOrFooterSelected(t,{origin:e})},checkIfHeaderOrFooterSelected:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.selectableHeader&&(this.headerHovered||e&&"header"===e.origin)&&(this.$emit("select-header",t),this.headerHovered=!1,e&&this.setHovered(null),n&&(this.isActive=!1)),this.selectableFooter&&(this.footerHovered||e&&"footer"===e.origin)&&(this.$emit("select-footer",t),this.footerHovered=!1,e&&this.setHovered(null),n&&(this.isActive=!1))},clickedOutside:function(t){var e=Q(this)?t.composedPath()[0]:t.target;!this.hasFocus&&this.whiteList.indexOf(e)<0&&(this.keepFirst&&this.hovered&&this.selectOnClickOutside?this.setSelected(this.hovered,!0):this.isActive=!1)},getValue:function(t){if(null!==t)return"undefined"!==typeof this.customFormatter?this.customFormatter(t):"object"===r(t)?F(t,this.field):t},checkIfReachedTheEndOfScroll:function(){var t=this.$refs.dropdown.querySelector(".dropdown-content"),e=this.hasFooterSlot?t.querySelectorAll("div.dropdown-footer")[0].clientHeight:0;t.clientHeight!==t.scrollHeight&&t.scrollTop+t.parentElement.clientHeight+e>=t.scrollHeight&&this.$emit("infinite-scroll")},calcDropdownInViewportVertical:function(){var t=this;this.$nextTick((function(){if(void 0!==t.$refs.dropdown){var e=t.$refs.dropdown.getBoundingClientRect();t.isListInViewportVertically=e.top>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight),t.appendToBody&&t.updateAppendToBody()}}))},keyArrows:function(t){var e="down"===t?1:-1;if(this.isActive){var n,r=this.computedData.map((function(t){return t.items})).reduce((function(t,e){return[].concat(k(t),k(e))}),[]);this.hasHeaderSlot&&this.selectableHeader&&r.unshift(void 0),this.hasFooterSlot&&this.selectableFooter&&r.push(void 0),n=this.headerHovered?0+e:this.footerHovered?r.length-1+e:r.indexOf(this.hovered)+e,n=n>r.length-1?r.length-1:n,n=n<0?0:n,this.footerHovered=!1,this.headerHovered=!1,this.setHovered(void 0!==r[n]?r[n]:null),this.hasFooterSlot&&this.selectableFooter&&n===r.length-1&&(this.footerHovered=!0),this.hasHeaderSlot&&this.selectableHeader&&0===n&&(this.headerHovered=!0);var i=this.$refs.dropdown.querySelector(".dropdown-content"),a="a.dropdown-item:not(.is-disabled)";this.hasHeaderSlot&&this.selectableHeader&&(a+=",div.dropdown-header"),this.hasFooterSlot&&this.selectableFooter&&(a+=",div.dropdown-footer");var s=i.querySelectorAll(a)[n];if(!s)return;var o=i.scrollTop,u=i.scrollTop+i.clientHeight-s.clientHeight;s.offsetTop<o?i.scrollTop=s.offsetTop:s.offsetTop>=u&&(i.scrollTop=s.offsetTop-i.clientHeight+s.clientHeight)}else this.isActive=!0},focused:function(t){this.getValue(this.selected)===this.newValue&&this.$el.querySelector("input").select(),this.openOnFocus&&(this.isActive=!0,this.keepFirst&&this.selectFirstOption(this.computedData)),this.hasFocus=!0,this.$emit("focus",t)},onBlur:function(t){this.hasFocus=!1,this.$emit("blur",t)},onInput:function(){var t=this.getValue(this.selected);t&&t===this.newValue||(this.$emit("typing",this.newValue),this.checkValidity())},rightIconClick:function(t){this.clearable?(this.newValue="",this.setSelected(null,!1),this.openOnFocus&&this.$refs.input.$el.focus()):this.$emit("icon-right-click",t)},checkValidity:function(){var t=this;this.useHtml5Validation&&this.$nextTick((function(){t.checkHtml5Validity()}))},updateAppendToBody:function(){var t=this.$refs.dropdown,e=this.$refs.input.$el;if(t&&e){var n=this.$data._bodyEl;n.classList.forEach((function(t){return n.classList.remove(t)})),n.classList.add("autocomplete"),n.classList.add("control"),this.expandend&&n.classList.add("is-expandend");var r=e.getBoundingClientRect(),i=r.top+window.scrollY,a=r.left+window.scrollX;this.isOpenedTop?i-=t.clientHeight:i+=e.clientHeight,this.style={position:"absolute",top:"".concat(i,"px"),left:"".concat(a,"px"),width:"".concat(e.clientWidth,"px"),maxWidth:"".concat(e.clientWidth,"px"),zIndex:"99"}}}},created:function(){"undefined"!==typeof window&&(document.addEventListener("click",this.clickedOutside),"auto"===this.dropdownPosition&&window.addEventListener("resize",this.calcDropdownInViewportVertical))},mounted:function(){if(this.checkInfiniteScroll&&this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content")){var t=this.$refs.dropdown.querySelector(".dropdown-content");t.addEventListener("scroll",this.checkIfReachedTheEndOfScroll)}this.appendToBody&&(this.$data._bodyEl=U(this.$refs.dropdown),this.updateAppendToBody())},beforeDestroy:function(){if("undefined"!==typeof window&&(document.removeEventListener("click",this.clickedOutside),"auto"===this.dropdownPosition&&window.removeEventListener("resize",this.calcDropdownInViewportVertical)),this.checkInfiniteScroll&&this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content")){var t=this.$refs.dropdown.querySelector(".dropdown-content");t.removeEventListener("scroll",this.checkIfReachedTheEndOfScroll)}this.appendToBody&&V(this.$data._bodyEl)}};const $t=Dt;var Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"autocomplete control",class:{"is-expanded":t.expanded}},[n("b-input",t._b({ref:"input",attrs:{type:t.type,size:t.size,loading:t.loading,rounded:t.rounded,icon:t.icon,"icon-right":t.newIconRight,"icon-right-clickable":t.newIconRightClickable,"icon-pack":t.iconPack,maxlength:t.maxlength,autocomplete:t.newAutocomplete,"use-html5-validation":!1,"aria-autocomplete":t.ariaAutocomplete},on:{input:t.onInput,focus:t.focused,blur:t.onBlur,"icon-right-click":t.rightIconClick,"icon-click":function(e){return t.$emit("icon-click",e)}},nativeOn:{keydown:[function(e){return t.keydown(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.keyArrows("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.keyArrows("down"))}]},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}},"b-input",t.$attrs,!1)),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive&&(!t.isEmpty||t.hasEmptySlot||t.hasHeaderSlot),expression:"isActive && (!isEmpty || hasEmptySlot || hasHeaderSlot)"}],ref:"dropdown",staticClass:"dropdown-menu",class:{"is-opened-top":t.isOpenedTop&&!t.appendToBody},style:t.style},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"dropdown-content",style:t.contentStyle},[t.hasHeaderSlot?n("div",{staticClass:"dropdown-item dropdown-header",class:{"is-hovered":t.headerHovered},attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.selectHeaderOrFoterByClick(e,"header")}}},[t._t("header")],2):t._e(),t._l(t.computedData,(function(e,r){return[e.group?n("div",{key:r+"group",staticClass:"dropdown-item"},[t.hasGroupSlot?t._t("group",null,{group:e.group,index:r}):n("span",{staticClass:"has-text-weight-bold"},[t._v(" "+t._s(e.group)+" ")])],2):t._e(),t._l(e.items,(function(e,i){return n("a",{key:r+":"+i,staticClass:"dropdown-item",class:{"is-hovered":e===t.hovered},attrs:{role:"button",tabindex:"0"},on:{click:function(n){return n.stopPropagation(),t.setSelected(e,!t.keepOpen,n)}}},[t.hasDefaultSlot?t._t("default",null,{option:e,index:i}):n("span",[t._v(" "+t._s(t.getValue(e,!0))+" ")])],2)}))]})),t.isEmpty&&t.hasEmptySlot?n("div",{staticClass:"dropdown-item is-disabled"},[t._t("empty")],2):t._e(),t.hasFooterSlot?n("div",{staticClass:"dropdown-item dropdown-footer",class:{"is-hovered":t.footerHovered},attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.selectHeaderOrFoterByClick(e,"footer")}}},[t._t("footer")],2):t._e()],2)])])],1)},Ft=[];const Pt=void 0,Mt=void 0,Lt=void 0,Bt=!1;var zt=ot({render:Rt,staticRenderFns:Ft},Pt,$t,Mt,Bt,Lt,void 0,void 0),Vt={install:function(t){ct(t,zt)}};ut(Vt);var Ut=Vt,Wt={name:"BBreadcrumb",props:{align:{type:String,default:function(){return rt.defaultBreadcrumbAlign}},separator:{type:String,default:function(){return rt.defaultBreadcrumbSeparator}},size:{type:String,default:function(){return rt.defaultBreadcrumbSize}}},computed:{breadcrumbClasses:function(){return["breadcrumb",this.align,this.separator,this.size]}}};const Gt=Wt;var Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{class:t.breadcrumbClasses},[n("ul",[t._t("default")],2)])},qt=[];const Jt=void 0,Kt=void 0,Xt=void 0,Yt=!1;var Zt=ot({render:Ht,staticRenderFns:qt},Jt,Gt,Kt,Yt,Xt,void 0,void 0),Qt={name:"BBreadcrumbItem",inheritAttrs:!1,props:{tag:{type:String,default:function(){return rt.defaultBreadcrumbTag}},active:Boolean}};const te=Qt;var ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:{"is-active":t.active}},[n(t.tag,t._g(t._b({tag:"component"},"component",t.$attrs,!1),t.$listeners),[t._t("default")],2)],1)},ne=[];const re=void 0,ie=void 0,ae=void 0,se=!1;var oe=ot({render:ee,staticRenderFns:ne},re,te,ie,se,ae,void 0,void 0),ue={install:function(t){ct(t,Zt),ct(t,oe)}};ut(ue);var ce=ue,le={name:"BButton",components:o({},St.name,St),inheritAttrs:!1,props:{type:[String,Object],size:String,label:String,iconPack:String,iconLeft:String,iconRight:String,rounded:{type:Boolean,default:function(){return rt.defaultButtonRounded}},loading:Boolean,outlined:Boolean,expanded:Boolean,inverted:Boolean,focused:Boolean,active:Boolean,hovered:Boolean,selected:Boolean,nativeType:{type:String,default:"button",validator:function(t){return["button","submit","reset"].indexOf(t)>=0}},tag:{type:String,default:"button",validator:function(t){return rt.defaultLinkTags.indexOf(t)>=0}}},computed:{computedTag:function(){return void 0!==this.$attrs.disabled&&!1!==this.$attrs.disabled?"button":this.tag},iconSize:function(){return this.size&&"is-medium"!==this.size?"is-large"===this.size?"is-medium":this.size:"is-small"}}};const de=le;var he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.computedTag,t._g(t._b({tag:"component",staticClass:"button",class:[t.size,t.type,{"is-rounded":t.rounded,"is-loading":t.loading,"is-outlined":t.outlined,"is-fullwidth":t.expanded,"is-inverted":t.inverted,"is-focused":t.focused,"is-active":t.active,"is-hovered":t.hovered,"is-selected":t.selected}],attrs:{type:"button"===t.computedTag?t.nativeType:void 0}},"component",t.$attrs,!1),t.$listeners),[t.iconLeft?n("b-icon",{attrs:{pack:t.iconPack,icon:t.iconLeft,size:t.iconSize}}):t._e(),t.label?n("span",[t._v(t._s(t.label))]):t.$slots.default?n("span",[t._t("default")],2):t._e(),t.iconRight?n("b-icon",{attrs:{pack:t.iconPack,icon:t.iconRight,size:t.iconSize}}):t._e()],1)},pe=[];const fe=void 0,me=void 0,ge=void 0,be=!1;var ye=ot({render:he,staticRenderFns:pe},fe,de,me,be,ge,void 0,void 0),ve={install:function(t){ct(t,ye)}};ut(ve);var we=ve,xe=1,Oe=3,Se=Oe,ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={provide:function(){return o({},"b"+t,this)}};return D(e,xe)&&(n.data=function(){return{childItems:[]}},n.methods={_registerItem:function(t){this.childItems.push(t)},_unregisterItem:function(t){this.childItems=this.childItems.filter((function(e){return e!==t}))}},D(e,Oe)&&(n.watch={childItems:function(t){if(t.length>0&&this.$scopedSlots.default){var e=t[0].$vnode.tag,n=0,r=function r(i){var a=!0,s=!1,o=void 0;try{for(var u,c=function(){var i=u.value;if(i.tag===e){var a=t.find((function(t){return t.$vnode===i}));a&&(a.index=n++)}else if(i.tag){var s=i.componentInstance?i.componentInstance.$scopedSlots.default?i.componentInstance.$scopedSlots.default():i.componentInstance.$children:i.children;Array.isArray(s)&&s.length>0&&r(s.map((function(t){return t.$vnode})))}},l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)c()}catch(d){s=!0,o=d}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}return!1};r(this.$scopedSlots.default())}}},n.computed={sortedItems:function(){return this.childItems.slice().sort((function(t,e){return t.index-e.index}))}})),n},Te=1,_e=2,Ie=Te,Ce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={inject:{parent:{from:"b"+t,default:!1}},created:function(){if(this.parent)this.parent._registerItem&&this.parent._registerItem(this);else if(!D(e,_e))throw this.$destroy(),new Error("You should wrap "+this.$options.name+" in a "+t)},beforeDestroy:function(){this.parent&&this.parent._unregisterItem&&this.parent._unregisterItem(this)}};return D(e,Te)&&(n.data=function(){return{index:null}}),n},Ae={name:"BImage",props:{src:String,alt:String,srcFallback:String,webpFallback:{type:String,default:function(){return rt.defaultImageWebpFallback}},lazy:{type:Boolean,default:function(){return rt.defaultImageLazy}},responsive:{type:Boolean,default:function(){return rt.defaultImageResponsive}},ratio:{type:String,default:function(){return rt.defaultImageRatio}},placeholder:String,srcset:String,srcsetSizes:Array,srcsetFormatter:{type:Function,default:function(t,e,n){return"function"===typeof rt.defaultImageSrcsetFormatter?rt.defaultImageSrcsetFormatter(t,e):n.formatSrcset(t,e)}},rounded:{type:Boolean,default:!1},captionFirst:{type:Boolean,default:!1},customClass:String},data:function(){return{clientWidth:0,webpSupportVerified:!1,webpSupported:!1,useNativeLazy:!1,observer:null,inViewPort:!1,bulmaKnownRatio:["square","1by1","5by4","4by3","3by2","5by3","16by9","b2y1","3by1","4by5","3by4","2by3","3by5","9by16","1by2","1by3"],loaded:!1,failed:!1}},computed:{ratioPattern:function(){return new RegExp(/([0-9]+)by([0-9]+)/)},hasRatio:function(){return this.ratio&&this.ratioPattern.test(this.ratio)},figureClasses:function(){var t={image:this.responsive};return this.hasRatio&&this.bulmaKnownRatio.indexOf(this.ratio)>=0&&(t["is-".concat(this.ratio)]=!0),t},figureStyles:function(){if(this.hasRatio&&this.bulmaKnownRatio.indexOf(this.ratio)<0){var t=this.ratioPattern.exec(this.ratio);return{paddingTop:"".concat(t[2]/t[1]*100,"%")}}},imgClasses:function(){return o({"is-rounded":this.rounded,"has-ratio":this.hasRatio},this.customClass,!!this.customClass)},srcExt:function(){return this.getExt(this.src)},isWepb:function(){return"webp"===this.srcExt},computedSrc:function(){var t=this.src;return this.failed&&this.srcFallback&&(t=this.srcFallback),!this.webpSupported&&this.isWepb&&this.webpFallback?this.webpFallback.startsWith(".")?t.replace(/\.webp/gi,"".concat(this.webpFallback)):this.webpFallback:t},computedWidth:function(){if(this.responsive&&this.clientWidth>0)return this.clientWidth},computedNativeLazy:function(){if(this.lazy&&this.useNativeLazy)return"lazy"},isDisplayed:function(){return(this.webpSupportVerified||!this.isWepb)&&(!this.lazy||this.useNativeLazy||this.inViewPort)},placeholderExt:function(){if(this.placeholder)return this.getExt(this.placeholder)},isPlaceholderWepb:function(){if(this.placeholder)return"webp"===this.placeholderExt},computedPlaceholder:function(){return!this.webpSupported&&this.isPlaceholderWepb&&this.webpFallback&&this.webpFallback.startsWith(".")?this.placeholder.replace(/\.webp/gi,"".concat(this.webpFallback)):this.placeholder},isPlaceholderDisplayed:function(){return!this.loaded&&(this.$slots.placeholder||this.placeholder&&(this.webpSupportVerified||!this.isPlaceholderWepb))},computedSrcset:function(){var t=this;return this.srcset?!this.webpSupported&&this.isWepb&&this.webpFallback&&this.webpFallback.startsWith(".")?this.srcset.replace(/\.webp/gi,"".concat(this.webpFallback)):this.srcset:this.srcsetSizes&&Array.isArray(this.srcsetSizes)&&this.srcsetSizes.length>0?this.srcsetSizes.map((function(e){return"".concat(t.srcsetFormatter(t.computedSrc,e,t)," ").concat(e,"w")})).join(","):void 0},computedSizes:function(){if(this.computedSrcset&&this.computedWidth)return"".concat(this.computedWidth,"px")},isCaptionFirst:function(){return this.$slots.caption&&this.captionFirst},isCaptionLast:function(){return this.$slots.caption&&!this.captionFirst}},methods:{getExt:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=e?t.split("?")[0]:t;return n.split(".").pop()}return""},setWidth:function(){this.clientWidth=this.$el.clientWidth},formatSrcset:function(t,e){var n=this.getExt(t,!1),r=t.split(".").slice(0,-1).join(".");return"".concat(r,"-").concat(e,".").concat(n)},onLoad:function(t){this.loaded=!0,this.emit("load",t)},onError:function(t){this.emit("error",t),this.failed||(this.failed=!0)},emit:function(t,e){var n=e.target;this.$emit(t,e,n.currentSrc||n.src||this.computedSrc)}},created:function(){var t=this;if(this.isWepb&&Z().then((function(e){t.webpSupportVerified=!0,t.webpSupported=e})),this.lazy){var e="undefined"!==typeof window&&"HTMLImageElement"in window&&"loading"in HTMLImageElement.prototype,n="undefined"!==typeof window&&"IntersectionObserver"in window;!e&&n?this.observer=new IntersectionObserver((function(e){var n=e[0],r=n.target,i=n.isIntersecting;i&&!t.inViewPort&&(t.inViewPort=!0,t.observer.unobserve(r))})):this.useNativeLazy=!0}},mounted:function(){this.lazy&&this.observer&&this.observer.observe(this.$el),this.setWidth(),"undefined"!==typeof window&&window.addEventListener("resize",this.setWidth)},beforeDestroy:function(){this.observer&&this.observer.disconnect(),"undefined"!==typeof window&&window.removeEventListener("resize",this.setWidth)}};const Ee=Ae;var Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"b-image-wrapper",class:t.figureClasses,style:t.figureStyles},[t.isCaptionFirst?n("figcaption",[t._t("caption")],2):t._e(),n("transition",{attrs:{name:"fade"}},[t.isDisplayed?n("img",{class:t.imgClasses,attrs:{srcset:t.computedSrcset,src:t.computedSrc,alt:t.alt,width:t.computedWidth,sizes:t.computedSizes,loading:t.computedNativeLazy},on:{load:t.onLoad,error:t.onError}}):t._e()]),n("transition",{attrs:{name:"fade"}},[t.isPlaceholderDisplayed?t._t("placeholder",[n("img",{staticClass:"placeholder",class:t.imgClasses,attrs:{src:t.computedPlaceholder,alt:t.alt}})]):t._e()],2),t.isCaptionLast?n("figcaption",[t._t("caption")],2):t._e()],1)},je=[];const De=void 0,$e=void 0,Re=void 0,Fe=!1;var Pe=ot({render:Ne,staticRenderFns:je},De,Ee,$e,Fe,Re,void 0,void 0),Me={name:"BCarousel",components:o({},St.name,St),mixins:[ke("carousel",Se)],props:{value:{type:Number,default:0},animated:{type:String,default:"slide"},interval:Number,hasDrag:{type:Boolean,default:!0},autoplay:{type:Boolean,default:!0},pauseHover:{type:Boolean,default:!0},pauseInfo:{type:Boolean,default:!0},pauseInfoType:{type:String,default:"is-white"},pauseText:{type:String,default:"Pause"},arrow:{type:Boolean,default:!0},arrowHover:{type:Boolean,default:!0},repeat:{type:Boolean,default:!0},iconPack:String,iconSize:String,iconPrev:{type:String,default:function(){return rt.defaultIconPrev}},iconNext:{type:String,default:function(){return rt.defaultIconNext}},indicator:{type:Boolean,default:!0},indicatorBackground:Boolean,indicatorCustom:Boolean,indicatorCustomSize:{type:String,default:"is-small"},indicatorInside:{type:Boolean,default:!0},indicatorMode:{type:String,default:"click"},indicatorPosition:{type:String,default:"is-bottom"},indicatorStyle:{type:String,default:"is-dots"},overlay:Boolean,progress:Boolean,progressType:{type:String,default:"is-primary"},withCarouselList:Boolean},data:function(){return{transition:"next",activeChild:this.value||0,isPause:!1,dragX:!1,timer:null}},computed:{indicatorClasses:function(){return[{"has-background":this.indicatorBackground,"has-custom":this.indicatorCustom,"is-inside":this.indicatorInside},this.indicatorCustom&&this.indicatorCustomSize,this.indicatorInside&&this.indicatorPosition]},hasPrev:function(){return this.repeat||0!==this.activeChild},hasNext:function(){return this.repeat||this.activeChild<this.childItems.length-1}},watch:{value:function(t){this.changeActive(t)},sortedItems:function(t){this.activeChild>=t.length&&this.activeChild>0&&this.changeActive(this.activeChild-1)},autoplay:function(t){t?this.startTimer():this.pauseTimer()},repeat:function(t){t&&this.startTimer()}},methods:{startTimer:function(){var t=this;this.autoplay&&!this.timer&&(this.isPause=!1,this.timer=setInterval((function(){!t.repeat&&t.activeChild>=t.childItems.length-1?t.pauseTimer():t.next()}),this.interval||rt.defaultCarouselInterval))},pauseTimer:function(){this.isPause=!0,this.timer&&(clearInterval(this.timer),this.timer=null)},restartTimer:function(){this.pauseTimer(),this.startTimer()},checkPause:function(){this.pauseHover&&this.autoplay&&this.pauseTimer()},changeActive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.activeChild===t||isNaN(t)||(e=e||t-this.activeChild,t=this.repeat?$(t,this.childItems.length):R(t,0,this.childItems.length-1),this.transition=e>0?"prev":"next",this.activeChild=t,t!==this.value&&this.$emit("input",t),this.restartTimer(),this.$emit("change",t))},modeChange:function(t,e){if(this.indicatorMode===t)return this.changeActive(e)},prev:function(){this.changeActive(this.activeChild-1,-1)},next:function(){this.changeActive(this.activeChild+1,1)},dragStart:function(t){this.hasDrag&&t.target.draggable&&(this.dragX=t.touches?t.changedTouches[0].pageX:t.pageX,t.touches?this.pauseTimer():t.preventDefault())},dragEnd:function(t){if(!1!==this.dragX){var e=t.touches?t.changedTouches[0].pageX:t.pageX,n=e-this.dragX;Math.abs(n)>30?n<0?this.next():this.prev():(t.target.click(),this.sortedItems[this.activeChild].$emit("click"),this.$emit("click")),t.touches&&this.startTimer(),this.dragX=!1}}},mounted:function(){this.startTimer()},beforeDestroy:function(){this.pauseTimer()}};const Le=Me;var Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"carousel",class:{"is-overlay":t.overlay},on:{mouseenter:t.checkPause,mouseleave:t.startTimer}},[t.progress?n("progress",{staticClass:"progress",class:t.progressType,attrs:{max:t.childItems.length-1},domProps:{value:t.activeChild}},[t._v(" "+t._s(t.childItems.length-1)+" ")]):t._e(),n("div",{staticClass:"carousel-items",on:{mousedown:t.dragStart,mouseup:t.dragEnd,touchstart:function(e){return e.stopPropagation(),t.dragStart(e)},touchend:function(e){return e.stopPropagation(),t.dragEnd(e)}}},[t._t("default"),t.arrow?n("div",{staticClass:"carousel-arrow",class:{"is-hovered":t.arrowHover}},[n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.hasPrev,expression:"hasPrev"}],staticClass:"has-icons-left",attrs:{pack:t.iconPack,icon:t.iconPrev,size:t.iconSize,both:""},nativeOn:{click:function(e){return t.prev(e)}}}),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.hasNext,expression:"hasNext"}],staticClass:"has-icons-right",attrs:{pack:t.iconPack,icon:t.iconNext,size:t.iconSize,both:""},nativeOn:{click:function(e){return t.next(e)}}})],1):t._e()],2),t.autoplay&&t.pauseHover&&t.pauseInfo&&t.isPause?n("div",{staticClass:"carousel-pause"},[n("span",{staticClass:"tag",class:t.pauseInfoType},[t._v(" "+t._s(t.pauseText)+" ")])]):t._e(),t.withCarouselList&&!t.indicator?[t._t("list",null,{active:t.activeChild,switch:t.changeActive})]:t._e(),t.indicator?n("div",{staticClass:"carousel-indicator",class:t.indicatorClasses},t._l(t.sortedItems,(function(e,r){return n("a",{key:e._uid,staticClass:"indicator-item",class:{"is-active":e.isActive},on:{mouseover:function(e){return t.modeChange("hover",r)},click:function(e){return t.modeChange("click",r)}}},[t._t("indicators",[n("span",{staticClass:"indicator-style",class:t.indicatorStyle})],{i:r})],2)})),0):t._e(),t.overlay?[t._t("overlay")]:t._e()],2)},ze=[];const Ve=void 0,Ue=void 0,We=void 0,Ge=!1;var He=ot({render:Be,staticRenderFns:ze},Ve,Le,Ue,Ge,We,void 0,void 0),qe={name:"BCarouselItem",mixins:[Ce("carousel",Ie)],data:function(){return{transitionName:null}},computed:{transition:function(){return"fade"===this.parent.animated?"fade":this.parent.transition?"slide-"+this.parent.transition:void 0},isActive:function(){return this.parent.activeChild===this.index}}};const Je=qe;var Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"carousel-item"},[t._t("default")],2)])},Xe=[];const Ye=void 0,Ze=void 0,Qe=void 0,tn=!1;var en,nn=ot({render:Ke,staticRenderFns:Xe},Ye,Je,Ze,tn,Qe,void 0,void 0),rn={name:"BCarouselList",components:(en={},o(en,St.name,St),o(en,Pe.name,Pe),en),props:{data:{type:Array,default:function(){return[]}},value:{type:Number,default:0},scrollValue:{type:Number,default:0},hasDrag:{type:Boolean,default:!0},hasGrayscale:Boolean,hasOpacity:Boolean,repeat:Boolean,itemsToShow:{type:Number,default:4},itemsToList:{type:Number,default:1},asIndicator:Boolean,arrow:{type:Boolean,default:!0},arrowHover:{type:Boolean,default:!0},iconPack:String,iconSize:String,iconPrev:{type:String,default:function(){return rt.defaultIconPrev}},iconNext:{type:String,default:function(){return rt.defaultIconNext}},breakpoints:{type:Object,default:function(){return{}}}},data:function(){return{activeItem:this.value,scrollIndex:this.asIndicator?this.scrollValue:this.value,delta:0,dragX:!1,hold:0,windowWidth:0,touch:!1,observer:null,refresh_:0}},computed:{dragging:function(){return!1!==this.dragX},listClass:function(){return[{"has-grayscale":this.settings.hasGrayscale,"has-opacity":this.settings.hasOpacity,"is-dragging":this.dragging}]},itemStyle:function(){return"width: ".concat(this.itemWidth,"px;")},translation:function(){return-R(this.delta+this.scrollIndex*this.itemWidth,0,(this.data.length-this.settings.itemsToShow)*this.itemWidth)},total:function(){return this.data.length-this.settings.itemsToShow},hasPrev:function(){return this.settings.repeat||this.scrollIndex>0},hasNext:function(){return this.settings.repeat||this.scrollIndex<this.total},breakpointKeys:function(){return Object.keys(this.breakpoints).sort((function(t,e){return e-t}))},settings:function(){var t=this,e=this.breakpointKeys.filter((function(e){if(t.windowWidth>=e)return!0}))[0];return e?c({},this.$props,{},this.breakpoints[e]):this.$props},itemWidth:function(){if(this.windowWidth){this.refresh_;var t=this.$el.getBoundingClientRect();return t.width/this.settings.itemsToShow}return 0}},watch:{value:function(t){this.switchTo(this.asIndicator?t-(this.itemsToShow-3)/2:t),this.activeItem!==t&&(this.activeItem=R(t,0,this.data.length-1))},scrollValue:function(t){this.switchTo(t)}},methods:{resized:function(){this.windowWidth=window.innerWidth},switchTo:function(t){t===this.scrollIndex||isNaN(t)||(this.settings.repeat&&(t=$(t,this.total+1)),t=R(t,0,this.total),this.scrollIndex=t,this.asIndicator||this.value===t?this.scrollIndex!==t&&this.$emit("updated:scroll",t):this.$emit("input",t))},next:function(){this.switchTo(this.scrollIndex+this.settings.itemsToList)},prev:function(){this.switchTo(this.scrollIndex-this.settings.itemsToList)},checkAsIndicator:function(t,e){if(this.asIndicator){var n=e.changedTouches?e.changedTouches[0].clientX:e.clientX;this.hold-Date.now()>2e3||Math.abs(this.dragX-n)>10||(this.dragX=!1,this.hold=0,e.preventDefault(),this.activeItem=t,this.$emit("switch",t))}},dragStart:function(t){this.dragging||!this.settings.hasDrag||0!==t.button&&"touchstart"!==t.type||(this.hold=Date.now(),this.touch=!!t.touches,this.dragX=this.touch?t.touches[0].clientX:t.clientX,window.addEventListener(this.touch?"touchmove":"mousemove",this.dragMove),window.addEventListener(this.touch?"touchend":"mouseup",this.dragEnd))},dragMove:function(t){if(this.dragging){var e=t.touches?(t.changedTouches[0]||t.touches[0]).clientX:t.clientX;this.delta=this.dragX-e,t.touches||t.preventDefault()}},dragEnd:function(){if(this.dragging||this.hold){if(this.hold){var t=j(this.delta),e=Math.round(Math.abs(this.delta/this.itemWidth)+.15);this.switchTo(this.scrollIndex+t*e)}this.delta=0,this.dragX=!1,window.removeEventListener(this.touch?"touchmove":"mousemove",this.dragMove),window.removeEventListener(this.touch?"touchend":"mouseup",this.dragEnd)}},refresh:function(){var t=this;this.$nextTick((function(){t.refresh_++}))}},mounted:function(){if("undefined"!==typeof window&&(window.ResizeObserver&&(this.observer=new ResizeObserver(this.refresh),this.observer.observe(this.$el)),window.addEventListener("resize",this.resized),document.addEventListener("animationend",this.refresh),document.addEventListener("transitionend",this.refresh),document.addEventListener("transitionstart",this.refresh),this.resized()),this.$attrs.config)throw new Error("The config prop was removed, you need to use v-bind instead")},beforeDestroy:function(){"undefined"!==typeof window&&(window.ResizeObserver&&this.observer.disconnect(),window.removeEventListener("resize",this.resized),document.removeEventListener("animationend",this.refresh),document.removeEventListener("transitionend",this.refresh),document.removeEventListener("transitionstart",this.refresh),this.dragEnd())}};const an=rn;var sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"carousel-list",class:{"has-shadow":t.scrollIndex>0},on:{mousedown:function(e){return e.preventDefault(),t.dragStart(e)},touchstart:t.dragStart}},[n("div",{staticClass:"carousel-slides",class:t.listClass,style:"transform:translateX("+t.translation+"px)"},t._l(t.data,(function(e,r){return n("div",{key:r,staticClass:"carousel-slide",class:{"is-active":t.asIndicator?t.activeItem===r:t.scrollIndex===r},style:t.itemStyle,on:{mouseup:function(e){return t.checkAsIndicator(r,e)},touchend:function(e){return t.checkAsIndicator(r,e)}}},[t._t("item",[n("b-image",t._b({attrs:{src:e.image}},"b-image",e,!1))],{index:r,active:t.activeItem,scroll:t.scrollIndex,list:e},e)],2)})),0),t.arrow?n("div",{staticClass:"carousel-arrow",class:{"is-hovered":t.settings.arrowHover}},[n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.hasPrev,expression:"hasPrev"}],staticClass:"has-icons-left",attrs:{pack:t.settings.iconPack,icon:t.settings.iconPrev,size:t.settings.iconSize,both:""},nativeOn:{click:function(e){return e.preventDefault(),t.prev(e)}}}),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.hasNext,expression:"hasNext"}],staticClass:"has-icons-right",attrs:{pack:t.settings.iconPack,icon:t.settings.iconNext,size:t.settings.iconSize,both:""},nativeOn:{click:function(e){return e.preventDefault(),t.next(e)}}})],1):t._e()])},on=[];const un=void 0,cn=void 0,ln=void 0,dn=!1;var hn=ot({render:sn,staticRenderFns:on},un,an,cn,dn,ln,void 0,void 0),pn={install:function(t){ct(t,He),ct(t,nn),ct(t,hn)}};ut(pn);var fn=pn,mn={props:{value:[String,Number,Boolean,Function,Object,Array],nativeValue:[String,Number,Boolean,Function,Object,Array],type:String,disabled:Boolean,required:Boolean,name:String,size:String},data:function(){return{newValue:this.value}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}}},watch:{value:function(t){this.newValue=t}},methods:{focus:function(){this.$refs.input.focus()}}},gn={name:"BCheckbox",mixins:[mn],props:{indeterminate:Boolean,ariaLabelledby:String,trueValue:{type:[String,Number,Boolean,Function,Object,Array],default:!0},falseValue:{type:[String,Number,Boolean,Function,Object,Array],default:!1},autocomplete:{type:String,default:"on"}}};const bn=gn;var yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"b-checkbox checkbox",class:[t.size,{"is-disabled":t.disabled}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.$refs.label.click())}]}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",autocomplete:t.autocomplete,disabled:t.disabled,required:t.required,name:t.name,"true-value":t.trueValue,"false-value":t.falseValue,"aria-labelledby":t.ariaLabelledby},domProps:{indeterminate:t.indeterminate,value:t.nativeValue,checked:Array.isArray(t.computedValue)?t._i(t.computedValue,t.nativeValue)>-1:t._q(t.computedValue,t.trueValue)},on:{click:function(t){t.stopPropagation()},change:function(e){var n=t.computedValue,r=e.target,i=r.checked?t.trueValue:t.falseValue;if(Array.isArray(n)){var a=t.nativeValue,s=t._i(n,a);r.checked?s<0&&(t.computedValue=n.concat([a])):s>-1&&(t.computedValue=n.slice(0,s).concat(n.slice(s+1)))}else t.computedValue=i}}}),n("span",{staticClass:"check",class:t.type}),n("span",{staticClass:"control-label",attrs:{id:t.ariaLabelledby}},[t._t("default")],2)])},vn=[];const wn=void 0,xn=void 0,On=void 0,Sn=!1;var kn=ot({render:yn,staticRenderFns:vn},wn,bn,xn,Sn,On,void 0,void 0),Tn={name:"BCheckboxButton",mixins:[mn],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}},computed:{checked:function(){return Array.isArray(this.newValue)?this.newValue.indexOf(this.nativeValue)>=0:this.newValue===this.nativeValue}}};const _n=Tn;var In=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:{"is-expanded":t.expanded}},[n("label",{ref:"label",staticClass:"b-checkbox checkbox button",class:[t.checked?t.type:null,t.size,{"is-disabled":t.disabled,"is-focused":t.isFocused}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())}}},[t._t("default"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:Array.isArray(t.computedValue)?t._i(t.computedValue,t.nativeValue)>-1:t.computedValue},on:{click:function(t){t.stopPropagation()},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},change:function(e){var n=t.computedValue,r=e.target,i=!!r.checked;if(Array.isArray(n)){var a=t.nativeValue,s=t._i(n,a);r.checked?s<0&&(t.computedValue=n.concat([a])):s>-1&&(t.computedValue=n.slice(0,s).concat(n.slice(s+1)))}else t.computedValue=i}}})],2)])},Cn=[];const An=void 0,En=void 0,Nn=void 0,jn=!1;var Dn=ot({render:In,staticRenderFns:Cn},An,_n,En,jn,Nn,void 0,void 0),$n={install:function(t){ct(t,kn),ct(t,Dn)}};ut($n);var Rn=$n,Fn={name:"BCollapse",model:{prop:"open",event:"update:open"},props:{open:{type:Boolean,default:!0},animation:{type:String,default:"fade"},ariaId:{type:String,default:""},position:{type:String,default:"is-top",validator:function(t){return["is-top","is-bottom"].indexOf(t)>-1}}},data:function(){return{isOpen:this.open}},watch:{open:function(t){this.isOpen=t}},methods:{toggle:function(){this.isOpen=!this.isOpen,this.$emit("update:open",this.isOpen),this.$emit(this.isOpen?"open":"close")}},render:function(t){var e=t("div",{staticClass:"collapse-trigger",on:{click:this.toggle}},this.$scopedSlots.trigger?[this.$scopedSlots.trigger({open:this.isOpen})]:[this.$slots.trigger]),n=t("transition",{props:{name:this.animation}},[t("div",{staticClass:"collapse-content",attrs:{id:this.ariaId},directives:[{name:"show",value:this.isOpen}]},this.$slots.default)]);return t("div",{staticClass:"collapse"},"is-top"===this.position?[e,n]:[n,e])}};const Pn=Fn,Mn=void 0,Ln=void 0,Bn=void 0,zn=void 0;var Vn=ot({},Mn,Pn,Ln,zn,Bn,void 0,void 0),Un={install:function(t){ct(t,Vn)}};ut(Un);var Wn,Gn=Un,Hn="AM",qn="PM",Jn="24",Kn="12",Xn=function(t,e){return e.dtf.format(t)},Yn=function(t,e){if(t){var n=null;if(e.computedValue&&!isNaN(e.computedValue)?n=new Date(e.computedValue):(n=e.timeCreator(),n.setMilliseconds(0)),e.dtf.formatToParts&&"function"===typeof e.dtf.formatToParts){var r=e.dtf.formatToParts(n).map((function(t){return"literal"===t.type?t.value.replace(/ /g,"\\s?"):"dayPeriod"===t.type?"((?!=<".concat(t.type,">)(").concat(e.amString,"|").concat(e.pmString,"|").concat(Hn,"|").concat(qn,"|").concat(Hn.toLowerCase(),"|").concat(qn.toLowerCase(),")?)"):"((?!=<".concat(t.type,">)\\d+)")})).join(""),i=Y(r,t);if(i.hour=i.hour?parseInt(i.hour,10):null,i.minute=i.minute?parseInt(i.minute,10):null,i.second=i.second?parseInt(i.second,10):null,i.hour&&i.hour>=0&&i.hour<24&&i.minute&&i.minute>=0&&i.minute<59)return i.dayPeriod&&(i.dayPeriod.toLowerCase()===e.pmString.toLowerCase()||i.dayPeriod.toLowerCase()===qn.toLowerCase())&&i.hour<12&&(i.hour+=12),n.setHours(i.hour),n.setMinutes(i.minute),n.setSeconds(i.second||0),n}var a=!1;if(e.hourFormat===Kn){var s=t.split(" ");t=s[0],a=s[1]===e.amString||s[1]===Hn}var o=t.split(":"),u=parseInt(o[0],10),c=parseInt(o[1],10),l=e.enableSeconds?parseInt(o[2],10):0;return isNaN(u)||u<0||u>23||e.hourFormat===Kn&&(u<1||u>12)||isNaN(c)||c<0||c>59?null:(n.setSeconds(l),n.setMinutes(c),e.hourFormat===Kn&&(a&&12===u?u=0:a||12===u||(u+=12)),n.setHours(u),new Date(n.getTime()))}return null},Zn={mixins:[dt],inheritAttrs:!1,props:{value:Date,inline:Boolean,minTime:Date,maxTime:Date,placeholder:String,editable:Boolean,disabled:Boolean,hourFormat:{type:String,validator:function(t){return t===Jn||t===Kn}},incrementHours:{type:Number,default:1},incrementMinutes:{type:Number,default:1},incrementSeconds:{type:Number,default:1},timeFormatter:{type:Function,default:function(t,e){return"function"===typeof rt.defaultTimeFormatter?rt.defaultTimeFormatter(t):Xn(t,e)}},timeParser:{type:Function,default:function(t,e){return"function"===typeof rt.defaultTimeParser?rt.defaultTimeParser(t):Yn(t,e)}},mobileNative:{type:Boolean,default:function(){return rt.defaultTimepickerMobileNative}},timeCreator:{type:Function,default:function(){return"function"===typeof rt.defaultTimeCreator?rt.defaultTimeCreator():new Date}},position:String,unselectableTimes:Array,openOnFocus:Boolean,enableSeconds:Boolean,defaultMinutes:Number,defaultSeconds:Number,focusable:{type:Boolean,default:!0},tzOffset:{type:Number,default:0},appendToBody:Boolean,resetOnMeridianChange:{type:Boolean,default:!1}},data:function(){return{dateSelected:this.value,hoursSelected:null,minutesSelected:null,secondsSelected:null,meridienSelected:null,_elementRef:"input",AM:Hn,PM:qn,HOUR_FORMAT_24:Jn,HOUR_FORMAT_12:Kn}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(t){this.dateSelected=t,this.$emit("input",this.dateSelected)}},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:this.enableSeconds?"numeric":void 0}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale,{hour:this.localeOptions.hour||"numeric",minute:this.localeOptions.minute||"numeric",second:this.enableSeconds?this.localeOptions.second||"numeric":void 0,hourCycle:this.isHourFormat24?"h23":"h12"})},newHourFormat:function(){return this.hourFormat||(this.localeOptions.hour12?Kn:Jn)},sampleTime:function(){var t=this.timeCreator();return t.setHours(10),t.setSeconds(0),t.setMinutes(0),t.setMilliseconds(0),t},hourLiteral:function(){if(this.dtf.formatToParts&&"function"===typeof this.dtf.formatToParts){var t=this.sampleTime,e=this.dtf.formatToParts(t),n=e.find((function(t,n){return n>0&&"hour"===e[n-1].type}));if(n)return n.value}return":"},minuteLiteral:function(){if(this.dtf.formatToParts&&"function"===typeof this.dtf.formatToParts){var t=this.sampleTime,e=this.dtf.formatToParts(t),n=e.find((function(t,n){return n>0&&"minute"===e[n-1].type}));if(n)return n.value}return":"},secondLiteral:function(){if(this.dtf.formatToParts&&"function"===typeof this.dtf.formatToParts){var t=this.sampleTime,e=this.dtf.formatToParts(t),n=e.find((function(t,n){return n>0&&"second"===e[n-1].type}));if(n)return n.value}},amString:function(){if(this.dtf.formatToParts&&"function"===typeof this.dtf.formatToParts){var t=this.sampleTime;t.setHours(10);var e=this.dtf.formatToParts(t).find((function(t){return"dayPeriod"===t.type}));if(e)return e.value}return Hn},pmString:function(){if(this.dtf.formatToParts&&"function"===typeof this.dtf.formatToParts){var t=this.sampleTime;t.setHours(20);var e=this.dtf.formatToParts(t).find((function(t){return"dayPeriod"===t.type}));if(e)return e.value}return qn},hours:function(){if(!this.incrementHours||this.incrementHours<1)throw new Error("Hour increment cannot be null or less than 1.");for(var t=[],e=this.isHourFormat24?24:12,n=0;n<e;n+=this.incrementHours){var r=n,i=r;this.isHourFormat24||(r=n+1,i=r,this.meridienSelected===this.amString?12===r&&(r=0):this.meridienSelected===this.pmString&&12!==r&&(r+=12)),t.push({label:this.formatNumber(i),value:r})}return t},minutes:function(){if(!this.incrementMinutes||this.incrementMinutes<1)throw new Error("Minute increment cannot be null or less than 1.");for(var t=[],e=0;e<60;e+=this.incrementMinutes)t.push({label:this.formatNumber(e,!0),value:e});return t},seconds:function(){if(!this.incrementSeconds||this.incrementSeconds<1)throw new Error("Second increment cannot be null or less than 1.");for(var t=[],e=0;e<60;e+=this.incrementSeconds)t.push({label:this.formatNumber(e,!0),value:e});return t},meridiens:function(){return[this.amString,this.pmString]},isMobile:function(){return this.mobileNative&&z.any()},isHourFormat24:function(){return this.newHourFormat===Jn}},watch:{hourFormat:function(){null!==this.hoursSelected&&(this.meridienSelected=this.hoursSelected>=12?this.pmString:this.amString)},locale:function(){this.value||(this.meridienSelected=this.amString)},value:{handler:function(t){this.updateInternalState(t),!this.isValid&&this.$refs.input.checkHtml5Validity()},immediate:!0}},methods:{onMeridienChange:function(t){null!==this.hoursSelected&&this.resetOnMeridianChange?(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.computedValue=null):null!==this.hoursSelected&&(t===this.pmString?this.hoursSelected+=12:t===this.amString&&(this.hoursSelected-=12)),this.updateDateSelected(this.hoursSelected,this.minutesSelected,this.enableSeconds?this.secondsSelected:0,t)},onHoursChange:function(t){this.minutesSelected||"undefined"===typeof this.defaultMinutes||(this.minutesSelected=this.defaultMinutes),this.secondsSelected||"undefined"===typeof this.defaultSeconds||(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(parseInt(t,10),this.minutesSelected,this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onMinutesChange:function(t){!this.secondsSelected&&this.defaultSeconds&&(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(this.hoursSelected,parseInt(t,10),this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onSecondsChange:function(t){this.updateDateSelected(this.hoursSelected,this.minutesSelected,parseInt(t,10),this.meridienSelected)},updateDateSelected:function(t,e,n,r){if(null!=t&&null!=e&&(!this.isHourFormat24&&null!==r||this.isHourFormat24)){var i=null;this.computedValue&&!isNaN(this.computedValue)?i=new Date(this.computedValue):(i=this.timeCreator(),i.setMilliseconds(0)),i.setHours(t),i.setMinutes(e),i.setSeconds(n),isNaN(i.getTime())||(this.computedValue=new Date(i.getTime()))}},updateInternalState:function(t){t?(this.hoursSelected=t.getHours(),this.minutesSelected=t.getMinutes(),this.secondsSelected=t.getSeconds(),this.meridienSelected=t.getHours()>=12?this.pmString:this.amString):(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.meridienSelected=this.amString),this.dateSelected=t},isHourDisabled:function(t){var e=this,n=!1;if(this.minTime){var r=this.minTime.getHours(),i=this.minutes.every((function(n){return e.isMinuteDisabledForHour(t,n.value)}));n=t<r||i}if(this.maxTime&&!n){var a=this.maxTime.getHours();n=t>a}if(this.unselectableTimes&&!n){var s=this.unselectableTimes.filter((function(n){return e.enableSeconds&&null!==e.secondsSelected?n.getHours()===t&&n.getMinutes()===e.minutesSelected&&n.getSeconds()===e.secondsSelected:null!==e.minutesSelected&&(n.getHours()===t&&n.getMinutes()===e.minutesSelected)}));n=s.length>0||this.minutes.every((function(n){return e.unselectableTimes.filter((function(e){return e.getHours()===t&&e.getMinutes()===n.value})).length>0}))}return n},isMinuteDisabledForHour:function(t,e){var n=!1;if(this.minTime){var r=this.minTime.getHours(),i=this.minTime.getMinutes();n=t===r&&e<i}if(this.maxTime&&!n){var a=this.maxTime.getHours(),s=this.maxTime.getMinutes();n=t===a&&e>s}return n},isMinuteDisabled:function(t){var e=this,n=!1;if(null!==this.hoursSelected&&(n=!!this.isHourDisabled(this.hoursSelected)||this.isMinuteDisabledForHour(this.hoursSelected,t),this.unselectableTimes&&!n)){var r=this.unselectableTimes.filter((function(n){return e.enableSeconds&&null!==e.secondsSelected?n.getHours()===e.hoursSelected&&n.getMinutes()===t&&n.getSeconds()===e.secondsSelected:n.getHours()===e.hoursSelected&&n.getMinutes()===t}));n=r.length>0}return n},isSecondDisabled:function(t){var e=this,n=!1;if(null!==this.minutesSelected){if(this.isMinuteDisabled(this.minutesSelected))n=!0;else{if(this.minTime){var r=this.minTime.getHours(),i=this.minTime.getMinutes(),a=this.minTime.getSeconds();n=this.hoursSelected===r&&this.minutesSelected===i&&t<a}if(this.maxTime&&!n){var s=this.maxTime.getHours(),o=this.maxTime.getMinutes(),u=this.maxTime.getSeconds();n=this.hoursSelected===s&&this.minutesSelected===o&&t>u}}if(this.unselectableTimes&&!n){var c=this.unselectableTimes.filter((function(n){return n.getHours()===e.hoursSelected&&n.getMinutes()===e.minutesSelected&&n.getSeconds()===t}));n=c.length>0}}return n},onChange:function(t){var e=this.timeParser(t,this);this.updateInternalState(e),e&&!isNaN(e)?this.computedValue=e:(this.computedValue=null,this.$refs.input.newValue=this.computedValue)},toggle:function(t){this.$refs.dropdown&&(this.$refs.dropdown.isActive="boolean"===typeof t?t:!this.$refs.dropdown.isActive)},close:function(){this.toggle(!1)},handleOnFocus:function(){this.onFocus(),this.openOnFocus&&this.toggle(!0)},formatHHMMSS:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getHours(),r=e.getMinutes(),i=e.getSeconds();return this.formatNumber(n,!0)+":"+this.formatNumber(r,!0)+":"+this.formatNumber(i,!0)}return""},onChangeNativePicker:function(t){var e=t.target.value;if(e){var n=null;this.computedValue&&!isNaN(this.computedValue)?n=new Date(this.computedValue):(n=new Date,n.setMilliseconds(0));var r=e.split(":");n.setHours(parseInt(r[0],10)),n.setMinutes(parseInt(r[1],10)),n.setSeconds(r[2]?parseInt(r[2],10):0),this.computedValue=new Date(n.getTime())}else this.computedValue=null},formatNumber:function(t,e){return this.isHourFormat24||e?this.pad(t):t},pad:function(t){return(t<10?"0":"")+t},formatValue:function(t){return t&&!isNaN(t)?this.timeFormatter(t,this):null},keyPress:function(t){var e=t.key;this.$refs.dropdown&&this.$refs.dropdown.isActive&&("Escape"===e||"Esc"===e)&&this.toggle(!1)},onActiveChange:function(t){t||this.onBlur()}},created:function(){"undefined"!==typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!==typeof window&&document.removeEventListener("keyup",this.keyPress)}},Qn=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e?t.querySelectorAll('*[tabindex="-1"]'):t.querySelectorAll('a[href]:not([tabindex="-1"]),\n                                     area[href],\n                                     input:not([disabled]),\n                                     select:not([disabled]),\n                                     textarea:not([disabled]),\n                                     button:not([disabled]),\n                                     iframe,\n                                     object,\n                                     embed,\n                                     *[tabindex]:not([tabindex="-1"]),\n                                     *[contenteditable]'):null},tr=function(t,e){var n=e.value,r=void 0===n||n;if(r){var i=Qn(t),a=Qn(t,!0);i&&i.length>0&&(Wn=function(e){i=Qn(t),a=Qn(t,!0);var n=i[0],r=i[i.length-1];e.target===n&&e.shiftKey&&"Tab"===e.key?(e.preventDefault(),r.focus()):(e.target===r||Array.from(a).indexOf(e.target)>=0)&&!e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),n.focus())},t.addEventListener("keydown",Wn))}},er=function(t){t.removeEventListener("keydown",Wn)},nr={bind:tr,unbind:er},rr=["escape","outside"],ir={name:"BDropdown",directives:{trapFocus:nr},mixins:[ke("dropdown")],props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},disabled:Boolean,inline:Boolean,scrollable:Boolean,maxHeight:{type:[String,Number],default:200},position:{type:String,validator:function(t){return["is-top-right","is-top-left","is-bottom-left","is-bottom-right"].indexOf(t)>-1}},triggers:{type:Array,default:function(){return["click"]}},mobileModal:{type:Boolean,default:function(){return rt.defaultDropdownMobileModal}},ariaRole:{type:String,validator:function(t){return["menu","list","dialog"].indexOf(t)>-1},default:null},animation:{type:String,default:"fade"},multiple:Boolean,trapFocus:{type:Boolean,default:function(){return rt.defaultTrapFocus}},closeOnClick:{type:Boolean,default:!0},canClose:{type:[Array,Boolean],default:!0},expanded:Boolean,appendToBody:Boolean,appendToBodyCopyParent:Boolean,triggerTabindex:{type:Number,default:0}},data:function(){return{selected:this.value,style:{},isActive:!1,isHoverable:!1,_bodyEl:void 0}},computed:{rootClasses:function(){return[this.position,{"is-disabled":this.disabled,"is-hoverable":this.hoverable,"is-inline":this.inline,"is-active":this.isActive||this.inline,"is-mobile-modal":this.isMobileModal,"is-expanded":this.expanded}]},isMobileModal:function(){return this.mobileModal&&!this.inline},cancelOptions:function(){return"boolean"===typeof this.canClose?this.canClose?rr:[]:this.canClose},contentStyle:function(){return{maxHeight:this.scrollable?J(this.maxHeight):null,overflow:this.scrollable?"auto":null}},hoverable:function(){return this.triggers.indexOf("hover")>=0}},watch:{value:function(t){this.selected=t},isActive:function(t){var e=this;this.$emit("active-change",t),this.handleScroll(),this.appendToBody&&this.$nextTick((function(){e.updateAppendToBody()}))},isHoverable:function(t){this.hoverable&&this.$emit("active-change",t)}},methods:{handleScroll:function(){"undefined"!==typeof window&&this.isMobileModal&&(this.isActive?document.documentElement.classList.add("is-clipped-touch"):document.documentElement.classList.remove("is-clipped-touch"))},selectItem:function(t){this.multiple?(this.selected?-1===this.selected.indexOf(t)?this.selected=[].concat(k(this.selected),[t]):this.selected=this.selected.filter((function(e){return e!==t})):this.selected=[t],this.$emit("change",this.selected)):this.selected!==t&&(this.selected=t,this.$emit("change",this.selected)),this.$emit("input",this.selected),this.multiple||(this.isActive=!this.closeOnClick,this.hoverable&&this.closeOnClick&&(this.isHoverable=!1))},isInWhiteList:function(t){if(t===this.$refs.dropdownMenu)return!0;if(t===this.$refs.trigger)return!0;if(void 0!==this.$refs.dropdownMenu){var e=this.$refs.dropdownMenu.querySelectorAll("*"),n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(t===o)return!0}}catch(m){r=!0,i=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}if(void 0!==this.$refs.trigger){var u=this.$refs.trigger.querySelectorAll("*"),c=!0,l=!1,d=void 0;try{for(var h,p=u[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;if(t===f)return!0}}catch(m){l=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(l)throw d}}}return!1},clickedOutside:function(t){if(!(this.cancelOptions.indexOf("outside")<0)&&!this.inline){var e=Q(this)?t.composedPath()[0]:t.target;this.isInWhiteList(e)||(this.isActive=!1)}},keyPress:function(t){var e=t.key;if(this.isActive&&("Escape"===e||"Esc"===e)){if(this.cancelOptions.indexOf("escape")<0)return;this.isActive=!1}},onClick:function(){this.triggers.indexOf("click")<0||this.toggle()},onContextMenu:function(){this.triggers.indexOf("contextmenu")<0||this.toggle()},onHover:function(){this.triggers.indexOf("hover")<0||(this.isHoverable=!0)},onFocus:function(){this.triggers.indexOf("focus")<0||this.toggle()},toggle:function(){var t=this;this.disabled||(this.isActive?this.isActive=!this.isActive:this.$nextTick((function(){var e=!t.isActive;t.isActive=e,setTimeout((function(){return t.isActive=e}))})))},updateAppendToBody:function(){var t=this.$refs.dropdown,e=this.$refs.dropdownMenu,n=this.$refs.trigger;if(e&&n){var i=this.$data._bodyEl.children[0];if(i.classList.forEach((function(t){return i.classList.remove(t)})),i.classList.add("dropdown"),i.classList.add("dropdown-menu-animation"),this.$vnode&&this.$vnode.data&&this.$vnode.data.staticClass&&i.classList.add(this.$vnode.data.staticClass),this.rootClasses.forEach((function(t){if(t&&"object"===r(t))for(var e in t)t[e]&&i.classList.add(e)})),this.appendToBodyCopyParent){var a=this.$refs.dropdown.parentNode,s=this.$data._bodyEl;s.classList.forEach((function(t){return s.classList.remove(t)})),a.classList.forEach((function(t){s.classList.add(t)}))}var o=n.getBoundingClientRect(),u=o.top+window.scrollY,c=o.left+window.scrollX;!this.position||this.position.indexOf("bottom")>=0?u+=n.clientHeight:u-=e.clientHeight,this.position&&this.position.indexOf("left")>=0&&(c-=e.clientWidth-n.clientWidth),this.style={position:"absolute",top:"".concat(u,"px"),left:"".concat(c,"px"),zIndex:"99",width:this.expanded?"".concat(t.offsetWidth,"px"):void 0}}}},mounted:function(){this.appendToBody&&(this.$data._bodyEl=U(this.$refs.dropdownMenu),this.updateAppendToBody())},created:function(){"undefined"!==typeof window&&(document.addEventListener("click",this.clickedOutside),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!==typeof window&&(document.removeEventListener("click",this.clickedOutside),document.removeEventListener("keyup",this.keyPress)),this.appendToBody&&V(this.$data._bodyEl)}};const ar=ir;var sr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"dropdown",staticClass:"dropdown dropdown-menu-animation",class:t.rootClasses,on:{mouseleave:function(e){t.isHoverable=!1}}},[t.inline?t._e():n("div",{ref:"trigger",staticClass:"dropdown-trigger",attrs:{tabindex:!t.disabled&&t.triggerTabindex,"aria-haspopup":"true"},on:{click:t.onClick,contextmenu:function(e){return e.preventDefault(),t.onContextMenu(e)},mouseenter:t.onHover,"!focus":function(e){return t.onFocus(e)}}},[t._t("trigger",null,{active:t.isActive})],2),n("transition",{attrs:{name:t.animation}},[t.isMobileModal?n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"background",attrs:{"aria-hidden":!t.isActive}}):t._e()]),n("transition",{attrs:{name:t.animation}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&(t.isActive||t.isHoverable)||t.inline,expression:"(!disabled && (isActive || isHoverable)) || inline"},{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],ref:"dropdownMenu",staticClass:"dropdown-menu",style:t.style,attrs:{"aria-hidden":!t.isActive}},[n("div",{staticClass:"dropdown-content",style:t.contentStyle,attrs:{role:t.ariaRole,"aria-modal":!t.inline}},[t._t("default")],2)])])],1)},or=[];const ur=void 0,cr=void 0,lr=void 0,dr=!1;var hr=ot({render:sr,staticRenderFns:or},ur,ar,cr,dr,lr,void 0,void 0),pr={name:"BDropdownItem",mixins:[Ce("dropdown")],props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},separator:Boolean,disabled:Boolean,custom:Boolean,focusable:{type:Boolean,default:!0},paddingless:Boolean,hasLink:Boolean,ariaRole:{type:String,default:""}},computed:{anchorClasses:function(){return{"is-disabled":this.parent.disabled||this.disabled,"is-paddingless":this.paddingless,"is-active":this.isActive}},itemClasses:function(){return{"dropdown-item":!this.hasLink,"is-disabled":this.disabled,"is-paddingless":this.paddingless,"is-active":this.isActive,"has-link":this.hasLink}},ariaRoleItem:function(){return"menuitem"===this.ariaRole||"listitem"===this.ariaRole?this.ariaRole:null},isClickable:function(){return!this.parent.disabled&&!this.separator&&!this.disabled&&!this.custom},isActive:function(){return null!==this.parent.selected&&(this.parent.multiple?this.parent.selected.indexOf(this.value)>=0:this.value===this.parent.selected)},isFocusable:function(){return!this.hasLink&&this.focusable}},methods:{selectItem:function(){this.isClickable&&(this.parent.selectItem(this.value),this.$emit("click"))}}};const fr=pr;var mr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.separator?n("hr",{staticClass:"dropdown-divider"}):t.custom||t.hasLink?n("div",{class:t.itemClasses,attrs:{role:t.ariaRoleItem,tabindex:t.isFocusable?0:null},on:{click:t.selectItem}},[t._t("default")],2):n("a",{staticClass:"dropdown-item",class:t.anchorClasses,attrs:{role:t.ariaRoleItem,tabindex:t.isFocusable?0:null},on:{click:t.selectItem}},[t._t("default")],2)},gr=[];const br=void 0,yr=void 0,vr=void 0,wr=!1;var xr=ot({render:mr,staticRenderFns:gr},br,fr,yr,wr,vr,void 0,void 0),Or={name:"BFieldBody",props:{message:{type:[String,Array]},type:{type:[String,Object]}},render:function(t){var e=this,n=!0;return t("div",{attrs:{class:"field-body"}},this.$slots.default.map((function(r){return r.tag?(n&&(i=e.message,n=!1),t("b-field",{attrs:{type:e.type,message:i}},[r])):r;var i})))}};const Sr=Or,kr=void 0,Tr=void 0,_r=void 0,Ir=void 0;var Cr=ot({},kr,Sr,Tr,Ir,_r,void 0,void 0),Ar={name:"BField",components:o({},Cr.name,Cr),provide:function(){return{BField:this}},inject:{parent:{from:"BField",default:!1}},props:{type:[String,Object],label:String,labelFor:String,message:[String,Array,Object],grouped:Boolean,groupMultiline:Boolean,position:String,expanded:Boolean,horizontal:Boolean,addons:{type:Boolean,default:!0},customClass:String,labelPosition:{type:String,default:function(){return rt.defaultFieldLabelPosition}}},data:function(){return{newType:this.type,newMessage:this.message,fieldLabelSize:null,_isField:!0}},computed:{rootClasses:function(){return[{"is-expanded":this.expanded,"is-horizontal":this.horizontal,"is-floating-in-label":this.hasLabel&&!this.horizontal&&"inside"===this.labelPosition,"is-floating-label":this.hasLabel&&!this.horizontal&&"on-border"===this.labelPosition},this.numberInputClasses]},innerFieldClasses:function(){return[this.fieldType(),this.newPosition,{"is-grouped-multiline":this.groupMultiline}]},hasInnerField:function(){return this.grouped||this.groupMultiline||this.hasAddons()},newPosition:function(){if(void 0!==this.position){var t=this.position.split("-");if(!(t.length<1)){var e=this.grouped?"is-grouped-":"has-addons-";return this.position?e+t[1]:void 0}}},formattedMessage:function(){if(this.parent&&this.parent.hasInnerField)return"";if("string"===typeof this.newMessage)return[this.newMessage];var t=[];if(Array.isArray(this.newMessage))this.newMessage.forEach((function(e){if("string"===typeof e)t.push(e);else for(var n in e)e[n]&&t.push(n)}));else for(var e in this.newMessage)this.newMessage[e]&&t.push(e);return t.filter((function(t){if(t)return t}))},hasLabel:function(){return this.label||this.$slots.label},hasMessage:function(){return(!this.parent||!this.parent.hasInnerField)&&this.newMessage||this.$slots.message},numberInputClasses:function(){if(this.$slots.default){var t=this.$slots.default.filter((function(t){return t.tag&&t.tag.toLowerCase().indexOf("numberinput")>=0}))[0];if(t){var e=["has-numberinput"],n=t.componentOptions.propsData.controlsPosition,r=t.componentOptions.propsData.size;return n&&e.push("has-numberinput-".concat(n)),r&&e.push("has-numberinput-".concat(r)),e}}return null}},watch:{type:function(t){this.newType=t},message:function(t){this.newMessage=t},newMessage:function(t){this.parent&&this.parent.hasInnerField&&(this.parent.type||(this.parent.newType=this.newType),this.parent.message||(this.parent.newMessage=t))}},methods:{fieldType:function(){return this.grouped?"is-grouped":this.hasAddons()?"has-addons":void 0},hasAddons:function(){var t=0;return this.$slots.default&&(t=this.$slots.default.reduce((function(t,e){return e.tag?t+1:t}),0)),t>1&&this.addons&&!this.horizontal}},mounted:function(){if(this.horizontal){var t=this.$el.querySelectorAll(".input, .select, .button, .textarea, .b-slider");t.length>0&&(this.fieldLabelSize="is-normal")}}};const Er=Ar;var Nr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field",class:t.rootClasses},[t.horizontal?n("div",{staticClass:"field-label",class:[t.customClass,t.fieldLabelSize]},[t.hasLabel?n("label",{staticClass:"label",class:t.customClass,attrs:{for:t.labelFor}},[t.$slots.label?t._t("label"):[t._v(t._s(t.label))]],2):t._e()]):[t.hasLabel?n("label",{staticClass:"label",class:t.customClass,attrs:{for:t.labelFor}},[t.$slots.label?t._t("label"):[t._v(t._s(t.label))]],2):t._e()],t.horizontal?n("b-field-body",{attrs:{message:t.newMessage?t.formattedMessage:"",type:t.newType}},[t._t("default")],2):t.hasInnerField?n("div",{staticClass:"field-body"},[n("b-field",{class:t.innerFieldClasses,attrs:{addons:!1,type:t.newType}},[t._t("default")],2)],1):[t._t("default")],t.hasMessage&&!t.horizontal?n("p",{staticClass:"help",class:t.newType},[t.$slots.message?t._t("message",null,{messages:t.formattedMessage}):[t._l(t.formattedMessage,(function(e,r){return[t._v(" "+t._s(e)+" "),r+1<t.formattedMessage.length?n("br",{key:r}):t._e()]}))]],2):t._e()],2)},jr=[];const Dr=void 0,$r=void 0,Rr=void 0,Fr=!1;var Pr=ot({render:Nr,staticRenderFns:jr},Dr,Er,$r,Fr,Rr,void 0,void 0),Mr=40,Lr=5,Br={name:"BClockpickerFace",props:{pickerSize:Number,min:Number,max:Number,double:Boolean,value:Number,faceNumbers:Array,disabledValues:Function},data:function(){return{isDragging:!1,inputValue:this.value,prevAngle:720}},computed:{count:function(){return this.max-this.min+1},countPerRing:function(){return this.double?this.count/2:this.count},radius:function(){return this.pickerSize/2},outerRadius:function(){return this.radius-Lr-Mr/2},innerRadius:function(){return Math.max(.6*this.outerRadius,this.outerRadius-Lr-Mr)},degreesPerUnit:function(){return 360/this.countPerRing},degrees:function(){return this.degreesPerUnit*Math.PI/180},handRotateAngle:function(){var t=this.prevAngle;while(t<0)t+=360;var e=this.calcHandAngle(this.displayedValue),n=this.shortestDistanceDegrees(t,e),r=this.prevAngle+n;return r},handScale:function(){return this.calcHandScale(this.displayedValue)},handStyle:function(){return{transform:"rotate(".concat(this.handRotateAngle,"deg) scaleY(").concat(this.handScale,")"),transition:".3s cubic-bezier(.25,.8,.50,1)"}},displayedValue:function(){return null==this.inputValue?this.min:this.inputValue}},watch:{value:function(t){t!==this.inputValue&&(this.prevAngle=this.handRotateAngle),this.inputValue=t}},methods:{isDisabled:function(t){return this.disabledValues&&this.disabledValues(t)},euclidean:function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},shortestDistanceDegrees:function(t,e){var n=(e-t)%360,r=180-Math.abs(Math.abs(n)-180);return(n+360)%360<180?1*r:-1*r},coordToAngle:function(t,e){var n=2*Math.atan2(e.y-t.y-this.euclidean(t,e),e.x-t.x);return Math.abs(180*n/Math.PI)},getNumberTranslate:function(t){var e=this.getNumberCoords(t),n=e.x,r=e.y;return"translate(".concat(n,"px, ").concat(r,"px)")},getNumberCoords:function(t){var e=this.isInnerRing(t)?this.innerRadius:this.outerRadius;return{x:Math.round(e*Math.sin((t-this.min)*this.degrees)),y:Math.round(-e*Math.cos((t-this.min)*this.degrees))}},getFaceNumberClasses:function(t){return{active:t.value===this.displayedValue,disabled:this.isDisabled(t.value)}},isInnerRing:function(t){return this.double&&t-this.min>=this.countPerRing},calcHandAngle:function(t){var e=this.degreesPerUnit*(t-this.min);return this.isInnerRing(t)&&(e-=360),e},calcHandScale:function(t){return this.isInnerRing(t)?this.innerRadius/this.outerRadius:1},onMouseDown:function(t){t.preventDefault(),this.isDragging=!0,this.onDragMove(t)},onMouseUp:function(){this.isDragging=!1,this.isDisabled(this.inputValue)||this.$emit("change",this.inputValue)},onDragMove:function(t){if(t.preventDefault(),this.isDragging||"click"===t.type){var e=this.$refs.clock.getBoundingClientRect(),n=e.width,r=e.top,i=e.left,a="touches"in t?t.touches[0]:t,s=a.clientX,o=a.clientY,u={x:n/2,y:-n/2},c={x:s-i,y:r-o},l=Math.round(this.coordToAngle(u,c)+360)%360,d=this.double&&this.euclidean(u,c)<(this.outerRadius+this.innerRadius)/2-16,h=Math.round(l/this.degreesPerUnit)+this.min+(d?this.countPerRing:0);l>=360-this.degreesPerUnit/2&&(h=d?this.max:this.min),this.update(h)}},update:function(t){this.inputValue===t||this.isDisabled(t)||(this.prevAngle=this.handRotateAngle,this.inputValue=t,this.$emit("input",t))}}};const zr=Br;var Vr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-clockpicker-face",on:{mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onDragMove,touchstart:t.onMouseDown,touchend:t.onMouseUp,touchmove:t.onDragMove}},[n("div",{ref:"clock",staticClass:"b-clockpicker-face-outer-ring"},[n("div",{staticClass:"b-clockpicker-face-hand",style:t.handStyle}),t._l(t.faceNumbers,(function(e,r){return n("span",{key:r,staticClass:"b-clockpicker-face-number",class:t.getFaceNumberClasses(e),style:{transform:t.getNumberTranslate(e.value)}},[n("span",[t._v(t._s(e.label))])])}))],2)])},Ur=[];const Wr=void 0,Gr=void 0,Hr=void 0,qr=!1;var Jr,Kr=ot({render:Vr,staticRenderFns:Ur},Wr,zr,Gr,qr,Hr,void 0,void 0),Xr=12,Yr={name:"BClockpicker",components:(Jr={},o(Jr,Kr.name,Kr),o(Jr,jt.name,jt),o(Jr,Pr.name,Pr),o(Jr,St.name,St),o(Jr,hr.name,hr),o(Jr,xr.name,xr),Jr),mixins:[Zn],props:{pickerSize:{type:Number,default:290},incrementMinutes:{type:Number,default:5},autoSwitch:{type:Boolean,default:!0},type:{type:String,default:"is-primary"},hoursLabel:{type:String,default:function(){return rt.defaultClockpickerHoursLabel||"Hours"}},minutesLabel:{type:String,default:function(){return rt.defaultClockpickerMinutesLabel||"Min"}}},data:function(){return{isSelectingHour:!0,isDragging:!1,_isClockpicker:!0}},computed:{hoursDisplay:function(){if(null==this.hoursSelected)return"--";if(this.isHourFormat24)return this.pad(this.hoursSelected);var t=this.hoursSelected;return this.meridienSelected===this.pmString&&(t-=12),0===t&&(t=12),t},minutesDisplay:function(){return null==this.minutesSelected?"--":this.pad(this.minutesSelected)},minFaceValue:function(){return this.isSelectingHour&&!this.isHourFormat24&&this.meridienSelected===this.pmString?12:0},maxFaceValue:function(){return this.isSelectingHour?this.isHourFormat24||this.meridienSelected!==this.amString?23:11:59},faceSize:function(){return this.pickerSize-2*Xr},faceDisabledValues:function(){return this.isSelectingHour?this.isHourDisabled:this.isMinuteDisabled}},methods:{onClockInput:function(t){this.isSelectingHour?(this.hoursSelected=t,this.onHoursChange(t)):(this.minutesSelected=t,this.onMinutesChange(t))},onClockChange:function(t){this.autoSwitch&&this.isSelectingHour&&(this.isSelectingHour=!this.isSelectingHour)},onMeridienClick:function(t){this.meridienSelected!==t&&(this.meridienSelected=t,this.onMeridienChange(t))},onInputClick:function(t){this.$refs.dropdown.isActive&&t.stopPropagation()}}};const Zr=Yr;var Qr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-clockpicker control",class:[t.size,t.type,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"append-to-body":t.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(){return[t._t("trigger",[n("b-input",t._b({ref:"input",attrs:{slot:"trigger",autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,disabled:t.disabled,readonly:!t.editable,rounded:t.rounded,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){return t.checkHtml5Validity()}},nativeOn:{click:function(e){return t.onInputClick(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(!0)},change:function(e){return t.onChange(e.target.value)}},slot:"trigger"},"b-input",t.$attrs,!1))])]},proxy:!0}],null,!0)},[n("div",{staticClass:"card",attrs:{disabled:t.disabled,custom:""}},[t.inline?n("header",{staticClass:"card-header"},[n("div",{staticClass:"b-clockpicker-header card-header-title"},[n("div",{staticClass:"b-clockpicker-time"},[n("span",{staticClass:"b-clockpicker-btn",class:{active:t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!0}}},[t._v(t._s(t.hoursDisplay))]),n("span",[t._v(t._s(t.hourLiteral))]),n("span",{staticClass:"b-clockpicker-btn",class:{active:!t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!1}}},[t._v(t._s(t.minutesDisplay))])]),t.isHourFormat24?t._e():n("div",{staticClass:"b-clockpicker-period"},[n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.amString||t.meridienSelected===t.AM},on:{click:function(e){return t.onMeridienClick(t.amString)}}},[t._v(t._s(t.amString))]),n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.pmString||t.meridienSelected===t.PM},on:{click:function(e){return t.onMeridienClick(t.pmString)}}},[t._v(t._s(t.pmString))])])])]):t._e(),n("div",{staticClass:"card-content"},[n("div",{staticClass:"b-clockpicker-body",style:{width:t.faceSize+"px",height:t.faceSize+"px"}},[t.inline?t._e():n("div",{staticClass:"b-clockpicker-time"},[n("div",{staticClass:"b-clockpicker-btn",class:{active:t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!0}}},[t._v(t._s(t.hoursLabel))]),n("span",{staticClass:"b-clockpicker-btn",class:{active:!t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!1}}},[t._v(t._s(t.minutesLabel))])]),t.isHourFormat24||t.inline?t._e():n("div",{staticClass:"b-clockpicker-period"},[n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.amString||t.meridienSelected===t.AM},on:{click:function(e){return t.onMeridienClick(t.amString)}}},[t._v(t._s(t.amString))]),n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected===t.pmString||t.meridienSelected===t.PM},on:{click:function(e){return t.onMeridienClick(t.pmString)}}},[t._v(t._s(t.pmString))])]),n("b-clockpicker-face",{attrs:{"picker-size":t.faceSize,min:t.minFaceValue,max:t.maxFaceValue,"face-numbers":t.isSelectingHour?t.hours:t.minutes,"disabled-values":t.faceDisabledValues,double:t.isSelectingHour&&t.isHourFormat24,value:t.isSelectingHour?t.hoursSelected:t.minutesSelected},on:{input:t.onClockInput,change:t.onClockChange}})],1)]),void 0!==t.$slots.default&&t.$slots.default.length?n("footer",{staticClass:"b-clockpicker-footer card-footer"},[t._t("default")],2):t._e()])]):n("b-input",t._b({ref:"input",attrs:{type:"time",autocomplete:"off",value:t.formatHHMMSS(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,max:t.formatHHMMSS(t.maxTime),min:t.formatHHMMSS(t.minTime),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{click:function(e){return e.stopPropagation(),t.toggle(!0)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(!0)},change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))],1)},ti=[];const ei=void 0,ni=void 0,ri=void 0,ii=!1;var ai=ot({render:Qr,staticRenderFns:ti},ei,Zr,ni,ii,ri,void 0,void 0),si={install:function(t){ct(t,ai)}};ut(si);var oi=si,ui={name:"BSelect",components:o({},St.name,St),mixins:[dt],inheritAttrs:!1,props:{value:{type:[String,Number,Boolean,Object,Array,Function,Date],default:null},placeholder:String,multiple:Boolean,nativeSize:[String,Number]},data:function(){return{selected:this.value,_elementRef:"select"}},computed:{computedValue:{get:function(){return this.selected},set:function(t){this.selected=t,this.$emit("input",t),!this.isValid&&this.checkHtml5Validity()}},spanClasses:function(){return[this.size,this.statusType,{"is-fullwidth":this.expanded,"is-loading":this.loading,"is-multiple":this.multiple,"is-rounded":this.rounded,"is-empty":null===this.selected}]}},watch:{value:function(t){this.selected=t,!this.isValid&&this.checkHtml5Validity()}}};const ci=ui;var li=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:{"is-expanded":t.expanded,"has-icons-left":t.icon}},[n("span",{staticClass:"select",class:t.spanClasses},[n("select",t._b({directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"select",attrs:{multiple:t.multiple,size:t.nativeSize},on:{blur:function(e){t.$emit("blur",e)&&t.checkHtml5Validity()},focus:function(e){return t.$emit("focus",e)},change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.computedValue=e.target.multiple?n:n[0]}}},"select",t.$attrs,!1),[t.placeholder?[null==t.computedValue?n("option",{attrs:{disabled:"",hidden:""},domProps:{value:null}},[t._v(" "+t._s(t.placeholder)+" ")]):t._e()]:t._e(),t._t("default")],2)]),t.icon?n("b-icon",{staticClass:"is-left",attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize}}):t._e()],1)},di=[];const hi=void 0,pi=void 0,fi=void 0,mi=!1;var gi=ot({render:li,staticRenderFns:di},hi,ci,pi,mi,fi,void 0,void 0),bi={name:"BTooltip",props:{active:{type:Boolean,default:!0},type:{type:String,default:function(){return rt.defaultTooltipType}},label:String,delay:{type:Number,default:function(){return rt.defaultTooltipDelay}},closeDelay:{type:Number,default:function(){return rt.defaultTooltipCloseDelay}},position:{type:String,default:"is-top",validator:function(t){return["is-top","is-bottom","is-left","is-right"].indexOf(t)>-1}},triggers:{type:Array,default:function(){return["hover"]}},always:Boolean,square:Boolean,dashed:Boolean,multilined:Boolean,size:{type:String,default:"is-medium"},appendToBody:Boolean,animated:{type:Boolean,default:!0},animation:{type:String,default:"fade"},contentClass:String,autoClose:{type:[Array,Boolean],default:!0}},data:function(){return{isActive:!1,triggerStyle:{},timer:null,_bodyEl:void 0}},computed:{rootClasses:function(){return["b-tooltip",this.type,this.position,this.size,{"is-square":this.square,"is-always":this.always,"is-multiline":this.multilined,"is-dashed":this.dashed}]},newAnimation:function(){return this.animated?this.animation:void 0}},watch:{isActive:function(){this.$emit(this.isActive?"open":"close"),this.appendToBody&&this.updateAppendToBody()}},methods:{updateAppendToBody:function(){var t=this.$refs.tooltip,e=this.$refs.trigger;if(t&&e){var n=this.$data._bodyEl.children[0];n.classList.forEach((function(t){return n.classList.remove(t)})),this.$vnode&&this.$vnode.data&&this.$vnode.data.staticClass&&n.classList.add(this.$vnode.data.staticClass),this.rootClasses.forEach((function(t){if("object"===r(t))for(var e in t)t[e]&&n.classList.add(e);else n.classList.add(t)}));var i=e.getBoundingClientRect(),a=i.top+window.scrollY,s=i.left+window.scrollX,o=e.clientHeight/2/2;switch(this.position){case"is-top":n.style.width="".concat(e.clientWidth,"px"),n.style.height="0px",a-=e.clientHeight-o;break;case"is-bottom":n.style.width="".concat(e.clientWidth,"px"),n.style.height="0px",a+=o;break;case"is-left":n.style.width="0px",n.style.height="".concat(e.clientHeight,"px");break;case"is-right":n.style.width="0px",n.style.height="".concat(e.clientHeight,"px"),s+=e.clientWidth;break}var u=this.$data._bodyEl;u.style.position="absolute",u.style.top="".concat(a,"px"),u.style.left="".concat(s,"px"),u.style.width="0px",u.style.zIndex=this.isActive||this.always?"99":"-1",this.triggerStyle={zIndex:this.isActive||this.always?"100":void 0}}},onClick:function(){var t=this;this.triggers.indexOf("click")<0||this.$nextTick((function(){setTimeout((function(){return t.open()}))}))},onHover:function(){this.triggers.indexOf("hover")<0||this.open()},onContextMenu:function(t){this.triggers.indexOf("contextmenu")<0||(t.preventDefault(),this.open())},onFocus:function(){this.triggers.indexOf("focus")<0||this.open()},open:function(){var t=this;this.delay?this.timer=setTimeout((function(){t.isActive=!0,t.timer=null}),this.delay):this.isActive=!0},close:function(){var t=this;"boolean"===typeof this.autoClose&&(this.autoClose&&this.timer&&clearTimeout(this.timer),this.closeDelay?this.timer=setTimeout((function(){t.isActive=!t.autoClose,t.timer=null}),this.closeDelay):this.isActive=!this.autoClose)},clickedOutside:function(t){if(this.isActive&&Array.isArray(this.autoClose)){if(this.autoClose.includes("outside")&&!this.isInWhiteList(t.target))return void(this.isActive=!1);this.autoClose.includes("inside")&&this.isInWhiteList(t.target)&&(this.isActive=!1)}},keyPress:function(t){var e=t.key;!this.isActive||"Escape"!==e&&"Esc"!==e||Array.isArray(this.autoClose)&&this.autoClose.indexOf("escape")>=0&&(this.isActive=!1)},isInWhiteList:function(t){if(t===this.$refs.content)return!0;if(void 0!==this.$refs.content){var e=this.$refs.content.querySelectorAll("*"),n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(t===o)return!0}}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}return!1}},mounted:function(){this.appendToBody&&"undefined"!==typeof window&&(this.$data._bodyEl=U(this.$refs.content),this.updateAppendToBody())},created:function(){"undefined"!==typeof window&&(document.addEventListener("click",this.clickedOutside),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!==typeof window&&(document.removeEventListener("click",this.clickedOutside),document.removeEventListener("keyup",this.keyPress)),this.appendToBody&&V(this.$data._bodyEl)}};const yi=bi;var vi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"tooltip",class:t.rootClasses},[n("transition",{attrs:{name:t.newAnimation}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.active&&(t.isActive||t.always),expression:"active && (isActive || always)"}],ref:"content",class:["tooltip-content",t.contentClass]},[t.label?[t._v(t._s(t.label))]:t.$slots.content?[t._t("content")]:t._e()],2)]),n("div",{ref:"trigger",staticClass:"tooltip-trigger",style:t.triggerStyle,on:{click:t.onClick,contextmenu:t.onContextMenu,mouseenter:t.onHover,"!focus":function(e){return t.onFocus(e)},"!blur":function(e){return t.close(e)},mouseleave:t.close}},[t._t("default")],2)],1)},wi=[];const xi=void 0,Oi=void 0,Si=void 0,ki=!1;var Ti=ot({render:vi,staticRenderFns:wi},xi,yi,Oi,ki,Si,void 0,void 0),_i=["red","green","blue","alpha"],Ii={transparent:"#00000000",black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",orange:"#ffa500",aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",oldlace:"#fdf5e6",olivedrab:"#6b8e23",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32",rebeccapurple:"#663399"},Ci=function(t){function e(){return i(this,e),w(this,d(e).call(this,"ColorTypeError: type must be hex(a), rgb(a) or hsl(a)"))}return l(e,t),e}(g(Error)),Ai=function(){function t(){var e=this;if(i(this,t),arguments.length>0)return t.parse.apply(t,arguments);this.$channels=new Uint8Array(_i.length),_i.forEach((function(t,n){Object.defineProperty(e,t,{get:function(){return e.$channels[n]},set:function(t){Number.isNaN(t/1)||(e.$channels[n]=Math.min(255,Math.max(0,t)))},enumerable:!0,configurable:!0})})),["hue","saturation","lightness"].forEach((function(t){var n=t.replace(/^./,(function(t){return t.toUpperCase()}));Object.defineProperty(e,t,{get:function(){return e["get".concat(n)]()},set:function(t){Number.isNaN(t/1)||e["set".concat(n)](t)},enumerable:!0,configurable:!0})}))}return s(t,[{key:"getHue",value:function(){var t=Array.from(this.$channels).map((function(t){return t/255})),e=O(t,3),n=e[0],r=e[1],i=e[2],a=[Math.min(n,r,i),Math.max(n,r,i)],s=a[0],o=a[1],u=o-s,c=0;if(0===u)return c;c=n===o?(r-i)/u%6:r===o?(i-n)/u+2:(n-r)/u+4,c*=60;while(c!==-1/0&&c<0)c+=360;return Math.round(c%360)}},{key:"setHue",value:function(e){for(var n=t.fromHSL(e,this.saturation,this.lightness,this.alpha/255),r=0;r<this.$channels.length;r++)this.$channels[r]=Number(n.$channels[r])}},{key:"getSaturation",value:function(){var t=Array.from(this.$channels).map((function(t){return t/255})),e=O(t,3),n=e[0],r=e[1],i=e[2],a=[Math.min(n,r,i),Math.max(n,r,i)],s=a[0],o=a[1],u=o-s;return 0!==u?Math.round(u/(1-Math.abs(2*this.lightness-1))*100)/100:0}},{key:"setSaturation",value:function(e){var n=this,r=t.fromHSL(this.hue,e,this.lightness,this.alpha/255);_i.forEach((function(t,e){return n.$channels[e]=r.$channels[e]}))}},{key:"getLightness",value:function(){var t=Array.from(this.$channels).map((function(t){return t/255})),e=O(t,3),n=e[0],r=e[1],i=e[2],a=[Math.min(n,r,i),Math.max(n,r,i)],s=a[0],o=a[1];return Math.round((o+s)/2*100)/100}},{key:"setLightness",value:function(e){var n=this,r=t.fromHSL(this.hue,this.lightness,e,this.alpha/255);_i.forEach((function(t,e){return n.$channels[e]=r.$channels[e]}))}},{key:"clone",value:function(){var e=this,n=new t;return _i.forEach((function(t,r){return n.$channels[r]=e.$channels[r]})),n}},{key:"toString",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex";switch(String(e).toLowerCase()){case"hex":return"#"+_i.slice(0,3).map((function(e){return t[e].toString(16).padStart(2,"0")})).join("");case"hexa":return"#"+_i.map((function(e){return t[e].toString(16).padStart(2,"0")})).join("");case"rgb":return"rgb(".concat(this.red,", ").concat(this.green,", ").concat(this.blue,")");case"rgba":return"rgba(".concat(this.red,", ").concat(this.green,", ").concat(this.blue,", ").concat(Math.round(this.alpha/2.55)/100,")");case"hsl":return"hsl(".concat(Math.round(this.hue),"deg, ").concat(Math.round(100*this.saturation),"%, ").concat(Math.round(100*this.lightness),"%)");case"hsla":return"hsla(".concat(Math.round(this.hue),"deg, ").concat(Math.round(100*this.saturation),"%, ").concat(Math.round(100*this.lightness),"%, ").concat(Math.round(this.alpha/2.55)/100,")");default:throw new Ci}}},{key:Symbol.toString,get:function(){return this.toString("hex")}}],[{key:"parse",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if("object"===r(n[0]))return t.parseObject(n[0]);if(n.every((function(t){return!Number.isNaN(t/1)}))){var a=new t;if(n.length>3)a.red=n[0],a.green=n[1],a.blue=n[2],n[3]&&(a.alpha=n[3]);else if(1===n.length){var s=Number(n[0]);return t.parseIndex(s,s>Math.pow(2,24)?3:4)}}else if("string"===typeof n[0]){var o=null;if("string"===typeof Ii[n[0].toLowerCase()])return t.parseHex(Ii[n[0].toLowerCase()]);if(null!==(o=n[0].match(/^(#|&h|0x)?(([a-f0-9]{3,4}){1,2})$/i)))return t.parseHex(o[2]);if(null!==(o=n[0].match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(\s*,\s*(\d*\.?\d+))?\s*\)$/i))){var u=[o[1],o[2],o[3],"undefined"!==typeof o[5]?o[5]:1];return t.fromRGB.apply(t,k(u.map((function(t){return Number(t)}))))}if(n[0].match(/^(h(sl|wb)a?|lab|color|cmyk)\(/i))throw new Error("Color expression not implemented yet")}throw new Error("Invalid color expression")}},{key:"parseObject",value:function(e){var n=new t;return null===e||"object"!==r(e)?n:t.isColor(e)?e.clone():(_i.forEach((function(t){Number.isNaN(e[t])||(n[t]=e[t])})),n)}},{key:"parseHex",value:function(e){if("string"!==typeof e)throw new Error("Hex expression must be a string");if(e=e.trim().replace(/^(0x|&h|#)/i,""),3!==e.length&&4!==e.length||(e=e.split("").map((function(t){return t.repeat(2)})).join("")),6!==e.length&&8!==e.length)throw new Error("Incorrect Hex expression length");var n=e.split(/(..)/).filter((function(t){return t})).map((function(t){return Number.parseInt(t,16)}));return"number"===typeof n[3]&&(n[3]/=255),t.fromRGB.apply(t,k(n))}},{key:"parseIndex",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=new t,i=0;i<4;i++)r[_i[i]]=e>>8*(n-i)&&255;return r}},{key:"fromRGB",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if([e,n,r,i].some((function(t){return Number.isNaN(t/1)})))throw new Error("Invalid arguments");i*=255;var a=new t;return[e,n,r,i].forEach((function(t,e){a[_i[e]]=t})),a}},{key:"fromHSL",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if([e,n,r,i].some((function(t){return Number.isNaN(t)})))throw new Error("Invalid arguments");while(e<0&&e!==-1/0)e+=360;e%=360,n=Math.max(0,Math.min(1,n)),r=Math.max(0,Math.min(1,r)),i=Math.max(0,Math.min(1,i));var a=(1-Math.abs(2*r-1))*n,s=a*(1-Math.abs(e/60%2-1)),o=r-a/2,u=e<60?[a,s,0]:e<120?[s,a,0]:e<180?[0,a,s]:e<240?[0,s,a]:e<300?[s,0,a]:[a,0,s],c=O(u,3),l=c[0],d=c[1],h=c[2];return t.fromRGB(255*(l+o),255*(d+o),255*(h+o),i)}},{key:"isColor",value:function(e){return e instanceof t}}]),t}(),Ei=.86602540378,Ni=.5,ji=0,Di={name:"BColorpickerHSLRepresentationTriangle",props:{value:{type:Object,required:!0,validator:function(t){return"number"===typeof t.hue&&"number"===typeof t.saturation&&"number"===typeof t.lightness}},size:{type:Number,default:200},thickness:{type:Number,default:20}},data:function(){return{id:ji++,hue:this.value.hue,saturation:this.value.saturation,lightness:this.value.lightness,captureMouse:!1,captureType:"hue",clientOffset:{cx:-1,cy:-1,width:0,height:0},cos30:Ei,sin30:Ni,debounce:0}},computed:{viewBox:function(){var t=this.size;return"0 0 ".concat(t," ").concat(t)},internalRadius:function(){return this.size/2-this.thickness},haloPath:function(){var t=this.size,e=this.thickness,n=t/2-2,r=n-e,i=t/2;return"M".concat(i-n," ").concat(i,"a").concat(n,"  ").concat(n,"  0 1 1 ").concat(2*n," 0")+"h".concat(-e)+"a".concat(-r,"  ").concat(r,"  0 1 0 ").concat(-2*r," 0")+"a".concat(r,"  ").concat(r,"  0 1 0 ").concat(2*r," 0")+"h".concat(e)+"a".concat(n,"  ").concat(n,"  0 1 1 ").concat(-2*n," 0z")},trianglePath:function(){var t=this.size,e=this.thickness,n=t-4,r=(n-2*e)/2;return"M0 ".concat(-r)+"L".concat(Ei*r," ").concat(Ni*r)+"H".concat(-Ei*r,"z")}},watch:{captureMouse:function(t,e){if(!1===e&&!1!==t){var n=this.$el.getBoundingClientRect();this.clientOffset.cx=n.x+n.width/2,this.clientOffset.cy=n.y+n.height/2,this.clientOffset.width=n.width,this.clientOffset.height=n.height}},value:{deep:!0,handler:function(t){var e=this,n=t.hue,r=t.saturation,i=t.lightness;window.clearTimeout(this.debounce),this.debounce=window.setTimeout((function(){i>=.03&&i<=.97&&r>0&&(e.hue=n),e.saturation=r,e.lightness=i}),200)}}},methods:{increaseHue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.hue=(this.hue+t)%360},decreaseHue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.hue=(360+this.hue-t)%360},increaseSaturation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.saturation=Math.min(1,Math.max(0,this.saturation+t)),this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness))},decreaseSaturation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.saturation=Math.min(1,Math.max(0,this.saturation-t)),this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness))},increaseLightness:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness+t))},decreaseLightness:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness-t))},hueKeyPress:function(t){var e=!1;switch(t.key){case"ArrowRight":case"ArrowUp":this.increaseHue(),e=!0;break;case"ArrowLeft":case"ArrowDown":this.decreaseHue(),e=!0;break;case"Home":this.increaseHue(360-this.hue),e=!0;break;case"End":this.decreaseHue(this.hue),e=!0;break;case"PageUp":this.increaseHue(60-this.hue%60),e=!0;break;case"PageDown":this.decreaseHue(60+this.hue%60),e=!0;break}e&&(t.preventDefault(),t.stopPropagation(),this.emitColor())},slKeyPress:function(t){var e=!1;switch(t.key){case"ArrowRight":this.decreaseLightness(),e=!0;break;case"ArrowUp":this.increaseSaturation(),e=!0;break;case"ArrowLeft":this.increaseLightness(),e=!0;break;case"ArrowDown":this.decreaseSaturation(),e=!0;break;case"Home":this.increaseLightness(1-this.lightness),e=!0;break;case"End":this.decreaseLightness(this.lightness),e=!0;break;case"PageUp":this.increaseSaturation(1-this.saturation),e=!0;break;case"PageDown":this.decreaseSaturation(this.saturation),e=!0;break}e&&(t.preventDefault(),t.stopPropagation(),this.emitColor())},clickHue:function(t){this.startMouseCapture(t),this.trackMouse(t),this.stopMouseCapture(t),this.$refs.hueCursor.focus()},clickSL:function(t){this.startMouseCapture(t),this.trackMouse(t),this.stopMouseCapture(t),this.$refs.slCursor.focus()},trackMouse:function(t){if(!1!==this.captureMouse){t.preventDefault(),t.stopPropagation();var e=0,n=0;if("undefined"!==typeof t.touches&&t.touches.length){var r=[t.touches[0].clientX,t.touches[0].clientY];e=r[0],n=r[1]}else{var i=[t.clientX,t.clientY];e=i[0],n=i[1]}var a=Math.atan2(n-this.clientOffset.cy,e-this.clientOffset.cx);if("sl"===this.captureType){var s=Math.sqrt(Math.pow(e-this.clientOffset.cx,2)+Math.pow(n-this.clientOffset.cy,2)),o=this.size/this.clientOffset.width,u=s*Math.cos(a-this.hue/180*Math.PI)*o,c=s*Math.sin(a-this.hue/180*Math.PI)*o,l=this.internalRadius,d=1-(Math.min(l*Ni,Math.max(-l,c))+l)/(l+l*Ni),h=(Math.min(l*Ei*(1-d),Math.max(-l*Ei*(1-d),u))+l*Ei)/(2*l*Ei);this.saturation=Math.round(1e3*d)/1e3,this.lightness=1-Math.round(1e3*h)/1e3}else this.hue=Math.round(a/Math.PI*180+90)%360;this.emitColor()}},startMouseCapture:function(t){t.stopPropagation(),this.captureMouse=!0,null!==t.target.closest(".colorpicker-triangle-slider-sl")?this.captureType="sl":this.captureType="hue"},stopMouseCapture:function(t){!1!==this.captureMouse&&(t.preventDefault(),t.stopPropagation(),this.$refs["sl"===this.captureType?"slCursor":"hueCursor"].focus()),this.captureMouse=!1},emitColor:function(){var t=this.hue,e=this.saturation,n=this.lightness;this.$emit("input",Ai.fromHSL(t,e,n)),window.clearTimeout(this.debounce)}},mounted:function(){window.addEventListener("mousemove",this.trackMouse),window.addEventListener("touchmove",this.trackMouse,{passive:!1}),window.addEventListener("mouseup",this.stopMouseCapture),window.addEventListener("touchend",this.stopMouseCapture)},beforeDestroy:function(){window.removeEventListener("mousemove",this.trackMouse),window.removeEventListener("touchmove",this.trackMouse),window.removeEventListener("mouseup",this.stopMouseCapture),window.removeEventListener("touchend",this.stopMouseCapture)}};const $i=Di;var Ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"b-colorpicker-triangle",attrs:{viewBox:t.viewBox}},[n("defs",[n("linearGradient",{attrs:{id:"cp-triangle-gradient-ligthness-"+t.id,x1:"0",y1:"0",x2:"1",y2:"0"}},[n("stop",{attrs:{offset:"0%","stop-color":"#fff"}}),n("stop",{attrs:{offset:"100%","stop-color":"#000"}})],1),n("linearGradient",{attrs:{id:"cp-triangle-gradient-saturation-"+t.id,x1:"0",y1:"0",x2:"0",y2:"1"}},[n("stop",{attrs:{offset:"0%","stop-color":"hsl("+t.hue+"deg, 100%, 50%)","stop-opacity":"1"}}),n("stop",{attrs:{offset:"100%","stop-color":"hsl("+t.hue+"deg, 100%, 50%)","stop-opacity":"0"}})],1),n("clipPath",{attrs:{id:"cp-triangle-clip-"+t.id}},[n("path",{attrs:{d:t.haloPath}})])],1),n("g",{staticClass:"colorpicker-triangle-slider-hue"},[n("foreignObject",{attrs:{x:0,y:0,width:t.size,height:t.size,"clip-path":"url(#cp-triangle-clip-"+t.id+")"}},[n("div",{staticClass:"colorpicker-triangle-hue",on:{click:t.clickHue,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}})]),n("g",{style:"transform: rotate("+t.hue+"deg)"},[n("foreignObject",{attrs:{x:t.size/2-4,y:0,width:"8",height:t.thickness+4}},[n("div",{ref:"hueCursor",staticClass:"hue-range-thumb",style:"background-color: hsl("+t.hue+"deg, 100%, 50%)",attrs:{role:"slider",tabindex:"0","aria-label":"Hue","aria-valuemin":"0","aria-valuenow":t.hue,"aria-valuemax":"360"},on:{click:t.clickHue,keydown:t.hueKeyPress,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}})])],1)],1),n("g",{staticClass:"colorpicker-triangle-slider-sl",style:"transform: rotate("+t.hue+"deg) translate(50%, 50%)",attrs:{role:"graphics-datagroup","aria-datascales":"lightness, saturation"}},[n("path",{attrs:{d:t.trianglePath,fill:"url(#cp-triangle-gradient-ligthness-"+t.id+")"}}),n("path",{staticStyle:{"mix-blend-mode":"overlay"},attrs:{d:t.trianglePath,fill:"url(#cp-triangle-gradient-saturation-"+t.id+")"},on:{click:t.clickSL,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}}),n("foreignObject",{attrs:{x:(t.internalRadius-3)*t.cos30*(.5-t.lightness)*2-6,y:-t.internalRadius+(1-t.saturation)*(t.internalRadius-3)*1.5-3,width:"12",height:"12"}},[n("div",{ref:"slCursor",staticClass:"sl-range-thumb",style:{backgroundColor:"hsl("+t.hue+"deg, "+100*t.saturation+"%, "+100*t.lightness+"%)"},attrs:{tabindex:"0","aria-datavalues":100*t.saturation+"%, "+100*t.lightness+"%"},on:{click:t.clickSL,keydown:t.slKeyPress,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}})])],1)])},Fi=[];const Pi=void 0,Mi=void 0,Li=void 0,Bi=!1;var zi=ot({render:Ri,staticRenderFns:Fi},Pi,$i,Mi,Bi,Li,void 0,void 0);function Vi(){var t=x(["","px"]);return Vi=function(){return t},t}function Ui(){var t=x(["","px"]);return Ui=function(){return t},t}function Wi(){var t=x(["","px"]);return Wi=function(){return t},t}var Gi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=[];return t.forEach((function(t,e){i.push(t),n[e]&&i.push(Number.isNaN(n[e]/1)?n[e]:Math.round(10*n)/10)})),i.join("")},Hi={name:"BColorpickerHSLRepresentationSquare",props:{value:{type:Object,required:!0,validator:function(t){return"number"===typeof t.hue&&"number"===typeof t.saturation&&"number"===typeof t.lightness}},size:{type:Number,default:200},thickness:{type:Number,default:20}},data:function(){return{hue:this.value.hue,saturation:this.value.saturation,lightness:this.value.lightness,captureMouse:!1,captureType:"hue",clientOffset:{cx:-1,cy:-1,width:0,height:0},debounce:0}},computed:{hueThumbStyle:function(){var t=this.hue,e=this.size,n=this.thickness,r=e-n,i=e/2,a=(t+720+90)%360/180*Math.PI,s=1/Math.cos(Math.PI/4),o={x:-Math.min(1,Math.max(-1,s*Math.cos(a)))/2*r+i,y:-Math.min(1,Math.max(-1,s*Math.sin(a)))/2*r+i},u=o.x,c=o.y;return{background:"hsl(".concat(t,"deg, 100%, 50%)"),left:Gi(Wi(),u),top:Gi(Ui(),c),width:Gi(Vi(),n-2)}},slThumbStyle:function(){var t=this.hue,e=this.saturation,n=this.lightness;return e=Math.max(0,Math.min(1,e)),n=Math.max(0,Math.min(1,n)),{background:"hsl(".concat(t,"deg, ").concat(100*e,"%, ").concat(100*n,"%)"),left:"".concat(100*e,"%"),top:"".concat(100*(1-n),"%")}},SLBackground:function(){var t=this.hue;return"linear-gradient(90deg, hsl(".concat(t,"deg, 0%, 50%), hsl(").concat(t,"deg, 100%, 50%))")}},watch:{captureMouse:function(t,e){if(!1===e&&!1!==t){var n=this.$el.getBoundingClientRect();this.clientOffset.cx=n.x+n.width/2,this.clientOffset.cy=n.y+n.height/2,this.clientOffset.width=n.width,this.clientOffset.height=n.height}},value:{deep:!0,handler:function(t){var e=this,n=t.hue,r=t.saturation,i=t.lightness;window.clearTimeout(this.debounce),this.debounce=window.setTimeout((function(){e.hue=n,e.saturation=r,e.lightness=i}),200)}}},methods:{increaseHue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.hue=(this.hue+t)%360},decreaseHue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.hue=(360+this.hue-t)%360},increaseSaturation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.saturation=Math.min(1,Math.max(0,this.saturation+t)),this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness))},decreaseSaturation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.saturation=Math.min(1,Math.max(0,this.saturation-t)),this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness))},increaseLightness:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness+t))},decreaseLightness:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.lightness=Math.min(.5+.5*(1-this.saturation),Math.max(.5-.5*(1-this.saturation),this.lightness-t))},hueKeyPress:function(t){var e=!1;switch(t.key){case"ArrowRight":case"ArrowUp":this.increaseHue(),e=!0;break;case"ArrowLeft":case"ArrowDown":this.decreaseHue(),e=!0;break;case"Home":this.increaseHue(360-this.hue),e=!0;break;case"End":this.decreaseHue(this.hue),e=!0;break;case"PageUp":this.increaseHue(60-this.hue%60),e=!0;break;case"PageDown":this.decreaseHue(60+this.hue%60),e=!0;break}e&&(t.preventDefault(),t.stopPropagation(),this.emitColor())},slKeyPress:function(t){var e=!1;switch(t.key){case"ArrowRight":this.increaseSaturation(),e=!0;break;case"ArrowUp":this.increaseLightness(),e=!0;break;case"ArrowLeft":this.decreaseSaturation(),e=!0;break;case"ArrowDown":this.decreaseLightness(),e=!0;break;case"Home":this.increaseLightness(1-this.lightness),e=!0;break;case"End":this.decreaseLightness(this.lightness),e=!0;break;case"PageUp":this.increaseSaturation(1-this.saturation),e=!0;break;case"PageDown":this.decreaseSaturation(this.saturation),e=!0;break}e&&(t.preventDefault(),t.stopPropagation(),this.emitColor())},startMouseCapture:function(t){t.stopPropagation(),this.captureMouse=!0,null!==t.target.closest(".colorpicker-square-slider-sl")?this.captureType="sl":this.captureType="hue"},stopMouseCapture:function(t){!1!==this.captureMouse&&(t.preventDefault(),t.stopPropagation(),this.$refs["sl"===this.captureType?"slCursor":"hueCursor"].focus()),this.captureMouse=!1},clickHue:function(t){this.startMouseCapture(t),this.trackMouse(t),this.stopMouseCapture(t),this.$refs.hueCursor.focus()},clickSL:function(t){this.startMouseCapture(t),this.trackMouse(t),this.stopMouseCapture(t),this.$refs.slCursor.focus()},trackMouse:function(t){if(!1!==this.captureMouse){t.preventDefault(),t.stopPropagation();var e=0,n=0;if("undefined"!==typeof t.touches&&t.touches.length){var r=[t.touches[0].clientX,t.touches[0].clientY];e=r[0],n=r[1]}else{var i=[t.clientX,t.clientY];e=i[0],n=i[1]}var a=Math.atan2(n-this.clientOffset.cy,e-this.clientOffset.cx);if("sl"===this.captureType){var s=(e-this.clientOffset.cx)/(this.clientOffset.width-2*this.thickness)+.5,o=(n-this.clientOffset.cy)/(this.clientOffset.height-2*this.thickness)+.5;this.saturation=Math.round(1e3*Math.min(1,Math.max(0,s)))/1e3,this.lightness=1-Math.round(1e3*Math.min(1,Math.max(0,o)))/1e3}else this.hue=Math.round(a/Math.PI*180+90)%360;this.emitColor()}},emitColor:function(){var t=this.hue,e=this.saturation,n=this.lightness;this.$emit("input",Ai.fromHSL(t,e,n)),window.clearTimeout(this.debounce)}},mounted:function(){window.addEventListener("mousemove",this.trackMouse),window.addEventListener("touchmove",this.trackMouse,{passive:!1}),window.addEventListener("mouseup",this.stopMouseCapture),window.addEventListener("touchend",this.stopMouseCapture)},beforeDestroy:function(){window.removeEventListener("mousemove",this.trackMouse),window.removeEventListener("touchmove",this.trackMouse),window.removeEventListener("mouseup",this.stopMouseCapture),window.removeEventListener("touchend",this.stopMouseCapture)}};const qi=Hi;var Ji=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-colorpicker-square",style:{width:t.size+"px"}},[n("div",{staticClass:"colorpicker-square-slider-hue",on:{click:t.clickHue,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}},[n("div",{ref:"hueCursor",staticClass:"hue-range-thumb",style:t.hueThumbStyle,attrs:{role:"slider",tabindex:"0","aria-label":"Hue","aria-valuemin":"0","aria-valuemax":"359"}})]),n("div",{staticClass:"colorpicker-square-slider-sl",style:{background:t.SLBackground,margin:t.thickness+"px"},attrs:{"aria-datascales":"lightness, saturation"},on:{click:t.clickSL,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}},[n("div",{ref:"slCursor",staticClass:"sl-range-thumb",style:t.slThumbStyle,attrs:{role:"slider",tabindex:"0","aria-datavalues":100*t.saturation+"%, "+100*t.lightness+"%"},on:{click:t.clickSL,keydown:t.slKeyPress,mousedown:function(e){return e.preventDefault(),t.startMouseCapture(e)},touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}})])])},Ki=[];const Xi=void 0,Yi=void 0,Zi=void 0,Qi=!1;var ta=ot({render:Ji,staticRenderFns:Ki},Xi,qi,Yi,Qi,Zi,void 0,void 0),ea={name:"BColorpickerAlphaSlider",components:o({},Ti.name,Ti),props:{value:{type:Number,validator:function(t){return t>=0&&t<256}},color:[String,Object]},data:function(){var t=Ai.parse(this.color);return t.alpha=0,{startColor:t.toString("hex"),endColor:t.toString("hexa"),percent:Math.round(100*(1-this.value/255)),captureMouse:!1,clientOffset:{cx:-1,cy:-1,width:0,height:0}}},computed:{style:function(){return{backgroundImage:"linear-gradient(90deg, ".concat(this.startColor," 0%, ").concat(this.endColor," 100%),\n                    linear-gradient(45deg, #c7c7c7 25%, transparent 25%, transparent 75%, #c7c7c7 75%, #c7c7c7),\n                    linear-gradient(45deg, #c7c7c7 25%, transparent 25%, transparent 75%, #c7c7c7 75%, #c7c7c7)"),backgroundSize:"100% 100%, 1em 1em, 1em 1em",backgroundPosition:"0 0, .5em .5em, 0 0"}}},watch:{value:function(t,e){t!==e&&(this.percent=Math.round(100*(1-t/255)))},color:function(t){var e=Ai.parse(t);e.alpha=0,this.startColor=e.toString("hex"),this.endColor=e.toString("hexa")},captureMouse:function(t,e){if(!1===e&&!1!==t){var n=this.$el.getBoundingClientRect();this.clientOffset.cx=n.x+n.width/2,this.clientOffset.cy=n.y+n.height/2,this.clientOffset.width=n.width,this.clientOffset.height=n.height}}},methods:{increaseAlpha:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.percent=Math.max(0,Math.min(100,this.percent+t))},decreaseAlpha:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01;this.increaseAlpha(-t)},alphaKeyPress:function(t){var e=!1;switch(t.key){case"ArrowRight":case"ArrowUp":this.increaseAlpha(),e=!0;break;case"ArrowLeft":case"ArrowDown":this.decreaseAlpha(),e=!0;break;case"Home":this.decreaseAlpha(this.percent),e=!0;break;case"End":this.increaseAlpha(100-this.percent),e=!0;break;case"PageUp":this.increaseAlpha(10-this.percent%10),e=!0;break;case"PageDown":this.decreaseAlpha(this.percent%10),e=!0;break}e&&(t.preventDefault(),t.stopPropagation(),this.emitAlpha())},clickAlpha:function(t){this.startMouseCapture(t),this.trackMouse(t),this.stopMouseCapture(t),this.$refs.alphaCursor.focus()},startMouseCapture:function(t){t.stopPropagation(),this.captureMouse=!0},trackMouse:function(t){if(!1!==this.captureMouse){t.preventDefault(),t.stopPropagation();var e=[0,0],n=e[0];if("undefined"!==typeof t.touches&&t.touches.length){var r=[t.touches[0].clientX];n=r[0]}else{var i=[t.clientX];n=i[0]}var a=.5+(this.clientOffset.cx-n)/this.clientOffset.width;this.percent=Math.round(100-100*Math.max(0,Math.min(1,a))),this.emitAlpha()}},stopMouseCapture:function(t){!1!==this.captureMouse&&(t.preventDefault(),t.stopPropagation(),this.$refs.alphaCursor.focus()),this.captureMouse=!1},emitAlpha:function(){this.$emit("input",255*(1-this.percent/100))}},mounted:function(){window.addEventListener("mousemove",this.trackMouse),window.addEventListener("touchmove",this.trackMouse,{passive:!1}),window.addEventListener("mouseup",this.stopMouseCapture),window.addEventListener("touchend",this.stopMouseCapture)},beforeDestroy:function(){window.removeEventListener("mousemove",this.trackMouse),window.removeEventListener("touchmove",this.trackMouse),window.removeEventListener("mouseup",this.stopMouseCapture),window.removeEventListener("touchend",this.stopMouseCapture)}};const na=ea;var ra=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-colorpicker-alpha-slider",style:t.style,on:{click:t.clickAlpha,keydown:t.alphaKeyPress,mousedown:t.startMouseCapture,touchstart:function(e){return e.preventDefault(),t.startMouseCapture(e)}}},[n("div",{ref:"alphaCursor",staticClass:"alpha-range-thumb",style:{left:t.percent+"%"},attrs:{role:"slider",tabindex:"0","aria-label":"Tranparency","aria-valuemin":"0","aria-valuenow":t.percent,"aria-valuemax":"100"}},[n("b-tooltip",{attrs:{label:t.percent+"%",always:t.captureMouse}})],1)])},ia=[];const aa=void 0,sa=void 0,oa=void 0,ua=!1;var ca,la=ot({render:ra,staticRenderFns:ia},aa,na,sa,ua,oa,void 0,void 0),da=function(t,e){return t.alpha<1?t.toString("hexa"):t.toString("hex")},ha=function(t,e){return Ai.parse(t)},pa={name:"BColorpicker",components:(ca={},o(ca,zi.name,zi),o(ca,ta.name,ta),o(ca,la.name,la),o(ca,jt.name,jt),o(ca,Pr.name,Pr),o(ca,gi.name,gi),o(ca,St.name,St),o(ca,hr.name,hr),o(ca,xr.name,xr),ca),mixins:[dt],inheritAttrs:!1,provide:function(){return{$colorpicker:this}},props:{value:{type:[String,Object],validator:function(t){return"string"===typeof t||"object"===r(t)&&"number"===typeof t.red&&"number"===typeof t.green&&"number"===typeof t.blue}},representation:{type:String,default:"triangle",value:function(t){return["triangle","square"].some((function(e){return e===t}))}},inline:Boolean,disabled:Boolean,horizontalColorPicker:{type:Boolean,default:!1},colorFormatter:{type:Function,default:function(t,e){return"function"===typeof rt.defaultColorFormatter?rt.defaultColorFormatter(t):da(t)}},colorParser:{type:Function,default:function(t,e){return"function"===typeof rt.defaultColorParser?rt.defaultColorParser(t):ha(t)}},alpha:{type:Boolean,default:!1},expanded:Boolean,position:String,mobileModal:{type:Boolean,default:function(){return rt.defaultDatepickerMobileModal}},focusable:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:function(){return rt.defaultTrapFocus}},appendToBody:Boolean},data:function(){return{color:this.parseColor(this.value)}},computed:{computedValue:{set:function(t){this.color=this.parseColor(t)},get:function(){return this.color}},background:function(){if(this.alpha)return"linear-gradient(\n                    45deg,\n                    ".concat(this.computedValue.toString("hex")," 50%,\n                    ").concat(this.computedValue.toString("hexa")," 50%\n                )");var t=this.computedValue.toString("hex");return"linear-gradient(\n                    45deg,\n                    ".concat(t," 50%,\n                    ").concat(t," 50%\n                )")},triggerStyle:function(){var t=this.computedValue,e=t.red,n=t.green,r=t.blue,i=.299*e+.587*n+.114*r>186;return{backgroundColor:"#ffffff",backgroundImage:"\n                    ".concat(this.background,",\n                    linear-gradient(45deg, #c7c7c7 25%, transparent 25%, transparent 75%, #c7c7c7 75%, #c7c7c7),\n                    linear-gradient(45deg, #c7c7c7 25%, transparent 25%, transparent 75%, #c7c7c7 75%, #c7c7c7)\n                "),backgroundSize:"100% 100%, 16px 16px, 16px 16px",backgroundPosition:"0 0, 8px 8px, 0 0",color:i?"#000000":"#FFFFFF",textShadow:"0 0 2px ".concat(i?"#FFFFFFAA":"#000000AA")}},isMobile:function(){return this.mobileNative&&z.any()},ariaRole:function(){if(!this.inline)return"dialog"}},watch:{value:function(t){this.computedValue=new Ai(t)}},methods:{parseColor:function(t){try{return this.colorParser(t)}catch(e){return new Ai}},updateColor:function(t){t.alpha=this.computedValue.alpha,this.computedValue=t,this.$emit("input",t)},updateAlpha:function(t){this.computedValue.alpha=t,this.$emit("input",this.computedValue)},updateRGB:function(){this.$emit("input",this.computedValue)},formatValue:function(t){return t?this.colorFormatter(t,this):null},togglePicker:function(t){if(this.$refs.dropdown){var e="boolean"===typeof t?t:!this.$refs.dropdown.isActive;(e||this.closeOnClick)&&(this.$refs.dropdown.isActive=e)}},handleOnFocus:function(t){this.onFocus(t),this.openOnFocus&&this.togglePicker(!0)},toggle:function(){if(this.mobileNative&&this.isMobile){var t=this.$refs.input.$refs.input;return t.focus(),void t.click()}this.$refs.dropdown.toggle()},onInputClick:function(t){this.$refs.dropdown.isActive&&t.stopPropagation()},keyPress:function(t){var e=t.key;this.$refs.dropdown&&this.$refs.dropdown.isActive&&("Escape"===e||"Esc"===e)&&this.togglePicker(!1)},onActiveChange:function(t){t||this.onBlur(),this.$emit("active-change",t)}}};const fa=pa;var ma=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"colorpicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,expanded:t.expanded,disabled:t.disabled,inline:t.inline,"mobile-modal":t.mobileModal,"trap-focus":t.trapFocus,"aria-role":t.ariaRole,"append-to-body":t.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(){return[t._t("trigger",[n("b-button",{style:t.triggerStyle,attrs:{expanded:t.expanded,disabled:t.disabled}},[n("span",{staticClass:"color-name"},[t._v(t._s(t.colorFormatter(t.computedValue)))])])])]},proxy:!0}],null,!0)},[n("b-dropdown-item",{class:{"dropdown-horizontal-colorpicker":t.horizontalColorPicker},attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[n("div",[n("header",{staticClass:"colorpicker-header"},[void 0!==t.$slots.header&&t.$slots.header.length?[t._t("header")]:t._e()],2),n("div",{staticClass:"colorpicker-content"},["square"===t.representation?n("b-colorpicker-h-s-l-representation-square",{attrs:{value:t.computedValue},on:{input:t.updateColor}}):n("b-colorpicker-h-s-l-representation-triangle",{attrs:{value:t.computedValue},on:{input:t.updateColor}})],1)]),n("footer",{staticClass:"colorpicker-footer"},[t.alpha?n("b-colorpicker-alpha-slider",{attrs:{value:t.computedValue.alpha,color:t.computedValue},on:{input:t.updateAlpha}}):t._e(),t._t("footer",[n("b-field",{staticClass:"colorpicker-fields",attrs:{grouped:""}},[n("b-field",{attrs:{horizontal:"",label:"R"}},[n("b-input",{attrs:{type:"number",size:"is-small","aria-label":"Red"},on:{input:t.updateRGB},model:{value:t.computedValue.red,callback:function(e){t.$set(t.computedValue,"red",t._n(e))},expression:"computedValue.red"}})],1),n("b-field",{attrs:{horizontal:"",label:"G"}},[n("b-input",{attrs:{type:"number",size:"is-small","aria-label":"Green"},on:{input:t.updateRGB},model:{value:t.computedValue.green,callback:function(e){t.$set(t.computedValue,"green",t._n(e))},expression:"computedValue.green"}})],1),n("b-field",{attrs:{horizontal:"",label:"B"}},[n("b-input",{attrs:{type:"number",size:"is-small","aria-label":"Blue"},on:{input:t.updateRGB},model:{value:t.computedValue.blue,callback:function(e){t.$set(t.computedValue,"blue",t._n(e))},expression:"computedValue.blue"}})],1)],1)],{color:t.computedValue})],2)])],1):t._e()],1)},ga=[];const ba=void 0,ya=void 0,va=void 0,wa=!1;var xa=ot({render:ma,staticRenderFns:ga},ba,fa,ya,wa,va,void 0,void 0),Oa={install:function(t){ct(t,xa)}};ut(Oa);var Sa={name:"BDatepickerTableRow",inject:{$datepicker:{name:"$datepicker",default:!1}},props:{selectedDate:{type:[Date,Array]},hoveredDateRange:Array,day:{type:Number},week:{type:Array,required:!0},month:{type:Number,required:!0},minDate:Date,maxDate:Date,disabled:Boolean,unselectableDates:[Array,Function],unselectableDaysOfWeek:Array,selectableDates:[Array,Function],events:Array,indicators:String,dateCreator:Function,nearbyMonthDays:Boolean,nearbySelectableMonthDays:Boolean,showWeekNumber:Boolean,weekNumberClickable:Boolean,range:Boolean,multiple:Boolean,rulesForFirstWeek:Number,firstDayOfWeek:Number},watch:{day:function(t){var e=this,n="day-".concat(this.month,"-").concat(t);this.$nextTick((function(){e.$refs[n]&&e.$refs[n].length>0&&e.$refs[n][0]&&e.$refs[n][0].focus()}))}},methods:{firstWeekOffset:function(t,e,n){var r=7+e-n,i=new Date(t,0,r),a=(7+i.getDay()-e)%7;return-a+r-1},daysInYear:function(t){return this.isLeapYear(t)?366:365},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getSetDayOfYear:function(t){return Math.round((t-new Date(t.getFullYear(),0,1))/864e5)+1},weeksInYear:function(t,e,n){var r=this.firstWeekOffset(t,e,n),i=this.firstWeekOffset(t+1,e,n);return(this.daysInYear(t)-r+i)/7},getWeekNumber:function(t){var e,n,r=this.firstDayOfWeek,i=this.rulesForFirstWeek,a=this.firstWeekOffset(t.getFullYear(),r,i),s=Math.floor((this.getSetDayOfYear(t)-a-1)/7)+1;return s<1?(n=t.getFullYear()-1,e=s+this.weeksInYear(n,r,i)):s>this.weeksInYear(t.getFullYear(),r,i)?(e=s-this.weeksInYear(t.getFullYear(),r,i),n=t.getFullYear()+1):(n=t.getFullYear(),e=s),{week:e,year:n}},clickWeekNumber:function(t){this.weekNumberClickable&&this.$datepicker.$emit("week-number-click",t.week,t.year)},selectableDate:function(t){var e=[];if(this.minDate&&e.push(t>=this.minDate),this.maxDate&&e.push(t<=this.maxDate),this.nearbyMonthDays&&!this.nearbySelectableMonthDays&&e.push(t.getMonth()===this.month),this.selectableDates)if("function"===typeof this.selectableDates){if(this.selectableDates(t))return!0;e.push(!1)}else for(var n=0;n<this.selectableDates.length;n++){var r=this.selectableDates[n];if(t.getDate()===r.getDate()&&t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth())return!0;e.push(!1)}if(this.unselectableDates)if("function"===typeof this.unselectableDates)e.push(!this.unselectableDates(t));else for(var i=0;i<this.unselectableDates.length;i++){var a=this.unselectableDates[i];e.push(t.getDate()!==a.getDate()||t.getFullYear()!==a.getFullYear()||t.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var s=0;s<this.unselectableDaysOfWeek.length;s++){var o=this.unselectableDaysOfWeek[s];e.push(t.getDay()!==o)}return e.indexOf(!1)<0},emitChosenDate:function(t){this.disabled||this.selectableDate(t)&&this.$emit("select",t)},eventsDateMatch:function(t){if(!this.events||!this.events.length)return!1;for(var e=[],n=0;n<this.events.length;n++)this.events[n].date.getDay()===t.getDay()&&e.push(this.events[n]);return!!e.length&&e},classObject:function(t){function e(t,e,n){return!(!t||!e||n)&&(Array.isArray(e)?e.some((function(e){return t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()})):t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}function n(t,e,n){return!(!Array.isArray(e)||n)&&(t>e[0]&&t<e[1])}return o({"is-selected":e(t,this.selectedDate)||n(t,this.selectedDate,this.multiple),"is-first-selected":e(t,Array.isArray(this.selectedDate)&&this.selectedDate[0],this.multiple),"is-within-selected":n(t,this.selectedDate,this.multiple),"is-last-selected":e(t,Array.isArray(this.selectedDate)&&this.selectedDate[1],this.multiple),"is-within-hovered-range":this.hoveredDateRange&&2===this.hoveredDateRange.length&&(e(t,this.hoveredDateRange)||n(t,this.hoveredDateRange)),"is-first-hovered":e(t,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[0]),"is-within-hovered":n(t,this.hoveredDateRange),"is-last-hovered":e(t,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[1]),"is-today":e(t,this.dateCreator()),"is-selectable":this.selectableDate(t)&&!this.disabled,"is-unselectable":!this.selectableDate(t)||this.disabled,"is-invisible":!this.nearbyMonthDays&&t.getMonth()!==this.month,"is-nearby":this.nearbySelectableMonthDays&&t.getMonth()!==this.month,"has-event":this.eventsDateMatch(t)},this.indicators,this.eventsDateMatch(t))},setRangeHoverEndDate:function(t){this.range&&this.$emit("rangeHoverEndDate",t)},manageKeydown:function(t,e){var n=t.key,r=!0;switch(n){case"Tab":r=!1;break;case" ":case"Space":case"Spacebar":case"Enter":this.emitChosenDate(e);break;case"ArrowLeft":case"Left":this.changeFocus(e,-1);break;case"ArrowRight":case"Right":this.changeFocus(e,1);break;case"ArrowUp":case"Up":this.changeFocus(e,-7);break;case"ArrowDown":case"Down":this.changeFocus(e,7);break}r&&t.preventDefault()},changeFocus:function(t,e){var n=new Date(t.getTime());n.setDate(t.getDate()+e);while((!this.minDate||n>this.minDate)&&(!this.maxDate||n<this.maxDate)&&!this.selectableDate(n))n.setDate(t.getDate()+Math.sign(e));this.setRangeHoverEndDate(n),this.$emit("change-focus",n)}}};const ka=Sa;var Ta=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datepicker-row"},[t.showWeekNumber?n("a",{staticClass:"datepicker-cell is-week-number",class:{"is-clickable":t.weekNumberClickable},on:{click:function(e){e.preventDefault(),t.clickWeekNumber(t.getWeekNumber(t.week[6]))}}},[n("span",[t._v(t._s(t.getWeekNumber(t.week[6]).week))])]):t._e(),t._l(t.week,(function(e,r){return[t.selectableDate(e)&&!t.disabled?n("a",{key:r,ref:"day-"+e.getMonth()+"-"+e.getDate(),refInFor:!0,staticClass:"datepicker-cell",class:t.classObject(e),attrs:{role:"button",href:"#",disabled:t.disabled,tabindex:t.day===e.getDate()&&t.month===e.getMonth()?null:-1},on:{click:function(n){return n.preventDefault(),t.emitChosenDate(e)},mouseenter:function(n){return t.setRangeHoverEndDate(e)},keydown:function(n){return t.manageKeydown(n,e)}}},[n("span",[t._v(t._s(e.getDate()))]),t.eventsDateMatch(e)?n("div",{staticClass:"events"},t._l(t.eventsDateMatch(e),(function(t,e){return n("div",{key:e,staticClass:"event",class:t.type})})),0):t._e()]):n("div",{key:r,staticClass:"datepicker-cell",class:t.classObject(e)},[n("span",[t._v(t._s(e.getDate()))]),t.eventsDateMatch(e)?n("div",{staticClass:"events"},t._l(t.eventsDateMatch(e),(function(t,e){return n("div",{key:e,staticClass:"event",class:t.type})})),0):t._e()])]}))],2)},_a=[];const Ia=void 0,Ca=void 0,Aa=void 0,Ea=!1;var Na=ot({render:Ta,staticRenderFns:_a},Ia,ka,Ca,Ea,Aa,void 0,void 0),ja={name:"BDatepickerTable",components:o({},Na.name,Na),props:{value:{type:[Date,Array]},dayNames:Array,monthNames:Array,firstDayOfWeek:Number,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:[Array,Function],unselectableDaysOfWeek:Array,selectableDates:[Array,Function],nearbyMonthDays:Boolean,nearbySelectableMonthDays:Boolean,showWeekNumber:Boolean,weekNumberClickable:Boolean,rulesForFirstWeek:Number,range:Boolean,multiple:Boolean},data:function(){return{selectedBeginDate:void 0,selectedEndDate:void 0,hoveredEndDate:void 0}},computed:{multipleSelectedDates:{get:function(){return this.multiple&&this.value?this.value:[]},set:function(t){this.$emit("input",t)}},visibleDayNames:function(){var t=[],e=this.firstDayOfWeek;while(t.length<this.dayNames.length){var n=this.dayNames[e%this.dayNames.length];t.push(n),e++}return this.showWeekNumber&&t.unshift(""),t},hasEvents:function(){return this.events&&this.events.length},eventsInThisMonth:function(){if(!this.events)return[];for(var t=[],e=0;e<this.events.length;e++){var n=this.events[e];n.hasOwnProperty("date")||(n={date:n}),n.hasOwnProperty("type")||(n.type="is-primary"),n.date.getMonth()===this.focused.month&&n.date.getFullYear()===this.focused.year&&t.push(n)}return t},weeksInThisMonth:function(){this.validateFocusedDay();var t=this.focused.month,e=this.focused.year,n=[],r=1;while(n.length<6){var i=this.weekBuilder(r,t,e);n.push(i),r+=7}return n},hoveredDateRange:function(){return this.range&&isNaN(this.selectedEndDate)?this.hoveredEndDate<this.selectedBeginDate?[this.hoveredEndDate,this.selectedBeginDate].filter(et):[this.selectedBeginDate,this.hoveredEndDate].filter(et):[]}},methods:{updateSelectedDate:function(t){this.range||this.multiple?this.range?this.handleSelectRangeDate(t):this.multiple&&this.handleSelectMultipleDates(t):this.$emit("input",t)},handleSelectRangeDate:function(t){this.selectedBeginDate&&this.selectedEndDate?(this.selectedBeginDate=t,this.selectedEndDate=void 0,this.$emit("range-start",t)):this.selectedBeginDate&&!this.selectedEndDate?(this.selectedBeginDate>t?(this.selectedEndDate=this.selectedBeginDate,this.selectedBeginDate=t):this.selectedEndDate=t,this.$emit("range-end",t),this.$emit("input",[this.selectedBeginDate,this.selectedEndDate])):(this.selectedBeginDate=t,this.$emit("range-start",t))},handleSelectMultipleDates:function(t){var e=this.multipleSelectedDates.filter((function(e){return e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}));e.length?this.multipleSelectedDates=this.multipleSelectedDates.filter((function(e){return e.getDate()!==t.getDate()||e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()})):this.multipleSelectedDates=[].concat(k(this.multipleSelectedDates),[t])},weekBuilder:function(t,e,n){for(var r=new Date(n,e),i=[],a=new Date(n,e,t).getDay(),s=a>=this.firstDayOfWeek?a-this.firstDayOfWeek:7-this.firstDayOfWeek+a,o=1,u=0;u<s;u++)i.unshift(new Date(r.getFullYear(),r.getMonth(),t-o)),o++;i.push(new Date(n,e,t));var c=1;while(i.length<7)i.push(new Date(n,e,t+c)),c++;return i},validateFocusedDay:function(){var t=new Date(this.focused.year,this.focused.month,this.focused.day);if(!this.selectableDate(t)){var e=0,n=new Date(this.focused.year,this.focused.month+1,0).getDate(),r=null;while(!r&&++e<n){var i=new Date(this.focused.year,this.focused.month,e);if(this.selectableDate(i)){r=t;var a={day:i.getDate(),month:i.getMonth(),year:i.getFullYear()};this.$emit("update:focused",a)}}}},selectableDate:function(t){var e=[];if(this.minDate&&e.push(t>=this.minDate),this.maxDate&&e.push(t<=this.maxDate),this.nearbyMonthDays&&!this.nearbySelectableMonthDays&&e.push(t.getMonth()===this.focused.month),this.selectableDates)if("function"===typeof this.selectableDates){if(this.selectableDates(t))return!0;e.push(!1)}else for(var n=0;n<this.selectableDates.length;n++){var r=this.selectableDates[n];if(t.getDate()===r.getDate()&&t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth())return!0;e.push(!1)}if(this.unselectableDates)if("function"===typeof this.unselectableDates)e.push(!this.unselectableDates(t));else for(var i=0;i<this.unselectableDates.length;i++){var a=this.unselectableDates[i];e.push(t.getDate()!==a.getDate()||t.getFullYear()!==a.getFullYear()||t.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var s=0;s<this.unselectableDaysOfWeek.length;s++){var o=this.unselectableDaysOfWeek[s];e.push(t.getDay()!==o)}return e.indexOf(!1)<0},eventsInThisWeek:function(t){return this.eventsInThisMonth.filter((function(e){var n=new Date(Date.parse(e.date));n.setHours(0,0,0,0);var r=n.getTime();return t.some((function(t){return t.getTime()===r}))}))},setRangeHoverEndDate:function(t){this.hoveredEndDate=t},changeFocus:function(t){var e={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()};this.$emit("update:focused",e)}}};const Da=ja;var $a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"datepicker-table"},[n("header",{staticClass:"datepicker-header"},t._l(t.visibleDayNames,(function(e,r){return n("div",{key:r,staticClass:"datepicker-cell"},[n("span",[t._v(t._s(e))])])})),0),n("div",{staticClass:"datepicker-body",class:{"has-events":t.hasEvents}},t._l(t.weeksInThisMonth,(function(e,r){return n("b-datepicker-table-row",{key:r,attrs:{"selected-date":t.value,day:t.focused.day,week:e,month:t.focused.month,"min-date":t.minDate,"max-date":t.maxDate,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.eventsInThisWeek(e),indicators:t.indicators,"date-creator":t.dateCreator,"nearby-month-days":t.nearbyMonthDays,"nearby-selectable-month-days":t.nearbySelectableMonthDays,"show-week-number":t.showWeekNumber,"week-number-clickable":t.weekNumberClickable,"first-day-of-week":t.firstDayOfWeek,"rules-for-first-week":t.rulesForFirstWeek,range:t.range,"hovered-date-range":t.hoveredDateRange,multiple:t.multiple},on:{select:t.updateSelectedDate,rangeHoverEndDate:t.setRangeHoverEndDate,"change-focus":t.changeFocus}})})),1)])},Ra=[];const Fa=void 0,Pa=void 0,Ma=void 0,La=!1;var Ba=ot({render:$a,staticRenderFns:Ra},Fa,Da,Pa,La,Ma,void 0,void 0),za={name:"BDatepickerMonth",props:{value:{type:[Date,Array]},monthNames:Array,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:[Array,Function],unselectableDaysOfWeek:Array,selectableDates:[Array,Function],range:Boolean,multiple:Boolean},data:function(){return{selectedBeginDate:void 0,selectedEndDate:void 0,hoveredEndDate:void 0,multipleSelectedDates:this.multiple&&this.value?this.value:[]}},computed:{hasEvents:function(){return this.events&&this.events.length},eventsInThisYear:function(){if(!this.events)return[];for(var t=[],e=0;e<this.events.length;e++){var n=this.events[e];n.hasOwnProperty("date")||(n={date:n}),n.hasOwnProperty("type")||(n.type="is-primary"),n.date.getFullYear()===this.focused.year&&t.push(n)}return t},monthDates:function(){for(var t=this.focused.year,e=[],n=0;n<12;n++){var r=new Date(t,n,1);r.setHours(0,0,0,0),e.push(r)}return e},focusedMonth:function(){return this.focused.month},hoveredDateRange:function(){return this.range&&isNaN(this.selectedEndDate)?this.hoveredEndDate<this.selectedBeginDate?[this.hoveredEndDate,this.selectedBeginDate].filter(et):[this.selectedBeginDate,this.hoveredEndDate].filter(et):[]}},watch:{focusedMonth:function(t){var e=this,n="month-".concat(t);this.$refs[n]&&this.$refs[n].length>0&&this.$nextTick((function(){e.$refs[n][0]&&e.$refs[n][0].focus()}))}},methods:{selectMultipleDates:function(t){var e=this.multipleSelectedDates.filter((function(e){return e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}));e.length?this.multipleSelectedDates=this.multipleSelectedDates.filter((function(e){return e.getDate()!==t.getDate()||e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()})):this.multipleSelectedDates.push(t),this.$emit("input",this.multipleSelectedDates)},selectableDate:function(t){var e=[];if(this.minDate&&e.push(t>=this.minDate),this.maxDate&&e.push(t<=this.maxDate),e.push(t.getFullYear()===this.focused.year),this.selectableDates)if("function"===typeof this.selectableDates){if(this.selectableDates(t))return!0;e.push(!1)}else for(var n=0;n<this.selectableDates.length;n++){var r=this.selectableDates[n];if(t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth())return!0;e.push(!1)}if(this.unselectableDates)if("function"===typeof this.unselectableDates)e.push(!this.unselectableDates(t));else for(var i=0;i<this.unselectableDates.length;i++){var a=this.unselectableDates[i];e.push(t.getFullYear()!==a.getFullYear()||t.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var s=0;s<this.unselectableDaysOfWeek.length;s++){var o=this.unselectableDaysOfWeek[s];e.push(t.getDay()!==o)}return e.indexOf(!1)<0},eventsDateMatch:function(t){if(!this.eventsInThisYear.length)return!1;for(var e=[],n=0;n<this.eventsInThisYear.length;n++)this.eventsInThisYear[n].date.getMonth()===t.getMonth()&&e.push(this.events[n]);return!!e.length&&e},classObject:function(t){function e(t,e,n){return!(!t||!e||n)&&(Array.isArray(e)?e.some((function(e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()})):t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}function n(t,e,n){return!(!Array.isArray(e)||n)&&(t>e[0]&&t<e[1])}function r(t,e,n){return!(!Array.isArray(e)||!n)&&e.some((function(e){return t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()}))}return{"is-selected":e(t,this.value,this.multiple)||n(t,this.value,this.multiple)||r(t,this.multipleSelectedDates,this.multiple),"is-first-selected":e(t,Array.isArray(this.value)&&this.value[0],this.multiple),"is-within-selected":n(t,this.value,this.multiple),"is-last-selected":e(t,Array.isArray(this.value)&&this.value[1],this.multiple),"is-within-hovered-range":this.hoveredDateRange&&2===this.hoveredDateRange.length&&(e(t,this.hoveredDateRange)||n(t,this.hoveredDateRange)),"is-first-hovered":e(t,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[0]),"is-within-hovered":n(t,this.hoveredDateRange),"is-last-hovered":e(t,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[1]),"is-today":e(t,this.dateCreator()),"is-selectable":this.selectableDate(t)&&!this.disabled,"is-unselectable":!this.selectableDate(t)||this.disabled}},manageKeydown:function(t,e){var n=t.key;switch(n){case" ":case"Space":case"Spacebar":case"Enter":this.updateSelectedDate(e);break;case"ArrowLeft":case"Left":this.changeFocus(e,-1);break;case"ArrowRight":case"Right":this.changeFocus(e,1);break;case"ArrowUp":case"Up":this.changeFocus(e,-3);break;case"ArrowDown":case"Down":this.changeFocus(e,3);break}},updateSelectedDate:function(t){this.range||this.multiple?this.range?this.handleSelectRangeDate(t):this.multiple&&this.selectMultipleDates(t):this.emitChosenDate(t)},emitChosenDate:function(t){this.disabled||(this.multiple?this.selectMultipleDates(t):this.selectableDate(t)&&this.$emit("input",t))},handleSelectRangeDate:function(t){this.disabled||(this.selectedBeginDate&&this.selectedEndDate?(this.selectedBeginDate=t,this.selectedEndDate=void 0,this.$emit("range-start",t)):this.selectedBeginDate&&!this.selectedEndDate?(this.selectedBeginDate>t?(this.selectedEndDate=this.selectedBeginDate,this.selectedBeginDate=t):this.selectedEndDate=t,this.$emit("range-end",t),this.$emit("input",[this.selectedBeginDate,this.selectedEndDate])):(this.selectedBeginDate=t,this.$emit("range-start",t)))},setRangeHoverEndDate:function(t){this.range&&(this.hoveredEndDate=t)},changeFocus:function(t,e){var n=t;n.setMonth(t.getMonth()+e),this.$emit("change-focus",n)}}};const Va=za;var Ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"datepicker-table"},[n("div",{staticClass:"datepicker-body",class:{"has-events":t.hasEvents}},[n("div",{staticClass:"datepicker-months"},[t._l(t.monthDates,(function(e,r){return[t.selectableDate(e)&&!t.disabled?n("a",{key:r,ref:"month-"+e.getMonth(),refInFor:!0,staticClass:"datepicker-cell",class:[t.classObject(e),{"has-event":t.eventsDateMatch(e)},t.indicators],attrs:{role:"button",href:"#",disabled:t.disabled,tabindex:t.focused.month===e.getMonth()?null:-1},on:{click:function(n){return n.preventDefault(),t.updateSelectedDate(e)},mouseenter:function(n){return t.setRangeHoverEndDate(e)},keydown:function(n){return n.preventDefault(),t.manageKeydown(n,e)}}},[t._v(" "+t._s(t.monthNames[e.getMonth()])+" "),t.eventsDateMatch(e)?n("div",{staticClass:"events"},t._l(t.eventsDateMatch(e),(function(t,e){return n("div",{key:e,staticClass:"event",class:t.type})})),0):t._e()]):n("div",{key:r,staticClass:"datepicker-cell",class:t.classObject(e)},[t._v(" "+t._s(t.monthNames[e.getMonth()])+" ")])]}))],2)])])},Wa=[];const Ga=void 0,Ha=void 0,qa=void 0,Ja=!1;var Ka,Xa=ot({render:Ua,staticRenderFns:Wa},Ga,Va,Ha,Ja,qa,void 0,void 0),Ya=function(t,e){var n=Array.isArray(t)?t:[t],r=n.map((function(t){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),12);return e.isTypeMonth?e.dtfMonth.format(n):e.dtf.format(n)}));return e.multiple?r.join(", "):r.join(" - ")},Za=function(t,e){if(e.dtf.formatToParts&&"function"===typeof e.dtf.formatToParts){var n=(e.isTypeMonth?e.dtfMonth:e.dtf).formatToParts(new Date(2e3,11,25)).map((function(t){return"literal"===t.type?t.value:"((?!=<".concat(t.type,">)\\d+)")})).join(""),r=Y(n,t);if(r.year&&4===r.year.length&&r.month&&r.month<=12){if(e.isTypeMonth)return new Date(r.year,r.month-1);if(r.day&&r.day<=31)return new Date(r.year,r.month-1,r.day,12)}}if(!e.isTypeMonth)return new Date(Date.parse(t));if(t){var i=t.split("/"),a=4===i[0].length?i[0]:i[1],s=2===i[0].length?i[0]:i[1];if(a&&s)return new Date(parseInt(a,10),parseInt(s-1,10),1,0,0,0,0)}return null},Qa={name:"BDatepicker",components:(Ka={},o(Ka,Ba.name,Ba),o(Ka,Xa.name,Xa),o(Ka,jt.name,jt),o(Ka,Pr.name,Pr),o(Ka,gi.name,gi),o(Ka,St.name,St),o(Ka,hr.name,hr),o(Ka,xr.name,xr),Ka),mixins:[dt],inheritAttrs:!1,provide:function(){return{$datepicker:this}},props:{value:{type:[Date,Array]},dayNames:{type:Array,default:function(){if(Array.isArray(rt.defaultDayNames))return rt.defaultDayNames}},monthNames:{type:Array,default:function(){if(Array.isArray(rt.defaultMonthNames))return rt.defaultMonthNames}},firstDayOfWeek:{type:Number,default:function(){return"number"===typeof rt.defaultFirstDayOfWeek?rt.defaultFirstDayOfWeek:0}},inline:Boolean,minDate:Date,maxDate:Date,focusedDate:Date,placeholder:String,editable:Boolean,disabled:Boolean,horizontalTimePicker:Boolean,unselectableDates:[Array,Function],unselectableDaysOfWeek:{type:Array,default:function(){return rt.defaultUnselectableDaysOfWeek}},selectableDates:[Array,Function],dateFormatter:{type:Function,default:function(t,e){return"function"===typeof rt.defaultDateFormatter?rt.defaultDateFormatter(t):Ya(t,e)}},dateParser:{type:Function,default:function(t,e){return"function"===typeof rt.defaultDateParser?rt.defaultDateParser(t):Za(t,e)}},dateCreator:{type:Function,default:function(){return"function"===typeof rt.defaultDateCreator?rt.defaultDateCreator():new Date}},mobileNative:{type:Boolean,default:function(){return rt.defaultDatepickerMobileNative}},position:String,iconRight:String,iconRightClickable:Boolean,events:Array,indicators:{type:String,default:"dots"},openOnFocus:Boolean,iconPrev:{type:String,default:function(){return rt.defaultIconPrev}},iconNext:{type:String,default:function(){return rt.defaultIconNext}},yearsRange:{type:Array,default:function(){return rt.defaultDatepickerYearsRange}},type:{type:String,validator:function(t){return["month"].indexOf(t)>=0}},nearbyMonthDays:{type:Boolean,default:function(){return rt.defaultDatepickerNearbyMonthDays}},nearbySelectableMonthDays:{type:Boolean,default:function(){return rt.defaultDatepickerNearbySelectableMonthDays}},showWeekNumber:{type:Boolean,default:function(){return rt.defaultDatepickerShowWeekNumber}},weekNumberClickable:{type:Boolean,default:function(){return rt.defaultDatepickerWeekNumberClickable}},rulesForFirstWeek:{type:Number,default:function(){return 4}},range:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},mobileModal:{type:Boolean,default:function(){return rt.defaultDatepickerMobileModal}},focusable:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:function(){return rt.defaultTrapFocus}},appendToBody:Boolean,ariaNextLabel:String,ariaPreviousLabel:String},data:function(){var t=(Array.isArray(this.value)?this.value[0]:this.value)||this.focusedDate||this.dateCreator();return!this.value&&this.maxDate&&this.maxDate.getFullYear()<t.getFullYear()&&t.setFullYear(this.maxDate.getFullYear()),{dateSelected:this.value,focusedDateData:{day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},_elementRef:"input",_isDatepicker:!0}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(t){var e=this;this.updateInternalState(t),this.multiple||this.togglePicker(!1),this.$emit("input",t),this.useHtml5Validation&&this.$nextTick((function(){e.checkHtml5Validity()}))}},formattedValue:function(){return this.formatValue(this.computedValue)},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale)},dtfMonth:function(){return new Intl.DateTimeFormat(this.locale,{year:this.localeOptions.year||"numeric",month:this.localeOptions.month||"2-digit"})},newMonthNames:function(){return Array.isArray(this.monthNames)?this.monthNames:K(this.locale)},newDayNames:function(){return Array.isArray(this.dayNames)?this.dayNames:X(this.locale)},listOfMonths:function(){var t=0,e=12;return this.minDate&&this.focusedDateData.year===this.minDate.getFullYear()&&(t=this.minDate.getMonth()),this.maxDate&&this.focusedDateData.year===this.maxDate.getFullYear()&&(e=this.maxDate.getMonth()),this.newMonthNames.map((function(n,r){return{name:n,index:r,disabled:r<t||r>e}}))},listOfYears:function(){var t=this.focusedDateData.year+this.yearsRange[1];this.maxDate&&this.maxDate.getFullYear()<t&&(t=Math.max(this.maxDate.getFullYear(),this.focusedDateData.year));var e=this.focusedDateData.year+this.yearsRange[0];this.minDate&&this.minDate.getFullYear()>e&&(e=Math.min(this.minDate.getFullYear(),this.focusedDateData.year));for(var n=[],r=e;r<=t;r++)n.push(r);return n.reverse()},showPrev:function(){if(!this.minDate)return!1;if(this.isTypeMonth)return this.focusedDateData.year<=this.minDate.getFullYear();var t=new Date(this.focusedDateData.year,this.focusedDateData.month),e=new Date(this.minDate.getFullYear(),this.minDate.getMonth());return t<=e},showNext:function(){if(!this.maxDate)return!1;if(this.isTypeMonth)return this.focusedDateData.year>=this.maxDate.getFullYear();var t=new Date(this.focusedDateData.year,this.focusedDateData.month),e=new Date(this.maxDate.getFullYear(),this.maxDate.getMonth());return t>=e},isMobile:function(){return this.mobileNative&&z.any()},isTypeMonth:function(){return"month"===this.type},ariaRole:function(){if(!this.inline)return"dialog"}},watch:{value:function(t){this.updateInternalState(t),this.multiple||this.togglePicker(!1)},focusedDate:function(t){t&&(this.focusedDateData={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()})},"focusedDateData.month":function(t){this.$emit("change-month",t)},"focusedDateData.year":function(t){this.$emit("change-year",t)}},methods:{onChange:function(t){var e=this.dateParser(t,this);!e||isNaN(e)&&(!Array.isArray(e)||2!==e.length||isNaN(e[0])||isNaN(e[1]))?(this.computedValue=null,this.$refs.input&&(this.$refs.input.newValue=this.computedValue)):this.computedValue=e},formatValue:function(t){if(Array.isArray(t)){var e=Array.isArray(t)&&t.every((function(t){return!isNaN(t)}));return e?this.dateFormatter(k(t),this):null}return t&&!isNaN(t)?this.dateFormatter(t,this):null},prev:function(){this.disabled||(this.isTypeMonth?this.focusedDateData.year-=1:this.focusedDateData.month>0?this.focusedDateData.month-=1:(this.focusedDateData.month=11,this.focusedDateData.year-=1))},next:function(){this.disabled||(this.isTypeMonth?this.focusedDateData.year+=1:this.focusedDateData.month<11?this.focusedDateData.month+=1:(this.focusedDateData.month=0,this.focusedDateData.year+=1))},formatNative:function(t){return this.isTypeMonth?this.formatYYYYMM(t):this.formatYYYYMMDD(t)},formatYYYYMMDD:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return n+"-"+(r<10?"0":"")+r+"-"+(i<10?"0":"")+i}return""},formatYYYYMM:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getFullYear(),r=e.getMonth()+1;return n+"-"+(r<10?"0":"")+r}return""},onChangeNativePicker:function(t){var e=t.target.value,n=e?e.split("-"):[];if(3===n.length){var r=parseInt(n[0],10),i=parseInt(n[1])-1,a=parseInt(n[2]);this.computedValue=new Date(r,i,a)}else this.computedValue=null},updateInternalState:function(t){if(this.dateSelected!==t){var e=Array.isArray(t),n=e?t.length?t[t.length-1]:this.dateCreator():t||this.dateCreator();(!e||e&&this.dateSelected&&t.length>this.dateSelected.length)&&(this.focusedDateData={day:n.getDate(),month:n.getMonth(),year:n.getFullYear()}),this.dateSelected=t}},togglePicker:function(t){if(this.$refs.dropdown){var e="boolean"===typeof t?t:!this.$refs.dropdown.isActive;(e||this.closeOnClick)&&(this.$refs.dropdown.isActive=e)}},handleOnFocus:function(t){this.onFocus(t),this.openOnFocus&&this.togglePicker(!0)},toggle:function(){if(this.mobileNative&&this.isMobile){var t=this.$refs.input.$refs.input;return t.focus(),void t.click()}this.$refs.dropdown.toggle()},onInputClick:function(t){this.$refs.dropdown.isActive&&t.stopPropagation()},keyPress:function(t){var e=t.key;this.$refs.dropdown&&this.$refs.dropdown.isActive&&("Escape"===e||"Esc"===e)&&this.togglePicker(!1)},onActiveChange:function(t){t||this.onBlur(),this.$emit("active-change",t)},changeFocus:function(t){this.focusedDateData={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()}}},created:function(){"undefined"!==typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!==typeof window&&document.removeEventListener("keyup",this.keyPress)}};const ts=Qa;var es=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datepicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"mobile-modal":t.mobileModal,"trap-focus":t.trapFocus,"aria-role":t.ariaRole,"append-to-body":t.appendToBody,"append-to-body-copy-parent":"","trigger-tabindex":-1},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(e){return[t._t("trigger",[n("b-input",t._b({ref:"input",attrs:{autocomplete:"off",value:t.formattedValue,placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-right":t.iconRight,"icon-right-clickable":t.iconRightClickable,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,disabled:t.disabled,readonly:!t.editable,"use-html5-validation":!1},on:{"icon-right-click":function(e){return t.$emit("icon-right-click",e)},focus:t.handleOnFocus},nativeOn:{click:function(e){return t.onInputClick(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.togglePicker(!0)},change:function(e){return t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))],null,e)]}}],null,!0)},[n("b-dropdown-item",{class:{"dropdown-horizontal-timepicker":t.horizontalTimePicker},attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[n("div",[n("header",{staticClass:"datepicker-header"},[void 0!==t.$slots.header&&t.$slots.header.length?[t._t("header")]:n("div",{staticClass:"pagination field is-centered",class:t.size},[n("a",{directives:[{name:"show",rawName:"v-show",value:!t.showPrev&&!t.disabled,expression:"!showPrev && !disabled"}],staticClass:"pagination-previous",attrs:{role:"button",href:"#",disabled:t.disabled,"aria-label":t.ariaPreviousLabel},on:{click:function(e){return e.preventDefault(),t.prev(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.prev(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.prev(e))}]}},[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"",type:"is-primary is-clickable"}})],1),n("a",{directives:[{name:"show",rawName:"v-show",value:!t.showNext&&!t.disabled,expression:"!showNext && !disabled"}],staticClass:"pagination-next",attrs:{role:"button",href:"#",disabled:t.disabled,"aria-label":t.ariaNextLabel},on:{click:function(e){return e.preventDefault(),t.next(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.next(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.next(e))}]}},[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"",type:"is-primary is-clickable"}})],1),n("div",{staticClass:"pagination-list"},[n("b-field",[t.isTypeMonth?t._e():n("b-select",{attrs:{disabled:t.disabled,size:t.size},model:{value:t.focusedDateData.month,callback:function(e){t.$set(t.focusedDateData,"month",e)},expression:"focusedDateData.month"}},t._l(t.listOfMonths,(function(e){return n("option",{key:e.name,attrs:{disabled:e.disabled},domProps:{value:e.index}},[t._v(" "+t._s(e.name)+" ")])})),0),n("b-select",{attrs:{disabled:t.disabled,size:t.size},model:{value:t.focusedDateData.year,callback:function(e){t.$set(t.focusedDateData,"year",e)},expression:"focusedDateData.year"}},t._l(t.listOfYears,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)],1)],1)])],2),t.isTypeMonth?n("div",[n("b-datepicker-month",{attrs:{"month-names":t.newMonthNames,"min-date":t.minDate,"max-date":t.maxDate,focused:t.focusedDateData,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.events,indicators:t.indicators,"date-creator":t.dateCreator,range:t.range,multiple:t.multiple},on:{"range-start":function(e){return t.$emit("range-start",e)},"range-end":function(e){return t.$emit("range-end",e)},close:function(e){return t.togglePicker(!1)},"change-focus":t.changeFocus,"update:focused":function(e){t.focusedDateData=e}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}})],1):n("div",{staticClass:"datepicker-content",class:{"content-horizontal-timepicker":t.horizontalTimePicker}},[n("b-datepicker-table",{attrs:{"day-names":t.newDayNames,"month-names":t.newMonthNames,"first-day-of-week":t.firstDayOfWeek,"rules-for-first-week":t.rulesForFirstWeek,"min-date":t.minDate,"max-date":t.maxDate,focused:t.focusedDateData,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.events,indicators:t.indicators,"date-creator":t.dateCreator,"type-month":t.isTypeMonth,"nearby-month-days":t.nearbyMonthDays,"nearby-selectable-month-days":t.nearbySelectableMonthDays,"show-week-number":t.showWeekNumber,"week-number-clickable":t.weekNumberClickable,range:t.range,multiple:t.multiple},on:{"range-start":function(e){return t.$emit("range-start",e)},"range-end":function(e){return t.$emit("range-end",e)},close:function(e){return t.togglePicker(!1)},"update:focused":function(e){t.focusedDateData=e}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}})],1)]),void 0!==t.$slots.default&&t.$slots.default.length?n("footer",{staticClass:"datepicker-footer",class:{"footer-horizontal-timepicker":t.horizontalTimePicker}},[t._t("default")],2):t._e()])],1):n("b-input",t._b({ref:"input",attrs:{type:t.isTypeMonth?"month":"date",autocomplete:"off",value:t.formatNative(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,max:t.formatNative(t.maxDate),min:t.formatNative(t.minDate),disabled:t.disabled,readonly:!1,"use-html5-validation":!1},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))],1)},ns=[];const rs=void 0,is=void 0,as=void 0,ss=!1;var os=ot({render:es,staticRenderFns:ns},rs,ts,is,ss,as,void 0,void 0),us={install:function(t){ct(t,os)}};ut(us);var cs,ls=us,ds={name:"BTimepicker",components:(cs={},o(cs,jt.name,jt),o(cs,Pr.name,Pr),o(cs,gi.name,gi),o(cs,St.name,St),o(cs,hr.name,hr),o(cs,xr.name,xr),cs),mixins:[Zn],inheritAttrs:!1,data:function(){return{_isTimepicker:!0}},computed:{nativeStep:function(){if(this.enableSeconds)return"1"}}};const hs=ds;var ps=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timepicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"append-to-body":t.appendToBody,"append-to-body-copy-parent":""},on:{"active-change":t.onActiveChange},scopedSlots:t._u([t.inline?null:{key:"trigger",fn:function(){return[t._t("trigger",[n("b-input",t._b({ref:"input",attrs:{autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,disabled:t.disabled,readonly:!t.editable,rounded:t.rounded,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(!0)},change:function(e){return t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))])]},proxy:!0}],null,!0)},[n("b-dropdown-item",{attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[n("b-field",{attrs:{grouped:"",position:"is-centered"}},[n("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){return t.onHoursChange(e.target.value)}},model:{value:t.hoursSelected,callback:function(e){t.hoursSelected=e},expression:"hoursSelected"}},t._l(t.hours,(function(e){return n("option",{key:e.value,attrs:{disabled:t.isHourDisabled(e.value)},domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0),n("span",{staticClass:"control is-colon"},[t._v(t._s(t.hourLiteral))]),n("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){return t.onMinutesChange(e.target.value)}},model:{value:t.minutesSelected,callback:function(e){t.minutesSelected=e},expression:"minutesSelected"}},t._l(t.minutes,(function(e){return n("option",{key:e.value,attrs:{disabled:t.isMinuteDisabled(e.value)},domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0),t.enableSeconds?[n("span",{staticClass:"control is-colon"},[t._v(t._s(t.minuteLiteral))]),n("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){return t.onSecondsChange(e.target.value)}},model:{value:t.secondsSelected,callback:function(e){t.secondsSelected=e},expression:"secondsSelected"}},t._l(t.seconds,(function(e){return n("option",{key:e.value,attrs:{disabled:t.isSecondDisabled(e.value)},domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0),n("span",{staticClass:"control is-colon"},[t._v(t._s(t.secondLiteral))])]:t._e(),t.isHourFormat24?t._e():n("b-select",{attrs:{disabled:t.disabled},nativeOn:{change:function(e){return t.onMeridienChange(e.target.value)}},model:{value:t.meridienSelected,callback:function(e){t.meridienSelected=e},expression:"meridienSelected"}},t._l(t.meridiens,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)],2),void 0!==t.$slots.default&&t.$slots.default.length?n("footer",{staticClass:"timepicker-footer"},[t._t("default")],2):t._e()],1)],1):n("b-input",t._b({ref:"input",attrs:{type:"time",step:t.nativeStep,autocomplete:"off",value:t.formatHHMMSS(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,max:t.formatHHMMSS(t.maxTime),min:t.formatHHMMSS(t.minTime),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{change:function(e){return t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))],1)},fs=[];const ms=void 0,gs=void 0,bs=void 0,ys=!1;var vs,ws=ot({render:ps,staticRenderFns:fs},ms,hs,gs,ys,bs,void 0,void 0),xs="AM",Os="PM",Ss={name:"BDatetimepicker",components:(vs={},o(vs,os.name,os),o(vs,ws.name,ws),vs),mixins:[dt],inheritAttrs:!1,props:{value:{type:Date},editable:{type:Boolean,default:!1},placeholder:String,horizontalTimePicker:Boolean,disabled:Boolean,firstDayOfWeek:{type:Number,default:function(){return"number"===typeof rt.defaultFirstDayOfWeek?rt.defaultFirstDayOfWeek:0}},rulesForFirstWeek:{type:Number,default:function(){return 4}},icon:String,iconRight:String,iconRightClickable:Boolean,iconPack:String,inline:Boolean,openOnFocus:Boolean,position:String,mobileNative:{type:Boolean,default:!0},minDatetime:Date,maxDatetime:Date,datetimeFormatter:{type:Function},datetimeParser:{type:Function},datetimeCreator:{type:Function,default:function(t){return"function"===typeof rt.defaultDatetimeCreator?rt.defaultDatetimeCreator(t):t}},datepicker:Object,timepicker:Object,tzOffset:{type:Number,default:0},focusable:{type:Boolean,default:!0},appendToBody:Boolean},data:function(){return{newValue:this.adjustValue(this.value)}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){if(t){var e=new Date(t.getTime());this.newValue?t.getDate()===this.newValue.getDate()&&t.getMonth()===this.newValue.getMonth()&&t.getFullYear()===this.newValue.getFullYear()||0!==t.getHours()||0!==t.getMinutes()||0!==t.getSeconds()||e.setHours(this.newValue.getHours(),this.newValue.getMinutes(),this.newValue.getSeconds(),0):e=this.datetimeCreator(t),this.minDatetime&&e<this.adjustValue(this.minDatetime)?e=this.adjustValue(this.minDatetime):this.maxDatetime&&e>this.adjustValue(this.maxDatetime)&&(e=this.adjustValue(this.maxDatetime)),this.newValue=new Date(e.getTime())}else this.newValue=this.adjustValue(t);var n=this.adjustValue(this.newValue,!0);this.$emit("input",n)}},localeOptions:function(){return new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:this.enableSeconds()?"numeric":void 0}).resolvedOptions()},dtf:function(){return new Intl.DateTimeFormat(this.locale,{year:this.localeOptions.year||"numeric",month:this.localeOptions.month||"numeric",day:this.localeOptions.day||"numeric",hour:this.localeOptions.hour||"numeric",minute:this.localeOptions.minute||"numeric",second:this.enableSeconds()?this.localeOptions.second||"numeric":void 0,hourCycle:this.isHourFormat24()?"h23":"h12"})},isMobileNative:function(){return this.mobileNative&&0===this.tzOffset},isMobile:function(){return this.isMobileNative&&z.any()},minDate:function(){if(!this.minDatetime)return this.datepicker?this.adjustValue(this.datepicker.minDate):null;var t=this.adjustValue(this.minDatetime);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)},maxDate:function(){if(!this.maxDatetime)return this.datepicker?this.adjustValue(this.datepicker.maxDate):null;var t=this.adjustValue(this.maxDatetime);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)},minTime:function(){if(!this.minDatetime||null===this.newValue||"undefined"===typeof this.newValue)return this.timepicker?this.adjustValue(this.timepicker.minTime):null;var t=this.adjustValue(this.minDatetime);return t.getFullYear()===this.newValue.getFullYear()&&t.getMonth()===this.newValue.getMonth()&&t.getDate()===this.newValue.getDate()?t:void 0},maxTime:function(){if(!this.maxDatetime||null===this.newValue||"undefined"===typeof this.newValue)return this.timepicker?this.adjustValue(this.timepicker.maxTime):null;var t=this.adjustValue(this.maxDatetime);return t.getFullYear()===this.newValue.getFullYear()&&t.getMonth()===this.newValue.getMonth()&&t.getDate()===this.newValue.getDate()?t:void 0},datepickerSize:function(){return this.datepicker&&this.datepicker.size?this.datepicker.size:this.size},timepickerSize:function(){return this.timepicker&&this.timepicker.size?this.timepicker.size:this.size},timepickerDisabled:function(){return this.timepicker&&this.timepicker.disabled?this.timepicker.disabled:this.disabled}},watch:{value:function(){this.newValue=this.adjustValue(this.value)},tzOffset:function(){this.newValue=this.adjustValue(this.value)}},methods:{enableSeconds:function(){return!!this.$refs.timepicker&&this.$refs.timepicker.enableSeconds},isHourFormat24:function(){return this.$refs.timepicker?this.$refs.timepicker.isHourFormat24:!this.localeOptions.hour12},adjustValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e?new Date(t.getTime()-6e4*this.tzOffset):new Date(t.getTime()+6e4*this.tzOffset):t},defaultDatetimeParser:function(t){if("function"===typeof this.datetimeParser)return this.datetimeParser(t);if("function"===typeof rt.defaultDatetimeParser)return rt.defaultDatetimeParser(t);if(this.dtf.formatToParts&&"function"===typeof this.dtf.formatToParts){var e=[xs,Os,xs.toLowerCase(),Os.toLowerCase()];this.$refs.timepicker&&(e.push(this.$refs.timepicker.amString),e.push(this.$refs.timepicker.pmString));var n=this.dtf.formatToParts(new Date),r=n.map((function(t,r){return"literal"===t.type?r+1<n.length&&"hour"===n[r+1].type?"[^\\d]+":t.value.replace(/ /g,"\\s?"):"dayPeriod"===t.type?"((?!=<".concat(t.type,">)(").concat(e.join("|"),")?)"):"((?!=<".concat(t.type,">)\\d+)")})).join(""),i=Y(r,t);if(i.year&&4===i.year.length&&i.month&&i.month<=12&&i.day&&i.day<=31&&i.hour&&i.hour>=0&&i.hour<24&&i.minute&&i.minute>=0&&i.minute<=59){var a=new Date(i.year,i.month-1,i.day,i.hour,i.minute,i.second||0);return a}}return new Date(Date.parse(t))},defaultDatetimeFormatter:function(t){return"function"===typeof this.datetimeFormatter?this.datetimeFormatter(t):"function"===typeof rt.defaultDatetimeFormatter?rt.defaultDatetimeFormatter(t):this.dtf.format(t)},onChangeNativePicker:function(t){var e=t.target.value,n=e?e.split(/\D/):[];if(n.length>=5){var r=parseInt(n[0],10),i=parseInt(n[1],10)-1,a=parseInt(n[2],10),s=parseInt(n[3],10),o=parseInt(n[4],10);this.computedValue=new Date(r,i,a,s,o)}else this.computedValue=null},onActiveChange:function(t){this.$emit("active-change",t)},formatNative:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return n+"-"+(r<10?"0":"")+r+"-"+(i<10?"0":"")+i+"T"+(a<10?"0":"")+a+":"+(s<10?"0":"")+s+":"+(o<10?"0":"")+o}return""},toggle:function(){this.$refs.datepicker.toggle()}},mounted:function(){this.isMobile&&!this.inline||this.newValue&&this.$refs.datepicker.$forceUpdate()}};const ks=Ss;var Ts=function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.isMobile||t.inline?n("b-datepicker",t._b({ref:"datepicker",attrs:{rounded:t.rounded,"open-on-focus":t.openOnFocus,position:t.position,loading:t.loading,inline:t.inline,editable:t.editable,expanded:t.expanded,"close-on-click":!1,"first-day-of-week":t.firstDayOfWeek,"rules-for-first-week":t.rulesForFirstWeek,"date-formatter":t.defaultDatetimeFormatter,"date-parser":t.defaultDatetimeParser,"min-date":t.minDate,"max-date":t.maxDate,icon:t.icon,"icon-right":t.iconRight,"icon-right-clickable":t.iconRightClickable,"icon-pack":t.iconPack,size:t.datepickerSize,placeholder:t.placeholder,"horizontal-time-picker":t.horizontalTimePicker,range:!1,disabled:t.disabled,"mobile-native":t.isMobileNative,locale:t.locale,focusable:t.focusable,"append-to-body":t.appendToBody},on:{focus:t.onFocus,blur:t.onBlur,"active-change":t.onActiveChange,"icon-right-click":function(e){return t.$emit("icon-right-click")},"change-month":function(e){return t.$emit("change-month",e)},"change-year":function(e){return t.$emit("change-year",e)}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-datepicker",t.datepicker,!1),[n("nav",{staticClass:"level is-mobile"},[void 0!==t.$slots.left?n("div",{staticClass:"level-item has-text-centered"},[t._t("left")],2):t._e(),n("div",{staticClass:"level-item has-text-centered"},[n("b-timepicker",t._b({ref:"timepicker",attrs:{inline:"",editable:t.editable,"min-time":t.minTime,"max-time":t.maxTime,size:t.timepickerSize,disabled:t.timepickerDisabled,focusable:t.focusable,"mobile-native":t.isMobileNative,locale:t.locale},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-timepicker",t.timepicker,!1))],1),void 0!==t.$slots.right?n("div",{staticClass:"level-item has-text-centered"},[t._t("right")],2):t._e()])]):n("b-input",t._b({ref:"input",attrs:{type:"datetime-local",autocomplete:"off",value:t.formatNative(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,max:t.formatNative(t.maxDate),min:t.formatNative(t.minDate),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))},_s=[];const Is=void 0,Cs=void 0,As=void 0,Es=!1;var Ns=ot({render:Ts,staticRenderFns:_s},Is,ks,Cs,Es,As,void 0,void 0),js={install:function(t){ct(t,Ns)}};ut(js);var Ds=js,$s={name:"BModal",directives:{trapFocus:nr},model:{prop:"active",event:"update:active"},props:{active:Boolean,component:[Object,Function,String],content:[String,Array],programmatic:Boolean,props:Object,events:Object,width:{type:[String,Number],default:960},hasModalCard:Boolean,animation:{type:String,default:"zoom-out"},canCancel:{type:[Array,Boolean],default:function(){return rt.defaultModalCanCancel}},onCancel:{type:Function,default:function(){}},scroll:{type:String,default:function(){return rt.defaultModalScroll?rt.defaultModalScroll:"clip"},validator:function(t){return["clip","keep"].indexOf(t)>=0}},fullScreen:Boolean,trapFocus:{type:Boolean,default:function(){return rt.defaultTrapFocus}},autoFocus:{type:Boolean,default:function(){return rt.defaultAutoFocus}},customClass:String,customContentClass:[String,Array,Object],ariaRole:{type:String,validator:function(t){return["dialog","alertdialog"].indexOf(t)>=0}},ariaModal:Boolean,ariaLabel:{type:String,validator:function(t){return Boolean(t)}},closeButtonAriaLabel:String,destroyOnHide:{type:Boolean,default:!0}},data:function(){return{isActive:this.active||!1,savedScrollTop:null,newWidth:"number"===typeof this.width?this.width+"px":this.width,animating:!this.active,destroyed:!this.active}},computed:{cancelOptions:function(){return"boolean"===typeof this.canCancel?this.canCancel?rt.defaultModalCanCancel:[]:this.canCancel},showX:function(){return this.cancelOptions.indexOf("x")>=0},customStyle:function(){return this.fullScreen?null:{maxWidth:this.newWidth}}},watch:{active:function(t){this.isActive=t},isActive:function(t){var e=this;t&&(this.destroyed=!1),this.handleScroll(),this.$nextTick((function(){t&&e.$el&&e.$el.focus&&e.autoFocus&&e.$el.focus()}))}},methods:{handleScroll:function(){"undefined"!==typeof window&&("clip"!==this.scroll?(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,this.isActive?document.body.classList.add("is-noscroll"):document.body.classList.remove("is-noscroll"),this.isActive?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null)):this.isActive?document.documentElement.classList.add("is-clipped"):document.documentElement.classList.remove("is-clipped"))},cancel:function(t){this.cancelOptions.indexOf(t)<0||(this.$emit("cancel",arguments),this.onCancel.apply(null,arguments),this.close())},close:function(){var t=this;this.$emit("close"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout((function(){t.$destroy(),V(t.$el)}),150))},keyPress:function(t){var e=t.key;!this.isActive||"Escape"!==e&&"Esc"!==e||this.cancel("escape")},afterEnter:function(){this.animating=!1,this.$emit("after-enter")},beforeLeave:function(){this.animating=!0},afterLeave:function(){this.destroyOnHide&&(this.destroyed=!0),this.$emit("after-leave")}},created:function(){"undefined"!==typeof window&&document.addEventListener("keyup",this.keyPress)},beforeMount:function(){this.programmatic&&document.body.appendChild(this.$el)},mounted:function(){this.programmatic?this.isActive=!0:this.isActive&&this.handleScroll()},beforeDestroy:function(){if("undefined"!==typeof window){document.removeEventListener("keyup",this.keyPress),document.documentElement.classList.remove("is-clipped");var t=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop;document.body.classList.remove("is-noscroll"),document.documentElement.scrollTop=t,document.body.style.top=null}}};const Rs=$s;var Fs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation},on:{"after-enter":t.afterEnter,"before-leave":t.beforeLeave,"after-leave":t.afterLeave}},[t.destroyed?t._e():n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"},{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],staticClass:"modal is-active",class:[{"is-full-screen":t.fullScreen},t.customClass],attrs:{tabindex:"-1",role:t.ariaRole,"aria-label":t.ariaLabel,"aria-modal":t.ariaModal}},[n("div",{staticClass:"modal-background",on:{click:function(e){return t.cancel("outside")}}}),n("div",{staticClass:"animation-content",class:[{"modal-content":!t.hasModalCard},t.customContentClass],style:t.customStyle},[t.component?n(t.component,t._g(t._b({tag:"component",attrs:{"can-cancel":t.canCancel},on:{close:t.close}},"component",t.props,!1),t.events)):t.content?[n("div",{domProps:{innerHTML:t._s(t.content)}})]:t._t("default",null,{canCancel:t.canCancel,close:t.close}),t.showX?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.animating,expression:"!animating"}],staticClass:"modal-close is-large",attrs:{type:"button","aria-label":t.closeButtonAriaLabel},on:{click:function(e){return t.cancel("x")}}}):t._e()],2)])])},Ps=[];const Ms=void 0,Ls=void 0,Bs=void 0,zs=!1;var Vs,Us=ot({render:Fs,staticRenderFns:Ps},Ms,Rs,Ls,zs,Bs,void 0,void 0),Ws={name:"BDialog",components:(Vs={},o(Vs,St.name,St),o(Vs,ye.name,ye),Vs),directives:{trapFocus:nr},extends:Us,props:{title:String,message:[String,Array],icon:String,iconPack:String,hasIcon:Boolean,type:{type:String,default:"is-primary"},size:String,confirmText:{type:String,default:function(){return rt.defaultDialogConfirmText?rt.defaultDialogConfirmText:"OK"}},cancelText:{type:String,default:function(){return rt.defaultDialogCancelText?rt.defaultDialogCancelText:"Cancel"}},hasInput:Boolean,inputAttrs:{type:Object,default:function(){return{}}},onConfirm:{type:Function,default:function(){}},closeOnConfirm:{type:Boolean,default:!0},container:{type:String,default:function(){return rt.defaultContainerElement}},focusOn:{type:String,default:"confirm"},trapFocus:{type:Boolean,default:function(){return rt.defaultTrapFocus}},ariaRole:{type:String,validator:function(t){return["dialog","alertdialog"].indexOf(t)>=0}},ariaModal:Boolean},data:function(){var t=this.hasInput&&this.inputAttrs.value||"";return{prompt:t,isActive:!1,validationMessage:"",isCompositing:!1}},computed:{dialogClass:function(){return[this.size,{"has-custom-container":null!==this.container}]},iconByType:function(){switch(this.type){case"is-info":return"information";case"is-success":return"check-circle";case"is-warning":return"alert";case"is-danger":return"alert-circle";default:return null}},showCancel:function(){return this.cancelOptions.indexOf("button")>=0}},methods:{confirm:function(){var t=this;if(void 0!==this.$refs.input){if(this.isCompositing)return;if(!this.$refs.input.checkValidity())return this.validationMessage=this.$refs.input.validationMessage,void this.$nextTick((function(){return t.$refs.input.select()}))}this.$emit("confirm",this.prompt),this.onConfirm(this.prompt,this),this.closeOnConfirm&&this.close()},close:function(){var t=this;this.isActive=!1,setTimeout((function(){t.$destroy(),V(t.$el)}),150)}},beforeMount:function(){var t=this;"undefined"!==typeof window&&this.$nextTick((function(){var e=document.querySelector(t.container)||document.body;e.appendChild(t.$el)}))},mounted:function(){var t=this;this.isActive=!0,"undefined"===typeof this.inputAttrs.required&&this.$set(this.inputAttrs,"required",!0),this.$nextTick((function(){t.hasInput?t.$refs.input.focus():"cancel"===t.focusOn&&t.showCancel?t.$refs.cancelButton.$el.focus():t.$refs.confirmButton.$el.focus()}))}};const Gs=Ws;var Hs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation}},[t.isActive?n("div",{directives:[{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],staticClass:"dialog modal is-active",class:t.dialogClass,attrs:{role:t.ariaRole,"aria-modal":t.ariaModal}},[n("div",{staticClass:"modal-background",on:{click:function(e){return t.cancel("outside")}}}),n("div",{staticClass:"modal-card animation-content"},[t.title?n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))])]):t._e(),n("section",{staticClass:"modal-card-body",class:{"is-titleless":!t.title,"is-flex":t.hasIcon}},[n("div",{staticClass:"media"},[t.hasIcon&&(t.icon||t.iconByType)?n("div",{staticClass:"media-left"},[n("b-icon",{attrs:{icon:t.icon?t.icon:t.iconByType,pack:t.iconPack,type:t.type,both:!t.icon,size:"is-large"}})],1):t._e(),n("div",{staticClass:"media-content"},[n("p",[t.$slots.default?[t._t("default")]:[n("div",{domProps:{innerHTML:t._s(t.message)}})]],2),t.hasInput?n("div",{staticClass:"field"},[n("div",{staticClass:"control"},["checkbox"===t.inputAttrs.type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.prompt)?t._i(t.prompt,null)>-1:t.prompt},on:{compositionstart:function(e){t.isCompositing=!0},compositionend:function(e){t.isCompositing=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirm(e)},change:function(e){var n=t.prompt,r=e.target,i=!!r.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);r.checked?s<0&&(t.prompt=n.concat([a])):s>-1&&(t.prompt=n.slice(0,s).concat(n.slice(s+1)))}else t.prompt=i}}},"input",t.inputAttrs,!1)):"radio"===t.inputAttrs.type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{type:"radio"},domProps:{checked:t._q(t.prompt,null)},on:{compositionstart:function(e){t.isCompositing=!0},compositionend:function(e){t.isCompositing=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirm(e)},change:function(e){t.prompt=null}}},"input",t.inputAttrs,!1)):n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{type:t.inputAttrs.type},domProps:{value:t.prompt},on:{compositionstart:function(e){t.isCompositing=!0},compositionend:function(e){t.isCompositing=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirm(e)},input:function(e){e.target.composing||(t.prompt=e.target.value)}}},"input",t.inputAttrs,!1))]),n("p",{staticClass:"help is-danger"},[t._v(t._s(t.validationMessage))])]):t._e()])])]),n("footer",{staticClass:"modal-card-foot"},[t.showCancel?n("b-button",{ref:"cancelButton",on:{click:function(e){return t.cancel("button")}}},[t._v(t._s(t.cancelText))]):t._e(),n("b-button",{ref:"confirmButton",attrs:{type:t.type},on:{click:t.confirm}},[t._v(t._s(t.confirmText))])],1)])]):t._e()])},qs=[];const Js=void 0,Ks=void 0,Xs=void 0,Ys=!1;var Zs,Qs=ot({render:Hs,staticRenderFns:qs},Js,Gs,Ks,Ys,Xs,void 0,void 0);function to(t){var e;Array.isArray(t.message)&&(e=t.message,delete t.message);var n="undefined"!==typeof window&&window.Vue?window.Vue:Zs||tt,r=n.extend(Qs),i=new r({el:document.createElement("div"),propsData:t});return e&&(i.$slots.default=e,i.$forceUpdate()),rt.defaultProgrammaticPromise?new Promise((function(t){i.$on("confirm",(function(e){return t({result:e||!0,dialog:i})})),i.$on("cancel",(function(){return t({result:!1,dialog:i})}))})):i}var eo={alert:function(t){"string"===typeof t&&(t={message:t});var e={canCancel:!1},n=B(e,t);return to(n)},confirm:function(t){var e={},n=B(e,t);return to(n)},prompt:function(t){var e={hasInput:!0},n=B(e,t);return to(n)}},no={install:function(t){Zs=t,ct(t,Qs),lt(t,"dialog",eo)}};ut(no);var ro=no,io={install:function(t){ct(t,hr),ct(t,xr)}};ut(io);var ao=io,so={install:function(t){ct(t,Pr)}};ut(so);var oo=so,uo={install:function(t){ct(t,St)}};ut(uo);var co=uo,lo={install:function(t){ct(t,Pe)}};ut(lo);var ho=lo,po={install:function(t){ct(t,jt)}};ut(po);var fo=po,mo="undefined"===typeof window,go=mo?Object:window.HTMLElement,bo=mo?Object:window.File,yo={name:"BLoading",model:{prop:"active",event:"update:active"},props:{active:Boolean,programmatic:Boolean,container:[Object,Function,go],isFullPage:{type:Boolean,default:!0},animation:{type:String,default:"fade"},canCancel:{type:Boolean,default:!1},onCancel:{type:Function,default:function(){}}},data:function(){return{isActive:this.active||!1,displayInFullPage:this.isFullPage}},watch:{active:function(t){this.isActive=t},isFullPage:function(t){this.displayInFullPage=t}},methods:{cancel:function(){this.canCancel&&this.isActive&&this.close()},close:function(){var t=this;this.onCancel.apply(null,arguments),this.$emit("close"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout((function(){t.$destroy(),V(t.$el)}),150))},keyPress:function(t){var e=t.key;"Escape"!==e&&"Esc"!==e||this.cancel()}},created:function(){"undefined"!==typeof window&&document.addEventListener("keyup",this.keyPress)},beforeMount:function(){this.programmatic&&(this.container?(this.displayInFullPage=!1,this.$emit("update:is-full-page",!1),this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted:function(){this.programmatic&&(this.isActive=!0)},beforeDestroy:function(){"undefined"!==typeof window&&document.removeEventListener("keyup",this.keyPress)}};const vo=yo;var wo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"loading-overlay is-active",class:{"is-full-page":t.displayInFullPage}},[n("div",{staticClass:"loading-background",on:{click:t.cancel}}),t._t("default",[n("div",{staticClass:"loading-icon"})])],2)])},xo=[];const Oo=void 0,So=void 0,ko=void 0,To=!1;var _o,Io=ot({render:wo,staticRenderFns:xo},Oo,vo,So,To,ko,void 0,void 0),Co={open:function(t){var e={programmatic:!0},n=B(e,t),r="undefined"!==typeof window&&window.Vue?window.Vue:_o||tt,i=r.extend(Io);return new i({el:document.createElement("div"),propsData:n})}},Ao={install:function(t){_o=t,ct(t,Io),lt(t,"loading",Co)}};ut(Ao);var Eo=Ao,No={name:"BMenu",props:{accordion:{type:Boolean,default:!0},activable:{type:Boolean,default:!0}},data:function(){return{_isMenu:!0}}};const jo=No;var Do=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[t._t("default")],2)},$o=[];const Ro=void 0,Fo=void 0,Po=void 0,Mo=!1;var Lo=ot({render:Do,staticRenderFns:$o},Ro,jo,Fo,Mo,Po,void 0,void 0),Bo={name:"BMenuList",functional:!0,props:{label:String,icon:String,iconPack:String,ariaRole:{type:String,default:""},size:{type:String,default:"is-small"}},render:function(t,e){var n=null,r=e.slots();(e.props.label||r.label)&&(n=t("p",{attrs:{class:"menu-label"}},e.props.label?e.props.icon?[t("b-icon",{props:{icon:e.props.icon,pack:e.props.iconPack,size:e.props.size}}),t("span",{},e.props.label)]:e.props.label:r.label));var i=t("ul",{attrs:{class:"menu-list",role:"menu"===e.props.ariaRole?e.props.ariaRole:null}},r.default);return n?[n,i]:i}};const zo=Bo,Vo=void 0,Uo=void 0,Wo=void 0,Go=void 0;var Ho=ot({},Vo,zo,Uo,Go,Wo,void 0,void 0),qo={name:"BMenuItem",components:o({},St.name,St),inheritAttrs:!1,model:{prop:"active",event:"update:active"},props:{label:String,active:Boolean,expanded:Boolean,disabled:Boolean,iconPack:String,icon:String,animation:{type:String,default:"slide"},tag:{type:String,default:"a",validator:function(t){return rt.defaultLinkTags.indexOf(t)>=0}},ariaRole:{type:String,default:""},size:{type:String,default:"is-small"}},data:function(){return{newActive:this.active,newExpanded:this.expanded}},computed:{ariaRoleMenu:function(){return"menuitem"===this.ariaRole?this.ariaRole:null}},watch:{active:function(t){this.newActive=t},expanded:function(t){this.newExpanded=t}},methods:{onClick:function(t){if(!this.disabled){var e=this.getMenu();this.reset(this.$parent,e),this.newExpanded=this.$props.expanded||!this.newExpanded,this.$emit("update:expanded",this.newExpanded),e&&e.activable&&(this.newActive=!0,this.$emit("update:active",this.newActive))}},reset:function(t,e){var n=this,r=t.$children.filter((function(t){return t.name===n.name}));r.forEach((function(r){r!==n&&(n.reset(r,e),(!t.$data._isMenu||t.$data._isMenu&&t.accordion)&&(r.newExpanded=!1,r.$emit("update:expanded",r.newActive)),e&&e.activable&&(r.newActive=!1,r.$emit("update:active",r.newActive)))}))},getMenu:function(){var t=this.$parent;while(t&&!t.$data._isMenu)t=t.$parent;return t}}};const Jo=qo;var Ko=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{attrs:{role:t.ariaRoleMenu}},[n(t.tag,t._g(t._b({tag:"component",class:{"is-active":t.newActive,"is-expanded":t.newExpanded,"is-disabled":t.disabled,"icon-text":t.icon},on:{click:function(e){return t.onClick(e)}}},"component",t.$attrs,!1),t.$listeners),[t.icon?n("b-icon",{attrs:{icon:t.icon,pack:t.iconPack,size:t.size}}):t._e(),t.label?n("span",[t._v(" "+t._s(t.label)+" ")]):t._t("label",null,{expanded:t.newExpanded,active:t.newActive})],2),t.$slots.default?[n("transition",{attrs:{name:t.animation}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.newExpanded,expression:"newExpanded"}]},[t._t("default")],2)])]:t._e()],2)},Xo=[];const Yo=void 0,Zo=void 0,Qo=void 0,tu=!1;var eu=ot({render:Ko,staticRenderFns:Xo},Yo,Jo,Zo,tu,Qo,void 0,void 0),nu={install:function(t){ct(t,Lo),ct(t,Ho),ct(t,eu)}};ut(nu);var ru=nu,iu={components:o({},St.name,St),model:{prop:"active",event:"update:active"},props:{active:{type:Boolean,default:!0},title:String,closable:{type:Boolean,default:!0},message:String,type:String,hasIcon:Boolean,size:String,icon:String,iconPack:String,iconSize:String,autoClose:{type:Boolean,default:!1},duration:{type:Number,default:2e3},progressBar:{type:Boolean,default:!1}},data:function(){return{isActive:this.active,remainingTime:this.duration/1e3,newIconSize:this.iconSize||this.size||"is-large"}},watch:{active:function(t){this.isActive=t},isActive:function(t){t?(this.setAutoClose(),this.setDurationProgress()):this.timer&&clearTimeout(this.timer)}},computed:{computedIcon:function(){if(this.icon)return this.icon;switch(this.type){case"is-info":return"information";case"is-success":return"check-circle";case"is-warning":return"alert";case"is-danger":return"alert-circle";default:return null}}},methods:{close:function(){this.isActive=!1,this.resetDurationProgress(),this.$emit("close"),this.$emit("update:active",!1)},click:function(){this.$emit("click")},setAutoClose:function(){var t=this;this.autoClose&&(this.timer=setTimeout((function(){t.isActive&&t.close()}),this.duration))},setDurationProgress:function(){var t=this;this.progressBar&&(this.$buefy.globalNoticeInterval=setInterval((function(){0!==t.remainingTime?t.remainingTime-=1:t.resetDurationProgress()}),1e3))},resetDurationProgress:function(){var t=this;setTimeout((function(){t.remainingTime=t.duration/1e3,clearInterval(t.$buefy.globalNoticeInterval)}),100)}},mounted:function(){this.setAutoClose()}},au={name:"BMessage",mixins:[iu],props:{ariaCloseLabel:String}};const su=au;var ou=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("article",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"message",class:[t.type,t.size]},[t.$slots.header||t.title?n("header",{staticClass:"message-header"},[t.$slots.header?n("div",[t._t("header")],2):t.title?n("p",[t._v(t._s(t.title))]):t._e(),t.closable?n("button",{staticClass:"delete",attrs:{type:"button","aria-label":t.ariaCloseLabel},on:{click:t.close}}):t._e()]):t._e(),t.$slots.default?n("section",{staticClass:"message-body"},[n("div",{staticClass:"media"},[t.computedIcon&&t.hasIcon?n("div",{staticClass:"media-left"},[n("b-icon",{class:t.type,attrs:{icon:t.computedIcon,pack:t.iconPack,both:"",size:t.newIconSize}})],1):t._e(),n("div",{staticClass:"media-content"},[t._t("default")],2)])]):t._e(),t.autoClose&&t.progressBar?n("b-progress",{staticClass:"auto-close-progress",attrs:{value:t.remainingTime-1,max:t.duration/1e3-1,type:t.type,rounded:!1}}):t._e()],1)])},uu=[];const cu=void 0,lu=void 0,du=void 0,hu=!1;var pu=ot({render:ou,staticRenderFns:uu},cu,su,lu,hu,du,void 0,void 0),fu={install:function(t){ct(t,pu)}};ut(fu);var mu,gu=fu,bu={open:function(t){var e;"string"===typeof t&&(t={content:t});var n,r={programmatic:!0};t.parent&&(e=t.parent,delete t.parent),Array.isArray(t.content)&&(n=t.content,delete t.content);var i=B(r,t),a="undefined"!==typeof window&&window.Vue?window.Vue:mu||tt,s=a.extend(Us),o=new s({parent:e,el:document.createElement("div"),propsData:i});return n&&(o.$slots.default=n,o.$forceUpdate()),o}},yu={install:function(t){mu=t,ct(t,Us),lt(t,"modal",bu)}};ut(yu);var vu=yu,wu={props:{type:{type:String,default:"is-dark"},message:[String,Array],duration:Number,queue:{type:Boolean,default:void 0},indefinite:{type:Boolean,default:!1},pauseOnHover:{type:Boolean,default:!1},position:{type:String,default:"is-top",validator:function(t){return["is-top-right","is-top","is-top-left","is-bottom-right","is-bottom","is-bottom-left"].indexOf(t)>-1}},container:String},data:function(){return{isActive:!1,isPaused:!1,parentTop:null,parentBottom:null,newContainer:this.container||rt.defaultContainerElement}},computed:{correctParent:function(){switch(this.position){case"is-top-right":case"is-top":case"is-top-left":return this.parentTop;case"is-bottom-right":case"is-bottom":case"is-bottom-left":return this.parentBottom}},transition:function(){switch(this.position){case"is-top-right":case"is-top":case"is-top-left":return{enter:"fadeInDown",leave:"fadeOut"};case"is-bottom-right":case"is-bottom":case"is-bottom-left":return{enter:"fadeInUp",leave:"fadeOut"}}}},methods:{pause:function(){this.pauseOnHover&&!this.indefinite&&(this.isPaused=!0,clearInterval(this.$buefy.globalNoticeInterval))},removePause:function(){this.pauseOnHover&&!this.indefinite&&(this.isPaused=!1,this.close())},shouldQueue:function(){var t=void 0!==this.queue?this.queue:rt.defaultNoticeQueue;return!!t&&(this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0)},click:function(){this.$emit("click")},close:function(){var t=this;this.isPaused||(clearTimeout(this.timer),this.isActive=!1,this.$emit("close"),setTimeout((function(){t.$destroy(),V(t.$el)}),150))},timeoutCallback:function(){return this.close()},showNotice:function(){var t=this;this.shouldQueue()&&(this.correctParent.innerHTML=""),this.correctParent.insertAdjacentElement("afterbegin",this.$el),this.isActive=!0,this.indefinite||(this.timer=setTimeout((function(){return t.timeoutCallback()}),this.newDuration))},setupContainer:function(){if(this.parentTop=document.querySelector((this.newContainer?this.newContainer:"body")+">.notices.is-top"),this.parentBottom=document.querySelector((this.newContainer?this.newContainer:"body")+">.notices.is-bottom"),!this.parentTop||!this.parentBottom){this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="notices is-top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="notices is-bottom");var t=document.querySelector(this.newContainer)||document.body;t.appendChild(this.parentTop),t.appendChild(this.parentBottom),this.newContainer&&(this.parentTop.classList.add("has-custom-container"),this.parentBottom.classList.add("has-custom-container"))}}},beforeMount:function(){this.setupContainer()},mounted:function(){this.showNotice()}},xu={name:"BNotification",mixins:[iu],props:{position:String,ariaCloseLabel:String,animation:{type:String,default:"fade"}}};const Ou=xu;var Su=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation}},[n("article",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"notification",class:[t.type,t.position],on:{click:t.click}},[t.closable?n("button",{staticClass:"delete",attrs:{type:"button","aria-label":t.ariaCloseLabel},on:{click:t.close}}):t._e(),t.$slots.default||t.message?n("div",{staticClass:"media"},[t.computedIcon&&t.hasIcon?n("div",{staticClass:"media-left"},[n("b-icon",{attrs:{icon:t.computedIcon,pack:t.iconPack,size:t.newIconSize,both:"","aria-hidden":""}})],1):t._e(),n("div",{staticClass:"media-content"},[t.$slots.default?[t._t("default")]:[n("p",{staticClass:"text",domProps:{innerHTML:t._s(t.message)}})]],2)]):t._e(),t.autoClose&&t.progressBar?n("b-progress",{staticClass:"auto-close-progress",attrs:{value:t.remainingTime-1,max:t.duration/1e3-1,type:t.type,rounded:!1}}):t._e()],1)])},ku=[];const Tu=void 0,_u=void 0,Iu=void 0,Cu=!1;var Au=ot({render:Su,staticRenderFns:ku},Tu,Ou,_u,Cu,Iu,void 0,void 0),Eu={name:"BNotificationNotice",mixins:[wu],data:function(){return{newDuration:this.duration||rt.defaultNotificationDuration}},methods:{close:function(){var t=this;this.isPaused||(clearTimeout(this.timer),this.$refs.notification.isActive=!1,this.$emit("close"),setTimeout((function(){t.$destroy(),V(t.$el)}),150))}}};const Nu=Eu;var ju=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-notification",t._b({ref:"notification",on:{click:t.click,close:t.close},nativeOn:{mouseenter:function(e){return t.pause(e)},mouseleave:function(e){return t.removePause(e)}}},"b-notification",t.$options.propsData,!1),[t._t("default")],2)},Du=[];const $u=void 0,Ru=void 0,Fu=void 0,Pu=!1;var Mu,Lu=ot({render:ju,staticRenderFns:Du},$u,Nu,Ru,Pu,Fu,void 0,void 0),Bu={open:function(t){var e;"string"===typeof t&&(t={message:t});var n,r={position:rt.defaultNotificationPosition||"is-top-right"};t.parent&&(e=t.parent,delete t.parent),Array.isArray(t.message)&&(n=t.message,delete t.message),t.active=!1;var i=B(r,t),a="undefined"!==typeof window&&window.Vue?window.Vue:Mu||tt,s=a.extend(Lu),o=new s({parent:e,el:document.createElement("div"),propsData:i});return n&&(o.$slots.default=n,o.$forceUpdate()),o.$children[0].isActive=!0,o}},zu={install:function(t){Mu=t,ct(t,Au),lt(t,"notification",Bu)}};ut(zu);var Vu=zu,Uu={name:"NavbarBurger",props:{isOpened:{type:Boolean,default:!1}}};const Wu=Uu;var Gu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",t._g({staticClass:"navbar-burger burger",class:{"is-active":t.isOpened},attrs:{role:"button","aria-label":"menu","aria-expanded":t.isOpened,tabindex:"0"}},t.$listeners),[n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}})])},Hu=[];const qu=void 0,Ju=void 0,Ku=void 0,Xu=!1;var Yu=ot({render:Gu,staticRenderFns:Hu},qu,Wu,Ju,Xu,Ku,void 0,void 0),Zu="undefined"!==typeof window&&("ontouchstart"in window||navigator.msMaxTouchPoints>0),Qu=Zu?["touchstart","click"]:["click"],tc=[];function ec(t){var e="function"===typeof t;if(!e&&"object"!==r(t))throw new Error("v-click-outside: Binding value should be a function or an object, ".concat(r(t)," given"));return{handler:e?t:t.handler,middleware:t.middleware||function(t){return t},events:t.events||Qu}}function nc(t){var e=t.el,n=t.event,r=t.handler,i=t.middleware,a=n.target!==e&&!e.contains(n.target);a&&i(n,e)&&r(n,e)}function rc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.eventHandlers,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";e.forEach((function(t){var e=t.event,r=t.handler;document["".concat(n,"EventListener")](e,r)}))}function ic(t,e){var n=e.value,r=ec(n),i=r.handler,a=r.middleware,s=r.events,o={el:t,eventHandlers:s.map((function(e){return{event:e,handler:function(e){return nc({event:e,el:t,handler:i,middleware:a})}}}))};rc(o,"add"),tc.push(o)}function ac(t,e){var n=e.value,r=ec(n),i=r.handler,a=r.middleware,s=r.events,o=tc.filter((function(e){return e.el===t}))[0];rc(o,"remove"),o.eventHandlers=s.map((function(e){return{event:e,handler:function(e){return nc({event:e,el:t,handler:i,middleware:a})}}})),rc(o,"add")}function sc(t){var e=tc.filter((function(e){return e.el===t}))[0];rc(e,"remove")}var oc={bind:ic,update:ac,unbind:sc,instances:tc},uc="is-fixed-top",cc="has-navbar-fixed-top",lc="has-spaced-navbar-fixed-top",dc="is-fixed-bottom",hc="has-navbar-fixed-bottom",pc="has-spaced-navbar-fixed-bottom",fc="has-navbar-centered",mc=function(t){return!!t},gc={name:"BNavbar",components:{NavbarBurger:Yu},directives:{clickOutside:oc},model:{prop:"active",event:"update:active"},props:{type:[String,Object],transparent:{type:Boolean,default:!1},fixedTop:{type:Boolean,default:!1},fixedBottom:{type:Boolean,default:!1},active:{type:Boolean,default:!1},centered:{type:Boolean,default:!1},wrapperClass:{type:[String,Array,Object]},closeOnClick:{type:Boolean,default:!0},mobileBurger:{type:Boolean,default:!0},spaced:Boolean,shadow:Boolean},data:function(){return{internalIsActive:this.active,_isNavBar:!0}},computed:{isOpened:function(){return this.internalIsActive},computedClasses:function(){var t;return[this.type,(t={},o(t,uc,this.fixedTop),o(t,dc,this.fixedBottom),o(t,fc,this.centered),o(t,"is-spaced",this.spaced),o(t,"has-shadow",this.shadow),o(t,"is-transparent",this.transparent),t)]}},watch:{active:{handler:function(t){this.internalIsActive=t},immediate:!0},fixedTop:function(t){this.setBodyFixedTopClass(t)},bottomTop:function(t){this.setBodyFixedBottomClass(t)}},methods:{toggleActive:function(){this.internalIsActive=!this.internalIsActive,this.emitUpdateParentEvent()},closeMenu:function(){this.closeOnClick&&this.internalIsActive&&(this.internalIsActive=!1,this.emitUpdateParentEvent())},emitUpdateParentEvent:function(){this.$emit("update:active",this.internalIsActive)},setBodyClass:function(t){"undefined"!==typeof window&&document.body.classList.add(t)},removeBodyClass:function(t){"undefined"!==typeof window&&document.body.classList.remove(t)},checkIfFixedPropertiesAreColliding:function(){var t=this.fixedTop&&this.fixedBottom;if(t)throw new Error("You should choose if the BNavbar is fixed bottom or fixed top, but not both")},genNavbar:function(t){var e=[this.genNavbarBrandNode(t),this.genNavbarSlotsNode(t)];if(!mc(this.wrapperClass))return this.genNavbarSlots(t,e);var n=t("div",{class:this.wrapperClass},e);return this.genNavbarSlots(t,[n])},genNavbarSlots:function(t,e){return t("nav",{staticClass:"navbar",class:this.computedClasses,attrs:{role:"navigation","aria-label":"main navigation"},directives:[{name:"click-outside",value:this.closeMenu}]},e)},genNavbarBrandNode:function(t){return t("div",{class:"navbar-brand"},[this.$slots.brand,this.genBurgerNode(t)])},genBurgerNode:function(t){var e=this;if(this.mobileBurger){var n=t("navbar-burger",{props:{isOpened:this.isOpened},on:{click:this.toggleActive,keyup:function(t){13===t.keyCode&&e.toggleActive()}}}),r=!!this.$scopedSlots.burger;return r?this.$scopedSlots.burger({isOpened:this.isOpened,toggleActive:this.toggleActive}):n}},genNavbarSlotsNode:function(t){return t("div",{staticClass:"navbar-menu",class:{"is-active":this.isOpened}},[this.genMenuPosition(t,"start"),this.genMenuPosition(t,"end")])},genMenuPosition:function(t,e){return t("div",{staticClass:"navbar-".concat(e)},this.$slots[e])},setBodyFixedTopClass:function(t){this.checkIfFixedPropertiesAreColliding(),t?(this.setBodyClass(cc),this.spaced&&this.setBodyClass(lc)):(this.removeBodyClass(cc),this.removeBodyClass(lc))},setBodyFixedBottomClass:function(t){this.checkIfFixedPropertiesAreColliding(),t?(this.setBodyClass(hc),this.spaced&&this.setBodyClass(pc)):(this.removeBodyClass(hc),this.removeBodyClass(pc))}},beforeMount:function(){this.fixedTop&&this.setBodyFixedTopClass(!0),this.fixedBottom&&this.setBodyFixedBottomClass(!0)},beforeDestroy:function(){if(this.fixedTop){var t=this.spaced?lc:cc;this.removeBodyClass(t)}else if(this.fixedBottom){var e=this.spaced?pc:hc;this.removeBodyClass(e)}},render:function(t,e){return this.genNavbar(t)}};const bc=gc,yc=void 0,vc=void 0,wc=void 0,xc=void 0;var Oc=ot({},yc,bc,vc,xc,wc,void 0,void 0),Sc=["div","span","input"],kc={name:"BNavbarItem",inheritAttrs:!1,props:{tag:{type:String,default:"a"},active:Boolean},methods:{keyPress:function(t){var e=t.key;"Escape"!==e&&"Esc"!==e||this.closeMenuRecursive(this,["NavBar"])},handleClickEvent:function(t){var e=Sc.some((function(e){return e===t.target.localName}));if(!e){var n=this.closeMenuRecursive(this,["NavbarDropdown","NavBar"]);n&&n.$data._isNavbarDropdown&&this.closeMenuRecursive(n,["NavBar"])}},closeMenuRecursive:function(t,e){if(!t.$parent)return null;var n=e.reduce((function(e,n){return t.$parent.$data["_is".concat(n)]?(t.$parent.closeMenu(),t.$parent):e}),null);return n||this.closeMenuRecursive(t.$parent,e)}},mounted:function(){"undefined"!==typeof window&&(this.$el.addEventListener("click",this.handleClickEvent),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!==typeof window&&(this.$el.removeEventListener("click",this.handleClickEvent),document.removeEventListener("keyup",this.keyPress))}};const Tc=kc;var _c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,t._g(t._b({tag:"component",staticClass:"navbar-item",class:{"is-active":t.active}},"component",t.$attrs,!1),t.$listeners),[t._t("default")],2)},Ic=[];const Cc=void 0,Ac=void 0,Ec=void 0,Nc=!1;var jc=ot({render:_c,staticRenderFns:Ic},Cc,Tc,Ac,Nc,Ec,void 0,void 0),Dc={name:"BNavbarDropdown",directives:{clickOutside:oc},inheritAttrs:!1,props:{label:String,hoverable:Boolean,active:Boolean,right:Boolean,arrowless:Boolean,boxed:Boolean,closeOnClick:{type:Boolean,default:!0},collapsible:Boolean,tag:{type:String,default:"a"}},data:function(){return{newActive:this.active,isHoverable:this.hoverable,_isNavbarDropdown:!0}},watch:{active:function(t){this.newActive=t},newActive:function(t){this.$emit("active-change",t)}},methods:{toggleMenu:function(){this.newActive=!this.newActive},showMenu:function(){this.newActive=!0},closeMenu:function(){this.newActive=!this.closeOnClick,this.hoverable&&this.closeOnClick&&(this.isHoverable=!1)},checkHoverable:function(){this.hoverable&&(this.isHoverable=!0)}}};const $c=Dc;var Rc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"navbar-item has-dropdown",class:{"is-hoverable":t.isHoverable,"is-active":t.newActive},on:{mouseenter:t.checkHoverable}},[n(t.tag,t._g(t._b({tag:"component",staticClass:"navbar-link",class:{"is-arrowless":t.arrowless,"is-active":t.newActive&&t.collapsible},attrs:{"aria-haspopup":"true",tabindex:"0"},on:{click:function(e){return e.preventDefault(),t.toggleMenu(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggleMenu(e)}}},"component",t.$attrs,!1),t.$listeners),[t.label?[t._v(t._s(t.label))]:t._t("label")],2),n("div",{staticClass:"navbar-dropdown is-hidden-touch",class:{"is-right":t.right,"is-boxed":t.boxed}},[t._t("default")],2),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.collapsible||t.collapsible&&t.newActive,expression:"!collapsible || (collapsible && newActive)"}],staticClass:"navbar-dropdown is-hidden-desktop",class:{"is-right":t.right,"is-boxed":t.boxed}},[t._t("default")],2)],1)},Fc=[];const Pc=void 0,Mc=void 0,Lc=void 0,Bc=!1;var zc=ot({render:Rc,staticRenderFns:Fc},Pc,$c,Mc,Bc,Lc,void 0,void 0),Vc={install:function(t){ct(t,Oc),ct(t,jc),ct(t,zc)}};ut(Vc);var Uc,Wc=Vc,Gc={name:"BNumberinput",components:(Uc={},o(Uc,St.name,St),o(Uc,jt.name,jt),Uc),mixins:[dt],inheritAttrs:!1,props:{value:Number,min:{type:[Number,String]},max:[Number,String],step:[Number,String],minStep:[Number,String],exponential:[Boolean,Number],disabled:Boolean,type:{type:String,default:"is-primary"},editable:{type:Boolean,default:!0},controls:{type:Boolean,default:!0},controlsAlignment:{type:String,default:"center",validator:function(t){return["left","right","center"].indexOf(t)>=0}},controlsRounded:{type:Boolean,default:!1},controlsPosition:String,placeholder:[Number,String],ariaMinusLabel:String,ariaPlusLabel:String,longPress:{type:Boolean,default:!0}},data:function(){return{newValue:this.value,newStep:this.step||1,newMinStep:this.minStep,timesPressed:1,_elementRef:"input"}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){var e=this,n=0===Number(t)?0:Number(t)||null;""!==t&&void 0!==t&&null!==t||(n=void 0!==this.minNumber?this.minNumber:null),this.newValue=n,null===n?this.$emit("input",n):isNaN(n)||"-0"===n||this.$emit("input",Number(n)),this.$nextTick((function(){e.$refs.input&&e.$refs.input.checkHtml5Validity()}))}},controlsLeft:function(){return this.controls&&"right"!==this.controlsAlignment?"left"===this.controlsAlignment?["minus","plus"]:["minus"]:[]},controlsRight:function(){return this.controls&&"left"!==this.controlsAlignment?"right"===this.controlsAlignment?["minus","plus"]:["plus"]:[]},fieldClasses:function(){return[{"has-addons":"compact"===this.controlsPosition},{"is-grouped":"compact"!==this.controlsPosition},{"is-expanded":this.expanded}]},buttonClasses:function(){return[this.type,this.size,{"is-rounded":this.controlsRounded}]},minNumber:function(){return"string"===typeof this.min?parseFloat(this.min):this.min},maxNumber:function(){return"string"===typeof this.max?parseFloat(this.max):this.max},stepNumber:function(){return"any"===this.newStep?1:"string"===typeof this.newStep?parseFloat(this.newStep):this.newStep},minStepNumber:function(){if("any"===this.newStep&&"undefined"===typeof this.newMinStep)return"any";var t="undefined"!==typeof this.newMinStep?this.newMinStep:this.newStep;return"string"===typeof t?parseFloat(t):t},disabledMin:function(){return this.computedValue-this.stepNumber<this.minNumber},disabledMax:function(){return this.computedValue+this.stepNumber>this.maxNumber},stepDecimals:function(){var t=this.minStepNumber.toString(),e=t.indexOf(".");return e>=0?t.substring(e+1).length:0}},watch:{value:{immediate:!0,handler:function(t){this.newValue=t}},step:function(t){this.newStep=t},minStep:function(t){this.newMinStep=t}},methods:{isDisabled:function(t){return this.disabled||("plus"===t?this.disabledMax:this.disabledMin)},decrement:function(){if(null===this.computedValue||"undefined"===typeof this.computedValue){if(null!==this.maxNumber&&"undefined"!==typeof this.maxNumber)return void(this.computedValue=this.maxNumber);this.computedValue=0}if("undefined"===typeof this.minNumber||this.computedValue-this.stepNumber>=this.minNumber){var t=this.computedValue-this.stepNumber;this.computedValue=parseFloat(t.toFixed(this.stepDecimals))}},increment:function(){if(null===this.computedValue||"undefined"===typeof this.computedValue){if(null!==this.minNumber&&"undefined"!==typeof this.minNumber)return void(this.computedValue=this.minNumber);this.computedValue=0}if("undefined"===typeof this.maxNumber||this.computedValue+this.stepNumber<=this.maxNumber){var t=this.computedValue+this.stepNumber;this.computedValue=parseFloat(t.toFixed(this.stepDecimals))}},onControlClick:function(t,e){0===t.detail&&"click"===t.type&&(e?this.increment():this.decrement())},longPressTick:function(t){var e=this;t?this.increment():this.decrement(),this._$intervalRef=setTimeout((function(){e.longPressTick(t)}),this.exponential?250/(this.exponential*this.timesPressed++):250)},onStartLongPress:function(t,e){this.longPress&&(0!==t.button&&"touchstart"!==t.type||(clearTimeout(this._$intervalRef),this.longPressTick(e)))},onStopLongPress:function(){this._$intervalRef&&(this.timesPressed=1,clearTimeout(this._$intervalRef),this._$intervalRef=null)}}};const Hc=Gc;var qc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-numberinput field",class:t.fieldClasses},[t._l(t.controlsLeft,(function(e){return n("p",{key:e,class:["control",e],on:{mouseup:t.onStopLongPress,mouseleave:t.onStopLongPress,touchend:t.onStopLongPress,touchcancel:t.onStopLongPress}},[n("button",{staticClass:"button",class:t.buttonClasses,attrs:{type:"button",disabled:t.isDisabled(e),"aria-label":"plus"===e?t.ariaPlusLabel:t.ariaMinusLabel},on:{mousedown:function(n){!t.isDisabled(e)&&t.onStartLongPress(n,"plus"===e)},touchstart:function(n){n.preventDefault(),!t.isDisabled(e)&&t.onStartLongPress(n,"plus"===e)},click:function(n){!t.isDisabled(e)&&t.onControlClick(n,"plus"===e)}}},[n("b-icon",{attrs:{both:"",icon:e,pack:t.iconPack,size:t.iconSize}})],1)])})),n("b-input",t._b({ref:"input",attrs:{type:"number",step:t.minStepNumber,max:t.max,min:t.min,size:t.size,disabled:t.disabled,readonly:!t.editable,loading:t.loading,rounded:t.rounded,icon:t.icon,"icon-pack":t.iconPack,autocomplete:t.autocomplete,expanded:t.expanded,placeholder:t.placeholder,"use-html5-validation":t.useHtml5Validation},on:{focus:function(e){return t.$emit("focus",e)},blur:function(e){return t.$emit("blur",e)}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-input",t.$attrs,!1)),t._l(t.controlsRight,(function(e){return n("p",{key:e,class:["control",e],on:{mouseup:t.onStopLongPress,mouseleave:t.onStopLongPress,touchend:t.onStopLongPress,touchcancel:t.onStopLongPress}},[n("button",{staticClass:"button",class:t.buttonClasses,attrs:{type:"button",disabled:t.isDisabled(e),"aria-label":"plus"===e?t.ariaPlusLabel:t.ariaMinusLabel},on:{mousedown:function(n){!t.isDisabled(e)&&t.onStartLongPress(n,"plus"===e)},touchstart:function(n){n.preventDefault(),!t.isDisabled(e)&&t.onStartLongPress(n,"plus"===e)},click:function(n){!t.isDisabled(e)&&t.onControlClick(n,"plus"===e)}}},[n("b-icon",{attrs:{both:"",icon:e,pack:t.iconPack,size:t.iconSize}})],1)])}))],2)},Jc=[];const Kc=void 0,Xc=void 0,Yc=void 0,Zc=!1;var Qc=ot({render:qc,staticRenderFns:Jc},Kc,Hc,Xc,Zc,Yc,void 0,void 0),tl={install:function(t){ct(t,Qc)}};ut(tl);var el=tl,nl={name:"BPaginationButton",props:{page:{type:Object,required:!0},tag:{type:String,default:"a",validator:function(t){return rt.defaultLinkTags.indexOf(t)>=0}},disabled:{type:Boolean,default:!1}},computed:{href:function(){if("a"===this.tag)return"#"},isDisabled:function(){return this.disabled||this.page.disabled}}};const rl=nl;var il=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r(e.tag,e._b({tag:"component",staticClass:"pagination-link",class:(t={"is-current":e.page.isCurrent},t[e.page.class]=!0,t),attrs:{role:"button",href:e.href,disabled:e.isDisabled,"aria-label":e.page["aria-label"],"aria-current":e.page.isCurrent},on:{click:function(t){return t.preventDefault(),e.page.click(t)}}},"component",e.$attrs,!1),[e._t("default",[e._v(e._s(e.page.number))])],2)},al=[];const sl=void 0,ol=void 0,ul=void 0,cl=!1;var ll,dl=ot({render:il,staticRenderFns:al},sl,rl,ol,cl,ul,void 0,void 0);function hl(t,e,n){var r;return function(){var i=this,a=arguments,s=function(){r=null,n||t.apply(i,a)},o=n&&!r;clearTimeout(r),r=setTimeout(s,e),o&&t.apply(i,a)}}var pl={name:"BPagination",components:(ll={},o(ll,St.name,St),o(ll,dl.name,dl),ll),model:{prop:"current",event:"update:current"},props:{total:[Number,String],perPage:{type:[Number,String],default:20},current:{type:[Number,String],default:1},rangeBefore:{type:[Number,String],default:1},rangeAfter:{type:[Number,String],default:1},size:String,simple:Boolean,rounded:Boolean,order:String,iconPack:String,iconPrev:{type:String,default:function(){return rt.defaultIconPrev}},iconNext:{type:String,default:function(){return rt.defaultIconNext}},ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String,pageInput:{type:Boolean,default:!1},pageInputPosition:String,debouncePageInput:[Number,String]},data:function(){return{inputValue:this.current}},computed:{rootClasses:function(){return[this.order,this.size,this.pageInputPosition,{"is-simple":this.simple,"is-rounded":this.rounded,"has-input":this.pageInput}]},beforeCurrent:function(){return parseInt(this.rangeBefore)},afterCurrent:function(){return parseInt(this.rangeAfter)},pageCount:function(){return Math.ceil(this.total/this.perPage)},firstItem:function(){var t=this.current*this.perPage-this.perPage+1;return t>=0?t:0},hasPrev:function(){return this.current>1},hasFirst:function(){return this.current>=2+this.beforeCurrent},hasFirstEllipsis:function(){return this.current>=this.beforeCurrent+4},hasLast:function(){return this.current<=this.pageCount-(1+this.afterCurrent)},hasLastEllipsis:function(){return this.current<this.pageCount-(2+this.afterCurrent)},hasNext:function(){return this.current<this.pageCount},pagesInRange:function(){if(!this.simple){var t=Math.max(1,this.current-this.beforeCurrent);t-1===2&&t--;var e=Math.min(this.current+this.afterCurrent,this.pageCount);this.pageCount-e===2&&e++;for(var n=[],r=t;r<=e;r++)n.push(this.getPage(r));return n}}},watch:{pageCount:function(t){this.current>t&&this.last()},current:function(t){this.inputValue=t},debouncePageInput:{handler:function(t){this.debounceHandlePageInput=hl(this.handleOnInputPageChange,t)},immediate:!0}},methods:{prev:function(t){this.changePage(this.current-1,t)},next:function(t){this.changePage(this.current+1,t)},first:function(t){this.changePage(1,t)},last:function(t){this.changePage(this.pageCount,t)},changePage:function(t,e){this.current===t||t<1||t>this.pageCount||(this.$emit("update:current",t),this.$emit("change",t),e&&e.target&&this.$nextTick((function(){return e.target.focus()})))},getPage:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{number:t,isCurrent:this.current===t,click:function(n){return e.changePage(t,n)},input:function(t,n){return e.changePage(+n,t)},disabled:n.disabled||!1,class:n.class||"","aria-label":n["aria-label"]||this.getAriaPageLabel(t,this.current===t)}},getAriaPageLabel:function(t,e){return!this.ariaPageLabel||e&&this.ariaCurrentLabel?this.ariaPageLabel&&e&&this.ariaCurrentLabel?this.ariaCurrentLabel+", "+this.ariaPageLabel+" "+t+".":null:this.ariaPageLabel+" "+t+"."},handleOnInputPageChange:function(t){this.getPage(this.inputValue).input(t,this.inputValue)},handleOnInputDebounce:function(t){this.debouncePageInput?this.debounceHandlePageInput(t):this.handleOnInputPageChange(t)},handleOnKeyPress:function(t){var e=t.which||t.keyCode;return e>=48&&e<=57||t.preventDefault()},handleAllowableInputPageRange:function(t){+t.target.value>0&&+t.target.value<=this.pageCount?this.handleOnInputValue(t):(this.inputValue=1,this.inputValue="")},handleOnInputValue:function(t){var e=+t.target.value;this.inputValue=e,Number.isInteger(this.inputValue)?this.handleOnInputDebounce(t):this.inputValue=this.current}}};const fl=pl;var ml=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"pagination",class:t.rootClasses},[t.$scopedSlots.previous?t._t("previous",[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],{page:t.getPage(t.current-1,{disabled:!t.hasPrev,class:"pagination-previous","aria-label":t.ariaPreviousLabel})}):n("BPaginationButton",{staticClass:"pagination-previous",attrs:{disabled:!t.hasPrev,page:t.getPage(t.current-1),"aria-label":t.ariaPreviousLabel}},[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),t.$scopedSlots.next?t._t("next",[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],{page:t.getPage(t.current+1,{disabled:!t.hasNext,class:"pagination-next","aria-label":t.ariaNextLabel})}):n("BPaginationButton",{staticClass:"pagination-next",attrs:{disabled:!t.hasNext,page:t.getPage(t.current+1),"aria-label":t.ariaNextLabel}},[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),n("div",{staticClass:"control pagination-input"},[t.pageInput?n("input",{staticClass:"input",attrs:{size:t.pageCount.toString().length,maxlength:t.pageCount.toString().length},domProps:{value:t.inputValue},on:{input:t.handleAllowableInputPageRange,keypress:t.handleOnKeyPress}}):t._e()]),t.simple?n("small",{staticClass:"info"},[1==t.perPage?[t._v(" "+t._s(t.firstItem)+" / "+t._s(t.total)+" ")]:[t._v(" "+t._s(t.firstItem)+"-"+t._s(Math.min(t.current*t.perPage,t.total))+" / "+t._s(t.total)+" ")]],2):n("ul",{staticClass:"pagination-list"},[t.hasFirst?n("li",[t.$scopedSlots.default?t._t("default",null,{page:t.getPage(1)}):n("BPaginationButton",{attrs:{page:t.getPage(1)}})],2):t._e(),t.hasFirstEllipsis?n("li",[n("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._l(t.pagesInRange,(function(e){return n("li",{key:e.number},[t.$scopedSlots.default?t._t("default",null,{page:e}):n("BPaginationButton",{attrs:{page:e}})],2)})),t.hasLastEllipsis?n("li",[n("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t.hasLast?n("li",[t.$scopedSlots.default?t._t("default",null,{page:t.getPage(t.pageCount)}):n("BPaginationButton",{attrs:{page:t.getPage(t.pageCount)}})],2):t._e()],2)],2)},gl=[];const bl=void 0,yl=void 0,vl=void 0,wl=!1;var xl=ot({render:ml,staticRenderFns:gl},bl,fl,yl,wl,vl,void 0,void 0),Ol={install:function(t){ct(t,xl),ct(t,dl)}};ut(Ol);var Sl=Ol,kl={name:"BProgress",mixins:[ke("progress")],props:{type:{type:[String,Object],default:"is-darkgrey"},size:String,rounded:{type:Boolean,default:!0},value:{type:Number,default:void 0},max:{type:Number,default:100},showValue:{type:Boolean,default:!1},format:{type:String,default:"raw",validator:function(t){return["raw","percent"].indexOf(t)>=0}},precision:{type:Number,default:2},keepTrailingZeroes:{type:Boolean,default:!1},locale:{type:[String,Array],default:function(){return rt.defaultLocale}}},computed:{isIndeterminate:function(){return void 0===this.value||null===this.value},newType:function(){return[this.size,this.type,{"is-more-than-half":this.value&&this.value>this.max/2}]},newValue:function(){return this.calculateValue(this.value)},isNative:function(){return void 0===this.$slots.bar},wrapperClasses:function(){return o({"is-not-native":!this.isNative},this.size,"string"===typeof this.size&&!this.isNative)}},watch:{isIndeterminate:function(t){var e=this;this.$nextTick((function(){e.$refs.progress&&(t?e.$refs.progress.removeAttribute("value"):e.$refs.progress.setAttribute("value",e.value))}))}},methods:{calculateValue:function(t){if(void 0!==t&&null!==t&&!isNaN(t)){var e=this.keepTrailingZeroes?this.precision:0,n=this.precision;return"percent"===this.format?new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:e,maximumFractionDigits:n}).format(t/this.max):new Intl.NumberFormat(this.locale,{minimumFractionDigits:e,maximumFractionDigits:n}).format(t)}}}};const Tl=kl;var _l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-wrapper",class:[t.wrapperClasses,{"is-squared":!t.rounded}]},[t.isNative?n("progress",{ref:"progress",staticClass:"progress",class:[t.newType,{"is-squared":!t.rounded}],attrs:{max:t.max},domProps:{value:t.value}},[t._v(t._s(t.newValue))]):t._t("bar"),t.isNative&&t.showValue?n("p",{staticClass:"progress-value"},[t._t("default",[t._v(t._s(t.newValue))])],2):t._e()],2)},Il=[];const Cl=void 0,Al=void 0,El=void 0,Nl=!1;var jl=ot({render:_l,staticRenderFns:Il},Cl,Tl,Al,Nl,El,void 0,void 0),Dl={name:"BProgressBar",mixins:[Ce("progress")],props:{type:{type:[String,Object],default:void 0},value:{type:Number,default:void 0},showValue:{type:Boolean,default:!1}},computed:{newType:function(){return[this.parent.size,this.type||this.parent.type]},newShowValue:function(){return this.showValue||this.parent.showValue},newValue:function(){return this.parent.calculateValue(this.value)},barWidth:function(){return"".concat(100*this.value/this.parent.max,"%")}}};const $l=Dl;var Rl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-bar",class:t.newType,style:{width:t.barWidth},attrs:{role:"progressbar","aria-valuenow":t.value,"aria-valuemax":t.parent.max,"aria-valuemin":"0"}},[t.newShowValue?n("p",{staticClass:"progress-value"},[t._t("default",[t._v(t._s(t.newValue))])],2):t._e()])},Fl=[];const Pl=void 0,Ml=void 0,Ll=void 0,Bl=!1;var zl=ot({render:Rl,staticRenderFns:Fl},Pl,$l,Ml,Bl,Ll,void 0,void 0),Vl={install:function(t){ct(t,jl),ct(t,zl)}};ut(Vl);var Ul=Vl,Wl={name:"BRadio",mixins:[mn]};const Gl=Wl;var Hl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"b-radio radio",class:[t.size,{"is-disabled":t.disabled}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(t){t.stopPropagation()},change:function(e){t.computedValue=t.nativeValue}}}),n("span",{staticClass:"check",class:t.type}),n("span",{staticClass:"control-label"},[t._t("default")],2)])},ql=[];const Jl=void 0,Kl=void 0,Xl=void 0,Yl=!1;var Zl=ot({render:Hl,staticRenderFns:ql},Jl,Gl,Kl,Yl,Xl,void 0,void 0),Ql={name:"BRadioButton",mixins:[mn],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}},computed:{isSelected:function(){return this.newValue===this.nativeValue},labelClass:function(){return[this.isSelected?this.type:null,this.size,{"is-selected":this.isSelected,"is-disabled":this.disabled,"is-focused":this.isFocused}]}}};const td=Ql;var ed=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:{"is-expanded":t.expanded}},[n("label",{ref:"label",staticClass:"b-radio radio button",class:t.labelClass,attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())}}},[t._t("default"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(t){t.stopPropagation()},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},change:function(e){t.computedValue=t.nativeValue}}})],2)])},nd=[];const rd=void 0,id=void 0,ad=void 0,sd=!1;var od=ot({render:ed,staticRenderFns:nd},rd,td,id,sd,ad,void 0,void 0),ud={install:function(t){ct(t,Zl),ct(t,od)}};ut(ud);var cd=ud,ld={name:"BRate",components:o({},St.name,St),props:{value:{type:Number,default:0},max:{type:Number,default:5},icon:{type:String,default:"star"},iconPack:String,size:String,spaced:Boolean,rtl:Boolean,disabled:Boolean,showScore:Boolean,showText:Boolean,customText:String,texts:Array,locale:{type:[String,Array],default:function(){return rt.defaultLocale}}},data:function(){return{newValue:this.value,hoverValue:0}},computed:{halfStyle:function(){return"width:".concat(this.valueDecimal,"%")},showMe:function(){var t="";return this.showScore?(t=this.disabled?this.value:this.newValue,t=0===t?"":new Intl.NumberFormat(this.locale).format(this.value)):this.showText&&(t=this.texts[Math.ceil(this.newValue)-1]),t},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)}},watch:{value:function(t){this.newValue=t}},methods:{resetNewValue:function(){this.disabled||(this.hoverValue=0)},previewRate:function(t,e){this.disabled||(this.hoverValue=t,e.stopPropagation())},confirmValue:function(t){this.disabled||(this.newValue=t,this.$emit("change",this.newValue),this.$emit("input",this.newValue))},checkHalf:function(t){var e=this.disabled&&this.valueDecimal>0&&t-1<this.value&&t>this.value;return e},rateClass:function(t){var e="",n=0!==this.hoverValue?this.hoverValue:this.newValue;return t<=n?e="set-on":this.disabled&&Math.ceil(this.value)===t&&(e="set-half"),e}}};const dd=ld;var hd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rate",class:{"is-disabled":t.disabled,"is-spaced":t.spaced,"is-rtl":t.rtl}},[t._l(t.max,(function(e,r){return n("div",{key:r,staticClass:"rate-item",class:t.rateClass(e),on:{mousemove:function(n){return t.previewRate(e,n)},mouseleave:t.resetNewValue,click:function(n){return n.preventDefault(),t.confirmValue(e)}}},[n("b-icon",{attrs:{pack:t.iconPack,icon:t.icon,size:t.size}}),t.checkHalf(e)?n("b-icon",{staticClass:"is-half",style:t.halfStyle,attrs:{pack:t.iconPack,icon:t.icon,size:t.size}}):t._e()],1)})),t.showText||t.showScore||t.customText?n("div",{staticClass:"rate-text",class:t.size},[n("span",[t._v(t._s(t.showMe))]),t.customText&&!t.showText?n("span",[t._v(t._s(t.customText))]):t._e()]):t._e()],2)},pd=[];const fd=void 0,md=void 0,gd=void 0,bd=!1;var yd=ot({render:hd,staticRenderFns:pd},fd,dd,md,bd,gd,void 0,void 0),vd={install:function(t){ct(t,yd)}};ut(vd);var wd=vd,xd={install:function(t){ct(t,gi)}};ut(xd);var Od=xd,Sd={name:"BSkeleton",functional:!0,props:{active:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:[Number,String],height:[Number,String],circle:Boolean,rounded:{type:Boolean,default:!0},count:{type:Number,default:1},position:{type:String,default:"",validator:function(t){return["","is-centered","is-right"].indexOf(t)>-1}},size:String},render:function(t,e){if(e.props.active){for(var n=[],r=e.props.width,i=e.props.height,a=0;a<e.props.count;a++)n.push(t("div",{staticClass:"b-skeleton-item",class:{"is-rounded":e.props.rounded},key:a,style:{height:void 0===i?null:isNaN(i)?i:i+"px",width:void 0===r?null:isNaN(r)?r:r+"px",borderRadius:e.props.circle?"50%":null}}));return t("div",{staticClass:"b-skeleton",class:[e.props.size,e.props.position,{"is-animated":e.props.animated}]},n)}}};const kd=Sd,Td=void 0,_d=void 0,Id=void 0,Cd=void 0;var Ad=ot({},Td,kd,_d,Cd,Id,void 0,void 0),Ed={install:function(t){ct(t,Ad)}};ut(Ed);var Nd=Ed,jd={name:"BSidebar",model:{prop:"open",event:"update:open"},props:{open:Boolean,type:[String,Object],overlay:Boolean,position:{type:String,default:"fixed",validator:function(t){return["fixed","absolute","static"].indexOf(t)>=0}},fullheight:Boolean,fullwidth:Boolean,right:Boolean,mobile:{type:String},reduce:Boolean,expandOnHover:Boolean,expandOnHoverFixed:Boolean,delay:{type:Number,default:function(){return rt.defaultSidebarDelay}},canCancel:{type:[Array,Boolean],default:function(){return["escape","outside"]}},onCancel:{type:Function,default:function(){}},scroll:{type:String,default:function(){return rt.defaultModalScroll?rt.defaultModalScroll:"clip"},validator:function(t){return["clip","keep"].indexOf(t)>=0}}},data:function(){return{isOpen:this.open,isDelayOver:!1,transitionName:null,animating:!0,savedScrollTop:null,hasLeaved:!1}},computed:{rootClasses:function(){return[this.type,{"is-fixed":this.isFixed,"is-static":this.isStatic,"is-absolute":this.isAbsolute,"is-fullheight":this.fullheight,"is-fullwidth":this.fullwidth,"is-right":this.right,"is-mini":this.reduce&&!this.isDelayOver,"is-mini-expand":this.expandOnHover||this.isDelayOver,"is-mini-expand-fixed":this.expandOnHover&&this.expandOnHoverFixed||this.isDelayOver,"is-mini-delayed":null!==this.delay,"is-mini-mobile":"reduce"===this.mobile,"is-hidden-mobile":"hide"===this.mobile,"is-fullwidth-mobile":"fullwidth"===this.mobile}]},cancelOptions:function(){return"boolean"===typeof this.canCancel?this.canCancel?["escape","outside"]:[]:this.canCancel},isStatic:function(){return"static"===this.position},isFixed:function(){return"fixed"===this.position},isAbsolute:function(){return"absolute"===this.position}},watch:{open:{handler:function(t){this.isOpen=t,this.overlay&&this.handleScroll();var e=this.right?!t:t;this.transitionName=e?"slide-next":"slide-prev"},immediate:!0}},methods:{keyPress:function(t){var e=t.key;this.isFixed&&(!this.isOpen||"Escape"!==e&&"Esc"!==e||this.cancel("escape"))},cancel:function(t){this.cancelOptions.indexOf(t)<0||this.isStatic||(this.onCancel.apply(null,arguments),this.close())},close:function(){this.isOpen=!1,this.$emit("close"),this.$emit("update:open",!1)},clickedOutside:function(t){this.isFixed&&this.isOpen&&!this.animating&&(t.composedPath().includes(this.$refs.sidebarContent)||this.cancel("outside"))},beforeEnter:function(){this.animating=!0},afterEnter:function(){this.animating=!1},handleScroll:function(){"undefined"!==typeof window&&("clip"!==this.scroll?(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,this.open?document.body.classList.add("is-noscroll"):document.body.classList.remove("is-noscroll"),this.open?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null)):this.open?document.documentElement.classList.add("is-clipped"):document.documentElement.classList.remove("is-clipped"))},onHover:function(){var t=this;this.delay?(this.hasLeaved=!1,this.timer=setTimeout((function(){t.hasLeaved||(t.isDelayOver=!0),t.timer=null}),this.delay)):this.isDelayOver=!1},onHoverLeave:function(){this.hasLeaved=!0,this.timer=null,this.isDelayOver=!1}},created:function(){"undefined"!==typeof window&&(document.addEventListener("keyup",this.keyPress),document.addEventListener("click",this.clickedOutside))},mounted:function(){"undefined"!==typeof window&&this.isFixed&&document.body.appendChild(this.$el),this.overlay&&this.open&&this.handleScroll()},beforeDestroy:function(){if("undefined"!==typeof window&&(document.removeEventListener("keyup",this.keyPress),document.removeEventListener("click",this.clickedOutside),this.overlay)){document.documentElement.classList.remove("is-clipped");var t=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop;document.body.classList.remove("is-noscroll"),document.documentElement.scrollTop=t,document.body.style.top=null}this.isFixed&&V(this.$el)}};const Dd=jd;var $d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-sidebar"},[t.overlay&&t.isOpen?n("div",{staticClass:"sidebar-background"}):t._e(),n("transition",{attrs:{name:t.transitionName},on:{"before-enter":t.beforeEnter,"after-enter":t.afterEnter}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],ref:"sidebarContent",staticClass:"sidebar-content",class:t.rootClasses,on:{mouseenter:t.onHover,mouseleave:t.onHoverLeave}},[t._t("default")],2)])],1)},Rd=[];const Fd=void 0,Pd=void 0,Md=void 0,Ld=!1;var Bd=ot({render:$d,staticRenderFns:Rd},Fd,Dd,Pd,Ld,Md,void 0,void 0),zd={install:function(t){ct(t,Bd)}};ut(zd);var Vd=zd,Ud={name:"BSliderThumb",components:o({},Ti.name,Ti),inheritAttrs:!1,props:{value:{type:Number,default:0},type:{type:String,default:""},tooltip:{type:Boolean,default:!0},indicator:{type:Boolean,default:!1},customFormatter:Function,format:{type:String,default:"raw",validator:function(t){return["raw","percent"].indexOf(t)>=0}},locale:{type:[String,Array],default:function(){return rt.defaultLocale}},tooltipAlways:{type:Boolean,default:!1}},data:function(){return{isFocused:!1,dragging:!1,startX:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.disabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},precision:function(){return this.$parent.precision},currentPosition:function(){return"".concat((this.value-this.min)/(this.max-this.min)*100,"%")},wrapperStyle:function(){return{left:this.currentPosition}},formattedValue:function(){return"undefined"!==typeof this.customFormatter?this.customFormatter(this.value):"percent"===this.format?new Intl.NumberFormat(this.locale,{style:"percent"}).format((this.value-this.min)/(this.max-this.min)):new Intl.NumberFormat(this.locale).format(this.value)}},methods:{onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},onButtonDown:function(t){this.disabled||(t.preventDefault(),this.onDragStart(t),"undefined"!==typeof window&&(document.addEventListener("mousemove",this.onDragging),document.addEventListener("touchmove",this.onDragging),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchend",this.onDragEnd),document.addEventListener("contextmenu",this.onDragEnd)))},onLeftKeyDown:function(){this.disabled||this.value===this.min||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onRightKeyDown:function(){this.disabled||this.value===this.max||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onHomeKeyDown:function(){this.disabled||this.value===this.min||(this.newPosition=0,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onEndKeyDown:function(){this.disabled||this.value===this.max||(this.newPosition=100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onDragStart:function(t){this.dragging=!0,this.$emit("dragstart"),"touchstart"===t.type&&(t.clientX=t.touches[0].clientX),this.startX=t.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(t){if(this.dragging){"touchmove"===t.type&&(t.clientX=t.touches[0].clientX);var e=(t.clientX-this.startX)/this.$parent.sliderSize()*100;this.newPosition=this.startPosition+e,this.setPosition(this.newPosition)}},onDragEnd:function(){this.dragging=!1,this.$emit("dragend"),this.value!==this.oldValue&&this.$parent.emitValue("change"),this.setPosition(this.newPosition),"undefined"!==typeof window&&(document.removeEventListener("mousemove",this.onDragging),document.removeEventListener("touchmove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd),document.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(t){if(null!==t&&!isNaN(t)){t<0?t=0:t>100&&(t=100);var e=100/((this.max-this.min)/this.step),n=Math.round(t/e),r=n*e/100*(this.max-this.min)+this.min;r=parseFloat(r.toFixed(this.precision)),this.$emit("input",r),this.dragging||r===this.oldValue||(this.oldValue=r)}}}};const Wd=Ud;var Gd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-slider-thumb-wrapper",class:{"is-dragging":t.dragging,"has-indicator":t.indicator},style:t.wrapperStyle},[n("b-tooltip",{attrs:{label:t.formattedValue,type:t.type,always:t.dragging||t.isFocused||t.tooltipAlways,active:!t.disabled&&t.tooltip}},[n("div",t._b({staticClass:"b-slider-thumb",attrs:{tabindex:!t.disabled&&0},on:{mousedown:t.onButtonDown,touchstart:t.onButtonDown,focus:t.onFocus,blur:t.onBlur,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.onLeftKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:(e.preventDefault(),t.onRightKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onLeftKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onRightKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"home",void 0,e.key,void 0)?null:(e.preventDefault(),t.onHomeKeyDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"end",void 0,e.key,void 0)?null:(e.preventDefault(),t.onEndKeyDown(e))}]}},"div",t.$attrs,!1),[t.indicator?n("span",[t._v(t._s(t.formattedValue))]):t._e()])])],1)},Hd=[];const qd=void 0,Jd=void 0,Kd=void 0,Xd=!1;var Yd=ot({render:Gd,staticRenderFns:Hd},qd,Wd,Jd,Xd,Kd,void 0,void 0),Zd={name:"BSliderTick",props:{value:{type:Number,default:0}},computed:{position:function(){var t=(this.value-this.$parent.min)/(this.$parent.max-this.$parent.min)*100;return t>=0&&t<=100?t:0},hidden:function(){return this.value===this.$parent.min||this.value===this.$parent.max}},methods:{getTickStyle:function(t){return{left:t+"%"}}},created:function(){if(!this.$parent.$data._isSlider)throw this.$destroy(),new Error("You should wrap bSliderTick on a bSlider")}};const Qd=Zd;var th=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-slider-tick",class:{"is-tick-hidden":t.hidden},style:t.getTickStyle(t.position)},[t.$slots.default?n("span",{staticClass:"b-slider-tick-label"},[t._t("default")],2):t._e()])},eh=[];const nh=void 0,rh=void 0,ih=void 0,ah=!1;var sh,oh=ot({render:th,staticRenderFns:eh},nh,Qd,rh,ah,ih,void 0,void 0),uh={name:"BSlider",components:(sh={},o(sh,Yd.name,Yd),o(sh,oh.name,oh),sh),props:{value:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},type:{type:String,default:"is-primary"},size:String,ticks:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!0},tooltipType:String,rounded:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},customFormatter:Function,ariaLabel:[String,Array],biggerSliderFocus:{type:Boolean,default:!1},indicator:{type:Boolean,default:!1},format:{type:String,default:"raw",validator:function(t){return["raw","percent"].indexOf(t)>=0}},locale:{type:[String,Array],default:function(){return rt.defaultLocale}},tooltipAlways:{type:Boolean,default:!1}},data:function(){return{value1:null,value2:null,dragging:!1,isRange:!1,_isSlider:!0}},computed:{newTooltipType:function(){return this.tooltipType?this.tooltipType:this.type},tickValues:function(){if(!this.ticks||this.min>this.max||0===this.step)return[];for(var t=[],e=this.min+this.step;e<this.max;e+=this.step)t.push(e);return t},minValue:function(){return Math.min(this.value1,this.value2)},maxValue:function(){return Math.max(this.value1,this.value2)},barSize:function(){return this.isRange?"".concat(100*(this.maxValue-this.minValue)/(this.max-this.min),"%"):"".concat(100*(this.value1-this.min)/(this.max-this.min),"%")},barStart:function(){return this.isRange?"".concat(100*(this.minValue-this.min)/(this.max-this.min),"%"):"0%"},precision:function(){var t=[this.min,this.max,this.step].map((function(t){var e=(""+t).split(".")[1];return e?e.length:0}));return Math.max.apply(Math,k(t))},barStyle:function(){return{width:this.barSize,left:this.barStart}},rootClasses:function(){return{"is-rounded":this.rounded,"is-dragging":this.dragging,"is-disabled":this.disabled,"slider-focus":this.biggerSliderFocus}}},watch:{value:function(t){this.setValues(t)},value1:function(){this.onInternalValueUpdate()},value2:function(){this.onInternalValueUpdate()},min:function(){this.setValues(this.value)},max:function(){this.setValues(this.value)}},methods:{setValues:function(t){if(!(this.min>this.max))if(Array.isArray(t)){this.isRange=!0;var e="number"!==typeof t[0]||isNaN(t[0])?this.min:R(t[0],this.min,this.max),n="number"!==typeof t[1]||isNaN(t[1])?this.max:R(t[1],this.min,this.max);this.value1=this.isThumbReversed?n:e,this.value2=this.isThumbReversed?e:n}else this.isRange=!1,this.value1=isNaN(t)?this.min:R(t,this.min,this.max),this.value2=null},onInternalValueUpdate:function(){this.isRange&&(this.isThumbReversed=this.value1>this.value2),this.lazy&&this.dragging||this.emitValue("input"),this.dragging&&this.emitValue("dragging")},sliderSize:function(){return this.$refs.slider.getBoundingClientRect().width},onSliderClick:function(t){if(!this.disabled&&!this.isTrackClickDisabled){var e=this.$refs.slider.getBoundingClientRect().left,n=(t.clientX-e)/this.sliderSize()*100,r=this.min+n*(this.max-this.min)/100,i=Math.abs(r-this.value1);if(this.isRange){var a=Math.abs(r-this.value2);if(i<=a){if(i<this.step/2)return;this.$refs["button1"].setPosition(n)}else{if(a<this.step/2)return;this.$refs["button2"].setPosition(n)}}else{if(i<this.step/2)return;this.$refs.button1.setPosition(n)}this.emitValue("change")}},onDragStart:function(){this.dragging=!0,this.$emit("dragstart")},onDragEnd:function(){var t=this;this.isTrackClickDisabled=!0,setTimeout((function(){t.isTrackClickDisabled=!1}),0),this.dragging=!1,this.$emit("dragend"),this.lazy&&this.emitValue("input")},emitValue:function(t){this.$emit(t,this.isRange?[this.minValue,this.maxValue]:this.value1)}},created:function(){this.isThumbReversed=!1,this.isTrackClickDisabled=!1,this.setValues(this.value)}};const ch=uh;var lh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-slider",class:[t.size,t.type,t.rootClasses],on:{click:t.onSliderClick}},[n("div",{ref:"slider",staticClass:"b-slider-track"},[n("div",{staticClass:"b-slider-fill",style:t.barStyle}),t.ticks?t._l(t.tickValues,(function(t,e){return n("b-slider-tick",{key:e,attrs:{value:t}})})):t._e(),t._t("default"),n("b-slider-thumb",{ref:"button1",attrs:{"tooltip-always":t.tooltipAlways,type:t.newTooltipType,tooltip:t.tooltip,"custom-formatter":t.customFormatter,indicator:t.indicator,format:t.format,locale:t.locale,role:"slider","aria-valuenow":t.value1,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":"horizontal","aria-label":Array.isArray(t.ariaLabel)?t.ariaLabel[0]:t.ariaLabel,"aria-disabled":t.disabled},on:{dragstart:t.onDragStart,dragend:t.onDragEnd},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t.isRange?n("b-slider-thumb",{ref:"button2",attrs:{"tooltip-always":t.tooltipAlways,type:t.newTooltipType,tooltip:t.tooltip,"custom-formatter":t.customFormatter,indicator:t.indicator,format:t.format,locale:t.locale,role:"slider","aria-valuenow":t.value2,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":"horizontal","aria-label":Array.isArray(t.ariaLabel)?t.ariaLabel[1]:"","aria-disabled":t.disabled},on:{dragstart:t.onDragStart,dragend:t.onDragEnd},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}):t._e()],2)])},dh=[];const hh=void 0,ph=void 0,fh=void 0,mh=!1;var gh=ot({render:lh,staticRenderFns:dh},hh,ch,ph,mh,fh,void 0,void 0),bh={install:function(t){ct(t,gh),ct(t,oh)}};ut(bh);var yh=bh,vh={name:"BSnackbar",mixins:[wu],props:{actionText:{type:String,default:"OK"},onAction:{type:Function,default:function(){}},cancelText:{type:null|String,default:null}},data:function(){return{newDuration:this.duration||rt.defaultSnackbarDuration}},methods:{action:function(){this.onAction(),this.close()}}};const wh=vh;var xh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":t.transition.enter,"leave-active-class":t.transition.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"snackbar",class:[t.type,t.position],attrs:{role:t.actionText?"alertdialog":"alert"},on:{mouseenter:t.pause,mouseleave:t.removePause}},[t.$slots.default?[t._t("default")]:[n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.message)}})],t.cancelText?n("div",{staticClass:"action is-light is-cancel",on:{click:t.close}},[n("button",{staticClass:"button"},[t._v(t._s(t.cancelText))])]):t._e(),t.actionText?n("div",{staticClass:"action",class:t.type,on:{click:t.action}},[n("button",{staticClass:"button"},[t._v(t._s(t.actionText))])]):t._e()],2)])},Oh=[];const Sh=void 0,kh=void 0,Th=void 0,_h=!1;var Ih,Ch=ot({render:xh,staticRenderFns:Oh},Sh,wh,kh,_h,Th,void 0,void 0),Ah={open:function(t){var e;"string"===typeof t&&(t={message:t});var n,r={type:"is-success",position:rt.defaultSnackbarPosition||"is-bottom-right",queue:!0};t.parent&&(e=t.parent,delete t.parent),Array.isArray(t.message)&&(n=t.message,delete t.message);var i=B(r,t),a="undefined"!==typeof window&&window.Vue?window.Vue:Ih||tt,s=a.extend(Ch),o=new s({parent:e,el:document.createElement("div"),propsData:i});return n&&(o.$slots.default=n,o.$forceUpdate()),o}},Eh={install:function(t){Ih=t,lt(t,"snackbar",Ah)}};ut(Eh);var Nh=Eh,jh={name:"BSlotComponent",props:{component:{type:Object,required:!0},name:{type:String,default:"default"},scoped:{type:Boolean},props:{type:Object},tag:{type:String,default:"div"},event:{type:String,default:"hook:updated"}},methods:{refresh:function(){this.$forceUpdate()}},created:function(){W(this.component)&&this.component.$on(this.event,this.refresh)},beforeDestroy:function(){W(this.component)&&this.component.$off(this.event,this.refresh)},render:function(t){if(W(this.component))return t(this.tag,{},this.scoped?this.component.$scopedSlots[this.name](this.props):this.component.$slots[this.name])}},Dh=function(t){var e;return{mixins:[ke(t,Se)],components:(e={},o(e,St.name,St),o(e,jh.name,jh),e),props:{value:{type:[String,Number],default:void 0},size:String,animated:{type:Boolean,default:!0},animation:String,animateInitially:Boolean,vertical:{type:Boolean,default:!1},position:String,destroyOnHide:{type:Boolean,default:!1}},data:function(){return{activeId:this.value,defaultSlots:[],contentHeight:0,isTransitioning:!1}},mounted:function(){if("number"===typeof this.value){var t=R(this.value,0,this.items.length-1);this.activeId=this.items[t].value}else this.activeId=this.value},computed:{activeItem:function(){var t=this;return void 0===this.activeId?this.items[0]:null===this.activeId?null:this.childItems.find((function(e){return e.value===t.activeId}))},items:function(){return this.sortedItems}},watch:{value:function(t){"number"===typeof t?(t=R(t,0,this.items.length-1),this.activeId=this.items[t].value):this.activeId=t},activeId:function(t,e){var n=void 0!==e&&null!==e?this.childItems.find((function(t){return t.value===e})):null;n&&this.activeItem&&(n.deactivate(this.activeItem.index),this.activeItem.activate(n.index)),t=this.activeItem?"number"===typeof this.value?this.items.indexOf(this.activeItem):this.activeItem.value:void 0,t!==this.value&&this.$emit("input",t)}},methods:{childClick:function(t){this.activeId=t.value},getNextItemIdx:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null,r=t+1;r<this.items.length;r++){var i=this.items[r];if(i.visible&&(!e||e&&!i.disabled)){n=r;break}}return n},getPrevItemIdx:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null,r=t-1;r>=0;r--){var i=this.items[r];if(i.visible&&(!e||e&&!i.disabled)){n=r;break}}return n}}}},$h=function(t){return{mixins:[Ce(t,Ie)],props:{label:String,icon:String,iconPack:String,visible:{type:Boolean,default:!0},value:{type:String,default:function(){return this._uid.toString()}},headerClass:{type:[String,Array,Object],default:null}},data:function(){return{transitionName:null,elementClass:"item",elementRole:null}},computed:{isActive:function(){return this.parent.activeItem===this}},methods:{activate:function(t){this.transitionName=this.index<t?this.parent.vertical?"slide-down":"slide-next":this.parent.vertical?"slide-up":"slide-prev"},deactivate:function(t){this.transitionName=t<this.index?this.parent.vertical?"slide-down":"slide-next":this.parent.vertical?"slide-up":"slide-prev"}},render:function(t){var e=this;if(!this.parent.destroyOnHide||this.isActive&&this.visible){var n=t("div",{directives:[{name:"show",value:this.isActive&&this.visible}],staticClass:this.elementClass,attrs:{role:this.elementRole,id:"".concat(this.value,"-content"),"aria-labelledby":this.elementRole?"".concat(this.value,"-label"):null,tabindex:this.isActive?0:-1}},this.$slots.default);return this.parent.animated?t("transition",{props:{name:this.parent.animation||this.transitionName,appear:!0===this.parent.animateInitially||void 0},on:{"before-enter":function(){e.parent.isTransitioning=!0},"after-enter":function(){e.parent.isTransitioning=!1}}},[n]):n}}}},Rh={name:"BSteps",components:o({},St.name,St),mixins:[Dh("step")],props:{type:[String,Object],iconPack:String,iconPrev:{type:String,default:function(){return rt.defaultIconPrev}},iconNext:{type:String,default:function(){return rt.defaultIconNext}},hasNavigation:{type:Boolean,default:!0},labelPosition:{type:String,validator:function(t){return["bottom","right","left"].indexOf(t)>-1},default:"bottom"},rounded:{type:Boolean,default:!0},mobileMode:{type:String,validator:function(t){return["minimalist","compact"].indexOf(t)>-1},default:"minimalist"},ariaNextLabel:String,ariaPreviousLabel:String},computed:{activeItem:function(){var t=this;return this.childItems.filter((function(e){return e.value===t.activeId}))[0]||this.items[0]},wrapperClasses:function(){return[this.size,o({"is-vertical":this.vertical},this.position,this.position&&this.vertical)]},mainClasses:function(){return[this.type,o({"has-label-right":"right"===this.labelPosition,"has-label-left":"left"===this.labelPosition,"is-animated":this.animated,"is-rounded":this.rounded},"mobile-".concat(this.mobileMode),null!==this.mobileMode)]},hasPrev:function(){return null!==this.prevItemIdx},nextItemIdx:function(){var t=this.activeItem?this.items.indexOf(this.activeItem):0;return this.getNextItemIdx(t)},nextItem:function(){var t=null;return null!==this.nextItemIdx&&(t=this.items[this.nextItemIdx]),t},prevItemIdx:function(){if(!this.activeItem)return null;var t=this.items.indexOf(this.activeItem);return this.getPrevItemIdx(t)},prevItem:function(){if(!this.activeItem)return null;var t=null;return null!==this.prevItemIdx&&(t=this.items[this.prevItemIdx]),t},hasNext:function(){return null!==this.nextItemIdx},navigationProps:function(){return{previous:{disabled:!this.hasPrev,action:this.prev},next:{disabled:!this.hasNext,action:this.next}}}},methods:{isItemClickable:function(t){return void 0===t.clickable?t.index<this.activeItem.index:t.clickable},prev:function(){this.hasPrev&&(this.activeId=this.prevItem.value)},next:function(){this.hasNext&&(this.activeId=this.nextItem.value)}}};const Fh=Rh;var Ph=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-steps",class:t.wrapperClasses},[n("nav",{staticClass:"steps",class:t.mainClasses},[n("ul",{staticClass:"step-items"},t._l(t.items,(function(e){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"childItem.visible"}],key:e.value,staticClass:"step-item",class:[e.type||t.type,e.headerClass,{"is-active":e.isActive,"is-previous":t.activeItem.index>e.index}]},[n("a",{staticClass:"step-link",class:{"is-clickable":t.isItemClickable(e)},on:{click:function(n){t.isItemClickable(e)&&t.childClick(e)}}},[n("div",{staticClass:"step-marker"},[e.icon?n("b-icon",{attrs:{icon:e.icon,pack:e.iconPack,size:t.size}}):e.step?n("span",[t._v(t._s(e.step))]):t._e()],1),n("div",{staticClass:"step-details"},[n("span",{staticClass:"step-title"},[t._v(t._s(e.label))])])])])})),0)]),n("section",{staticClass:"step-content",class:{"is-transitioning":t.isTransitioning}},[t._t("default")],2),t._t("navigation",[t.hasNavigation?n("nav",{staticClass:"step-navigation"},[n("a",{staticClass:"pagination-previous",attrs:{role:"button",disabled:t.navigationProps.previous.disabled,"aria-label":t.ariaPreviousLabel},on:{click:function(e){return e.preventDefault(),t.navigationProps.previous.action(e)}}},[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),n("a",{staticClass:"pagination-next",attrs:{role:"button",disabled:t.navigationProps.next.disabled,"aria-label":t.ariaNextLabel},on:{click:function(e){return e.preventDefault(),t.navigationProps.next.action(e)}}},[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],1)]):t._e()],{previous:t.navigationProps.previous,next:t.navigationProps.next})],2)},Mh=[];const Lh=void 0,Bh=void 0,zh=void 0,Vh=!1;var Uh=ot({render:Ph,staticRenderFns:Mh},Lh,Fh,Bh,Vh,zh,void 0,void 0),Wh={name:"BStepItem",mixins:[$h("step")],props:{step:[String,Number],type:[String,Object],clickable:{type:Boolean,default:void 0}},data:function(){return{elementClass:"step-item"}}};const Gh=Wh,Hh=void 0,qh=void 0,Jh=void 0,Kh=void 0;var Xh=ot({},Hh,Gh,qh,Kh,Jh,void 0,void 0),Yh={install:function(t){ct(t,Uh),ct(t,Xh)}};ut(Yh);var Zh=Yh,Qh={name:"BSwitch",props:{value:[String,Number,Boolean,Function,Object,Array,Date],nativeValue:[String,Number,Boolean,Function,Object,Array,Date],disabled:Boolean,type:String,passiveType:String,name:String,required:Boolean,size:String,ariaLabelledby:String,trueValue:{type:[String,Number,Boolean,Function,Object,Array,Date],default:!0},falseValue:{type:[String,Number,Boolean,Function,Object,Array,Date],default:!1},rounded:{type:Boolean,default:function(){return rt.defaultSwitchRounded}},outlined:{type:Boolean,default:!1},leftLabel:{type:Boolean,default:!1}},data:function(){return{newValue:this.value,isMouseDown:!1}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}},newClass:function(){return[this.size,{"is-disabled":this.disabled,"is-rounded":this.rounded,"is-outlined":this.outlined,"has-left-label":this.leftLabel}]},checkClasses:function(){return[{"is-elastic":this.isMouseDown&&!this.disabled},this.passiveType&&"".concat(this.passiveType,"-passive"),this.type]},showControlLabel:function(){return!!this.$slots.default}},watch:{value:function(t){this.newValue=t}},methods:{focus:function(){this.$refs.input.focus()}}};const tp=Qh;var ep=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"switch",class:t.newClass,attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$refs.label.click())},mousedown:function(e){t.isMouseDown=!0},mouseup:function(e){t.isMouseDown=!1},mouseout:function(e){t.isMouseDown=!1},blur:function(e){t.isMouseDown=!1}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:t.disabled,name:t.name,required:t.required,"true-value":t.trueValue,"false-value":t.falseValue,"aria-labelledby":t.ariaLabelledby},domProps:{value:t.nativeValue,checked:Array.isArray(t.computedValue)?t._i(t.computedValue,t.nativeValue)>-1:t._q(t.computedValue,t.trueValue)},on:{click:function(t){t.stopPropagation()},change:function(e){var n=t.computedValue,r=e.target,i=r.checked?t.trueValue:t.falseValue;if(Array.isArray(n)){var a=t.nativeValue,s=t._i(n,a);r.checked?s<0&&(t.computedValue=n.concat([a])):s>-1&&(t.computedValue=n.slice(0,s).concat(n.slice(s+1)))}else t.computedValue=i}}}),n("span",{staticClass:"check",class:t.checkClasses}),t.showControlLabel?n("span",{staticClass:"control-label",attrs:{id:t.ariaLabelledby}},[t._t("default")],2):t._e()])},np=[];const rp=void 0,ip=void 0,ap=void 0,sp=!1;var op=ot({render:ep,staticRenderFns:np},rp,tp,ip,sp,ap,void 0,void 0),up={install:function(t){ct(t,op)}};ut(up);var cp,lp=up,dp={name:"BTableMobileSort",components:(cp={},o(cp,gi.name,gi),o(cp,St.name,St),cp),props:{currentSortColumn:Object,sortMultipleData:Array,isAsc:Boolean,columns:Array,placeholder:String,iconPack:String,sortIcon:{type:String,default:"arrow-up"},sortIconSize:{type:String,default:"is-small"},sortMultiple:{type:Boolean,default:!1}},data:function(){return{sortMultipleSelect:"",mobileSort:this.currentSortColumn,defaultEvent:{shiftKey:!0,altKey:!0,ctrlKey:!0},ignoreSort:!1}},computed:{showPlaceholder:function(){var t=this;return!this.columns||!this.columns.some((function(e){return e===t.mobileSort}))}},watch:{sortMultipleSelect:function(t){this.ignoreSort?this.ignoreSort=!1:this.$emit("sort",t,this.defaultEvent)},mobileSort:function(t){this.currentSortColumn!==t&&this.$emit("sort",t,this.defaultEvent)},currentSortColumn:function(t){this.mobileSort=t}},methods:{removePriority:function(){var t=this;this.$emit("removePriority",this.sortMultipleSelect),this.ignoreSort=!0;var e=this.sortMultipleData.filter((function(e){return e.field!==t.sortMultipleSelect.field})).map((function(t){return t.field}));this.sortMultipleSelect=this.columns.filter((function(t){return e.includes(t.field)}))[0]},getSortingObjectOfColumn:function(t){return this.sortMultipleData.filter((function(e){return e.field===t.field}))[0]},columnIsDesc:function(t){var e=this.getSortingObjectOfColumn(t);return!e||!(!e.order||"desc"!==e.order)},getLabel:function(t){var e=this.getSortingObjectOfColumn(t);return e?t.label+"("+(this.sortMultipleData.indexOf(e)+1)+")":t.label},sort:function(){this.$emit("sort",this.sortMultiple?this.sortMultipleSelect:this.mobileSort,this.defaultEvent)}}};const hp=dp;var pp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field table-mobile-sort"},[n("div",{staticClass:"field has-addons"},[t.sortMultiple?n("b-select",{attrs:{expanded:""},model:{value:t.sortMultipleSelect,callback:function(e){t.sortMultipleSelect=e},expression:"sortMultipleSelect"}},t._l(t.columns,(function(e,r){return e.sortable?n("option",{key:r,domProps:{value:e}},[t._v(" "+t._s(t.getLabel(e))+" "),t.getSortingObjectOfColumn(e)?[t.columnIsDesc(e)?[t._v(" ↓ ")]:[t._v(" ↑ ")]]:t._e()],2):t._e()})),0):n("b-select",{attrs:{expanded:""},model:{value:t.mobileSort,callback:function(e){t.mobileSort=e},expression:"mobileSort"}},[t.placeholder?[n("option",{directives:[{name:"show",rawName:"v-show",value:t.showPlaceholder,expression:"showPlaceholder"}],attrs:{selected:"",disabled:"",hidden:""},domProps:{value:{}}},[t._v(" "+t._s(t.placeholder)+" ")])]:t._e(),t._l(t.columns,(function(e,r){return e.sortable?n("option",{key:r,domProps:{value:e}},[t._v(" "+t._s(e.label)+" ")]):t._e()}))],2),n("div",{staticClass:"control"},[t.sortMultiple&&t.sortMultipleData.length>0?[n("button",{staticClass:"button is-primary",on:{click:t.sort}},[n("b-icon",{class:{"is-desc":t.columnIsDesc(t.sortMultipleSelect)},attrs:{icon:t.sortIcon,pack:t.iconPack,size:t.sortIconSize,both:""}})],1),n("button",{staticClass:"button is-primary",on:{click:t.removePriority}},[n("b-icon",{attrs:{icon:"delete",size:t.sortIconSize,both:""}})],1)]:t.sortMultiple?t._e():n("button",{staticClass:"button is-primary",on:{click:t.sort}},[n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentSortColumn===t.mobileSort,expression:"currentSortColumn === mobileSort"}],class:{"is-desc":!t.isAsc},attrs:{icon:t.sortIcon,pack:t.iconPack,size:t.sortIconSize,both:""}})],1)],2)],1)])},fp=[];const mp=void 0,gp=void 0,bp=void 0,yp=!1;var vp=ot({render:pp,staticRenderFns:fp},mp,hp,gp,yp,bp,void 0,void 0),wp={name:"BTableColumn",inject:{$table:{name:"$table",default:!1}},props:{label:String,customKey:[String,Number],field:String,meta:[String,Number,Boolean,Function,Object,Array],width:[Number,String],numeric:Boolean,centered:Boolean,searchable:Boolean,sortable:Boolean,visible:{type:Boolean,default:!0},subheading:[String,Number],customSort:Function,customSearch:Function,sticky:Boolean,headerSelectable:Boolean,headerClass:String,cellClass:String,thAttrs:{type:Function,default:function(){return{}}},tdAttrs:{type:Function,default:function(){return{}}}},data:function(){return{newKey:this.customKey||this.label,_isTableColumn:!0}},computed:{thClasses:function(){var t=this.thAttrs(this),e=[this.headerClass,{"is-sortable":this.sortable,"is-sticky":this.sticky,"is-unselectable":this.isHeaderUnSelectable}];return t&&t.class&&e.push(t.class),e},thStyle:function(){var t=this.thAttrs(this),e=[this.style];return t&&t.style&&e.push(t.style),e},rootClasses:function(){return[this.cellClass,{"has-text-right":this.numeric&&!this.centered,"has-text-centered":this.centered,"is-sticky":this.sticky}]},style:function(){return{width:J(this.width)}},hasDefaultSlot:function(){return!!this.$scopedSlots.default},isHeaderUnSelectable:function(){return!this.headerSelectable&&this.sortable}},methods:{getRootClasses:function(t){var e=this.tdAttrs(t,this),n=[this.rootClasses];return e&&e.class&&n.push(e.class),n},getRootStyle:function(t){var e=this.tdAttrs(t,this),n=[];return e&&e.style&&n.push(e.style),n}},created:function(){if(!this.$table)throw this.$destroy(),new Error("You should wrap bTableColumn on a bTable");this.$table.refreshSlots()},beforeDestroy:function(){this.$table.refreshSlots()},render:function(t){return null}};const xp=wp,Op=void 0,Sp=void 0,kp=void 0,Tp=void 0;var _p=ot({},Op,xp,Sp,Tp,kp,void 0,void 0),Ip={name:"BTablePagination",components:o({},xl.name,xl),props:{paginated:Boolean,total:[Number,String],perPage:[Number,String],currentPage:[Number,String],paginationSimple:Boolean,paginationSize:String,rounded:Boolean,iconPack:String,ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String,pageInput:Boolean,paginationOrder:String,pageInputPosition:String,debouncePageInput:[Number,String]},data:function(){return{newCurrentPage:this.currentPage}},watch:{currentPage:function(t){this.newCurrentPage=t}},methods:{pageChanged:function(t){this.newCurrentPage=t>0?t:1,this.$emit("update:currentPage",this.newCurrentPage),this.$emit("page-change",this.newCurrentPage)}}};const Cp=Ip;var Ap=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top level"},[n("div",{staticClass:"level-left"},[t._t("default")],2),n("div",{staticClass:"level-right"},[t.paginated?n("div",{staticClass:"level-item"},[n("b-pagination",{attrs:{"icon-pack":t.iconPack,total:t.total,"per-page":t.perPage,simple:t.paginationSimple,size:t.paginationSize,current:t.newCurrentPage,rounded:t.rounded,"aria-next-label":t.ariaNextLabel,"aria-previous-label":t.ariaPreviousLabel,"aria-page-label":t.ariaPageLabel,"aria-current-label":t.ariaCurrentLabel,"page-input":t.pageInput,order:t.paginationOrder,"page-input-position":t.pageInputPosition,"debounce-page-input":t.debouncePageInput},on:{change:t.pageChanged}})],1):t._e()])])},Ep=[];const Np=void 0,jp=void 0,Dp=void 0,$p=!1;var Rp,Fp=ot({render:Ap,staticRenderFns:Ep},Np,Cp,jp,$p,Dp,void 0,void 0),Pp={name:"BTable",components:(Rp={},o(Rp,kn.name,kn),o(Rp,St.name,St),o(Rp,jt.name,jt),o(Rp,Io.name,Io),o(Rp,jh.name,jh),o(Rp,vp.name,vp),o(Rp,_p.name,_p),o(Rp,Fp.name,Fp),Rp),inheritAttrs:!1,provide:function(){return{$table:this}},props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},bordered:Boolean,striped:Boolean,narrowed:Boolean,hoverable:Boolean,loading:Boolean,detailed:Boolean,checkable:Boolean,headerCheckable:{type:Boolean,default:!0},checkboxType:{type:String,default:"is-primary"},checkboxPosition:{type:String,default:"left",validator:function(t){return["left","right"].indexOf(t)>=0}},stickyCheckbox:{type:Boolean,default:!1},selected:Object,isRowSelectable:{type:Function,default:function(){return!0}},focusable:Boolean,customIsChecked:Function,isRowCheckable:{type:Function,default:function(){return!0}},checkedRows:{type:Array,default:function(){return[]}},mobileCards:{type:Boolean,default:!0},defaultSort:[String,Array],defaultSortDirection:{type:String,default:"asc"},sortIcon:{type:String,default:"arrow-up"},sortIconSize:{type:String,default:"is-small"},sortMultiple:{type:Boolean,default:!1},sortMultipleData:{type:Array,default:function(){return[]}},sortMultipleKey:{type:String,default:null},paginated:Boolean,currentPage:{type:Number,default:1},perPage:{type:[Number,String],default:20},showDetailIcon:{type:Boolean,default:!0},detailIcon:{type:String,default:"chevron-right"},paginationPosition:{type:String,default:"bottom",validator:function(t){return["bottom","top","both"].indexOf(t)>=0}},paginationRounded:Boolean,backendSorting:Boolean,backendFiltering:Boolean,rowClass:{type:Function,default:function(){return""}},openedDetailed:{type:Array,default:function(){return[]}},hasDetailedVisible:{type:Function,default:function(){return!0}},detailKey:{type:String,default:""},detailTransition:{type:String,default:""},customDetailRow:{type:Boolean,default:!1},backendPagination:Boolean,total:{type:[Number,String],default:0},iconPack:String,mobileSortPlaceholder:String,customRowKey:String,draggable:{type:Boolean,default:!1},draggableColumn:{type:Boolean,default:!1},scrollable:Boolean,ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String,stickyHeader:Boolean,height:[Number,String],filtersEvent:{type:String,default:""},cardLayout:Boolean,showHeader:{type:Boolean,default:!0},debounceSearch:Number,caption:String,showCaption:{type:Boolean,default:!0},pageInput:{type:Boolean,default:!1},paginationOrder:String,pageInputPosition:String,debouncePageInput:[Number,String]},data:function(){return{sortMultipleDataLocal:[],getValueByPath:F,visibleDetailRows:this.openedDetailed,newData:this.data,newDataTotal:this.backendPagination?this.total:this.data.length,newCheckedRows:k(this.checkedRows),lastCheckedRowIndex:null,newCurrentPage:this.currentPage,currentSortColumn:{},isAsc:!0,filters:{},defaultSlots:[],firstTimeSort:!0,_isTable:!0,isDraggingRow:!1,isDraggingColumn:!1}},computed:{sortMultipleDataComputed:function(){return this.backendSorting?this.sortMultipleData:this.sortMultipleDataLocal},tableClasses:function(){return{"is-bordered":this.bordered,"is-striped":this.striped,"is-narrow":this.narrowed,"is-hoverable":(this.hoverable||this.focusable)&&this.visibleData.length}},tableWrapperClasses:function(){return{"has-mobile-cards":this.mobileCards,"has-sticky-header":this.stickyHeader,"is-card-list":this.cardLayout,"table-container":this.isScrollable}},tableStyle:function(){return{height:J(this.height)}},visibleData:function(){if(!this.paginated)return this.newData;var t=this.newCurrentPage,e=this.perPage;if(this.newData.length<=e)return this.newData;var n=(t-1)*e,r=parseInt(n,10)+parseInt(e,10);return this.newData.slice(n,r)},visibleColumns:function(){return this.newColumns?this.newColumns.filter((function(t){return t.visible||void 0===t.visible})):this.newColumns},isAllChecked:function(){var t=this,e=this.visibleData.filter((function(e){return t.isRowCheckable(e)}));if(0===e.length)return!1;var n=e.some((function(e){return P(t.newCheckedRows,e,t.customIsChecked)<0}));return!n},isAllUncheckable:function(){var t=this,e=this.visibleData.filter((function(e){return t.isRowCheckable(e)}));return 0===e.length},hasSortablenewColumns:function(){return this.newColumns.some((function(t){return t.sortable}))},hasSearchablenewColumns:function(){return this.newColumns.some((function(t){return t.searchable}))},hasCustomSubheadings:function(){return!(!this.$scopedSlots||!this.$scopedSlots.subheading)||this.newColumns.some((function(t){return t.subheading||t.$scopedSlots&&t.$scopedSlots.subheading}))},columnCount:function(){var t=this.visibleColumns.length;return t+=this.checkable?1:0,t+=this.detailed&&this.showDetailIcon?1:0,t},showDetailRowIcon:function(){return this.detailed&&this.showDetailIcon},isScrollable:function(){return!!this.scrollable||!!this.newColumns&&this.newColumns.some((function(t){return t.sticky}))},newColumns:function(){var t=this;return this.columns&&this.columns.length?this.columns.map((function(e){var n=tt.extend(_p),r=new n({parent:t,propsData:e});return r.$scopedSlots={default:function(t){var n=r.$createElement("span",{domProps:{innerHTML:F(t.row,e.field)}});return[n]}},r})):this.defaultSlots.filter((function(t){return t.componentInstance&&t.componentInstance.$data&&t.componentInstance.$data._isTableColumn})).map((function(t){return t.componentInstance}))},canDragRow:function(){return this.draggable&&!this.isDraggingColumn},canDragColumn:function(){return this.draggableColumn&&!this.isDraggingRow}},watch:{data:function(t){var e=this;this.newData=t,this.backendFiltering||(this.newData=t.filter((function(t){return e.isRowFiltered(t)}))),this.backendSorting||this.sort(this.currentSortColumn,!0),this.backendPagination||(this.newDataTotal=this.newData.length)},total:function(t){this.backendPagination&&(this.newDataTotal=t)},currentPage:function(t){this.newCurrentPage=t},newCurrentPage:function(t){this.$emit("update:currentPage",t)},checkedRows:function(t){this.newCheckedRows=k(t)},debounceSearch:{handler:function(t){this.debouncedHandleFiltersChange=hl(this.handleFiltersChange,t)},immediate:!0},filters:{handler:function(t){this.debounceSearch?this.debouncedHandleFiltersChange(t):this.handleFiltersChange(t)},deep:!0},openedDetailed:function(t){this.visibleDetailRows=t}},methods:{onFiltersEvent:function(t){this.$emit("filters-event-".concat(this.filtersEvent),{event:t,filters:this.filters})},handleFiltersChange:function(t){var e=this;this.backendFiltering?this.$emit("filters-change",t):(this.newData=this.data.filter((function(t){return e.isRowFiltered(t)})),this.backendPagination||(this.newDataTotal=this.newData.length),this.backendSorting||(this.sortMultiple&&this.sortMultipleDataLocal&&this.sortMultipleDataLocal.length>0?this.doSortMultiColumn():Object.keys(this.currentSortColumn).length>0&&this.doSortSingleColumn(this.currentSortColumn)))},findIndexOfSortData:function(t){var e=this.sortMultipleDataComputed.filter((function(e){return e.field===t.field}))[0];return this.sortMultipleDataComputed.indexOf(e)+1},removeSortingPriority:function(t){if(this.backendSorting)this.$emit("sorting-priority-removed",t.field);else{this.sortMultipleDataLocal=this.sortMultipleDataLocal.filter((function(e){return e.field!==t.field}));var e=this.sortMultipleDataLocal.map((function(t){return(t.order&&"desc"===t.order?"-":"")+t.field}));0===e.length?this.resetMultiSorting():this.newData=q(this.newData,e)}},resetMultiSorting:function(){this.sortMultipleDataLocal=[],this.currentSortColumn={},this.newData=this.data},sortBy:function(t,e,n,r){var i=[];return i=n&&"function"===typeof n?k(t).sort((function(t,e){return n(t,e,r)})):k(t).sort((function(t,n){var i=F(t,e),a=F(n,e);return"boolean"===typeof i&&"boolean"===typeof a?r?i-a:a-i:!nt(a)&&nt(i)?r?1:-1:!nt(i)&&nt(a)?r?-1:1:i===a?0:(i="string"===typeof i?i.toUpperCase():i,a="string"===typeof a?a.toUpperCase():a,r?i>a?1:-1:i>a?-1:1)})),i},sortMultiColumn:function(t){if(this.currentSortColumn={},!this.backendSorting){var e=this.sortMultipleDataLocal.filter((function(e){return e.field===t.field}))[0];e?e.order="desc"===e.order?"asc":"desc":this.sortMultipleDataLocal.push({field:t.field,order:t.isAsc}),this.doSortMultiColumn()}},doSortMultiColumn:function(){var t=this.sortMultipleDataLocal.map((function(t){return(t.order&&"desc"===t.order?"-":"")+t.field}));this.newData=q(this.newData,t)},sort:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&t.sortable&&(!this.backendSorting&&this.sortMultiple&&(this.sortMultipleKey&&n[this.sortMultipleKey]||!this.sortMultipleKey)?e?this.doSortMultiColumn():this.sortMultiColumn(t):(this.sortMultiple&&(this.sortMultipleDataLocal=[]),e||(this.isAsc=t===this.currentSortColumn?!this.isAsc:"desc"!==this.defaultSortDirection.toLowerCase()),this.firstTimeSort||this.$emit("sort",t.field,this.isAsc?"asc":"desc",n),this.backendSorting||this.doSortSingleColumn(t),this.currentSortColumn=t))},doSortSingleColumn:function(t){this.newData=this.sortBy(this.newData,t.field,t.customSort,this.isAsc)},isRowSelected:function(t,e){return!!e&&(this.customRowKey?t[this.customRowKey]===e[this.customRowKey]:t===e)},isRowChecked:function(t){return P(this.newCheckedRows,t,this.customIsChecked)>=0},removeCheckedRow:function(t){var e=P(this.newCheckedRows,t,this.customIsChecked);e>=0&&this.newCheckedRows.splice(e,1)},checkAll:function(){var t=this,e=this.isAllChecked;this.visibleData.forEach((function(n){t.isRowCheckable(n)&&t.removeCheckedRow(n),e||t.isRowCheckable(n)&&t.newCheckedRows.push(n)})),this.$emit("check",this.newCheckedRows),this.$emit("check-all",this.newCheckedRows),this.$emit("update:checkedRows",this.newCheckedRows)},checkRow:function(t,e,n){if(this.isRowCheckable(t)){var r=this.lastCheckedRowIndex;this.lastCheckedRowIndex=e,n.shiftKey&&null!==r&&e!==r?this.shiftCheckRow(t,e,r):this.isRowChecked(t)?this.removeCheckedRow(t):this.newCheckedRows.push(t),this.$emit("check",this.newCheckedRows,t),this.$emit("update:checkedRows",this.newCheckedRows)}},shiftCheckRow:function(t,e,n){var r=this,i=this.visibleData.slice(Math.min(e,n),Math.max(e,n)+1),a=!this.isRowChecked(t);i.forEach((function(t){r.removeCheckedRow(t),a&&r.isRowCheckable(t)&&r.newCheckedRows.push(t)}))},selectRow:function(t,e){this.$emit("click",t),this.selected!==t&&this.isRowSelectable(t)&&(this.$emit("select",t,this.selected),this.$emit("update:selected",t))},toggleDetails:function(t){var e=this.isVisibleDetailRow(t);e?(this.closeDetailRow(t),this.$emit("details-close",t)):(this.openDetailRow(t),this.$emit("details-open",t)),this.$emit("update:openedDetailed",this.visibleDetailRows)},openDetailRow:function(t){var e=this.handleDetailKey(t);this.visibleDetailRows.push(e)},closeDetailRow:function(t){var e=this.handleDetailKey(t),n=this.visibleDetailRows.indexOf(e);n>=0&&this.visibleDetailRows.splice(n,1)},isVisibleDetailRow:function(t){var e=this.handleDetailKey(t);return this.visibleDetailRows.indexOf(e)>=0},isActiveDetailRow:function(t){return this.detailed&&!this.customDetailRow&&this.isVisibleDetailRow(t)},isActiveCustomDetailRow:function(t){return this.detailed&&this.customDetailRow&&this.isVisibleDetailRow(t)},isRowFiltered:function(t){var e=this,n=function(n){if(!e.filters[n])return"continue";var r=e.filters[n],i=e.newColumns.filter((function(t){return t.field===n}))[0];if(i&&i.customSearch&&"function"===typeof i.customSearch){if(!i.customSearch(t,r))return{v:!1}}else{var a=e.getValueByPath(t,n);if(null==a)return{v:!1};if(Number.isInteger(a)){if(a!==Number(r))return{v:!1}}else{var s=new RegExp(G(r),"i");if(Array.isArray(a)){var o=a.some((function(t){return s.test(H(t))||s.test(t)}));if(!o)return{v:!1}}else if(!s.test(H(a))&&!s.test(a))return{v:!1}}}};for(var i in this.filters){var a=n(i);switch(a){case"continue":continue;default:if("object"===r(a))return a.v}}return!0},handleDetailKey:function(t){var e=this.detailKey;return e.length&&t?t[e]:t},checkPredefinedDetailedRows:function(){var t=this.openedDetailed.length>0;if(t&&!this.detailKey.length)throw new Error('If you set a predefined opened-detailed, you must provide a unique key using the prop "detail-key"')},checkSort:function(){if(this.newColumns.length&&this.firstTimeSort)this.initSort(),this.firstTimeSort=!1;else if(this.newColumns.length&&Object.keys(this.currentSortColumn).length>0)for(var t=0;t<this.newColumns.length;t++)if(this.newColumns[t].field===this.currentSortColumn.field){this.currentSortColumn=this.newColumns[t];break}},hasCustomFooterSlot:function(){if(this.$slots.footer.length>1)return!0;var t=this.$slots.footer[0].tag;return"th"===t||"td"===t},hasBottomLeftSlot:function(){return"undefined"!==typeof this.$slots["bottom-left"]},pressedArrow:function(t){if(this.visibleData.length){var e=this.visibleData.indexOf(this.selected)+t;e=e<0?0:e>this.visibleData.length-1?this.visibleData.length-1:e;var n=this.visibleData[e];if(this.isRowSelectable(n))this.selectRow(n);else{var r=null;if(t>0)for(var i=e;i<this.visibleData.length&&null===r;i++)this.isRowSelectable(this.visibleData[i])&&(r=i);else for(var a=e;a>=0&&null===r;a--)this.isRowSelectable(this.visibleData[a])&&(r=a);r>=0&&this.selectRow(this.visibleData[r])}}},focus:function(){this.focusable&&this.$el.querySelector("table").focus()},initSort:function(){var t=this;if(this.sortMultiple&&this.sortMultipleData)this.sortMultipleData.forEach((function(e){t.sortMultiColumn(e)}));else{if(!this.defaultSort)return;var e="",n=this.defaultSortDirection;Array.isArray(this.defaultSort)?(e=this.defaultSort[0],this.defaultSort[1]&&(n=this.defaultSort[1])):e=this.defaultSort;var r=this.newColumns.filter((function(t){return t.field===e}))[0];r&&(this.isAsc="desc"!==n.toLowerCase(),this.sort(r,!0))}},handleDragStart:function(t,e,n){this.canDragRow&&(this.isDraggingRow=!0,this.$emit("dragstart",{event:t,row:e,index:n}))},handleDragEnd:function(t,e,n){this.canDragRow&&(this.isDraggingRow=!1,this.$emit("dragend",{event:t,row:e,index:n}))},handleDrop:function(t,e,n){this.canDragRow&&this.$emit("drop",{event:t,row:e,index:n})},handleDragOver:function(t,e,n){this.canDragRow&&this.$emit("dragover",{event:t,row:e,index:n})},handleDragLeave:function(t,e,n){this.canDragRow&&this.$emit("dragleave",{event:t,row:e,index:n})},emitEventForRow:function(t,e,n){return this.$listeners[t]?this.$emit(t,n,e):null},handleColumnDragStart:function(t,e,n){this.canDragColumn&&(this.isDraggingColumn=!0,this.$emit("columndragstart",{event:t,column:e,index:n}))},handleColumnDragEnd:function(t,e,n){this.canDragColumn&&(this.isDraggingColumn=!1,this.$emit("columndragend",{event:t,column:e,index:n}))},handleColumnDrop:function(t,e,n){this.canDragColumn&&this.$emit("columndrop",{event:t,column:e,index:n})},handleColumnDragOver:function(t,e,n){this.canDragColumn&&this.$emit("columndragover",{event:t,column:e,index:n})},handleColumnDragLeave:function(t,e,n){this.canDragColumn&&this.$emit("columndragleave",{event:t,column:e,index:n})},refreshSlots:function(){this.defaultSlots=this.$slots.default||[]}},mounted:function(){this.refreshSlots(),this.checkPredefinedDetailedRows(),this.checkSort()}};const Mp=Pp;var Lp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-table"},[t._t("default"),t.mobileCards&&t.hasSortablenewColumns?n("b-table-mobile-sort",{attrs:{"current-sort-column":t.currentSortColumn,"sort-multiple":t.sortMultiple,"sort-multiple-data":t.sortMultipleDataComputed,"is-asc":t.isAsc,columns:t.newColumns,placeholder:t.mobileSortPlaceholder,"icon-pack":t.iconPack,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize},on:{sort:function(e,n){return t.sort(e,null,n)},removePriority:function(e){return t.removeSortingPriority(e)}}}):t._e(),!t.paginated||"top"!==t.paginationPosition&&"both"!==t.paginationPosition?t._e():[t._t("pagination",[n("b-table-pagination",t._b({attrs:{"per-page":t.perPage,paginated:t.paginated,rounded:t.paginationRounded,"icon-pack":t.iconPack,total:t.newDataTotal,"current-page":t.newCurrentPage,"aria-next-label":t.ariaNextLabel,"aria-previous-label":t.ariaPreviousLabel,"aria-page-label":t.ariaPageLabel,"aria-current-label":t.ariaCurrentLabel,"page-input":t.pageInput,"pagination-order":t.paginationOrder,"page-input-position":t.pageInputPosition,"debounce-page-input":t.debouncePageInput},on:{"update:currentPage":function(e){t.newCurrentPage=e},"update:current-page":function(e){t.newCurrentPage=e},"page-change":function(e){return t.$emit("page-change",e)}}},"b-table-pagination",t.$attrs,!1),[t._t("top-left")],2)])],n("div",{staticClass:"table-wrapper",class:t.tableWrapperClasses,style:t.tableStyle},[n("table",{staticClass:"table",class:t.tableClasses,attrs:{tabindex:!!t.focusable&&0},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])||e.target!==e.currentTarget?null:(e.preventDefault(),t.pressedArrow(-1))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])||e.target!==e.currentTarget?null:(e.preventDefault(),t.pressedArrow(1))}]}},[t.caption?n("caption",{directives:[{name:"show",rawName:"v-show",value:t.showCaption,expression:"showCaption"}]},[t._v(t._s(t.caption))]):t._e(),t.newColumns.length&&t.showHeader?n("thead",[n("tr",[t.showDetailRowIcon?n("th",{attrs:{width:"40px"}}):t._e(),t.checkable&&"left"===t.checkboxPosition?n("th",{class:["checkbox-cell",{"is-sticky":t.stickyCheckbox}]},[t.headerCheckable?[t._t("check-all",[n("b-checkbox",{attrs:{autocomplete:"off",value:t.isAllChecked,type:t.checkboxType,disabled:t.isAllUncheckable},nativeOn:{change:function(e){return t.checkAll(e)}}})],{isAllChecked:t.isAllChecked,isAllUncheckable:t.isAllUncheckable,checkAll:t.checkAll})]:t._e()],2):t._e(),t._l(t.visibleColumns,(function(e,r){return n("th",t._b({key:e.newKey+":"+r+"header",class:[e.thClasses,{"is-current-sort":!t.sortMultiple&&t.currentSortColumn===e}],style:e.thStyle,attrs:{draggable:t.canDragColumn},on:{click:function(n){return n.stopPropagation(),t.sort(e,null,n)},dragstart:function(n){return t.handleColumnDragStart(n,e,r)},dragend:function(n){return t.handleColumnDragEnd(n,e,r)},drop:function(n){return t.handleColumnDrop(n,e,r)},dragover:function(n){return t.handleColumnDragOver(n,e,r)},dragleave:function(n){return t.handleColumnDragLeave(n,e,r)}}},"th",e.thAttrs(e),!1),[n("div",{staticClass:"th-wrap",class:{"is-numeric":e.numeric,"is-centered":e.centered}},[e.$scopedSlots&&e.$scopedSlots.header?[n("b-slot-component",{attrs:{component:e,scoped:"",name:"header",tag:"span",props:{column:e,index:r}}})]:[n("span",{staticClass:"is-relative"},[t._v(" "+t._s(e.label)+" "),t.sortMultiple&&t.sortMultipleDataComputed&&t.sortMultipleDataComputed.length>0&&t.sortMultipleDataComputed.filter((function(t){return t.field===e.field})).length>0?[n("b-icon",{class:{"is-desc":"desc"===t.sortMultipleDataComputed.filter((function(t){return t.field===e.field}))[0].order},attrs:{icon:t.sortIcon,pack:t.iconPack,both:"",size:t.sortIconSize}}),t._v(" "+t._s(t.findIndexOfSortData(e))+" "),n("button",{staticClass:"delete is-small multi-sort-cancel-icon",attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),t.removeSortingPriority(e)}}})]:n("b-icon",{staticClass:"sort-icon",class:{"is-desc":!t.isAsc,"is-invisible":t.currentSortColumn!==e},attrs:{icon:t.sortIcon,pack:t.iconPack,both:"",size:t.sortIconSize}})],2)]],2)])})),t.checkable&&"right"===t.checkboxPosition?n("th",{class:["checkbox-cell",{"is-sticky":t.stickyCheckbox}]},[t.headerCheckable?[t._t("check-all",[n("b-checkbox",{attrs:{autocomplete:"off",value:t.isAllChecked,type:t.checkboxType,disabled:t.isAllUncheckable},nativeOn:{change:function(e){return t.checkAll(e)}}})],{isAllChecked:t.isAllChecked,isAllUncheckable:t.isAllUncheckable,checkAll:t.checkAll})]:t._e()],2):t._e()],2),t.hasCustomSubheadings?n("tr",{staticClass:"is-subheading"},[t.showDetailRowIcon?n("th",{attrs:{width:"40px"}}):t._e(),t.checkable&&"left"===t.checkboxPosition?n("th"):t._e(),t._l(t.visibleColumns,(function(e,r){return n("th",{key:e.newKey+":"+r+"subheading",style:e.style},[n("div",{staticClass:"th-wrap",class:{"is-numeric":e.numeric,"is-centered":e.centered}},[e.$scopedSlots&&e.$scopedSlots.subheading?[n("b-slot-component",{attrs:{component:e,scoped:"",name:"subheading",tag:"span",props:{column:e,index:r}}})]:[t._v(t._s(e.subheading))]],2)])})),t.checkable&&"right"===t.checkboxPosition?n("th"):t._e()],2):t._e(),t.hasSearchablenewColumns?n("tr",[t.showDetailRowIcon?n("th",{attrs:{width:"40px"}}):t._e(),t.checkable&&"left"===t.checkboxPosition?n("th"):t._e(),t._l(t.visibleColumns,(function(e,r){return n("th",t._b({key:e.newKey+":"+r+"searchable",class:{"is-sticky":e.sticky},style:e.thStyle},"th",e.thAttrs(e),!1),[n("div",{staticClass:"th-wrap"},[e.searchable?[e.$scopedSlots&&e.$scopedSlots.searchable?[n("b-slot-component",{attrs:{component:e,scoped:!0,name:"searchable",tag:"span",props:{column:e,filters:t.filters}}})]:n("b-input",{attrs:{type:e.numeric?"number":"text"},nativeOn:t._d({},[t.filtersEvent,function(e){return t.onFiltersEvent(e)}]),model:{value:t.filters[e.field],callback:function(n){t.$set(t.filters,e.field,n)},expression:"filters[column.field]"}})]:t._e()],2)])})),t.checkable&&"right"===t.checkboxPosition?n("th"):t._e()],2):t._e()]):t._e(),n("tbody",[t._l(t.visibleData,(function(e,r){return[n("tr",{key:t.customRowKey?e[t.customRowKey]:r,class:[t.rowClass(e,r),{"is-selected":t.isRowSelected(e,t.selected),"is-checked":t.isRowChecked(e)}],attrs:{draggable:t.canDragRow},on:{click:function(n){return t.selectRow(e)},dblclick:function(n){return t.$emit("dblclick",e)},mouseenter:function(n){return t.emitEventForRow("mouseenter",n,e)},mouseleave:function(n){return t.emitEventForRow("mouseleave",n,e)},contextmenu:function(n){return t.$emit("contextmenu",e,n)},dragstart:function(n){return t.handleDragStart(n,e,r)},dragend:function(n){return t.handleDragEnd(n,e,r)},drop:function(n){return t.handleDrop(n,e,r)},dragover:function(n){return t.handleDragOver(n,e,r)},dragleave:function(n){return t.handleDragLeave(n,e,r)}}},[t.showDetailRowIcon?n("td",{staticClass:"chevron-cell"},[t.hasDetailedVisible(e)?n("a",{attrs:{role:"button"},on:{click:function(n){return n.stopPropagation(),t.toggleDetails(e)}}},[n("b-icon",{class:{"is-expanded":t.isVisibleDetailRow(e)},attrs:{icon:t.detailIcon,pack:t.iconPack,both:""}})],1):t._e()]):t._e(),t.checkable&&"left"===t.checkboxPosition?n("td",{class:["checkbox-cell",{"is-sticky":t.stickyCheckbox}]},[n("b-checkbox",{attrs:{autocomplete:"off",value:t.isRowChecked(e),type:t.checkboxType,disabled:!t.isRowCheckable(e)},nativeOn:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.checkRow(e,r,n)}}})],1):t._e(),t._l(t.visibleColumns,(function(i,a){return[i.$scopedSlots&&i.$scopedSlots.default?[n("b-slot-component",t._b({key:i.newKey+":"+r+":"+a,class:i.getRootClasses(e),style:i.getRootStyle(e),attrs:{component:i,scoped:"",name:"default",tag:"td","data-label":i.label,props:{row:e,column:i,index:r,colindex:a,toggleDetails:t.toggleDetails}},nativeOn:{click:function(n){return t.$emit("cellclick",e,i,r,a)}}},"b-slot-component",i.tdAttrs(e,i),!1))]:t._e()]})),t.checkable&&"right"===t.checkboxPosition?n("td",{class:["checkbox-cell",{"is-sticky":t.stickyCheckbox}]},[n("b-checkbox",{attrs:{autocomplete:"off",value:t.isRowChecked(e),type:t.checkboxType,disabled:!t.isRowCheckable(e)},nativeOn:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.checkRow(e,r,n)}}})],1):t._e()],2),n("transition",{key:(t.customRowKey?e[t.customRowKey]:r)+"detail",attrs:{name:t.detailTransition}},[t.isActiveDetailRow(e)?n("tr",{staticClass:"detail"},[n("td",{attrs:{colspan:t.columnCount}},[n("div",{staticClass:"detail-container"},[t._t("detail",null,{row:e,index:r})],2)])]):t._e()]),t.isActiveCustomDetailRow(e)?t._t("detail",null,{row:e,index:r}):t._e()]})),t.visibleData.length?t._e():n("tr",{staticClass:"is-empty"},[n("td",{attrs:{colspan:t.columnCount}},[t._t("empty")],2)])],2),void 0!==t.$slots.footer?n("tfoot",[n("tr",{staticClass:"table-footer"},[t.hasCustomFooterSlot()?t._t("footer"):n("th",{attrs:{colspan:t.columnCount}},[t._t("footer")],2)],2)]):t._e()]),t.loading?[t._t("loading",[n("b-loading",{attrs:{"is-full-page":!1,active:t.loading},on:{"update:active":function(e){t.loading=e}}})])]:t._e()],2),t.checkable&&t.hasBottomLeftSlot()||t.paginated&&("bottom"===t.paginationPosition||"both"===t.paginationPosition)?[t._t("pagination",[n("b-table-pagination",t._b({attrs:{"per-page":t.perPage,paginated:t.paginated,rounded:t.paginationRounded,"icon-pack":t.iconPack,total:t.newDataTotal,"current-page":t.newCurrentPage,"aria-next-label":t.ariaNextLabel,"aria-previous-label":t.ariaPreviousLabel,"aria-page-label":t.ariaPageLabel,"aria-current-label":t.ariaCurrentLabel,"page-input":t.pageInput,"pagination-order":t.paginationOrder,"page-input-position":t.pageInputPosition,"debounce-page-input":t.debouncePageInput},on:{"update:currentPage":function(e){t.newCurrentPage=e},"update:current-page":function(e){t.newCurrentPage=e},"page-change":function(e){return t.$emit("page-change",e)}}},"b-table-pagination",t.$attrs,!1),[t._t("bottom-left")],2)])]:t._e()],2)},Bp=[];const zp=void 0,Vp=void 0,Up=void 0,Wp=!1;var Gp=ot({render:Lp,staticRenderFns:Bp},zp,Mp,Vp,Wp,Up,void 0,void 0),Hp={install:function(t){"undefined"===typeof tt&&at(t),ct(t,Gp),ct(t,_p)}};ut(Hp);var qp=Hp,Jp={name:"BTabs",mixins:[Dh("tab")],props:{expanded:{type:Boolean,default:function(){return rt.defaultTabsExpanded}},type:{type:[String,Object],default:function(){return rt.defaultTabsType}},animated:{type:Boolean,default:function(){return rt.defaultTabsAnimated}},multiline:Boolean},data:function(){return{currentFocus:this.value}},computed:{mainClasses:function(){return o({"is-fullwidth":this.expanded,"is-vertical":this.vertical,"is-multiline":this.multiline},this.position,this.position&&this.vertical)},navClasses:function(){var t;return[this.type,this.size,(t={},o(t,this.position,this.position&&!this.vertical),o(t,"is-fullwidth",this.expanded),o(t,"is-toggle","is-toggle-rounded"===this.type),t)]}},methods:{giveFocusToTab:function(t){t.$el&&t.$el.focus?t.$el.focus():t.focus&&t.focus()},manageTablistKeydown:function(t){var e=t.key;switch(e){case this.vertical?"ArrowUp":"ArrowLeft":case this.vertical?"Up":"Left":var n=this.getPrevItemIdx(this.currentFocus,!0);null===n&&(n=this.getPrevItemIdx(this.items.length,!0)),null!==n&&this.$refs.tabLink&&n<this.$refs.tabLink.length&&!this.items[n].disabled&&this.giveFocusToTab(this.$refs.tabLink[n]),t.preventDefault();break;case this.vertical?"ArrowDown":"ArrowRight":case this.vertical?"Down":"Right":var r=this.getNextItemIdx(this.currentFocus,!0);null===r&&(r=this.getNextItemIdx(-1,!0)),null!==r&&this.$refs.tabLink&&r<this.$refs.tabLink.length&&!this.items[r].disabled&&this.giveFocusToTab(this.$refs.tabLink[r]),t.preventDefault();break}},manageTabKeydown:function(t,e){var n=t.key;switch(n){case" ":case"Space":case"Spacebar":case"Enter":this.childClick(e),t.preventDefault();break}}}};const Kp=Jp;var Xp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-tabs",class:t.mainClasses},[n("nav",{staticClass:"tabs",class:t.navClasses,on:{keydown:t.manageTablistKeydown}},[t._t("start"),n("ul",{attrs:{"aria-orientation":t.vertical?"vertical":"horizontal",role:"tablist"}},t._l(t.items,(function(e,r){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"childItem.visible"}],key:e.value,class:[e.headerClass,{"is-active":e.isActive,"is-disabled":e.disabled}],attrs:{role:"tab","aria-controls":e.value+"-content","aria-selected":""+e.isActive}},[e.$scopedSlots.header?n("b-slot-component",{ref:"tabLink",refInFor:!0,attrs:{component:e,name:"header",tag:"a",id:e.value+"-label",tabindex:e.isActive?0:-1},on:{keydown:function(n){return t.manageTabKeydown(n,e)}},nativeOn:{focus:function(e){t.currentFocus=r},click:function(n){return t.childClick(e)}}}):n("a",{ref:"tabLink",refInFor:!0,attrs:{id:e.value+"-label",tabindex:e.isActive?0:-1},on:{focus:function(e){t.currentFocus=r},click:function(n){return t.childClick(e)},keydown:function(n){return t.manageTabKeydown(n,e)}}},[e.icon?n("b-icon",{attrs:{icon:e.icon,pack:e.iconPack,size:t.size}}):t._e(),n("span",[t._v(t._s(e.label))])],1)],1)})),0),t._t("end")],2),n("section",{staticClass:"tab-content",class:{"is-transitioning":t.isTransitioning}},[t._t("default")],2)])},Yp=[];const Zp=void 0,Qp=void 0,tf=void 0,ef=!1;var nf=ot({render:Xp,staticRenderFns:Yp},Zp,Kp,Qp,ef,tf,void 0,void 0),rf={name:"BTabItem",mixins:[$h("tab")],props:{disabled:Boolean},data:function(){return{elementClass:"tab-item",elementRole:"tabpanel"}}};const af=rf,sf=void 0,of=void 0,uf=void 0,cf=void 0;var lf=ot({},sf,af,of,cf,uf,void 0,void 0),df={install:function(t){ct(t,nf),ct(t,lf)}};ut(df);var hf=df,pf={name:"BTag",props:{attached:Boolean,closable:Boolean,type:String,size:String,rounded:Boolean,disabled:Boolean,ellipsis:Boolean,tabstop:{type:Boolean,default:!0},ariaCloseLabel:String,icon:String,iconType:String,iconPack:String,closeType:String,closeIcon:String,closeIconPack:String,closeIconType:String},methods:{close:function(t){this.disabled||this.$emit("close",t)},click:function(t){this.disabled||this.$emit("click",t)}}};const ff=pf;var mf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.attached&&t.closable?n("div",{staticClass:"tags has-addons"},[n("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[t.icon?n("b-icon",{attrs:{icon:t.icon,size:t.size,type:t.iconType,pack:t.iconPack}}):t._e(),n("span",{class:{"has-ellipsis":t.ellipsis},on:{click:t.click}},[t._t("default")],2)],1),n("a",{staticClass:"tag",class:[t.size,t.closeType,{"is-rounded":t.rounded},t.closeIcon?"has-delete-icon":"is-delete"],attrs:{role:"button","aria-label":t.ariaCloseLabel,tabindex:!!t.tabstop&&0,disabled:t.disabled},on:{click:t.close,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close(e))}}},[t.closeIcon?n("b-icon",{attrs:{"custom-class":"",icon:t.closeIcon,size:t.size,type:t.closeIconType,pack:t.closeIconPack}}):t._e()],1)]):n("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[t.icon?n("b-icon",{attrs:{icon:t.icon,size:t.size,type:t.iconType,pack:t.iconPack}}):t._e(),n("span",{class:{"has-ellipsis":t.ellipsis},on:{click:t.click}},[t._t("default")],2),t.closable?n("a",{staticClass:"delete is-small",class:t.closeType,attrs:{role:"button","aria-label":t.ariaCloseLabel,disabled:t.disabled,tabindex:!!t.tabstop&&0},on:{click:t.close,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close(e))}}}):t._e()],1)},gf=[];const bf=void 0,yf=void 0,vf=void 0,wf=!1;var xf=ot({render:mf,staticRenderFns:gf},bf,ff,yf,wf,vf,void 0,void 0),Of={name:"BTaglist",props:{attached:Boolean}};const Sf=Of;var kf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags",class:{"has-addons":t.attached}},[t._t("default")],2)},Tf=[];const _f=void 0,If=void 0,Cf=void 0,Af=!1;var Ef=ot({render:kf,staticRenderFns:Tf},_f,Sf,If,Af,Cf,void 0,void 0),Nf={install:function(t){ct(t,xf),ct(t,Ef)}};ut(Nf);var jf,Df=Nf,$f={name:"BTaginput",components:(jf={},o(jf,zt.name,zt),o(jf,xf.name,xf),jf),mixins:[dt],inheritAttrs:!1,props:{value:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},type:String,closeType:String,rounded:{type:Boolean,default:!1},attached:{type:Boolean,default:!1},maxtags:{type:[Number,String],required:!1},hasCounter:{type:Boolean,default:function(){return rt.defaultTaginputHasCounter}},field:{type:String,default:"value"},autocomplete:Boolean,groupField:String,groupOptions:String,nativeAutocomplete:String,openOnFocus:Boolean,keepOpen:{type:Boolean,default:!0},keepFirst:Boolean,disabled:Boolean,ellipsis:Boolean,closable:{type:Boolean,default:!0},ariaCloseLabel:String,confirmKeys:{type:Array,default:function(){return[",","Tab","Enter"]}},removeOnKeys:{type:Array,default:function(){return["Backspace"]}},allowNew:Boolean,onPasteSeparators:{type:Array,default:function(){return[","]}},beforeAdding:{type:Function,default:function(){return!0}},allowDuplicates:{type:Boolean,default:!1},checkInfiniteScroll:{type:Boolean,default:!1},createTag:{type:Function,default:function(t){return t}},appendToBody:Boolean},data:function(){return{tags:Array.isArray(this.value)?this.value.slice(0):this.value||[],newTag:"",isComposing:!1,_elementRef:"autocomplete",_isTaginput:!0}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,y(t,["input"]));return e},rootClasses:function(){return{"is-expanded":this.expanded}},containerClasses:function(){return{"is-focused":this.isFocused,"is-focusable":this.hasInput}},valueLength:function(){return this.newTag.trim().length},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer},hasInput:function(){return null==this.maxtags||1===this.maxtags||this.tagsLength<this.maxtags},tagsLength:function(){return this.tags.length},separatorsAsRegExp:function(){var t=this.onPasteSeparators;return t.length?new RegExp(t.map((function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):null})).join("|"),"g"):null}},watch:{value:function(t){this.tags=Array.isArray(t)?t.slice(0):t||[]},hasInput:function(){this.hasInput||this.onBlur()}},methods:{addTag:function(t){var e=this,n=t||this.newTag.trim();if(n){if(!this.autocomplete){var r=this.separatorsAsRegExp;if(r&&n.match(r))return void n.split(r).map((function(t){return t.trim()})).filter((function(t){return 0!==t.length})).map(this.addTag)}var i=!!this.allowDuplicates||-1===this.tags.indexOf(n);i&&this.beforeAdding(n)&&(1===this.maxtags&&(this.tags=[]),this.tags.push(this.createTag(n)),this.$emit("input",this.tags),this.$emit("add",n)),requestAnimationFrame((function(){e.newTag="",e.$emit("typing","")}))}},getNormalizedTagText:function(t){return"object"===r(t)&&(t=F(t,this.field)),"".concat(t)},customOnBlur:function(t){this.autocomplete||this.addTag(),this.onBlur(t)},onSelect:function(t){var e=this;t&&(this.addTag(t),this.$nextTick((function(){e.newTag=""})))},removeTag:function(t,e){var n=this.tags.splice(t,1)[0];return this.$emit("input",this.tags),this.$emit("remove",n),e&&e.stopPropagation(),this.openOnFocus&&this.$refs.autocomplete&&this.$refs.autocomplete.focus(),n},removeLastTag:function(){this.tagsLength>0&&this.removeTag(this.tagsLength-1)},keydown:function(t){var e=t.key;if(-1===this.removeOnKeys.indexOf(e)||this.newTag.length||this.removeLastTag(),(!this.autocomplete||this.allowNew)&&this.confirmKeys.indexOf(e)>=0){if("Tab"!==e&&t.preventDefault(),"Enter"===e&&this.isComposing)return;this.addTag()}},onTyping:function(t){this.$emit("typing",t.trim())},emitInfiniteScroll:function(){this.$emit("infinite-scroll")}}};const Rf=$f;var Ff=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"taginput control",class:t.rootClasses},[n("div",{staticClass:"taginput-container",class:[t.statusType,t.size,t.containerClasses],attrs:{disabled:t.disabled},on:{click:function(e){t.hasInput&&t.focus(e)}}},[t._t("selected",t._l(t.tags,(function(e,r){return n("b-tag",{key:t.getNormalizedTagText(e)+r,attrs:{type:t.type,"close-type":t.closeType,size:t.size,rounded:t.rounded,attached:t.attached,tabstop:!1,disabled:t.disabled,ellipsis:t.ellipsis,closable:t.closable,"aria-close-label":t.ariaCloseLabel,title:t.ellipsis&&t.getNormalizedTagText(e)},on:{close:function(e){return t.removeTag(r,e)}}},[t._t("tag",[t._v(" "+t._s(t.getNormalizedTagText(e))+" ")],{tag:e})],2)})),{tags:t.tags}),t.hasInput?n("b-autocomplete",t._g(t._b({ref:"autocomplete",attrs:{data:t.data,field:t.field,icon:t.icon,"icon-pack":t.iconPack,maxlength:t.maxlength,"has-counter":!1,size:t.size,disabled:t.disabled,loading:t.loading,autocomplete:t.nativeAutocomplete,"open-on-focus":t.openOnFocus,"keep-open":t.keepOpen,"keep-first":t.keepFirst,"group-field":t.groupField,"group-options":t.groupOptions,"use-html5-validation":t.useHtml5Validation,"check-infinite-scroll":t.checkInfiniteScroll,"append-to-body":t.appendToBody,"confirm-keys":t.confirmKeys},on:{typing:t.onTyping,focus:t.onFocus,blur:t.customOnBlur,select:t.onSelect,"infinite-scroll":t.emitInfiniteScroll},nativeOn:{keydown:function(e){return t.keydown(e)},compositionstart:function(e){t.isComposing=!0},compositionend:function(e){t.isComposing=!1}},scopedSlots:t._u([t.hasHeaderSlot?{key:"header",fn:function(){return[t._t("header")]},proxy:!0}:null,t.hasDefaultSlot?{key:"default",fn:function(e){return[t._t("default",null,{option:e.option,index:e.index})]}}:null,t.hasEmptySlot?{key:"empty",fn:function(){return[t._t("empty")]},proxy:!0}:null,t.hasFooterSlot?{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}:null],null,!0),model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}},"b-autocomplete",t.$attrs,!1),t.listeners)):t._e()],2),t.hasCounter&&(t.maxtags||t.maxlength)?n("small",{staticClass:"help counter"},[t.maxlength&&t.valueLength>0?[t._v(" "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+" ")]:t.maxtags?[t._v(" "+t._s(t.tagsLength)+" / "+t._s(t.maxtags)+" ")]:t._e()],2):t._e()])},Pf=[];const Mf=void 0,Lf=void 0,Bf=void 0,zf=!1;var Vf=ot({render:Ff,staticRenderFns:Pf},Mf,Rf,Lf,zf,Bf,void 0,void 0),Uf={install:function(t){ct(t,Vf)}};ut(Uf);var Wf=Uf,Gf={install:function(t){ct(t,ws)}};ut(Gf);var Hf=Gf,qf={name:"BToast",mixins:[wu],data:function(){return{newDuration:this.duration||rt.defaultToastDuration}}};const Jf=qf;var Kf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":t.transition.enter,"leave-active-class":t.transition.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"toast",class:[t.type,t.position],attrs:{"aria-hidden":!t.isActive,role:"alert"},on:{mouseenter:t.pause,mouseleave:t.removePause}},[t.$slots.default?[t._t("default")]:[n("div",{domProps:{innerHTML:t._s(t.message)}})]],2)])},Xf=[];const Yf=void 0,Zf=void 0,Qf=void 0,tm=!1;var em,nm=ot({render:Kf,staticRenderFns:Xf},Yf,Jf,Zf,tm,Qf,void 0,void 0),rm={open:function(t){var e;"string"===typeof t&&(t={message:t});var n,r={position:rt.defaultToastPosition||"is-top"};t.parent&&(e=t.parent,delete t.parent),Array.isArray(t.message)&&(n=t.message,delete t.message);var i=B(r,t),a="undefined"!==typeof window&&window.Vue?window.Vue:em||tt,s=a.extend(nm),o=new s({parent:e,el:document.createElement("div"),propsData:i});return n&&(o.$slots.default=n,o.$forceUpdate()),o}},im={install:function(t){em=t,lt(t,"toast",rm)}};ut(im);var am=im,sm={install:function(t){ct(t,Ti)}};ut(sm);var om=sm,um={name:"BUpload",mixins:[dt],inheritAttrs:!1,props:{value:{type:[Object,Function,bo,Array]},multiple:Boolean,disabled:Boolean,accept:String,dragDrop:Boolean,type:{type:String,default:"is-primary"},native:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1}},data:function(){return{newValue:this.value,dragDropFocus:!1,_elementRef:"input"}},watch:{value:function(t){this.newValue=t,(!t||Array.isArray(t)&&0===t.length)&&(this.$refs.input.value=null),!this.isValid&&!this.dragDrop&&this.checkHtml5Validity()}},methods:{onFileChange:function(t){if(!this.disabled&&!this.loading){this.dragDrop&&this.updateDragDropFocus(!1);var e=t.target.files||t.dataTransfer.files;if(0===e.length){if(!this.newValue)return;this.native&&(this.newValue=null)}else if(this.multiple){var n=!1;!this.native&&this.newValue||(this.newValue=[],n=!0);for(var r=0;r<e.length;r++){var i=e[r];this.checkType(i)&&(this.newValue.push(i),n=!0)}if(!n)return}else{if(this.dragDrop&&1!==e.length)return;var a=e[0];if(this.checkType(a))this.newValue=a;else{if(!this.newValue)return this.clearInput(),void this.checkHtml5Validity();this.newValue=null,this.clearInput()}}this.$emit("input",this.newValue),!this.dragDrop&&this.checkHtml5Validity()}},clearInput:function(){this.$refs.input.value=null},updateDragDropFocus:function(t){this.disabled||this.loading||(this.dragDropFocus=t)},checkType:function(t){if(!this.accept)return!0;var e=this.accept.split(",");if(0===e.length)return!0;for(var n=!1,r=0;r<e.length&&!n;r++){var i=e[r].trim();if(i)if("."===i.substring(0,1)){var a=t.name.toLowerCase().slice(-i.length);a===i.toLowerCase()&&(n=!0)}else t.type.match(i)&&(n=!0)}return n||this.$emit("invalid"),n}}};const cm=um;var lm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"upload control",class:{"is-expanded":t.expanded,"is-rounded":t.rounded}},[t.dragDrop?n("div",{staticClass:"upload-draggable",class:[t.type,{"is-loading":t.loading,"is-disabled":t.disabled,"is-hovered":t.dragDropFocus,"is-expanded":t.expanded}],on:{dragover:function(e){return e.preventDefault(),t.updateDragDropFocus(!0)},dragleave:function(e){return e.preventDefault(),t.updateDragDropFocus(!1)},dragenter:function(e){return e.preventDefault(),t.updateDragDropFocus(!0)},drop:function(e){return e.preventDefault(),t.onFileChange(e)}}},[t._t("default")],2):[t._t("default")],n("input",t._b({ref:"input",attrs:{type:"file",multiple:t.multiple,accept:t.accept,disabled:t.disabled},on:{change:t.onFileChange}},"input",t.$attrs,!1))],2)},dm=[];const hm=void 0,pm=void 0,fm=void 0,mm=!1;var gm=ot({render:lm,staticRenderFns:dm},hm,cm,pm,mm,fm,void 0,void 0),bm={install:function(t){ct(t,gm)}};ut(bm);var ym=bm,vm={getOptions:function(){return rt},setOptions:function(t){it(B(rt,t,!0))}},wm=vm,xm=Object.freeze({Autocomplete:Ut,Breadcrumb:ce,Button:we,Carousel:fn,Checkbox:Rn,Clockpicker:oi,Collapse:Gn,Colorpicker:Oa,Datepicker:ls,Datetimepicker:Ds,Dialog:ro,Dropdown:ao,Field:oo,Icon:co,Image:ho,Input:fo,Loading:Eo,Menu:ru,Message:gu,Modal:vu,Navbar:Wc,Notification:Vu,Numberinput:el,Pagination:Sl,Progress:Ul,Radio:cd,Rate:wd,Select:Od,Skeleton:Nd,Sidebar:Vd,Slider:yh,Snackbar:Nh,Steps:Zh,Switch:lp,Table:qp,Tabs:hf,Tag:Df,Taginput:Wf,Timepicker:Hf,Toast:am,Tooltip:om,Upload:ym}),Om={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in at(t),it(B(rt,e,!0)),xm)t.use(xm[n]);lt(t,"config",wm),t.prototype.$buefy.globalNoticeInterval=null}};ut(Om);e["a"]=Om},"29a8":function(t,e,n){"use strict";(function(t){n("6ae2");var e=n("7ed6"),r=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const i=Object(r["c"])();i.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),i.registerFlag("IS_BROWSER",()=>e["isBrowser"]()),i.registerFlag("IS_NODE",()=>"undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.node),i.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),i.registerFlag("PROD",()=>!1),i.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>i.getBool("DEBUG")),i.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),i.registerFlag("IS_TEST",()=>!1),i.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),i.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),i.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),i.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)}).call(this,n("4362"))},"29d8":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]},"29fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("a3f7"),i=n("6ad5"),a=n("487b"),s=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(r["a"])(t,"t1","dot"),s=Object(r["a"])(e,"t2","dot");i["b"]((1===n.rank||2===n.rank)&&(1===s.rank||2===s.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const u=1===n.rank?n.size:n.shape[1],c=1===s.rank?s.size:s.shape[0];if(i["b"](u===c,()=>`Error in dot: inner dimensions of inputs must match, but got ${u} and ${c}.`),1===n.rank&&1===s.rank){const t=Object(o["a"])(n,[1,-1]),e=Object(o["a"])(s,[-1,1]),r=Object(a["a"])(t,e);return Object(o["a"])(r,[])}if(1===n.rank&&2===s.rank){const t=Object(o["a"])(n,[1,-1]),e=Object(o["a"])(s,[s.shape[0],s.shape[1]]),r=Object(a["a"])(t,e);return Object(o["a"])(r,[r.size])}if(2===n.rank&&1===s.rank){const t=Object(o["a"])(s,[-1,1]),e=Object(a["a"])(n,t);return Object(o["a"])(e,[e.size])}{const t=Object(o["a"])(s,[s.shape[0],s.shape[1]]),e=Object(a["a"])(n,t);return e}}const c=Object(s["b"])({dot_:u})},"2b0e":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Xr}));
/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({}),i=Array.isArray;function a(t){return void 0===t||null===t}function s(t){return void 0!==t&&null!==t}function o(t){return!0===t}function u(t){return!1===t}function c(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function l(t){return"function"===typeof t}function d(t){return null!==t&&"object"===typeof t}var h=Object.prototype.toString;function p(t){return"[object Object]"===h.call(t)}function f(t){return"[object RegExp]"===h.call(t)}function m(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function g(t){return s(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function b(t){return null==t?"":Array.isArray(t)||p(t)&&t.toString===h?JSON.stringify(t,null,2):String(t)}function y(t){var e=parseFloat(t);return isNaN(e)?t:e}function v(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}v("slot,component",!0);var w=v("key,ref,slot,slot-scope,is");function x(t,e){var n=t.length;if(n){if(e===t[n-1])return void(t.length=n-1);var r=t.indexOf(e);if(r>-1)return t.splice(r,1)}}var O=Object.prototype.hasOwnProperty;function S(t,e){return O.call(t,e)}function k(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var T=/-(\w)/g,_=k((function(t){return t.replace(T,(function(t,e){return e?e.toUpperCase():""}))})),I=k((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),C=/\B([A-Z])/g,A=k((function(t){return t.replace(C,"-$1").toLowerCase()}));function E(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function N(t,e){return t.bind(e)}var j=Function.prototype.bind?N:E;function D(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function $(t,e){for(var n in e)t[n]=e[n];return t}function R(t){for(var e={},n=0;n<t.length;n++)t[n]&&$(e,t[n]);return e}function F(t,e,n){}var P=function(t,e,n){return!1},M=function(t){return t};function L(t,e){if(t===e)return!0;var n=d(t),r=d(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),a=Array.isArray(e);if(i&&a)return t.length===e.length&&t.every((function(t,n){return L(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||a)return!1;var s=Object.keys(t),o=Object.keys(e);return s.length===o.length&&s.every((function(n){return L(t[n],e[n])}))}catch(u){return!1}}function B(t,e){for(var n=0;n<t.length;n++)if(L(t[n],e))return n;return-1}function z(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function V(t,e){return t===e?0===t&&1/t!==1/e:t===t||e===e}var U="data-server-rendered",W=["component","directive","filter"],G=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],H={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:F,parsePlatformTagName:M,mustUseProp:P,async:!0,_lifecycleHooks:G},q=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function J(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function K(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var X=new RegExp("[^".concat(q.source,".$_\\d]"));function Y(t){if(!X.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var Z="__proto__"in{},Q="undefined"!==typeof window,tt=Q&&window.navigator.userAgent.toLowerCase(),et=tt&&/msie|trident/.test(tt),nt=tt&&tt.indexOf("msie 9.0")>0,rt=tt&&tt.indexOf("edge/")>0;tt&&tt.indexOf("android");var it=tt&&/iphone|ipad|ipod|ios/.test(tt);tt&&/chrome\/\d+/.test(tt),tt&&/phantomjs/.test(tt);var at,st=tt&&tt.match(/firefox\/(\d+)/),ot={}.watch,ut=!1;if(Q)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){ut=!0}}),window.addEventListener("test-passive",null,ct)}catch(Xs){}var lt=function(){return void 0===at&&(at=!Q&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),at},dt=Q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ht(t){return"function"===typeof t&&/native code/.test(t.toString())}var pt,ft="undefined"!==typeof Symbol&&ht(Symbol)&&"undefined"!==typeof Reflect&&ht(Reflect.ownKeys);pt="undefined"!==typeof Set&&ht(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var mt=null;function gt(t){void 0===t&&(t=null),t||mt&&mt._scope.off(),mt=t,t&&t._scope.on()}var bt=function(){function t(t,e,n,r,i,a,s,o){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),yt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function vt(t){return new bt(void 0,void 0,void 0,String(t))}function wt(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var xt=0,Ot=[],St=function(){for(var t=0;t<Ot.length;t++){var e=Ot[t];e.subs=e.subs.filter((function(t){return t})),e._pending=!1}Ot.length=0},kt=function(){function t(){this._pending=!1,this.id=xt++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,Ot.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){var e=this.subs.filter((function(t){return t}));for(var n=0,r=e.length;n<r;n++){var i=e[n];0,i.update()}},t}();kt.target=null;var Tt=[];function _t(t){Tt.push(t),kt.target=t}function It(){Tt.pop(),kt.target=Tt[Tt.length-1]}var Ct=Array.prototype,At=Object.create(Ct),Et=["push","pop","shift","unshift","splice","sort","reverse"];Et.forEach((function(t){var e=Ct[t];K(At,t,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,a=e.apply(this,n),s=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&s.observeArray(i),s.dep.notify(),a}))}));var Nt=Object.getOwnPropertyNames(At),jt={},Dt=!0;function $t(t){Dt=t}var Rt={notify:F,depend:F,addSub:F,removeSub:F},Ft=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.value=t,this.shallow=e,this.mock=n,this.dep=n?Rt:new kt,this.vmCount=0,K(t,"__ob__",this),i(t)){if(!n)if(Z)t.__proto__=At;else for(var r=0,a=Nt.length;r<a;r++){var s=Nt[r];K(t,s,At[s])}e||this.observeArray(t)}else{var o=Object.keys(t);for(r=0;r<o.length;r++){s=o[r];Mt(t,s,jt,void 0,e,n)}}}return t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Pt(t[e],!1,this.mock)},t}();function Pt(t,e,n){return t&&S(t,"__ob__")&&t.__ob__ instanceof Ft?t.__ob__:!Dt||!n&&lt()||!i(t)&&!p(t)||!Object.isExtensible(t)||t.__v_skip||Gt(t)||t instanceof bt?void 0:new Ft(t,e,n)}function Mt(t,e,n,r,a,s){var o=new kt,u=Object.getOwnPropertyDescriptor(t,e);if(!u||!1!==u.configurable){var c=u&&u.get,l=u&&u.set;c&&!l||n!==jt&&2!==arguments.length||(n=t[e]);var d=!a&&Pt(n,!1,s);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=c?c.call(t):n;return kt.target&&(o.depend(),d&&(d.dep.depend(),i(e)&&zt(e))),Gt(e)&&!a?e.value:e},set:function(e){var r=c?c.call(t):n;if(V(r,e)){if(l)l.call(t,e);else{if(c)return;if(!a&&Gt(r)&&!Gt(e))return void(r.value=e);n=e}d=!a&&Pt(e,!1,s),o.notify()}}}),o}}function Lt(t,e,n){if(!Wt(t)){var r=t.__ob__;return i(t)&&m(e)?(t.length=Math.max(t.length,e),t.splice(e,1,n),r&&!r.shallow&&r.mock&&Pt(n,!1,!0),n):e in t&&!(e in Object.prototype)?(t[e]=n,n):t._isVue||r&&r.vmCount?n:r?(Mt(r.value,e,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(t[e]=n,n)}}function Bt(t,e){if(i(t)&&m(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||Wt(t)||S(t,e)&&(delete t[e],n&&n.dep.notify())}}function zt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),i(e)&&zt(e)}function Vt(t){return Ut(t,!0),K(t,"__v_isShallow",!0),t}function Ut(t,e){if(!Wt(t)){Pt(t,e,lt());0}}function Wt(t){return!(!t||!t.__v_isReadonly)}function Gt(t){return!(!t||!0!==t.__v_isRef)}function Ht(t,e,n){Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=e[n];if(Gt(t))return t.value;var r=t&&t.__ob__;return r&&r.dep.depend(),t},set:function(t){var r=e[n];Gt(r)&&!Gt(t)?r.value=t:e[n]=t}})}var qt="watcher";"".concat(qt," callback"),"".concat(qt," getter"),"".concat(qt," cleanup");var Jt;var Kt=function(){function t(t){void 0===t&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Jt,!t&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=Jt;try{return Jt=this,t()}finally{Jt=e}}else 0},t.prototype.on=function(){Jt=this},t.prototype.off=function(){Jt=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,n=void 0;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].teardown();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},t}();function Xt(t,e){void 0===e&&(e=Jt),e&&e.active&&e.effects.push(t)}function Yt(t){var e=t._provided,n=t.$parent&&t.$parent._provided;return n===e?t._provided=Object.create(n):e}var Zt=k((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function Qt(t,e){function n(){var t=n.fns;if(!i(t))return Ke(t,null,arguments,e,"v-on handler");for(var r=t.slice(),a=0;a<r.length;a++)Ke(r[a],null,arguments,e,"v-on handler")}return n.fns=t,n}function te(t,e,n,r,i,s){var u,c,l,d;for(u in t)c=t[u],l=e[u],d=Zt(u),a(c)||(a(l)?(a(c.fns)&&(c=t[u]=Qt(c,s)),o(d.once)&&(c=t[u]=i(d.name,c,d.capture)),n(d.name,c,d.capture,d.passive,d.params)):c!==l&&(l.fns=c,t[u]=l));for(u in e)a(t[u])&&(d=Zt(u),r(d.name,e[u],d.capture))}function ee(t,e,n){var r;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var i=t[e];function u(){n.apply(this,arguments),x(r.fns,u)}a(i)?r=Qt([u]):s(i.fns)&&o(i.merged)?(r=i,r.fns.push(u)):r=Qt([i,u]),r.merged=!0,t[e]=r}function ne(t,e,n){var r=e.options.props;if(!a(r)){var i={},o=t.attrs,u=t.props;if(s(o)||s(u))for(var c in r){var l=A(c);re(i,u,c,l,!0)||re(i,o,c,l,!1)}return i}}function re(t,e,n,r,i){if(s(e)){if(S(e,n))return t[n]=e[n],i||delete e[n],!0;if(S(e,r))return t[n]=e[r],i||delete e[r],!0}return!1}function ie(t){for(var e=0;e<t.length;e++)if(i(t[e]))return Array.prototype.concat.apply([],t);return t}function ae(t){return c(t)?[vt(t)]:i(t)?oe(t):void 0}function se(t){return s(t)&&s(t.text)&&u(t.isComment)}function oe(t,e){var n,r,u,l,d=[];for(n=0;n<t.length;n++)r=t[n],a(r)||"boolean"===typeof r||(u=d.length-1,l=d[u],i(r)?r.length>0&&(r=oe(r,"".concat(e||"","_").concat(n)),se(r[0])&&se(l)&&(d[u]=vt(l.text+r[0].text),r.shift()),d.push.apply(d,r)):c(r)?se(l)?d[u]=vt(l.text+r):""!==r&&d.push(vt(r)):se(r)&&se(l)?d[u]=vt(l.text+r.text):(o(t._isVList)&&s(r.tag)&&a(r.key)&&s(e)&&(r.key="__vlist".concat(e,"_").concat(n,"__")),d.push(r)));return d}function ue(t,e){var n,r,a,o,u=null;if(i(t)||"string"===typeof t)for(u=new Array(t.length),n=0,r=t.length;n<r;n++)u[n]=e(t[n],n);else if("number"===typeof t)for(u=new Array(t),n=0;n<t;n++)u[n]=e(n+1,n);else if(d(t))if(ft&&t[Symbol.iterator]){u=[];var c=t[Symbol.iterator](),l=c.next();while(!l.done)u.push(e(l.value,u.length)),l=c.next()}else for(a=Object.keys(t),u=new Array(a.length),n=0,r=a.length;n<r;n++)o=a[n],u[n]=e(t[o],o,n);return s(u)||(u=[]),u._isVList=!0,u}function ce(t,e,n,r){var i,a=this.$scopedSlots[t];a?(n=n||{},r&&(n=$($({},r),n)),i=a(n)||(l(e)?e():e)):i=this.$slots[t]||(l(e)?e():e);var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function le(t){return Sr(this.$options,"filters",t,!0)||M}function de(t,e){return i(t)?-1===t.indexOf(e):t!==e}function he(t,e,n,r,i){var a=H.keyCodes[e]||n;return i&&r&&!H.keyCodes[e]?de(i,r):a?de(a,t):r?A(r)!==e:void 0===t}function pe(t,e,n,r,a){if(n)if(d(n)){i(n)&&(n=R(n));var s=void 0,o=function(i){if("class"===i||"style"===i||w(i))s=t;else{var o=t.attrs&&t.attrs.type;s=r||H.mustUseProp(e,o,i)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=_(i),c=A(i);if(!(u in s)&&!(c in s)&&(s[i]=n[i],a)){var l=t.on||(t.on={});l["update:".concat(i)]=function(t){n[i]=t}}};for(var u in n)o(u)}else;return t}function fe(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),ge(r,"__static__".concat(t),!1)),r}function me(t,e,n){return ge(t,"__once__".concat(e).concat(n?"_".concat(n):""),!0),t}function ge(t,e,n){if(i(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&be(t[r],"".concat(e,"_").concat(r),n);else be(t,e,n)}function be(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function ye(t,e){if(e)if(p(e)){var n=t.on=t.on?$({},t.on):{};for(var r in e){var i=n[r],a=e[r];n[r]=i?[].concat(i,a):a}}else;return t}function ve(t,e,n,r){e=e||{$stable:!n};for(var a=0;a<t.length;a++){var s=t[a];i(s)?ve(s,e,n):s&&(s.proxy&&(s.fn.proxy=!0),e[s.key]=s.fn)}return r&&(e.$key=r),e}function we(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function xe(t,e){return"string"===typeof t?e+t:t}function Oe(t){t._o=me,t._n=y,t._s=b,t._l=ue,t._t=ce,t._q=L,t._i=B,t._m=fe,t._f=le,t._k=he,t._b=pe,t._v=vt,t._e=yt,t._u=ve,t._g=ye,t._d=we,t._p=xe}function Se(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var a=t[r],s=a.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,a.context!==e&&a.fnContext!==e||!s||null==s.slot)(n.default||(n.default=[])).push(a);else{var o=s.slot,u=n[o]||(n[o]=[]);"template"===a.tag?u.push.apply(u,a.children||[]):u.push(a)}}for(var c in n)n[c].every(ke)&&delete n[c];return n}function ke(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Te(t){return t.isComment&&t.asyncFactory}function _e(t,e,n,i){var a,s=Object.keys(n).length>0,o=e?!!e.$stable:!s,u=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(o&&i&&i!==r&&u===i.$key&&!s&&!i.$hasNormal)return i;for(var c in a={},e)e[c]&&"$"!==c[0]&&(a[c]=Ie(t,n,c,e[c]))}else a={};for(var l in n)l in a||(a[l]=Ce(n,l));return e&&Object.isExtensible(e)&&(e._normalized=a),K(a,"$stable",o),K(a,"$key",u),K(a,"$hasNormal",s),a}function Ie(t,e,n,r){var a=function(){var e=mt;gt(t);var n=arguments.length?r.apply(null,arguments):r({});n=n&&"object"===typeof n&&!i(n)?[n]:ae(n);var a=n&&n[0];return gt(e),n&&(!a||1===n.length&&a.isComment&&!Te(a))?void 0:n};return r.proxy&&Object.defineProperty(e,n,{get:a,enumerable:!0,configurable:!0}),a}function Ce(t,e){return function(){return t[e]}}function Ae(t){var e=t.$options,n=e.setup;if(n){var r=t._setupContext=Ee(t);gt(t),_t();var i=Ke(n,null,[t._props||Vt({}),r],t,"setup");if(It(),gt(),l(i))e.render=i;else if(d(i))if(t._setupState=i,i.__sfc){var a=t._setupProxy={};for(var s in i)"__sfc"!==s&&Ht(a,i,s)}else for(var s in i)J(s)||Ht(t,i,s);else 0}}function Ee(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};K(e,"_v_attr_proxy",!0),Ne(e,t.$attrs,r,t,"$attrs")}return t._attrsProxy},get listeners(){if(!t._listenersProxy){var e=t._listenersProxy={};Ne(e,t.$listeners,r,t,"$listeners")}return t._listenersProxy},get slots(){return De(t)},emit:j(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(n){return Ht(t,e,n)}))}}}function Ne(t,e,n,r,i){var a=!1;for(var s in e)s in t?e[s]!==n[s]&&(a=!0):(a=!0,je(t,s,r,i));for(var s in t)s in e||(a=!0,delete t[s]);return a}function je(t,e,n,r){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n[r][e]}})}function De(t){return t._slotsProxy||$e(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}function $e(t,e){for(var n in e)t[n]=e[n];for(var n in t)n in e||delete t[n]}function Re(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,i=n&&n.context;t.$slots=Se(e._renderChildren,i),t.$scopedSlots=n?_e(t.$parent,n.data.scopedSlots,t.$slots):r,t._c=function(e,n,r,i){return We(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return We(t,e,n,r,i,!0)};var a=n&&n.data;Mt(t,"$attrs",a&&a.attrs||r,null,!0),Mt(t,"$listeners",e._parentListeners||r,null,!0)}var Fe=null;function Pe(t){Oe(t.prototype),t.prototype.$nextTick=function(t){return un(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,a=n._parentVnode;a&&e._isMounted&&(e.$scopedSlots=_e(e.$parent,a.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&$e(e._slotsProxy,e.$scopedSlots)),e.$vnode=a;try{gt(e),Fe=e,t=r.call(e._renderProxy,e.$createElement)}catch(Xs){Je(Xs,e,"render"),t=e._vnode}finally{Fe=null,gt()}return i(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=yt()),t.parent=a,t}}function Me(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),d(t)?e.extend(t):t}function Le(t,e,n,r,i){var a=yt();return a.asyncFactory=t,a.asyncMeta={data:e,context:n,children:r,tag:i},a}function Be(t,e){if(o(t.error)&&s(t.errorComp))return t.errorComp;if(s(t.resolved))return t.resolved;var n=Fe;if(n&&s(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&s(t.loadingComp))return t.loadingComp;if(n&&!s(t.owners)){var r=t.owners=[n],i=!0,u=null,c=null;n.$on("hook:destroyed",(function(){return x(r,n)}));var l=function(t){for(var e=0,n=r.length;e<n;e++)r[e].$forceUpdate();t&&(r.length=0,null!==u&&(clearTimeout(u),u=null),null!==c&&(clearTimeout(c),c=null))},h=z((function(n){t.resolved=Me(n,e),i?r.length=0:l(!0)})),p=z((function(e){s(t.errorComp)&&(t.error=!0,l(!0))})),f=t(h,p);return d(f)&&(g(f)?a(t.resolved)&&f.then(h,p):g(f.component)&&(f.component.then(h,p),s(f.error)&&(t.errorComp=Me(f.error,e)),s(f.loading)&&(t.loadingComp=Me(f.loading,e),0===f.delay?t.loading=!0:u=setTimeout((function(){u=null,a(t.resolved)&&a(t.error)&&(t.loading=!0,l(!1))}),f.delay||200)),s(f.timeout)&&(c=setTimeout((function(){c=null,a(t.resolved)&&p(null)}),f.timeout)))),i=!1,t.loading?t.loadingComp:t.resolved}}function ze(t){if(i(t))for(var e=0;e<t.length;e++){var n=t[e];if(s(n)&&(s(n.componentOptions)||Te(n)))return n}}var Ve=1,Ue=2;function We(t,e,n,r,a,s){return(i(n)||c(n))&&(a=r,r=n,n=void 0),o(s)&&(a=Ue),Ge(t,e,n,r,a)}function Ge(t,e,n,r,a){if(s(n)&&s(n.__ob__))return yt();if(s(n)&&s(n.is)&&(e=n.is),!e)return yt();var o,u;if(i(r)&&l(r[0])&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),a===Ue?r=ae(r):a===Ve&&(r=ie(r)),"string"===typeof e){var c=void 0;u=t.$vnode&&t.$vnode.ns||H.getTagNamespace(e),o=H.isReservedTag(e)?new bt(H.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!s(c=Sr(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):sr(c,n,t,r,e)}else o=sr(e,n,t,r);return i(o)?o:s(o)?(s(u)&&He(o,u),s(n)&&qe(n),o):yt()}function He(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),s(t.children))for(var r=0,i=t.children.length;r<i;r++){var u=t.children[r];s(u.tag)&&(a(u.ns)||o(n)&&"svg"!==u.tag)&&He(u,e,n)}}function qe(t){d(t.style)&&pn(t.style),d(t.class)&&pn(t.class)}function Je(t,e,n){_t();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{var s=!1===i[a].call(r,t,e,n);if(s)return}catch(Xs){Xe(Xs,r,"errorCaptured hook")}}}Xe(t,e,n)}finally{It()}}function Ke(t,e,n,r,i){var a;try{a=n?t.apply(e,n):t.call(e),a&&!a._isVue&&g(a)&&!a._handled&&(a.catch((function(t){return Je(t,r,i+" (Promise/async)")})),a._handled=!0)}catch(Xs){Je(Xs,r,i)}return a}function Xe(t,e,n){if(H.errorHandler)try{return H.errorHandler.call(null,t,e,n)}catch(Xs){Xs!==t&&Ye(Xs,null,"config.errorHandler")}Ye(t,e,n)}function Ye(t,e,n){if(!Q||"undefined"===typeof console)throw t;console.error(t)}var Ze,Qe=!1,tn=[],en=!1;function nn(){en=!1;var t=tn.slice(0);tn.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ht(Promise)){var rn=Promise.resolve();Ze=function(){rn.then(nn),it&&setTimeout(F)},Qe=!0}else if(et||"undefined"===typeof MutationObserver||!ht(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ze="undefined"!==typeof setImmediate&&ht(setImmediate)?function(){setImmediate(nn)}:function(){setTimeout(nn,0)};else{var an=1,sn=new MutationObserver(nn),on=document.createTextNode(String(an));sn.observe(on,{characterData:!0}),Ze=function(){an=(an+1)%2,on.data=String(an)},Qe=!0}function un(t,e){var n;if(tn.push((function(){if(t)try{t.call(e)}catch(Xs){Je(Xs,e,"nextTick")}else n&&n(e)})),en||(en=!0,Ze()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}function cn(t){return function(e,n){if(void 0===n&&(n=mt),n)return ln(n,t,e)}}function ln(t,e,n){var r=t.$options;r[e]=mr(r[e],n)}cn("beforeMount"),cn("mounted"),cn("beforeUpdate"),cn("updated"),cn("beforeDestroy"),cn("destroyed"),cn("activated"),cn("deactivated"),cn("serverPrefetch"),cn("renderTracked"),cn("renderTriggered"),cn("errorCaptured");var dn="2.7.14";var hn=new pt;function pn(t){return fn(t,hn),hn.clear(),t}function fn(t,e){var n,r,a=i(t);if(!(!a&&!d(t)||t.__v_skip||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var s=t.__ob__.dep.id;if(e.has(s))return;e.add(s)}if(a){n=t.length;while(n--)fn(t[n],e)}else if(Gt(t))fn(t.value,e);else{r=Object.keys(t),n=r.length;while(n--)fn(t[r[n]],e)}}}var mn,gn=0,bn=function(){function t(t,e,n,r,i){Xt(this,Jt&&!Jt._vm?Jt:t?t._scope:void 0),(this.vm=t)&&i&&(t._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++gn,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pt,this.newDepIds=new pt,this.expression="",l(e)?this.getter=e:(this.getter=Y(e),this.getter||(this.getter=F)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;_t(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Xs){if(!this.user)throw Xs;Je(Xs,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&pn(t),It(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Kn(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||d(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'.concat(this.expression,'"');Ke(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&x(this.vm._scope.effects,this),this.active){var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function yn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&On(t,e)}function vn(t,e){mn.$on(t,e)}function wn(t,e){mn.$off(t,e)}function xn(t,e){var n=mn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function On(t,e,n){mn=t,te(e,n||{},vn,wn,xn,t),mn=void 0}function Sn(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(i(t))for(var a=0,s=t.length;a<s;a++)r.$on(t[a],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(i(t)){for(var r=0,a=t.length;r<a;r++)n.$off(t[r],e);return n}var s,o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;var u=o.length;while(u--)if(s=o[u],s===e||s.fn===e){o.splice(u,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?D(n):n;for(var r=D(arguments,1),i='event handler for "'.concat(t,'"'),a=0,s=n.length;a<s;a++)Ke(n[a],e,r,e,i)}return e}}var kn=null;function Tn(t){var e=kn;return kn=t,function(){kn=e}}function _n(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._provided=n?n._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function In(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,a=Tn(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),a(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n);var s=n;while(s&&s.$vnode&&s.$parent&&s.$vnode===s.$parent._vnode)s.$parent.$el=s.$el,s=s.$parent},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Dn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||x(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Dn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Cn(t,e,n){var r;t.$el=e,t.$options.render||(t.$options.render=yt),Dn(t,"beforeMount"),r=function(){t._update(t._render(),n)};var i={before:function(){t._isMounted&&!t._isDestroyed&&Dn(t,"beforeUpdate")}};new bn(t,r,F,i,!0),n=!1;var a=t._preWatchers;if(a)for(var s=0;s<a.length;s++)a[s].run();return null==t.$vnode&&(t._isMounted=!0,Dn(t,"mounted")),t}function An(t,e,n,i,a){var s=i.data.scopedSlots,o=t.$scopedSlots,u=!!(s&&!s.$stable||o!==r&&!o.$stable||s&&t.$scopedSlots.$key!==s.$key||!s&&t.$scopedSlots.$key),c=!!(a||t.$options._renderChildren||u),l=t.$vnode;t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=a;var d=i.data.attrs||r;t._attrsProxy&&Ne(t._attrsProxy,d,l.data&&l.data.attrs||r,t,"$attrs")&&(c=!0),t.$attrs=d,n=n||r;var h=t.$options._parentListeners;if(t._listenersProxy&&Ne(t._listenersProxy,n,h||r,t,"$listeners"),t.$listeners=t.$options._parentListeners=n,On(t,n,h),e&&t.$options.props){$t(!1);for(var p=t._props,f=t.$options._propKeys||[],m=0;m<f.length;m++){var g=f[m],b=t.$options.props;p[g]=kr(g,b,e,t)}$t(!0),t.$options.propsData=e}c&&(t.$slots=Se(a,i.context),t.$forceUpdate())}function En(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Nn(t,e){if(e){if(t._directInactive=!1,En(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Nn(t.$children[n]);Dn(t,"activated")}}function jn(t,e){if((!e||(t._directInactive=!0,!En(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)jn(t.$children[n]);Dn(t,"deactivated")}}function Dn(t,e,n,r){void 0===r&&(r=!0),_t();var i=mt;r&&gt(t);var a=t.$options[e],s="".concat(e," hook");if(a)for(var o=0,u=a.length;o<u;o++)Ke(a[o],t,n||null,t,s);t._hasHookEvent&&t.$emit("hook:"+e),r&&gt(i),It()}var $n=[],Rn=[],Fn={},Pn=!1,Mn=!1,Ln=0;function Bn(){Ln=$n.length=Rn.length=0,Fn={},Pn=Mn=!1}var zn=0,Vn=Date.now;if(Q&&!et){var Un=window.performance;Un&&"function"===typeof Un.now&&Vn()>document.createEvent("Event").timeStamp&&(Vn=function(){return Un.now()})}var Wn=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function Gn(){var t,e;for(zn=Vn(),Mn=!0,$n.sort(Wn),Ln=0;Ln<$n.length;Ln++)t=$n[Ln],t.before&&t.before(),e=t.id,Fn[e]=null,t.run();var n=Rn.slice(),r=$n.slice();Bn(),Jn(n),Hn(r),St(),dt&&H.devtools&&dt.emit("flush")}function Hn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r&&r._watcher===n&&r._isMounted&&!r._isDestroyed&&Dn(r,"updated")}}function qn(t){t._inactive=!1,Rn.push(t)}function Jn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Nn(t[e],!0)}function Kn(t){var e=t.id;if(null==Fn[e]&&(t!==kt.target||!t.noRecurse)){if(Fn[e]=!0,Mn){var n=$n.length-1;while(n>Ln&&$n[n].id>t.id)n--;$n.splice(n+1,0,t)}else $n.push(t);Pn||(Pn=!0,un(Gn))}}function Xn(t){var e=t.$options.provide;if(e){var n=l(e)?e.call(t):e;if(!d(n))return;for(var r=Yt(t),i=ft?Reflect.ownKeys(n):Object.keys(n),a=0;a<i.length;a++){var s=i[a];Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))}}}function Yn(t){var e=Zn(t.$options.inject,t);e&&($t(!1),Object.keys(e).forEach((function(n){Mt(t,n,e[n])})),$t(!0))}function Zn(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var a=r[i];if("__ob__"!==a){var s=t[a].from;if(s in e._provided)n[a]=e._provided[s];else if("default"in t[a]){var o=t[a].default;n[a]=l(o)?o.call(e):o}else 0}}return n}}function Qn(t,e,n,a,s){var u,c=this,l=s.options;S(a,"_uid")?(u=Object.create(a),u._original=a):(u=a,a=a._original);var d=o(l._compiled),h=!d;this.data=t,this.props=e,this.children=n,this.parent=a,this.listeners=t.on||r,this.injections=Zn(l.inject,a),this.slots=function(){return c.$slots||_e(a,t.scopedSlots,c.$slots=Se(n,a)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return _e(a,t.scopedSlots,this.slots())}}),d&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=_e(a,t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,n,r){var s=We(u,t,e,n,r,h);return s&&!i(s)&&(s.fnScopeId=l._scopeId,s.fnContext=a),s}:this._c=function(t,e,n,r){return We(u,t,e,n,r,h)}}function tr(t,e,n,a,o){var u=t.options,c={},l=u.props;if(s(l))for(var d in l)c[d]=kr(d,l,e||r);else s(n.attrs)&&nr(c,n.attrs),s(n.props)&&nr(c,n.props);var h=new Qn(n,c,o,a,t),p=u.render.call(null,h._c,h);if(p instanceof bt)return er(p,n,h.parent,u,h);if(i(p)){for(var f=ae(p)||[],m=new Array(f.length),g=0;g<f.length;g++)m[g]=er(f[g],n,h.parent,u,h);return m}}function er(t,e,n,r,i){var a=wt(t);return a.fnContext=n,a.fnOptions=r,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function nr(t,e){for(var n in e)t[_(n)]=e[n]}function rr(t){return t.name||t.__name||t._componentTag}Oe(Qn.prototype);var ir={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;ir.prepatch(n,n)}else{var r=t.componentInstance=or(t,kn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;An(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Dn(n,"mounted")),t.data.keepAlive&&(e._isMounted?qn(n):Nn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?jn(e,!0):e.$destroy())}},ar=Object.keys(ir);function sr(t,e,n,r,i){if(!a(t)){var u=n.$options._base;if(d(t)&&(t=u.extend(t)),"function"===typeof t){var c;if(a(t.cid)&&(c=t,t=Be(c,u),void 0===t))return Le(c,e,n,r,i);e=e||{},Jr(t),s(e.model)&&lr(t.options,e);var l=ne(e,t,i);if(o(t.options.functional))return tr(t,l,e,n,r);var h=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}ur(e);var f=rr(t.options)||i,m=new bt("vue-component-".concat(t.cid).concat(f?"-".concat(f):""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:l,listeners:h,tag:i,children:r},c);return m}}}function or(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return s(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function ur(t){for(var e=t.hook||(t.hook={}),n=0;n<ar.length;n++){var r=ar[n],i=e[r],a=ir[r];i===a||i&&i._merged||(e[r]=i?cr(a,i):a)}}function cr(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function lr(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var a=e.on||(e.on={}),o=a[r],u=e.model.callback;s(o)?(i(o)?-1===o.indexOf(u):o!==u)&&(a[r]=[u].concat(o)):a[r]=u}var dr=F,hr=H.optionMergeStrategies;function pr(t,e,n){if(void 0===n&&(n=!0),!e)return t;for(var r,i,a,s=ft?Reflect.ownKeys(e):Object.keys(e),o=0;o<s.length;o++)r=s[o],"__ob__"!==r&&(i=t[r],a=e[r],n&&S(t,r)?i!==a&&p(i)&&p(a)&&pr(i,a):Lt(t,r,a));return t}function fr(t,e,n){return n?function(){var r=l(e)?e.call(n,n):e,i=l(t)?t.call(n,n):t;return r?pr(r,i):i}:e?t?function(){return pr(l(e)?e.call(this,this):e,l(t)?t.call(this,this):t)}:e:t}function mr(t,e){var n=e?t?t.concat(e):i(e)?e:[e]:t;return n?gr(n):n}function gr(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function br(t,e,n,r){var i=Object.create(t||null);return e?$(i,e):i}hr.data=function(t,e,n){return n?fr(t,e,n):e&&"function"!==typeof e?t:fr(t,e)},G.forEach((function(t){hr[t]=mr})),W.forEach((function(t){hr[t+"s"]=br})),hr.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var a={};for(var s in $(a,t),e){var o=a[s],u=e[s];o&&!i(o)&&(o=[o]),a[s]=o?o.concat(u):i(u)?u:[u]}return a},hr.props=hr.methods=hr.inject=hr.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return $(i,t),e&&$(i,e),i},hr.provide=function(t,e){return t?function(){var n=Object.create(null);return pr(n,l(t)?t.call(this):t),e&&pr(n,l(e)?e.call(this):e,!1),n}:e};var yr=function(t,e){return void 0===e?t:e};function vr(t,e){var n=t.props;if(n){var r,a,s,o={};if(i(n)){r=n.length;while(r--)a=n[r],"string"===typeof a&&(s=_(a),o[s]={type:null})}else if(p(n))for(var u in n)a=n[u],s=_(u),o[s]=p(a)?a:{type:a};else 0;t.props=o}}function wr(t,e){var n=t.inject;if(n){var r=t.inject={};if(i(n))for(var a=0;a<n.length;a++)r[n[a]]={from:n[a]};else if(p(n))for(var s in n){var o=n[s];r[s]=p(o)?$({from:s},o):{from:o}}else 0}}function xr(t){var e=t.directives;if(e)for(var n in e){var r=e[n];l(r)&&(e[n]={bind:r,update:r})}}function Or(t,e,n){if(l(e)&&(e=e.options),vr(e,n),wr(e,n),xr(e),!e._base&&(e.extends&&(t=Or(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Or(t,e.mixins[r],n);var a,s={};for(a in t)o(a);for(a in e)S(t,a)||o(a);function o(r){var i=hr[r]||yr;s[r]=i(t[r],e[r],n,r)}return s}function Sr(t,e,n,r){if("string"===typeof n){var i=t[e];if(S(i,n))return i[n];var a=_(n);if(S(i,a))return i[a];var s=I(a);if(S(i,s))return i[s];var o=i[n]||i[a]||i[s];return o}}function kr(t,e,n,r){var i=e[t],a=!S(n,t),s=n[t],o=Ar(Boolean,i.type);if(o>-1)if(a&&!S(i,"default"))s=!1;else if(""===s||s===A(t)){var u=Ar(String,i.type);(u<0||o<u)&&(s=!0)}if(void 0===s){s=Tr(r,i,t);var c=Dt;$t(!0),Pt(s),$t(c)}return s}function Tr(t,e,n){if(S(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:l(r)&&"Function"!==Ir(e.type)?r.call(t):r}}var _r=/^\s*function (\w+)/;function Ir(t){var e=t&&t.toString().match(_r);return e?e[1]:""}function Cr(t,e){return Ir(t)===Ir(e)}function Ar(t,e){if(!i(e))return Cr(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Cr(e[n],t))return n;return-1}var Er={enumerable:!0,configurable:!0,get:F,set:F};function Nr(t,e,n){Er.get=function(){return this[e][n]},Er.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Er)}function jr(t){var e=t.$options;if(e.props&&Dr(t,e.props),Ae(t),e.methods&&zr(t,e.methods),e.data)$r(t);else{var n=Pt(t._data={});n&&n.vmCount++}e.computed&&Pr(t,e.computed),e.watch&&e.watch!==ot&&Vr(t,e.watch)}function Dr(t,e){var n=t.$options.propsData||{},r=t._props=Vt({}),i=t.$options._propKeys=[],a=!t.$parent;a||$t(!1);var s=function(a){i.push(a);var s=kr(a,e,n,t);Mt(r,a,s),a in t||Nr(t,"_props",a)};for(var o in e)s(o);$t(!0)}function $r(t){var e=t.$options.data;e=t._data=l(e)?Rr(e,t):e||{},p(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var a=n[i];0,r&&S(r,a)||J(a)||Nr(t,"_data",a)}var s=Pt(e);s&&s.vmCount++}function Rr(t,e){_t();try{return t.call(e,e)}catch(Xs){return Je(Xs,e,"data()"),{}}finally{It()}}var Fr={lazy:!0};function Pr(t,e){var n=t._computedWatchers=Object.create(null),r=lt();for(var i in e){var a=e[i],s=l(a)?a:a.get;0,r||(n[i]=new bn(t,s||F,F,Fr)),i in t||Mr(t,i,a)}}function Mr(t,e,n){var r=!lt();l(n)?(Er.get=r?Lr(e):Br(n),Er.set=F):(Er.get=n.get?r&&!1!==n.cache?Lr(e):Br(n.get):F,Er.set=n.set||F),Object.defineProperty(t,e,Er)}function Lr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),kt.target&&e.depend(),e.value}}function Br(t){return function(){return t.call(this,this)}}function zr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?F:j(e[n],t)}function Vr(t,e){for(var n in e){var r=e[n];if(i(r))for(var a=0;a<r.length;a++)Ur(t,n,r[a]);else Ur(t,n,r)}}function Ur(t,e,n,r){return p(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function Wr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Lt,t.prototype.$delete=Bt,t.prototype.$watch=function(t,e,n){var r=this;if(p(e))return Ur(r,t,e,n);n=n||{},n.user=!0;var i=new bn(r,t,e,n);if(n.immediate){var a='callback for immediate watcher "'.concat(i.expression,'"');_t(),Ke(e,r,[i.value],r,a),It()}return function(){i.teardown()}}}var Gr=0;function Hr(t){t.prototype._init=function(t){var e=this;e._uid=Gr++,e._isVue=!0,e.__v_skip=!0,e._scope=new Kt(!0),e._scope._vm=!0,t&&t._isComponent?qr(e,t):e.$options=Or(Jr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,_n(e),yn(e),Re(e),Dn(e,"beforeCreate",void 0,!1),Yn(e),jr(e),Xn(e),Dn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function qr(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function Jr(t){var e=t.options;if(t.super){var n=Jr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=Kr(t);i&&$(t.extendOptions,i),e=t.options=Or(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Kr(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function Xr(t){this._init(t)}function Yr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=D(arguments,1);return n.unshift(this),l(t.install)?t.install.apply(t,n):l(t)&&t.apply(null,n),e.push(t),this}}function Zr(t){t.mixin=function(t){return this.options=Or(this.options,t),this}}function Qr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var a=rr(t)||rr(n.options);var s=function(t){this._init(t)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=e++,s.options=Or(n.options,t),s["super"]=n,s.options.props&&ti(s),s.options.computed&&ei(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,W.forEach((function(t){s[t]=n[t]})),a&&(s.options.components[a]=s),s.superOptions=n.options,s.extendOptions=t,s.sealedOptions=$({},s.options),i[r]=s,s}}function ti(t){var e=t.options.props;for(var n in e)Nr(t.prototype,"_props",n)}function ei(t){var e=t.options.computed;for(var n in e)Mr(t.prototype,n,e[n])}function ni(t){W.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&p(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&l(n)&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function ri(t){return t&&(rr(t.Ctor.options)||t.tag)}function ii(t,e){return i(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function ai(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var a in n){var s=n[a];if(s){var o=s.name;o&&!e(o)&&si(n,a,r,i)}}}function si(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,x(n,e)}Hr(Xr),Wr(Xr),Sn(Xr),In(Xr),Pe(Xr);var oi=[String,RegExp,Array],ui={name:"keep-alive",abstract:!0,props:{include:oi,exclude:oi,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,r=t.vnodeToCache,i=t.keyToCache;if(r){var a=r.tag,s=r.componentInstance,o=r.componentOptions;e[i]={name:ri(o),tag:a,componentInstance:s},n.push(i),this.max&&n.length>parseInt(this.max)&&si(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)si(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){ai(t,(function(t){return ii(e,t)}))})),this.$watch("exclude",(function(e){ai(t,(function(t){return!ii(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=ze(t),n=e&&e.componentOptions;if(n){var r=ri(n),i=this,a=i.include,s=i.exclude;if(a&&(!r||!ii(a,r))||s&&r&&ii(s,r))return e;var o=this,u=o.cache,c=o.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):e.key;u[l]?(e.componentInstance=u[l].componentInstance,x(c,l),c.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||t&&t[0]}},ci={KeepAlive:ui};function li(t){var e={get:function(){return H}};Object.defineProperty(t,"config",e),t.util={warn:dr,extend:$,mergeOptions:Or,defineReactive:Mt},t.set=Lt,t.delete=Bt,t.nextTick=un,t.observable=function(t){return Pt(t),t},t.options=Object.create(null),W.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,$(t.options.components,ci),Yr(t),Zr(t),Qr(t),ni(t)}li(Xr),Object.defineProperty(Xr.prototype,"$isServer",{get:lt}),Object.defineProperty(Xr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Xr,"FunctionalRenderContext",{value:Qn}),Xr.version=dn;var di=v("style,class"),hi=v("input,textarea,option,select,progress"),pi=function(t,e,n){return"value"===n&&hi(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},fi=v("contenteditable,draggable,spellcheck"),mi=v("events,caret,typing,plaintext-only"),gi=function(t,e){return xi(e)||"false"===e?"false":"contenteditable"===t&&mi(e)?e:"true"},bi=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),yi="http://www.w3.org/1999/xlink",vi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},wi=function(t){return vi(t)?t.slice(6,t.length):""},xi=function(t){return null==t||!1===t};function Oi(t){var e=t.data,n=t,r=t;while(s(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Si(r.data,e));while(s(n=n.parent))n&&n.data&&(e=Si(e,n.data));return ki(e.staticClass,e.class)}function Si(t,e){return{staticClass:Ti(t.staticClass,e.staticClass),class:s(t.class)?[t.class,e.class]:e.class}}function ki(t,e){return s(t)||s(e)?Ti(t,_i(e)):""}function Ti(t,e){return t?e?t+" "+e:t:e||""}function _i(t){return Array.isArray(t)?Ii(t):d(t)?Ci(t):"string"===typeof t?t:""}function Ii(t){for(var e,n="",r=0,i=t.length;r<i;r++)s(e=_i(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function Ci(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var Ai={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ei=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ni=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ji=function(t){return Ei(t)||Ni(t)};function Di(t){return Ni(t)?"svg":"math"===t?"math":void 0}var $i=Object.create(null);function Ri(t){if(!Q)return!0;if(ji(t))return!1;if(t=t.toLowerCase(),null!=$i[t])return $i[t];var e=document.createElement(t);return t.indexOf("-")>-1?$i[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:$i[t]=/HTMLUnknownElement/.test(e.toString())}var Fi=v("text,number,password,search,email,tel,url");function Pi(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function Mi(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function Li(t,e){return document.createElementNS(Ai[t],e)}function Bi(t){return document.createTextNode(t)}function zi(t){return document.createComment(t)}function Vi(t,e,n){t.insertBefore(e,n)}function Ui(t,e){t.removeChild(e)}function Wi(t,e){t.appendChild(e)}function Gi(t){return t.parentNode}function Hi(t){return t.nextSibling}function qi(t){return t.tagName}function Ji(t,e){t.textContent=e}function Ki(t,e){t.setAttribute(e,"")}var Xi=Object.freeze({__proto__:null,createElement:Mi,createElementNS:Li,createTextNode:Bi,createComment:zi,insertBefore:Vi,removeChild:Ui,appendChild:Wi,parentNode:Gi,nextSibling:Hi,tagName:qi,setTextContent:Ji,setStyleScope:Ki}),Yi={create:function(t,e){Zi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Zi(t,!0),Zi(e))},destroy:function(t){Zi(t,!0)}};function Zi(t,e){var n=t.data.ref;if(s(n)){var r=t.context,a=t.componentInstance||t.elm,o=e?null:a,u=e?void 0:a;if(l(n))Ke(n,r,[o],r,"template ref function");else{var c=t.data.refInFor,d="string"===typeof n||"number"===typeof n,h=Gt(n),p=r.$refs;if(d||h)if(c){var f=d?p[n]:n.value;e?i(f)&&x(f,a):i(f)?f.includes(a)||f.push(a):d?(p[n]=[a],Qi(r,n,p[n])):n.value=[a]}else if(d){if(e&&p[n]!==a)return;p[n]=u,Qi(r,n,o)}else if(h){if(e&&n.value!==a)return;n.value=o}else 0}}}function Qi(t,e,n){var r=t._setupState;r&&S(r,e)&&(Gt(r[e])?r[e].value=n:r[e]=n)}var ta=new bt("",{},[]),ea=["create","activate","update","remove","destroy"];function na(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&s(t.data)===s(e.data)&&ra(t,e)||o(t.isAsyncPlaceholder)&&a(e.asyncFactory.error))}function ra(t,e){if("input"!==t.tag)return!0;var n,r=s(n=t.data)&&s(n=n.attrs)&&n.type,i=s(n=e.data)&&s(n=n.attrs)&&n.type;return r===i||Fi(r)&&Fi(i)}function ia(t,e,n){var r,i,a={};for(r=e;r<=n;++r)i=t[r].key,s(i)&&(a[i]=r);return a}function aa(t){var e,n,r={},u=t.modules,l=t.nodeOps;for(e=0;e<ea.length;++e)for(r[ea[e]]=[],n=0;n<u.length;++n)s(u[n][ea[e]])&&r[ea[e]].push(u[n][ea[e]]);function d(t){return new bt(l.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function n(){0===--n.listeners&&p(t)}return n.listeners=e,n}function p(t){var e=l.parentNode(t);s(e)&&l.removeChild(e,t)}function f(t,e,n,r,i,a,u){if(s(t.elm)&&s(a)&&(t=a[u]=wt(t)),t.isRootInsert=!i,!m(t,e,n,r)){var c=t.data,d=t.children,h=t.tag;s(h)?(t.elm=t.ns?l.createElementNS(t.ns,h):l.createElement(h,t),S(t),w(t,d,e),s(c)&&O(t,e),y(n,t.elm,r)):o(t.isComment)?(t.elm=l.createComment(t.text),y(n,t.elm,r)):(t.elm=l.createTextNode(t.text),y(n,t.elm,r))}}function m(t,e,n,r){var i=t.data;if(s(i)){var a=s(t.componentInstance)&&i.keepAlive;if(s(i=i.hook)&&s(i=i.init)&&i(t,!1),s(t.componentInstance))return g(t,e),y(n,t.elm,r),o(a)&&b(t,e,n,r),!0}}function g(t,e){s(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(O(t,e),S(t)):(Zi(t),e.push(t))}function b(t,e,n,i){var a,o=t;while(o.componentInstance)if(o=o.componentInstance._vnode,s(a=o.data)&&s(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](ta,o);e.push(o);break}y(n,t.elm,i)}function y(t,e,n){s(t)&&(s(n)?l.parentNode(n)===t&&l.insertBefore(t,e,n):l.appendChild(t,e))}function w(t,e,n){if(i(e)){0;for(var r=0;r<e.length;++r)f(e[r],n,t.elm,null,!0,e,r)}else c(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return s(t.tag)}function O(t,n){for(var i=0;i<r.create.length;++i)r.create[i](ta,t);e=t.data.hook,s(e)&&(s(e.create)&&e.create(ta,t),s(e.insert)&&n.push(t))}function S(t){var e;if(s(e=t.fnScopeId))l.setStyleScope(t.elm,e);else{var n=t;while(n)s(e=n.context)&&s(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),n=n.parent}s(e=kn)&&e!==t.context&&e!==t.fnContext&&s(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function k(t,e,n,r,i,a){for(;r<=i;++r)f(n[r],a,t,e,!1,n,r)}function T(t){var e,n,i=t.data;if(s(i))for(s(e=i.hook)&&s(e=e.destroy)&&e(t),e=0;e<r.destroy.length;++e)r.destroy[e](t);if(s(e=t.children))for(n=0;n<t.children.length;++n)T(t.children[n])}function _(t,e,n){for(;e<=n;++e){var r=t[e];s(r)&&(s(r.tag)?(I(r),T(r)):p(r.elm))}}function I(t,e){if(s(e)||s(t.data)){var n,i=r.remove.length+1;for(s(e)?e.listeners+=i:e=h(t.elm,i),s(n=t.componentInstance)&&s(n=n._vnode)&&s(n.data)&&I(n,e),n=0;n<r.remove.length;++n)r.remove[n](t,e);s(n=t.data.hook)&&s(n=n.remove)?n(t,e):e()}else p(t.elm)}function C(t,e,n,r,i){var o,u,c,d,h=0,p=0,m=e.length-1,g=e[0],b=e[m],y=n.length-1,v=n[0],w=n[y],x=!i;while(h<=m&&p<=y)a(g)?g=e[++h]:a(b)?b=e[--m]:na(g,v)?(E(g,v,r,n,p),g=e[++h],v=n[++p]):na(b,w)?(E(b,w,r,n,y),b=e[--m],w=n[--y]):na(g,w)?(E(g,w,r,n,y),x&&l.insertBefore(t,g.elm,l.nextSibling(b.elm)),g=e[++h],w=n[--y]):na(b,v)?(E(b,v,r,n,p),x&&l.insertBefore(t,b.elm,g.elm),b=e[--m],v=n[++p]):(a(o)&&(o=ia(e,h,m)),u=s(v.key)?o[v.key]:A(v,e,h,m),a(u)?f(v,r,t,g.elm,!1,n,p):(c=e[u],na(c,v)?(E(c,v,r,n,p),e[u]=void 0,x&&l.insertBefore(t,c.elm,g.elm)):f(v,r,t,g.elm,!1,n,p)),v=n[++p]);h>m?(d=a(n[y+1])?null:n[y+1].elm,k(t,d,n,p,y,r)):p>y&&_(e,h,m)}function A(t,e,n,r){for(var i=n;i<r;i++){var a=e[i];if(s(a)&&na(t,a))return i}}function E(t,e,n,i,u,c){if(t!==e){s(e.elm)&&s(i)&&(e=i[u]=wt(e));var d=e.elm=t.elm;if(o(t.isAsyncPlaceholder))s(e.asyncFactory.resolved)?D(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var h,p=e.data;s(p)&&s(h=p.hook)&&s(h=h.prepatch)&&h(t,e);var f=t.children,m=e.children;if(s(p)&&x(e)){for(h=0;h<r.update.length;++h)r.update[h](t,e);s(h=p.hook)&&s(h=h.update)&&h(t,e)}a(e.text)?s(f)&&s(m)?f!==m&&C(d,f,m,n,c):s(m)?(s(t.text)&&l.setTextContent(d,""),k(d,null,m,0,m.length-1,n)):s(f)?_(f,0,f.length-1):s(t.text)&&l.setTextContent(d,""):t.text!==e.text&&l.setTextContent(d,e.text),s(p)&&s(h=p.hook)&&s(h=h.postpatch)&&h(t,e)}}}function N(t,e,n){if(o(n)&&s(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var j=v("attrs,class,staticClass,staticStyle,key");function D(t,e,n,r){var i,a=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&s(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(s(u)&&(s(i=u.hook)&&s(i=i.init)&&i(e,!0),s(i=e.componentInstance)))return g(e,n),!0;if(s(a)){if(s(c))if(t.hasChildNodes())if(s(i=u)&&s(i=i.domProps)&&s(i=i.innerHTML)){if(i!==t.innerHTML)return!1}else{for(var l=!0,d=t.firstChild,h=0;h<c.length;h++){if(!d||!D(d,c[h],n,r)){l=!1;break}d=d.nextSibling}if(!l||d)return!1}else w(e,c,n);if(s(u)){var p=!1;for(var f in u)if(!j(f)){p=!0,O(e,n);break}!p&&u["class"]&&pn(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,i){if(!a(e)){var u=!1,c=[];if(a(t))u=!0,f(e,c);else{var h=s(t.nodeType);if(!h&&na(t,e))E(t,e,c,null,null,i);else{if(h){if(1===t.nodeType&&t.hasAttribute(U)&&(t.removeAttribute(U),n=!0),o(n)&&D(t,e,c))return N(e,c,!0),t;t=d(t)}var p=t.elm,m=l.parentNode(p);if(f(e,c,p._leaveCb?null:m,l.nextSibling(p)),s(e.parent)){var g=e.parent,b=x(e);while(g){for(var y=0;y<r.destroy.length;++y)r.destroy[y](g);if(g.elm=e.elm,b){for(var v=0;v<r.create.length;++v)r.create[v](ta,g);var w=g.data.hook.insert;if(w.merged)for(var O=1;O<w.fns.length;O++)w.fns[O]()}else Zi(g);g=g.parent}}s(m)?_([t],0,0):s(t.tag)&&T(t)}}return N(e,c,u),e.elm}s(t)&&T(t)}}var sa={create:oa,update:oa,destroy:function(t){oa(t,ta)}};function oa(t,e){(t.data.directives||e.data.directives)&&ua(t,e)}function ua(t,e){var n,r,i,a=t===ta,s=e===ta,o=la(t.data.directives,t.context),u=la(e.data.directives,e.context),c=[],l=[];for(n in u)r=o[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,ha(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(ha(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var d=function(){for(var n=0;n<c.length;n++)ha(c[n],"inserted",e,t)};a?ee(e,"insert",d):d()}if(l.length&&ee(e,"postpatch",(function(){for(var n=0;n<l.length;n++)ha(l[n],"componentUpdated",e,t)})),!a)for(n in o)u[n]||ha(o[n],"unbind",t,t,s)}var ca=Object.create(null);function la(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++){if(r=t[n],r.modifiers||(r.modifiers=ca),i[da(r)]=r,e._setupState&&e._setupState.__sfc){var a=r.def||Sr(e,"_setupState","v-"+r.name);r.def="function"===typeof a?{bind:a,update:a}:a}r.def=r.def||Sr(e.$options,"directives",r.name,!0)}return i}function da(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function ha(t,e,n,r,i){var a=t.def&&t.def[e];if(a)try{a(n.elm,t,n,r,i)}catch(Xs){Je(Xs,n.context,"directive ".concat(t.name," ").concat(e," hook"))}}var pa=[Yi,sa];function fa(t,e){var n=e.componentOptions;if((!s(n)||!1!==n.Ctor.options.inheritAttrs)&&(!a(t.data.attrs)||!a(e.data.attrs))){var r,i,u,c=e.elm,l=t.data.attrs||{},d=e.data.attrs||{};for(r in(s(d.__ob__)||o(d._v_attr_proxy))&&(d=e.data.attrs=$({},d)),d)i=d[r],u=l[r],u!==i&&ma(c,r,i,e.data.pre);for(r in(et||rt)&&d.value!==l.value&&ma(c,"value",d.value),l)a(d[r])&&(vi(r)?c.removeAttributeNS(yi,wi(r)):fi(r)||c.removeAttribute(r))}}function ma(t,e,n,r){r||t.tagName.indexOf("-")>-1?ga(t,e,n):bi(e)?xi(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):fi(e)?t.setAttribute(e,gi(e,n)):vi(e)?xi(n)?t.removeAttributeNS(yi,wi(e)):t.setAttributeNS(yi,e,n):ga(t,e,n)}function ga(t,e,n){if(xi(n))t.removeAttribute(e);else{if(et&&!nt&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var ba={create:fa,update:fa};function ya(t,e){var n=e.elm,r=e.data,i=t.data;if(!(a(r.staticClass)&&a(r.class)&&(a(i)||a(i.staticClass)&&a(i.class)))){var o=Oi(e),u=n._transitionClasses;s(u)&&(o=Ti(o,_i(u))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}var va,wa={create:ya,update:ya},xa="__r",Oa="__c";function Sa(t){if(s(t[xa])){var e=et?"change":"input";t[e]=[].concat(t[xa],t[e]||[]),delete t[xa]}s(t[Oa])&&(t.change=[].concat(t[Oa],t.change||[]),delete t[Oa])}function ka(t,e,n){var r=va;return function i(){var a=e.apply(null,arguments);null!==a&&Ia(t,i,n,r)}}var Ta=Qe&&!(st&&Number(st[1])<=53);function _a(t,e,n,r){if(Ta){var i=zn,a=e;e=a._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return a.apply(this,arguments)}}va.addEventListener(t,e,ut?{capture:n,passive:r}:n)}function Ia(t,e,n,r){(r||va).removeEventListener(t,e._wrapper||e,n)}function Ca(t,e){if(!a(t.data.on)||!a(e.data.on)){var n=e.data.on||{},r=t.data.on||{};va=e.elm||t.elm,Sa(n),te(n,r,_a,Ia,ka,e.context),va=void 0}}var Aa,Ea={create:Ca,update:Ca,destroy:function(t){return Ca(t,ta)}};function Na(t,e){if(!a(t.data.domProps)||!a(e.data.domProps)){var n,r,i=e.elm,u=t.data.domProps||{},c=e.data.domProps||{};for(n in(s(c.__ob__)||o(c._v_attr_proxy))&&(c=e.data.domProps=$({},c)),u)n in c||(i[n]="");for(n in c){if(r=c[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),r===u[n])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===n&&"PROGRESS"!==i.tagName){i._value=r;var l=a(r)?"":String(r);ja(i,l)&&(i.value=l)}else if("innerHTML"===n&&Ni(i.tagName)&&a(i.innerHTML)){Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>".concat(r,"</svg>");var d=Aa.firstChild;while(i.firstChild)i.removeChild(i.firstChild);while(d.firstChild)i.appendChild(d.firstChild)}else if(r!==u[n])try{i[n]=r}catch(Xs){}}}}function ja(t,e){return!t.composing&&("OPTION"===t.tagName||Da(t,e)||$a(t,e))}function Da(t,e){var n=!0;try{n=document.activeElement!==t}catch(Xs){}return n&&t.value!==e}function $a(t,e){var n=t.value,r=t._vModifiers;if(s(r)){if(r.number)return y(n)!==y(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var Ra={create:Na,update:Na},Fa=k((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function Pa(t){var e=Ma(t.style);return t.staticStyle?$(t.staticStyle,e):e}function Ma(t){return Array.isArray(t)?R(t):"string"===typeof t?Fa(t):t}function La(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=Pa(i.data))&&$(r,n)}(n=Pa(t.data))&&$(r,n);var a=t;while(a=a.parent)a.data&&(n=Pa(a.data))&&$(r,n);return r}var Ba,za=/^--/,Va=/\s*!important$/,Ua=function(t,e,n){if(za.test(e))t.style.setProperty(e,n);else if(Va.test(n))t.style.setProperty(A(e),n.replace(Va,""),"important");else{var r=Ga(e);if(Array.isArray(n))for(var i=0,a=n.length;i<a;i++)t.style[r]=n[i];else t.style[r]=n}},Wa=["Webkit","Moz","ms"],Ga=k((function(t){if(Ba=Ba||document.createElement("div").style,t=_(t),"filter"!==t&&t in Ba)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Wa.length;n++){var r=Wa[n]+e;if(r in Ba)return r}}));function Ha(t,e){var n=e.data,r=t.data;if(!(a(n.staticStyle)&&a(n.style)&&a(r.staticStyle)&&a(r.style))){var i,o,u=e.elm,c=r.staticStyle,l=r.normalizedStyle||r.style||{},d=c||l,h=Ma(e.data.style)||{};e.data.normalizedStyle=s(h.__ob__)?$({},h):h;var p=La(e,!0);for(o in d)a(p[o])&&Ua(u,o,"");for(o in p)i=p[o],i!==d[o]&&Ua(u,o,null==i?"":i)}}var qa={create:Ha,update:Ha},Ja=/\s+/;function Ka(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Ja).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" ".concat(t.getAttribute("class")||""," ");n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Xa(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Ja).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" ".concat(t.getAttribute("class")||""," "),r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ya(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&$(e,Za(t.name||"v")),$(e,t),e}return"string"===typeof t?Za(t):void 0}}var Za=k((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),Qa=Q&&!nt,ts="transition",es="animation",ns="transition",rs="transitionend",is="animation",as="animationend";Qa&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ns="WebkitTransition",rs="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(is="WebkitAnimation",as="webkitAnimationEnd"));var ss=Q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function os(t){ss((function(){ss(t)}))}function us(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ka(t,e))}function cs(t,e){t._transitionClasses&&x(t._transitionClasses,e),Xa(t,e)}function ls(t,e,n){var r=hs(t,e),i=r.type,a=r.timeout,s=r.propCount;if(!i)return n();var o=i===ts?rs:as,u=0,c=function(){t.removeEventListener(o,l),n()},l=function(e){e.target===t&&++u>=s&&c()};setTimeout((function(){u<s&&c()}),a+1),t.addEventListener(o,l)}var ds=/\b(transform|all)(,|$)/;function hs(t,e){var n,r=window.getComputedStyle(t),i=(r[ns+"Delay"]||"").split(", "),a=(r[ns+"Duration"]||"").split(", "),s=ps(i,a),o=(r[is+"Delay"]||"").split(", "),u=(r[is+"Duration"]||"").split(", "),c=ps(o,u),l=0,d=0;e===ts?s>0&&(n=ts,l=s,d=a.length):e===es?c>0&&(n=es,l=c,d=u.length):(l=Math.max(s,c),n=l>0?s>c?ts:es:null,d=n?n===ts?a.length:u.length:0);var h=n===ts&&ds.test(r[ns+"Property"]);return{type:n,timeout:l,propCount:d,hasTransform:h}}function ps(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return fs(e)+fs(t[n])})))}function fs(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function ms(t,e){var n=t.elm;s(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Ya(t.data.transition);if(!a(r)&&!s(n._enterCb)&&1===n.nodeType){var i=r.css,o=r.type,u=r.enterClass,c=r.enterToClass,h=r.enterActiveClass,p=r.appearClass,f=r.appearToClass,m=r.appearActiveClass,g=r.beforeEnter,b=r.enter,v=r.afterEnter,w=r.enterCancelled,x=r.beforeAppear,O=r.appear,S=r.afterAppear,k=r.appearCancelled,T=r.duration,_=kn,I=kn.$vnode;while(I&&I.parent)_=I.context,I=I.parent;var C=!_._isMounted||!t.isRootInsert;if(!C||O||""===O){var A=C&&p?p:u,E=C&&m?m:h,N=C&&f?f:c,j=C&&x||g,D=C&&l(O)?O:b,$=C&&S||v,R=C&&k||w,F=y(d(T)?T.enter:T);0;var P=!1!==i&&!nt,M=ys(D),L=n._enterCb=z((function(){P&&(cs(n,N),cs(n,E)),L.cancelled?(P&&cs(n,A),R&&R(n)):$&&$(n),n._enterCb=null}));t.data.show||ee(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),D&&D(n,L)})),j&&j(n),P&&(us(n,A),us(n,E),os((function(){cs(n,A),L.cancelled||(us(n,N),M||(bs(F)?setTimeout(L,F):ls(n,o,L)))}))),t.data.show&&(e&&e(),D&&D(n,L)),P||M||L()}}}function gs(t,e){var n=t.elm;s(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Ya(t.data.transition);if(a(r)||1!==n.nodeType)return e();if(!s(n._leaveCb)){var i=r.css,o=r.type,u=r.leaveClass,c=r.leaveToClass,l=r.leaveActiveClass,h=r.beforeLeave,p=r.leave,f=r.afterLeave,m=r.leaveCancelled,g=r.delayLeave,b=r.duration,v=!1!==i&&!nt,w=ys(p),x=y(d(b)?b.leave:b);0;var O=n._leaveCb=z((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),v&&(cs(n,c),cs(n,l)),O.cancelled?(v&&cs(n,u),m&&m(n)):(e(),f&&f(n)),n._leaveCb=null}));g?g(S):S()}function S(){O.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),h&&h(n),v&&(us(n,u),us(n,l),os((function(){cs(n,u),O.cancelled||(us(n,c),w||(bs(x)?setTimeout(O,x):ls(n,o,O)))}))),p&&p(n,O),v||w||O())}}function bs(t){return"number"===typeof t&&!isNaN(t)}function ys(t){if(a(t))return!1;var e=t.fns;return s(e)?ys(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function vs(t,e){!0!==e.data.show&&ms(e)}var ws=Q?{create:vs,activate:vs,remove:function(t,e){!0!==t.data.show?gs(t,e):e()}}:{},xs=[ba,wa,Ea,Ra,qa,ws],Os=xs.concat(pa),Ss=aa({nodeOps:Xi,modules:Os});nt&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&Ns(t,"input")}));var ks={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ee(n,"postpatch",(function(){ks.componentUpdated(t,e,n)})):Ts(t,e,n.context),t._vOptions=[].map.call(t.options,Cs)):("textarea"===n.tag||Fi(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",As),t.addEventListener("compositionend",Es),t.addEventListener("change",Es),nt&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Ts(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Cs);if(i.some((function(t,e){return!L(t,r[e])}))){var a=t.multiple?e.value.some((function(t){return Is(t,i)})):e.value!==e.oldValue&&Is(e.value,i);a&&Ns(t,"change")}}}};function Ts(t,e,n){_s(t,e,n),(et||rt)&&setTimeout((function(){_s(t,e,n)}),0)}function _s(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var a,s,o=0,u=t.options.length;o<u;o++)if(s=t.options[o],i)a=B(r,Cs(s))>-1,s.selected!==a&&(s.selected=a);else if(L(Cs(s),r))return void(t.selectedIndex!==o&&(t.selectedIndex=o));i||(t.selectedIndex=-1)}}function Is(t,e){return e.every((function(e){return!L(e,t)}))}function Cs(t){return"_value"in t?t._value:t.value}function As(t){t.target.composing=!0}function Es(t){t.target.composing&&(t.target.composing=!1,Ns(t.target,"input"))}function Ns(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function js(t){return!t.componentInstance||t.data&&t.data.transition?t:js(t.componentInstance._vnode)}var Ds={bind:function(t,e,n){var r=e.value;n=js(n);var i=n.data&&n.data.transition,a=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,ms(n,(function(){t.style.display=a}))):t.style.display=r?a:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=js(n);var a=n.data&&n.data.transition;a?(n.data.show=!0,r?ms(n,(function(){t.style.display=t.__vOriginalDisplay})):gs(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},$s={model:ks,show:Ds},Rs={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Fs(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Fs(ze(e.children)):t}function Ps(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var r in i)e[_(r)]=i[r];return e}function Ms(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Ls(t){while(t=t.parent)if(t.data.transition)return!0}function Bs(t,e){return e.key===t.key&&e.tag===t.tag}var zs=function(t){return t.tag||Te(t)},Vs=function(t){return"show"===t.name},Us={name:"transition",props:Rs,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(zs),n.length)){0;var r=this.mode;0;var i=n[0];if(Ls(this.$vnode))return i;var a=Fs(i);if(!a)return i;if(this._leaving)return Ms(t,i);var s="__transition-".concat(this._uid,"-");a.key=null==a.key?a.isComment?s+"comment":s+a.tag:c(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var o=(a.data||(a.data={})).transition=Ps(this),u=this._vnode,l=Fs(u);if(a.data.directives&&a.data.directives.some(Vs)&&(a.data.show=!0),l&&l.data&&!Bs(a,l)&&!Te(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var d=l.data.transition=$({},o);if("out-in"===r)return this._leaving=!0,ee(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Ms(t,i);if("in-out"===r){if(Te(a))return u;var h,p=function(){h()};ee(o,"afterEnter",p),ee(o,"enterCancelled",p),ee(d,"delayLeave",(function(t){h=t}))}}return i}}},Ws=$({tag:String,moveClass:String},Rs);delete Ws.mode;var Gs={props:Ws,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=Tn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],s=Ps(this),o=0;o<i.length;o++){var u=i[o];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))a.push(u),n[u.key]=u,(u.data||(u.data={})).transition=s;else;}if(r){var c=[],l=[];for(o=0;o<r.length;o++){u=r[o];u.data.transition=s,u.data.pos=u.elm.getBoundingClientRect(),n[u.key]?c.push(u):l.push(u)}this.kept=t(e,null,c),this.removed=l}return t(e,null,a)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Hs),t.forEach(qs),t.forEach(Js),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;us(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(rs,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(rs,t),n._moveCb=null,cs(n,e))})}})))},methods:{hasMove:function(t,e){if(!Qa)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Xa(n,t)})),Ka(n,e),n.style.display="none",this.$el.appendChild(n);var r=hs(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function Hs(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function qs(t){t.data.newPos=t.elm.getBoundingClientRect()}function Js(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var a=t.elm.style;a.transform=a.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),a.transitionDuration="0s"}}var Ks={Transition:Us,TransitionGroup:Gs};Xr.config.mustUseProp=pi,Xr.config.isReservedTag=ji,Xr.config.isReservedAttr=di,Xr.config.getTagNamespace=Di,Xr.config.isUnknownElement=Ri,$(Xr.options.directives,$s),$(Xr.options.components,Ks),Xr.prototype.__patch__=Q?Ss:F,Xr.prototype.$mount=function(t,e){return t=t&&Q?Pi(t):void 0,Cn(this,t,e)},Q&&setTimeout((function(){H.devtools&&dt&&dt.emit("init",Xr)}),0)}).call(this,n("c8ba"))},"2ba4":function(t,e,n){var r=n("40d5"),i=Function.prototype,a=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(a):function(){return s.apply(a,arguments)})},"2d00":function(t,e,n){var r,i,a=n("da84"),s=n("342f"),o=a.process,u=a.Deno,c=o&&o.versions||u&&u.version,l=c&&c.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},"2fb1":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0){const n=Object(a["a"])(t,"x","step"),s={x:n},o={alpha:e};return r["a"].runKernel(i["ad"],s,o)}const u=Object(s["b"])({step_:o})},"31bb":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},"342f":function(t,e){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},"34d7":function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"g",(function(){return v})),n.d(e,"f",(function(){return w})),n.d(e,"e",(function(){return x})),n.d(e,"a",(function(){return O})),n.d(e,"d",(function(){return S})),n.d(e,"c",(function(){return k}));var r=n("f490"),i=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a=20,s=3,o=7;function u(t,e,n,r){const a=Object(i["j"])(e),s=c(t,e,n,a),o=e.length,u=h(t,e,n,a,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(u.map(t=>"    "+t).join("\n")),l.join("\n")}function c(t,e,n,r){const a=Object(i["N"])(e),s=r[r.length-1],o=new Array(s).fill(0),u=e.length,c="complex64"===n?p(t):t;if(u>1)for(let i=0;i<a/s;i++){const t=i*s;for(let e=0;e<s;e++)o[e]=Math.max(o[e],l(c[t+e],0,n).length)}return o}function l(t,e,n){let r;return r=Array.isArray(t)?parseFloat(t[0].toFixed(o))+" + "+parseFloat(t[1].toFixed(o))+"j":Object(i["z"])(t)?`'${t}'`:"bool"===n?d(t):parseFloat(t.toFixed(o)).toString(),Object(i["K"])(r,e)}function d(t){return 0===t?"false":"true"}function h(t,e,n,r,i,o=!0){const u="complex64"===n?2:1,c=e[0],f=e.length;if(0===f){if("complex64"===n){const e=p(t);return[l(e[0],0,n)]}return"bool"===n?[d(t[0])]:[t[0].toString()]}if(1===f){if(c>a){const e=s*u;let r=Array.from(t.slice(0,e)),a=Array.from(t.slice((c-s)*u,c*u));return"complex64"===n&&(r=p(r),a=p(a)),["["+r.map((t,e)=>l(t,i[e],n)).join(", ")+", ..., "+a.map((t,e)=>l(t,i[c-s+e],n)).join(", ")+"]"]}const e="complex64"===n?p(t):Array.from(t);return["["+e.map((t,e)=>l(t,i[e],n)).join(", ")+"]"]}const m=e.slice(1),g=r.slice(1),b=r[0]*u,y=[];if(c>a){for(let e=0;e<s;e++){const r=e*b,a=r+b;y.push(...h(t.slice(r,a),m,n,g,i,!1))}y.push("...");for(let e=c-s;e<c;e++){const r=e*b,a=r+b;y.push(...h(t.slice(r,a),m,n,g,i,e===c-1))}}else for(let a=0;a<c;a++){const e=a*b,r=e+b;y.push(...h(t.slice(e,r),m,n,g,i,a===c-1))}const v=2===f?",":"";y[0]="["+(c>0?y[0]+v:"");for(let a=1;a<y.length-1;a++)y[a]=" "+y[a]+v;let w=",\n";for(let a=2;a<f;a++)w+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(o?"":w),y}function p(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var f=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=i["N"](t),null!=n){const t=n.length;i["b"](t===this.size,()=>`Length of values '${t}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||i["n"](e,this.size),this.strides=Object(i["j"])(t)}set(t,...e){0===e.length&&(e=[0]),i["b"](e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}.   Buffer shape=`+this.shape;throw new Error(e)}e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return g().makeTensor(this.values,this.shape,this.dtype)}}let g=null,b=null,y=null;function v(t){g=t}function w(t){b=t}function x(t){y=t}class O{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=i["N"](t),this.strides=Object(i["j"])(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return b.buffer(this.shape,this.dtype,t)}bufferSync(){return b.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Object(i["T"])(this.shape,t,"complex64"===this.dtype)}arraySync(){return Object(i["T"])(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const t=g().read(this.dataId);if("string"===this.dtype){const n=await t;try{return n.map(t=>f["decodeString"](t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),g().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=g().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>f["decodeString"](t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await g().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(g().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return b.print(this,t)}clone(){return this.throwIfDisposed(),b.clone(this)}toString(t=!1){const e=this.dataSync();return u(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),b.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),g().makeVariable(this,t,e,n)}}function S(){return Object(r["a"])("Tensor",()=>O)}Object.defineProperty(O,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),S();class k extends O{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!i["a"](t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);g().disposeTensor(this),this.dataId=t.dataId,g().incRef(this,null)}dispose(){g().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(k,Symbol.hasInstance,{value:t=>t instanceof O&&null!=t.assign&&t.assign instanceof Function})},"350f":function(t,e,n){"use strict";(function(t){n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"j",(function(){return b})),n.d(e,"h",(function(){return y})),n.d(e,"g",(function(){return v})),n.d(e,"i",(function(){return w})),n.d(e,"k",(function(){return x}));var r=n("0777"),i=n("357d"),a=n("6ad5"),s=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=4;async function u(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let s=0;s<i.length;++s){const a=i[s],u=Array.isArray(t)?t[s].tensor:t[a];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype&&"complex64"!==u.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const c={name:a,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){const t=new Promise(async t=>{const e=await u.bytes(),n=e.reduce((t,e)=>t+e.length,0)+o*e.length,r=new Uint8Array(n);let i=0;for(let a=0;a<e.length;a++){const t=e[a],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,i),i+=o,r.set(t,i),i+=t.length}t(r)});r.push(t)}else r.push(u.data());null!=e&&(c.group=e),n.push(c)}const a=await Promise.all(r);return{data:l(a),specs:n}}function c(t,e){const n={};let u,c=0;for(const l of e){const e=l.name,d=l.dtype,h=l.shape,p=Object(a["N"])(h);let f;if("quantization"in l){const n=l.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${l.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${l.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==d)throw new Error(`Weight ${l.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${d}.`)}const r=s["a"][n.dtype],i=t.slice(c,c+p*r),a="uint8"===n.dtype?new Uint8Array(i):new Uint16Array(i);if("float32"===d)if("uint8"===n.dtype||"uint16"===n.dtype){f=new Float32Array(a.length);for(let t=0;t<a.length;t++){const e=a[t];f[t]=e*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===u&&(u=T()),f=u(a)}else{if("int32"!==d)throw new Error(`Unsupported dtype in weight '${e}': ${d}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);f=new Int32Array(a.length);for(let t=0;t<a.length;t++){const e=a[t];f[t]=Math.round(e*n.scale+n.min)}}c+=p*r}else if("string"===d){const e=Object(a["N"])(l.shape);f=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(c,c+o))[0];c+=o;const n=new Uint8Array(t.slice(c,c+e));f.push(n),c+=e}}else{const a=s["a"][d],o=t.slice(c,c+p*a);if("float32"===d)f=new Float32Array(o);else if("int32"===d)f=new Int32Array(o);else if("bool"===d)f=new Uint8Array(o);else{if("complex64"!==d)throw new Error(`Unsupported dtype in weight '${e}': ${d}`);{f=new Float32Array(o);const t=new Float32Array(f.length/2),a=new Float32Array(f.length/2);for(let e=0;e<t.length;e++)t[e]=f[2*e],a[e]=f[2*e+1];const s=Object(i["a"])(t,h,"float32"),u=Object(i["a"])(a,h,"float32");n[e]=Object(r["a"])(s,u),s.dispose(),u.dispose()}}c+=p*a}"complex64"!==d&&(n[e]=Object(i["a"])(f,h,d))}return n}function l(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));let e=0;const n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});const r=new Uint8Array(e);let i=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}const d="undefined"!==typeof t&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function h(e){return d?t.byteLength(e):new Blob([e]).size}function p(e){if(d)return t.from(e).toString("base64");const n=new Uint8Array(e);let r="";for(let t=0,i=n.length;t<i;t++)r+=String.fromCharCode(n[t]);return btoa(r)}function f(e){if(d){const n=t.from(e,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;++t)r.set([n.charCodeAt(t)],t);return r.buffer}function m(t){if(1===t.length)return t[0];let e=0;t.forEach(t=>{e+=t.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function g(t){const e="/";t=t.trim();while(t.endsWith(e))t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function b(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(n.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}function y(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(r.initializerSignature=t.initializerSignature),r}async function v(t,e){let n,r;return null!=t.weightsManifest&&([n,r]=await e(t.weightsManifest)),y(t,n,r)}function w(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:h(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:h(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function x(t){const e=[];for(const n of t)e.push(...n.weights);return e}function O(){const t=t=>{let e=t<<13,n=0;while(0===(8388608&e))n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function S(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function k(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function T(){const t=O(),e=S(),n=k();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let s=0;s<r.length;s++){const i=r[s],o=t[n[i>>10]+(1023&i)]+e[i>>10];a[s]=o}return new Float32Array(i)}}}).call(this,n("b639").Buffer)},3511:function(t,e){var n=TypeError,r=9007199254740991;t.exports=function(t){if(t>r)throw n("Maximum allowed index exceeded");return t}},"357d":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("a3f7"),i=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e,n){const a=Object(r["c"])(t,n);return Object(i["a"])(t,e,a,n)}},"35c9":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e){const n=Object(a["a"])(t,"x","reshape","string_or_numeric"),s={x:n},o={shape:e};return r["a"].runKernel(i["wc"],s,o)}const u=Object(s["b"])({reshape_:o})},"364e":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n="NHWC"){const o=Object(a["a"])(t,"x","depthToSpace","float32"),u="NHWC"===n?o.shape[1]:o.shape[2],c="NHWC"===n?o.shape[2]:o.shape[3],l="NHWC"===n?o.shape[3]:o.shape[1];s["b"](e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e),s["b"](u*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${e}  for depthToSpace with input shape\n    ${o.shape}`),s["b"](c*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${c} and ${e} for depthToSpace with input shape\n        ${o.shape}`),s["b"](l%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${l} for depthToSpace with input shape ${o.shape}`);const d={x:o},h={blockSize:e,dataFormat:n};return r["a"].runKernel(i["P"],d,h)}const c=Object(o["b"])({depthToSpace_:u})},"36e5":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return d}));var r=n("6ad5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function a(t,e,n){const r=t.length+e.length,i=[];let a=0,s=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?i.push(t[a++]):i.push(e[s++]);return i}function s(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)-1===e.indexOf(a)&&n.push(t[a]);const i=e.map(e=>t[e]);return[n,i]}function o(t,e){const n=e.map(t=>1);return a(t,n,e)}function u(t,e,n){r["b"](i(e,n),()=>t+" supports only inner-most axes for now. "+`Got axes ${e} and rank-${n} input.`)}function c(t,e){if(i(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function l(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function d(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}},"3a34":function(t,e,n){"use strict";var r=n("83ab"),i=n("e8b5"),a=TypeError,s=Object.getOwnPropertyDescriptor,o=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(i(t)&&!s(t,"length").writable)throw a("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},"3a44":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(a["a"])(t,"x","unstack","string_or_numeric");s["b"](e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const o={value:n},u={axis:e};return r["a"].runKernel(i["od"],o,u)}const c=Object(o["b"])({unstack_:u})},"3a9b":function(t,e,n){var r=n("e330");t.exports=r({}.isPrototypeOf)},"3b28":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const o=Object(a["a"])(t,"x","batchToSpaceND"),u=e.reduce((t,e)=>t*e);s["b"](o.rank>=1+e.length,()=>`input rank is ${o.rank} but should be > than blockShape.length ${e.length}`),s["b"](n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),s["b"](o.shape[0]%u===0,()=>`input tensor batch is ${o.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${u}`);const c={x:o},l={blockShape:e,crops:n};return r["a"].runKernel(i["t"],c,l)}const c=Object(o["b"])({batchToSpaceND_:u})},"3bb7":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","neg"),n={x:e};return r["a"].runKernel(i["ac"],n)}const u=Object(s["b"])({neg_:o})},"3bbe":function(t,e,n){var r=n("1626"),i=String,a=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw a("Can't set "+i(t)+" as a prototype")}},"3bfc":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3c65":function(t,e,n){"use strict";var r=n("23e7"),i=n("7b0b"),a=n("07fa"),s=n("3a34"),o=n("083a"),u=n("3511"),c=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},d=c||!l();r({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(t){var e=i(this),n=a(e),r=arguments.length;if(r){u(n+r);var c=n;while(c--){var l=c+r;c in e?e[l]=e[c]:o(e,l)}for(var d=0;d<r;d++)e[d]=arguments[d]}return s(e,n+r)}})},"3d50":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},"40d5":function(t,e,n){var r=n("d039");t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},4184:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","squaredDifference"),u=Object(s["a"])(e,"b","squaredDifference");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u},l={};return r["a"].runKernel(i["Zc"],c,l)}const l=Object(u["b"])({squaredDifference_:c})},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ad":function(t,e,n){var r=n("e330"),i=n("d039"),a=n("c6b6"),s=Object,o=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?o(t,""):s(t)}:s},4516:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=null,n=!1){const s=Object(a["a"])(t,"x","any","bool"),o={x:s},u={axis:e,keepDims:n};return r["a"].runKernel(i["g"],o,u)}const u=Object(s["b"])({any_:o})},4581:function(t,e,n){"use strict";e["a"]=null},"45bb":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n=0){const s=Object(a["a"])(t,"x","split"),o={x:s},u={numOrSizeSplits:e,axis:n};return r["a"].runKernel(i["Wc"],o,u)}const u=Object(s["b"])({split_:o})},4611:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"a","mod"),o=Object(s["a"])(e,"b","mod");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["Xb"],u)}const c=Object(o["b"])({mod_:u})},4615:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","acosh"),n={x:e};return r["a"].runKernel(i["c"],n)}const u=Object(s["b"])({acosh_:o})},"46a8":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","relu6"),n={x:e};return r["a"].runKernel(i["vc"],n)}const u=Object(s["b"])({relu6_:o})},"46b1":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","log1p"),n={x:e};return r["a"].runKernel(i["Fb"],n)}const u=Object(s["b"])({log1p_:o})},"46b8":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6ae2"),i=n("c05b"),a=n("6ad5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n){Object(a["c"])(t);const s={shape:t,value:e,dtype:n};return r["a"].runKernel(i["gb"],{},s)}},"46cc":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
var r,i;n.d(e,"a",(function(){return r})),function(t){t[t["DT_INVALID"]=0]="DT_INVALID",t[t["DT_FLOAT"]=1]="DT_FLOAT",t[t["DT_DOUBLE"]=2]="DT_DOUBLE",t[t["DT_INT32"]=3]="DT_INT32",t[t["DT_UINT8"]=4]="DT_UINT8",t[t["DT_INT16"]=5]="DT_INT16",t[t["DT_INT8"]=6]="DT_INT8",t[t["DT_STRING"]=7]="DT_STRING",t[t["DT_COMPLEX64"]=8]="DT_COMPLEX64",t[t["DT_INT64"]=9]="DT_INT64",t[t["DT_BOOL"]=10]="DT_BOOL",t[t["DT_QINT8"]=11]="DT_QINT8",t[t["DT_QUINT8"]=12]="DT_QUINT8",t[t["DT_QINT32"]=13]="DT_QINT32",t[t["DT_BFLOAT16"]=14]="DT_BFLOAT16",t[t["DT_QINT16"]=15]="DT_QINT16",t[t["DT_QUINT16"]=16]="DT_QUINT16",t[t["DT_UINT16"]=17]="DT_UINT16",t[t["DT_COMPLEX128"]=18]="DT_COMPLEX128",t[t["DT_HALF"]=19]="DT_HALF",t[t["DT_RESOURCE"]=20]="DT_RESOURCE",t[t["DT_VARIANT"]=21]="DT_VARIANT",t[t["DT_UINT32"]=22]="DT_UINT32",t[t["DT_UINT64"]=23]="DT_UINT64",t[t["DT_FLOAT_REF"]=101]="DT_FLOAT_REF",t[t["DT_DOUBLE_REF"]=102]="DT_DOUBLE_REF",t[t["DT_INT32_REF"]=103]="DT_INT32_REF",t[t["DT_UINT8_REF"]=104]="DT_UINT8_REF",t[t["DT_INT16_REF"]=105]="DT_INT16_REF",t[t["DT_INT8_REF"]=106]="DT_INT8_REF",t[t["DT_STRING_REF"]=107]="DT_STRING_REF",t[t["DT_COMPLEX64_REF"]=108]="DT_COMPLEX64_REF",t[t["DT_INT64_REF"]=109]="DT_INT64_REF",t[t["DT_BOOL_REF"]=110]="DT_BOOL_REF",t[t["DT_QINT8_REF"]=111]="DT_QINT8_REF",t[t["DT_QUINT8_REF"]=112]="DT_QUINT8_REF",t[t["DT_QINT32_REF"]=113]="DT_QINT32_REF",t[t["DT_BFLOAT16_REF"]=114]="DT_BFLOAT16_REF",t[t["DT_QINT16_REF"]=115]="DT_QINT16_REF",t[t["DT_QUINT16_REF"]=116]="DT_QUINT16_REF",t[t["DT_UINT16_REF"]=117]="DT_UINT16_REF",t[t["DT_COMPLEX128_REF"]=118]="DT_COMPLEX128_REF",t[t["DT_HALF_REF"]=119]="DT_HALF_REF",t[t["DT_RESOURCE_REF"]=120]="DT_RESOURCE_REF",t[t["DT_VARIANT_REF"]=121]="DT_VARIANT_REF",t[t["DT_UINT32_REF"]=122]="DT_UINT32_REF",t[t["DT_UINT64_REF"]=123]="DT_UINT64_REF"}(r||(r={})),function(t){let e;(function(t){t[t["LEGACY"]=0]="LEGACY",t[t["V1"]=1]="V1",t[t["V2"]=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(i||(i={}))},4749:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return g})),n.d(e,"d",(function(){return b}));var r=n("526f"),i=n("9e38"),a=n("6f37"),s=n("a5aa"),o=n("520f"),u=n("917a"),c=n("46a8"),l=n("35c9"),d=n("ffb3"),h=n("2fb1"),p=n("e053");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return Object(s["a"])(t,Object(h["a"])(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function m(t,e){let n=e;const i=r["getReductionAxes"](t.shape,e.shape);return i.length>0&&(n=Object(p["a"])(n,i)),Object(l["a"])(n,t.shape)}function g(t,e,n,r){if("linear"===e)return t;if("relu"===e)return Object(u["a"])(t);if("elu"===e)return Object(i["a"])(t);if("relu6"===e)return Object(c["a"])(t);if("prelu"===e)return Object(o["a"])(t,n);if("leakyrelu"===e)return Object(a["a"])(t,r);if("sigmoid"===e)return Object(d["a"])(t);throw new Error(`Unknown fused activation ${e}.`)}const b=(t,e)=>{const n=t>0;return!n||"linear"===e}},"485a":function(t,e,n){var r=n("c65b"),i=n("1626"),a=n("861d"),s=TypeError;t.exports=function(t,e){var n,o;if("string"===e&&i(n=t.toString)&&!a(o=r(n,t)))return o;if(i(n=t.valueOf)&&!a(o=r(n,t)))return o;if("string"!==e&&i(n=t.toString)&&!a(o=r(n,t)))return o;throw s("Can't convert object to primitive value")}},"487b":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n=!1,o=!1){let u=Object(s["a"])(t,"a","matMul"),c=Object(s["a"])(e,"b","matMul");[u,c]=Object(a["makeTypesMatch"])(u,c);const l={a:u,b:c},d={transposeA:n,transposeB:o};return r["a"].runKernel(i["s"],l,d)}const c=Object(o["b"])({matMul_:u})},"48db":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("f0a9"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(a["a"])(t,"broadcastTo","x");const u=n.shape;if(Object(s["c"])(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const t=n.shape.slice();while(t.length<e.length)t.unshift(1);n=Object(c["a"])(n,t)}const l=n.shape,d=Array.from(e);for(let r=e.length-1;r>=0;r--)if(l[r]===e[r])d[r]=1;else if(1!==n.shape[r])throw new Error(`broadcastTo(): [${u}] cannot be broadcast to [${e}].`);const h=d.map((t,e)=>t>1?e:-1).filter(t=>t>=0);if(0===h.length)return Object(o["a"])(n);const p={x:n},f={reps:d};return r["a"].runKernel(i["jd"],p,f)}const d=Object(u["b"])({broadcastTo_:l})},"4b05":function(t,e,n){"use strict";(function(t){var e=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r={importFetch:()=>n(1)};let i;class a{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return null!=Object(e["c"])().global.fetch?Object(e["c"])().global.fetch(t,n):(null==i&&(i=r.importFetch()),i(t,n))}now(){const e=t.hrtime();return 1e3*e[0]+e[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}Object(e["c"])().get("IS_NODE")&&!Object(e["c"])().get("IS_BROWSER")&&Object(e["c"])().setPlatform("node",new a)}).call(this,n("4362"))},"4c7a":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("6ad5"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){Object(a["b"])("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return r["a"].runKernel(i["sb"],e)}const u=Object(s["b"])({ifft_:o})},"4cfc":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("c388");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class i extends r["a"]{split(t){return new a(this,t)}}class a extends i{constructor(t,e){super(),this.upstream=t,this.impl=new s(t,e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class s extends r["b"]{constructor(t,e){super(),this.upstream=t,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const e=t.value.split(this.separator);e[0]=this.carryover+e[0];for(const n of e.slice(0,-1))this.outputQueue.push(n);return this.carryover=e[e.length-1],!0}}},"4d64":function(t,e,n){var r=n("fc6a"),i=n("23cb"),a=n("07fa"),s=function(t){return function(e,n,s){var o,u=r(e),c=a(u),l=i(s,c);if(t&&n!=n){while(c>l)if(o=u[l++],o!=o)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"4e53":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("f757"),i=n("54ef");
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e=null,n=!1){return Object(r["a"])(t,"euclidean",e,n)}const s=Object(i["b"])({euclideanNorm_:a})},"4f20":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","exp"),n={x:e};return r["a"].runKernel(i["cb"],n)}const u=Object(s["b"])({exp_:o})},"508f":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"a","floorDiv"),o=Object(s["a"])(e,"b","floorDiv");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["jb"],u)}const c=Object(o["b"])({floorDiv_:u})},"50c4":function(t,e,n){var r=n("5926"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"520f":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e){const n=Object(a["a"])(t,"x","prelu"),s=Object(a["a"])(e,"alpha","prelu"),o={x:n,alpha:s};return r["a"].runKernel(i["lc"],o)}const u=Object(s["b"])({prelu_:o})},"526c":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e,n,i,s){const o=e.inputParams[t];if(o&&void 0!==o.inputIndexStart){const t=o.inputIndexStart,u=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?t+1:o.inputIndexEnd;if("tensor"===o.type)return a(e.inputNames[o.inputIndexStart],n,i,s);if("tensors"===o.type){const r=e.inputNames.slice(t,u);return r.map(t=>a(t,n,i,s))}const c=a(e.inputNames.slice(t)[0],n,i,s),l=c.dataSync();return"number"===o.type?l[0]:r["Ji"].toNestedArray(c.shape,l)}const u=e.attrParams[t];return u&&u.value}function a(t,e,n,r){const[i,a]=c(t);if(null!=r){const t=r.getHashTableHandleByName(i);if(null!=t)return t}const s=n.currentContextIds.find(t=>!!e[u(i,t)]);return void 0!==s?e[u(i,s)][a]:void 0}function s(t,e,n){return e[u(t,n.currentContextId)]}function o(t,e){const[n,r,i]=c(t);return[u(n,e&&e.currentContextId),r,i]}function u(t,e){return e?`${t}-${e}`:t}function c(t){const e=t.split(":");if(1===e.length)return[t,0,void 0];const n=e[0],r=3===e.length?e[1]:void 0,i=Number(e[e.length-1]);return[n,i,r]}function l(t,e,n){let r=i("pad",t,e,n);if("explicit"===r){r=i("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)a[t][0]=r[2*t],a[t][1]=r[2*t+1];return a}return r}function d(t){return t.kept?t:Object(r["ue"])(t)}},"526f":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,s=t[a]||1,o=e[e.length-1-i]||1;o>1&&1===s&&r.unshift(a)}return r}function i(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],a=e.length-r-1,s=e[a];(null==i||1===i&&s>1)&&n.unshift(a)}return n}function a(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let r=t[t.length-i-1];null==r&&(r=1);let a=e[e.length-i-1];if(null==a&&(a=1),1===r)n.unshift(a);else if(1===a)n.unshift(r);else{if(r!==a){const n=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(n)}n.unshift(r)}}return n}n.r(e),n.d(e,"getBroadcastDims",(function(){return r})),n.d(e,"getReductionAxes",(function(){return i})),n.d(e,"assertAndGetBroadcastShape",(function(){return a}))},"538e":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"f",(function(){return d})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u}));var r=n("6ae2"),i=n("34d7"),a=n("a3f7"),s=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){return s["b"](s["u"](t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const i=Object(a["a"])(e,"x","tf.grad","string_or_numeric"),o=null!=n?Object(a["a"])(n,"dy","tf.grad"):null;return r["a"].tidy(()=>{const{value:e,grads:n}=r["a"].gradients(()=>t(i),[i],o);return null!=o&&s["e"](e.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),p(n),n[0]})}}function u(t){return s["b"](s["u"](t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{s["b"](Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const i=Object(a["b"])(e,"args","tf.grads","string_or_numeric"),o=null!=n?Object(a["a"])(n,"dy","tf.grads"):null;return r["a"].tidy(()=>{const{value:e,grads:n}=r["a"].gradients(()=>t(...i),i,o);return null!=o&&s["e"](e.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(n),n})}}function c(t){return s["b"](s["u"](t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{s["b"](e instanceof i["a"],()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),s["b"](null==n||n instanceof i["a"],()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:a,value:o}=r["a"].gradients(()=>t(e),[e],n);return p(a),{grad:a[0],value:o}}}function l(t){return s["b"](s["u"](t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{s["b"](Array.isArray(e)&&e.every(t=>t instanceof i["a"]),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),s["b"](null==n||n instanceof i["a"],()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const a=r["a"].gradients(()=>t(...e),e,n);return null!=n&&s["e"](a.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(a.grads),a}}function d(t,e){s["b"](s["u"](t),()=>"The f passed in variableGrads(f) must be a function"),s["b"](null==e||Array.isArray(e)&&e.every(t=>t instanceof i["c"]),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=e;if(!n){e=[];for(const t in r["a"].registeredVariables)e.push(r["a"].registeredVariables[t])}const a=n?e.filter(t=>!t.trainable):null,o=e.length;e=e.filter(t=>t.trainable),s["b"](e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const u=!0,{value:c,grads:l}=r["a"].gradients(t,e,null,u);s["b"](l.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),s["b"](0===c.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${c.rank} tensor`);const d={};return e.forEach((t,e)=>{null!=l[e]&&(d[t.name]=l[e])}),null!=a&&a.forEach(t=>d[t.name]=null),{value:c,grads:d}}function h(t){return r["a"].customGrad(t)}function p(t){const e=t.filter(t=>null==t).length;if(e>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},"53f2":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const o=Object(a["a"])(t,"x","unsortedSegmentSum"),u=Object(a["a"])(e,"segmentIds","unsortedSegmentSum","int32");Object(s["b"])(Object(s["v"])(n),()=>"numSegments must be of dtype int");const c={x:o,segmentIds:u},l={numSegments:n};return r["a"].runKernel(i["pd"],c,l)}const c=Object(o["b"])({unsortedSegmentSum_:u})},"54ef":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n("6ae2"),i=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a="__op";function s(t){const e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");let n=e[0];const s=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=a;const o=(...t)=>{r["a"].startScope(n);try{const e=s(...t);return Object(i["x"])(e)&&console.error("Cannot return a Promise inside of tidy."),r["a"].endScope(e),e}catch(e){throw r["a"].endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}},5508:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return c}));var r=n("6ad5"),i=n("931f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,e){Object(r["b"])(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(a)&&(t=t.slice(0,t.indexOf(a))),Object(r["b"])(t.length>0,()=>"scheme must not be an empty string.");const n=s.getInstance();Object(r["b"])(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){const e=s.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(s.getInstance().managers)}}function o(t){if(-1===t.indexOf(a))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+s.getSchemes().join(","));return{scheme:t.split(a)[0],path:t.split(a)[1]}}async function u(t,e,n=!1){Object(r["b"])(t!==e,()=>`Old path and new path are the same: '${t}'`);const a=i["a"].getLoadHandlers(t);Object(r["b"])(a.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Object(r["b"])(a.length<2,()=>`Copying failed because more than one (${a.length}) load handlers for source URL ${t}.`);const u=a[0],c=i["a"].getSaveHandlers(e);Object(r["b"])(c.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Object(r["b"])(c.length<2,()=>`Copying failed because more than one (${a.length}) save handlers for destination URL ${e}.`);const l=c[0],d=o(t).scheme,h=o(t).path,p=d===o(t).scheme,f=await u.load();n&&p&&await s.getManager(d).removeModel(h);const m=await l.save(f);return n&&!p&&await s.getManager(d).removeModel(h),m.modelArtifactsInfo}async function c(){const t=s.getSchemes(),e={};for(const n of t){const t=await s.getManager(n).listModels();for(const r in t){const i=n+a+r;e[i]=t[r]}}return e}async function l(t){const e=o(t),n=s.getManager(e.scheme);return n.removeModel(e.path)}async function d(t,e){const n=!1;return u(t,e,n)}async function h(t,e){const n=!0;return u(t,e,n)}},5616:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=1,n=!0){const s=Object(a["a"])(t,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(e<0)throw new Error("'k' passed to topk() must be >= 0 but got "+e);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got `+e);const u={x:s},c={k:e,sorted:n},[l,d]=r["a"].runKernel(i["kd"],u,c);return{values:l,indices:d}}const u=Object(s["b"])({topk_:o})},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.1",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(t,e,n){var r=n("d066"),i=n("e330"),a=n("241c"),s=n("7418"),o=n("825a"),u=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=a.f(o(t)),n=s.f;return n?u(e,n(t)):e}},"577e":function(t,e,n){var r=n("f5df"),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},"57e0":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r;n.d(e,"a",(function(){return r})),function(t){t[t["NONE"]=0]="NONE",t[t["MEAN"]=1]="MEAN",t[t["SUM"]=2]="SUM",t[t["SUM_BY_NONZERO_WEIGHTS"]=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},5874:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]},5926:function(t,e,n){var r=n("b42e");t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},5959:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6ae2"),i=n("6ad5"),a=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n,s){if(null==s)s=Object(i["r"])(t);else if("complex64"===s)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if("object"===typeof t&&("texture"in t||"buffer"in t&&!(t.buffer instanceof ArrayBuffer))){if("float32"!==s&&"int32"!==s)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return r["a"].backend.createTensorFromGPUData(t,e||n,s)}if(!Object(a["isTypedArray"])(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Object(i["c"])(e);const t=Object(i["N"])(e),r=Object(i["N"])(n);Object(i["b"])(t===r,()=>`Based on the provided shape, [${e}], the tensor should have ${t} values but has ${r}`);for(let a=0;a<n.length;++a){const t=n[a],r=a!==n.length-1||t!==Object(i["N"])(e.slice(a));Object(i["b"])(n[a]===e[a]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return Object(a["isTypedArray"])(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==s?Object(a["toTypedArray"])(t,s):Object(a["flatten"])(t,[],!0),r["a"].makeTensor(t,e,s)}},5960:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","ceil","float32"),n={x:e};return r["a"].runKernel(i["y"],n)}const u=Object(s["b"])({ceil_:o})},5980:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","isInf"),n={x:e};return r["a"].runKernel(i["wb"],n)}const u=Object(s["b"])({isInf_:o})},"59ed":function(t,e,n){var r=n("1626"),i=n("0d51"),a=TypeError;t.exports=function(t){if(r(t))return t;throw a(i(t)+" is not a function")}},"5a2c":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6ae2"),i=n("6ad5"),a=n("0777");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e="float32"){if(Object(i["c"])(t),"complex64"===e){const e=s(t,"float32"),n=s(t,"float32");return Object(a["a"])(e,n)}const n=Object(i["E"])(Object(i["N"])(t),e);return r["a"].makeTensor(n,t,e)}},"5abe":function(t,e,n){},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5dc4":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","sinh"),n={x:e};return r["a"].runKernel(i["Mc"],n)}const u=Object(s["b"])({sinh_:o})},"5e77":function(t,e,n){var r=n("83ab"),i=n("1a2d"),a=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,o=i(a,"name"),u=o&&"something"===function(){}.name,c=o&&(!r||r&&s(a,"name").configurable);t.exports={EXISTS:o,PROPER:u,CONFIGURABLE:c}},"5ebd":function(t,e,n){"use strict";n.r(e),n.d(e,"assertParamsValid",(function(){return s})),n.d(e,"maskToAxes",(function(){return o})),n.d(e,"computeOutShape",(function(){return u})),n.d(e,"stridesWithElidedDims",(function(){return c})),n.d(e,"getNormalizedAxes",(function(){return h})),n.d(e,"startIndicesWithElidedDims",(function(){return p})),n.d(e,"stopIndicesWithElidedDims",(function(){return f})),n.d(e,"stridesForAxis",(function(){return m})),n.d(e,"startForAxis",(function(){return g})),n.d(e,"stopForAxis",(function(){return b})),n.d(e,"isSliceContinous",(function(){return y})),n.d(e,"computeFlatOffset",(function(){return v})),n.d(e,"parseSliceParams",(function(){return w})),n.d(e,"sliceInfo",(function(){return x}));var r=n("6ad5");
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i=-2,a=-1;function s(t,e,n){const i=t.shape.length;r["b"](i===e.length,()=>`Error in slice${i}D: Length of begin ${e} must match the rank of the array (${i}).`),r["b"](i===n.length,()=>`Error in slice${i}D: Length of size ${n} must match the rank of the array (${i}).`);for(let a=0;a<i;++a)r["b"](e[a]+n[a]<=t.shape[a],()=>`Error in slice${i}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function o(t){const e=[];let n=0;while(t>0)1&t&&e.push(n),t/=2,n++;return e}function u(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function c(t,e,n,r){const i=[...t];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)0===a?i[e]=1:(i.splice(e,0,1),i.pop());return i}function l(t,e,n){return n<=t?n:n-(e-1)}function d(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function h(t,e,n,r,i,a,s,o,u){const l=t.length;let d=new Array(l),h=new Array(l),y=new Array(l);if(e.length&&n>0){const u=e[0],l=n+1;d=p(s,u,l,r,t),h=f(o,u,l,i,t),y=c(a,u,l,t)}else for(let c=0;c<l;c++)d[c]=g(s,r,a,t,c,u),h[c]=b(o,i,a,t,c,u),y[c]=m(a,c,u);return{begin:d,end:h,strides:y}}function p(t,e,n,r,i){const a=[...i],s=d(n,e);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=0;else{const i=l(e,n,o);let s=r[i];t&1<<i&&(s=0),a[o]=s}return a}function f(t,e,n,i,a){const s=[...a],o=d(n,e);for(let r=0;r<s.length;r++)if(o.indexOf(r)>-1)s[r]=Number.MAX_SAFE_INTEGER;else{const a=l(e,n,r);let o=i[a];t&1<<a&&(o=Number.MAX_SAFE_INTEGER),s[r]=o}for(let u=0;u<s.length;u++){const t=a[u];s[u]<0&&(s[u]+=t),s[u]=r["i"](0,s[u],a[u])}return s}function m(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function g(t,e,n,i,a,s){let o=e[a];const u=n[a]||1;(t&1<<a||s&1<<a||null==o)&&(o=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=i[a];return o<0&&(o+=c),o=r["i"](0,o,c-1),o}function b(t,e,n,i,a,s){let o=e[a];const u=n[a]||1;(t&1<<a||s&1<<a||null==o)&&(o=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=i[a];return o<0&&(o+=c),o=u>0?r["i"](0,o,c):r["i"](-1,o,c-1),o}function y(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function v(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function w(t,e,n){let i;const a=t.shape.length;let s;return i="number"===typeof e?[e,...new Array(a-1).fill(0)]:e.length<a?e.concat(new Array(a-e.length).fill(0)):e.slice(),i.forEach(t=>{r["b"](-1!==t,()=>"slice() does not support negative begin indexing.")}),s=null==n?new Array(a).fill(-1):"number"===typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,s=s.map((e,n)=>e>=0?e:(r["b"](-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`),t.shape[n]-i[n])),[i,s]}function x(t,e,n,r,a,s,o,u,c){let l;if(null==r?(l=new Array(e.length),l.fill(1)):l=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");let d=!1;const h={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:c};for(let i=0;i<h.dims;i++)d&&0!==(1<<i&u)&&h.numAddAxisAfterEllipsis++,1<<i&o&&(d=!0);d||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};O(h,p);let f=!0,m=!0,g=!0;const b=[],y=[];for(let i=0;i<t.length;++i){if(0===p.strides[i])throw Error(`strides[${i}] must be non-zero`);const e=!!(p.shrinkAxisMask&1<<i),n=t[i];if(-1===n){b.push(e?1:-1);continue}const r=[p.beginMask&1<<i,p.endMask&1<<i],a=[p.strides[i]>0?0:-1,p.strides[i]>0?n:n-1];if(e&&p.strides[i]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===p.strides[i];const s=!!(p.beginMask&1<<i&&p.endMask&1<<i);if(p.beginValid&&p.endValid){if(e){const t=p.begin[i]<0?n+p.begin[i]:p.begin[i];if(p.begin[i]=t,p.end[i]=p.begin[i]+1,t<0||t>=n)throw Error(`slice index ${p.begin[i]} of dimension ${i} out of bounds.`)}else p.begin[i]=S(p.begin[i],0,p.strides[i],n,r,a),p.end[i]=S(p.end[i],1,p.strides[i],n,r,a);const t=1===p.strides[i]&&0===p.begin[i]&&p.end[i]===n;f=f&&t,m=m&&(0===i&&1===p.strides[i]||t)}else f=f&&1===p.strides[i]&&s,m=m&&(0===i&&1===p.strides[i]||s);let o,u=!1;if(p.beginValid&&p.endValid?(o=p.end[i]-p.begin[i],u=!0):e?(o=1,u=!0):s&&n>=0&&(o=p.strides[i]<0?-n:n,u=!0),u){let t;t=0===o||o<0!==p.strides[i]<0?0:Math.trunc(o/p.strides[i])+(o%p.strides[i]!==0?1:0),b.push(t)}else b.push(-1)}for(let w=0;w<p.finalShapeGatherIndices.length;++w){const t=p.finalShapeGatherIndices[w];t>=0?y.push(b[t]):t===i&&y.push(1)}const v=y.filter((t,e)=>p.finalShapeGatherIndices[e]!==i);return{finalShapeSparse:v,finalShape:y,isIdentity:f,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function O(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=null!=t.begin,e.endValid=null!=t.end,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(i),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);null!=t.begin&&(e.begin[n]=t.begin[r]),null!=t.end&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(a),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function S(t,e,n,r,i,a){if(i[e])return n>0?a[e]:a[e+1&1];{const e=t<0?r+t:t;return e<a[0]?a[0]:e>a[1]?a[1]:e}}},"5f2a":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","rsqrt","float32"),n={x:e};return r["a"].runKernel(i["Ec"],n)}const u=Object(s["b"])({rsqrt_:o})},"5f44":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]},"5f87":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=-1){const n=Object(a["a"])(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const s={logits:n},o={dim:e};return r["a"].runKernel(i["Oc"],s,o)}const u=Object(s["b"])({softmax_:o})},"5fad":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c04e"),a=n("9117"),s=n("a5aa"),o=n("015f"),u=n("b2d6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class c extends u["a"]{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}static get className(){return"SGD"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const o=Array.isArray(t)?t[n].tensor:t[e];if(null==o)return;const u=r["a"].registeredVariables[e];Object(i["t"])(()=>{const t=Object(a["a"])(Object(s["a"])(this.c,o),u);u.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=Object(i["l"])(Object(o["a"])(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),0!==t.length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e["learningRate"])}}},6002:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"a","atan2"),o=Object(s["a"])(e,"b","atan2");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["m"],u)}const c=Object(o["b"])({atan2_:u})},6125:function(t,e,n){var r=n("1212"),i=n("b838"),a=n("a49e"),s=n("cae0"),o=n("7aec"),u=n("89ed"),c=n("a49d");c.alea=r,c.xor128=i,c.xorwow=a,c.xorshift7=s,c.xor4096=o,c.tychei=u,t.exports=c},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},6336:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c04e"),a=n("9117"),s=n("a5aa"),o=n("015f"),u=n("a09b"),c=n("5fad");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class l extends c["a"]{constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=Object(o["a"])(this.momentum)}static get className(){return"Momentum"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const o=r["a"].registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:e+"/momentum",variable:Object(i["t"])(()=>Object(u["a"])(o).variable(t))}}const c=this.accumulations[n].variable,l=Array.isArray(t)?t[n].tensor:t[e];null!=l&&Object(i["t"])(()=>{let t;const e=Object(a["a"])(Object(s["a"])(this.m,c),l);t=this.useNesterov?Object(a["a"])(Object(s["a"])(this.c,Object(a["a"])(l,Object(s["a"])(e,this.m))),o):Object(a["a"])(Object(s["a"])(this.c,e),o),c.assign(e),o.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Object(i["d"])(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e["learningRate"],e["momentum"],e["useNesterov"])}}},6374:function(t,e,n){var r=n("da84"),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},"649e":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("f0a9"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e=0){Object(s["b"])(t.length>=1,()=>"Pass at least one tensor to concat");const n=Object(a["b"])(t,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${t.dtype}. `)}),1===n.length)return Object(o["a"])(n[0]);const u=n,c={axis:e};return r["a"].runKernel(i["C"],u,c)}const l=Object(u["b"])({concat_:c})},"673d":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}]},6791:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("48db"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n){const u=Object(a["a"])(e,"a","where"),c=Object(a["a"])(n,"b","where"),l=Object(a["a"])(t,"condition","where","bool"),d=Object(o["assertAndGetBroadcastShape"])(Object(o["assertAndGetBroadcastShape"])(l.shape,u.shape),c.shape),h=Object(s["a"])(l,d),p=Object(s["a"])(u,d),f=Object(s["a"])(c,d),m={condition:h,t:p,e:f};return r["a"].runKernel(i["Hc"],m)}const l=Object(u["b"])({where_:c})},6926:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n,a,o,u=[1,1],c){let l=t;3===t.rank&&(l=Object(s["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let d=e;3===d.rank&&(d=Object(s["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const h={x:l,dy:d},p={strides:a,pad:o,dimRoundingMode:c,dilations:u,filterShape:n};return r["a"].runKernel(i["R"],h,p)}const u=Object(a["b"])({depthwiseConv2dNativeBackpropFilter_:o})},6932:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","sin","float32"),n={x:e};return r["a"].runKernel(i["Lc"],n)}const u=Object(s["b"])({sin_:o})},"69dc":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("0777"),i=n("649e"),a=n("24b0"),s=n("a5aa"),o=n("54ef"),u=n("d7b0"),c=n("35c9"),l=n("d08e"),d=n("015f"),h=n("6d3c"),p=n("4c7a");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t){const e=t.shape[t.shape.length-1],n=t.size/e;let o;if(e<=2){const r=Object(c["a"])(t,[n,e]);o=Object(p["a"])(r)}else{const f=[n,2*(e-1)],m=Object(c["a"])(Object(u["a"])(t),[n,e]),g=Object(c["a"])(Object(a["a"])(t),[n,e]),b=Object(l["a"])(Object(h["a"])(m,[0,1],[n,e-2]),1),y=Object(s["a"])(Object(l["a"])(Object(h["a"])(g,[0,1],[n,e-2]),1),Object(d["a"])(-1)),v=Object(i["a"])([m,b],1),w=Object(i["a"])([g,y],1),x=Object(c["a"])(Object(r["a"])(v,w),[f[0],f[1]]);o=Object(p["a"])(x)}if(o=Object(u["a"])(o),3===t.rank&&0!==t.shape[0]){const e=o,n=t.shape[0];o=Object(c["a"])(o,[n,o.shape[0]/n,o.shape[1]]),e.dispose()}return o}const m=Object(o["b"])({irfft_:f})},"69f3":function(t,e,n){var r,i,a,s=n("cdce"),o=n("da84"),u=n("861d"),c=n("9112"),l=n("1a2d"),d=n("c6cd"),h=n("f772"),p=n("d012"),f="Object already initialized",m=o.TypeError,g=o.WeakMap,b=function(t){return a(t)?i(t):r(t,{})},y=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(s||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,r=function(t,e){if(v.has(t))throw m(f);return e.facade=t,v.set(t,e),e},i=function(t){return v.get(t)||{}},a=function(t){return v.has(t)}}else{var w=h("state");p[w]=!0,r=function(t,e){if(l(t,w))throw m(f);return e.facade=t,c(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},a=function(t){return l(t,w)}}t.exports={set:r,get:i,has:a,enforce:b,getterFor:y}},"6ad5":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t){let e=t.length,n=0;while(e>0)n=Math.random()*e|0,e--,o(t,e,n)}function i(t,e){if(t.length!==e.length)throw new Error("Array sizes must match to be shuffled together First array length was "+t.length+"Second array length was "+e.length);let n=t.length,r=0;while(n>0)r=Math.random()*n|0,n--,o(t,n,r),o(e,n,r)}function a(t,e,n){return Math.max(t,Math.min(e,n))}function s(t){return t%2===0?t:t+1}function o(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function u(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function c(t,e){const n=Math.random();return e*n+(1-n)*t}function l(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function d(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function h(t,e,n=""){d(g(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function p(t){d(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function f(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function m(t){return 0===t.length}function g(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function b(t){return t%1===0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function v(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function w(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return r(e),e}function x(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function O(t,e=(t=>0),n,r){return new Promise((i,a)=>{let s=0;const o=()=>{if(t())return void i();s++;const u=e(s);null!=n&&s>=n?a():null!=r?r(o,u):setTimeout(o,u)};o()})}function S(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(-1===t[a]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function k(t,e){const n=e.length;return t=null==t?e.map((t,e)=>e):[].concat(t),d(t.every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis `+t),d(t.every(t=>b(t)),()=>"All values in axis param must be integers but got axis "+t),t.map(t=>t<0?n+t:t)}function T(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||i?null:k(e,t).sort();let s=0;for(let o=0;o<t.length;++o){if(null!=a){if(a[s]===o&&1!==t[o])throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(null==a[s]||a[s]>o)&&1===t[o]&&(n.push(t[o]),r.push(o)),a[s]<=o&&s++}1!==t[o]&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function _(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function I(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function C(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function A(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function E(t,e){return"complex64"!==e&&(("float32"!==e||"complex64"===t)&&(("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)))}function N(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function j(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function D(t){return"string"===typeof t||t instanceof String}function $(t){return"boolean"===typeof t}function R(t){return"number"===typeof t}function F(t){return Array.isArray(t)?F(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":R(t)?"float32":D(t)?"string":$(t)?"bool":"float32"}function P(t){return!!(t&&t.constructor&&t.call&&t.apply)}function M(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function L(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function B(t,e,n,r=!1){const i=new Array;if(1===e.length){const a=e[0]*(r?2:1);for(let e=0;e<a;e++)i[e]=n[t+e]}else{const a=e[0],s=e.slice(1),o=s.reduce((t,e)=>t*e)*(r?2:1);for(let e=0;e<a;e++)i[e]=B(t+e*o,s,n,r)}return i}function z(t,e,n=!1){if(0===t.length)return e[0];const r=t.reduce((t,e)=>t*e)*(n?2:1);if(0===r)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return B(0,t,e,n)}function V(t,e){if(Array.isArray(t))return t;if("float32"===e)return t instanceof Float32Array?t:new Float32Array(t);if("int32"===e)return t instanceof Int32Array?t:new Int32Array(t);if("bool"===e||"string"===e)return Uint8Array.from(new Int32Array(t));throw new Error("Unknown dtype "+e)}function U(t,e){const n=W(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function W(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function G(t,e){const n=t.reduce((t,e)=>t*e,1);if(null==e||"float32"===e)return z(t,new Float32Array(n));if("int32"===e)return z(t,new Int32Array(n));if("bool"===e)return z(t,new Uint8Array(n));throw new Error("Unknown data type "+e)}function H(t){t.forEach(e=>{d(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function q(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function J(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function K(t){return t&&t.then&&"function"===typeof t.then}n.d(e,"L",(function(){return r})),n.d(e,"M",(function(){return i})),n.d(e,"i",(function(){return a})),n.d(e,"G",(function(){return s})),n.d(e,"R",(function(){return o})),n.d(e,"Q",(function(){return u})),n.d(e,"I",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"N",(function(){return f})),n.d(e,"y",(function(){return m})),n.d(e,"a",(function(){return g})),n.d(e,"v",(function(){return b})),n.d(e,"S",(function(){return y})),n.d(e,"O",(function(){return v})),n.d(e,"l",(function(){return w})),n.d(e,"K",(function(){return x})),n.d(e,"J",(function(){return O})),n.d(e,"s",(function(){return S})),n.d(e,"H",(function(){return k})),n.d(e,"P",(function(){return T})),n.d(e,"o",(function(){return _})),n.d(e,"n",(function(){return I})),n.d(e,"h",(function(){return C})),n.d(e,"A",(function(){return A})),n.d(e,"p",(function(){return E})),n.d(e,"g",(function(){return N})),n.d(e,"f",(function(){return j})),n.d(e,"z",(function(){return D})),n.d(e,"t",(function(){return $})),n.d(e,"w",(function(){return R})),n.d(e,"r",(function(){return F})),n.d(e,"u",(function(){return P})),n.d(e,"F",(function(){return M})),n.d(e,"j",(function(){return L})),n.d(e,"T",(function(){return z})),n.d(e,"k",(function(){return V})),n.d(e,"C",(function(){return U})),n.d(e,"E",(function(){return W})),n.d(e,"D",(function(){return G})),n.d(e,"c",(function(){return H})),n.d(e,"B",(function(){return q})),n.d(e,"q",(function(){return J})),n.d(e,"x",(function(){return K}))},"6ae2":function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return S}));var r=n("8b87"),i=n("b333"),a=n("f490"),s=n("c05b"),o=n("73b8"),u=n("b294"),c=n("eb7e"),l=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class d{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new p)}profileKernel(t,e,n){let r;const a=()=>{r=n()};let s;const o=c["now"]();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(a);else{a();for(const t of r)t.dataSync();s=Promise.resolve({kernelMs:c["now"]()-o})}if(Object(i["c"])().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let i=0;i<r.length;i++){const e=r[i];e.data().then(n=>{h(n,e.dtype,t)})}const u={kernelName:t,outputs:r,inputs:e,timeMs:s.then(t=>t.kernelMs),extraInfo:s.then(t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():"")};return u}logKernelProfile(t){const{kernelName:e,outputs:n,timeMs:r,inputs:i,extraInfo:a}=t;n.forEach(t=>{Promise.all([t.data(),r,a]).then(n=>{this.logger.logKernelProfile(e,t,n[0],n[1],i,n[2])})})}}function h(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const e=t[r];if(isNaN(e)||!isFinite(e))return console.warn(`Found ${e} in the result of '${n}'`),!0}return!1}class p{logKernelProfile(t,e,n,r,i,a){const s="number"===typeof r?l["K"](r+"ms",9):r["error"],o=l["K"](t,25),u=e.rank,c=e.size,d=l["K"](e.shape.toString(),14);let h="";for(const l in i){const t=i[l];if(null!=t){const n=t.shape||e.shape,r=n.length;h+=`${l}: ${r}D ${r>0?n:""} `}}console.log(`%c${o}\t%c${s}\t%c${u}D ${d}\t%c${c}\t%c${h}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f(t,e,n){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const n=t[u],a=n.inputs;for(const t in a){const s=a[t];let o=!1;for(let t=0;t<e.length;t++)if(r[s.id]){n.outputs.forEach(t=>r[t.id]=!0),o=!0,i[n.id]=!0;break}if(o)break}}const a={};a[n.id]=!0;const s={};for(let u=t.length-1;u>=0;u--){const e=t[u],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(a[e.outputs[t].id]){for(const t in n)a[n[t].id]=!0,s[e.id]=!0;break}}const o=[];for(let u=0;u<t.length;u++){const e=t[u];if(i[e.id]&&s[e.id]){const t={};for(const i in e.inputs){const n=e.inputs[i];r[n.id]&&(t[i]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,o.push(n)}}return o}function m(t,e,n,r){for(let i=e.length-1;i>=0;i--){const a=e[i],s=[];if(a.outputs.forEach(e=>{const n=t[e.id];null!=n?s.push(n):s.push(null)}),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(s);for(const e in a.inputs){if(!(e in o))throw new Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(o)}.`);const i=n(()=>o[e]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${i.dtype}'`);const s=a.inputs[e];if(!l["a"](i.shape,s.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${e}' has shape '${i.shape}', which does not match the shape of the input '${s.shape}'`);if(null==t[s.id])t[s.id]=i;else{const e=t[s.id];t[s.id]=r(e,i),e.dispose()}}}}var g=n("34d7"),b=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function y(t){return null!=t.kernelName}class v{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class w{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new v}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],r=await this.initializeBackend(n).success;if(r)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(u["b"](t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t),r=n?await e:e;if(!r)return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new d(this.backendInstance),!0}setupRegisteredKernels(){const t=Object(o["d"])(this.backendName);t.forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){const e=Object(o["d"])(t);e.forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(!n||n instanceof r["b"]||"function"!==typeof n.then)return this.registry[t]=n,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,r=n.then(n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0)).catch(n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,u["b"](`Initialization of backend ${t} failed`),u["b"](n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return u["b"](`Initialization of backend ${t} failed`),u["b"](n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e),a=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,i,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!==typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!==typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return w.nextTensorId++}nextVariableId(){return w.nextVariableId++}clone(t){const e=S.runKernel(s["tb"],{x:t}),n={x:t},r=t=>({x:()=>{const e="float32",n={x:t},r={dtype:e};return S.runKernel(s["x"],n,r)}}),i=[];return this.addTapeNode(this.state.activeScope.name,n,[e],r,i,{}),e}runKernel(t,e,n){null==this.backendName&&this.backend;const r=null!=Object(o["c"])(t,this.backendName);if(!r)throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let i=0;n.forEach(t=>{i+="complex64"===t.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-e-i-a;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${t}'`)}runKernelFunc(t){let e,n=[];const r=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;let s,u;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=y(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(y(t)){const{kernelName:e,inputs:i,attrs:a}=t;null==this.backendName&&this.backend;const c=Object(o["c"])(e,this.backendName);l["b"](null!=c,()=>`Cannot find registered kernel '${e}' for backend '${this.backendName}'`),s=()=>{const t=this.backend.numDataIds();u=c.kernelFunc({inputs:i,attrs:a,backend:this.backend});const s=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(e,t,s);const o=s.map(t=>null!=t.rank?t:this.makeTensorFromTensorInfo(t));if(r){const t=this.getTensorsForGradient(e,i,o);n=this.saveTensorsForBackwardMode(t)}return o}}else{const{forwardFunc:e}=t,i=t=>{r&&(n=t.map(t=>this.keep(this.clone(t))))};s=()=>{const t=this.backend.numDataIds();u=this.tidy(()=>e(this.backend,i));const n=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,t,n),n}}const{inputs:d,attrs:h}=t,p=y(t)?null:t.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(c,d,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),e=f.outputs):e=s()}),r&&this.addTapeNode(c,d,e,p,n,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(t=>null!=d[t]?d[t].shape:null),outputShapes:e.map(t=>t.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(u)?e:e[0]}saveTensorsForBackwardMode(t){const e=t.map(t=>this.keep(this.clone(t)));return e}getTensorsForGradient(t,e,n){const r=Object(o["b"])(t);if(null!=r){const t=r.inputsToSave||[],i=r.outputsToSave||[];let a;r.saveAllInputs?(l["b"](Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(e).map(t=>e[t])):a=t.map(t=>e[t]);const s=n.filter((t,e)=>i[e]);return a.concat(s)}return[]}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=t;"string"===n&&l["z"](t[0])&&(i=t.map(t=>c["encodeString"](t)));const a=r.write(i,e,n),s=new g["a"](e,n,a,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){const t=this.state.tensorInfo.get(a),e=Object(l["f"])(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return s}makeTensorFromDataId(t,e,n,r){n=n||"float32";const i={dataId:t,shape:e,dtype:n};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(t,e){const{dataId:n,shape:r,dtype:i}=t,a=new g["a"](r,i,n,this.nextTensorId());return this.trackTensor(a,e),a}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const i=new g["c"](t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*l["g"](t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof g["c"]||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){const e=t.size*l["g"](t.dtype);this.state.numBytes-=e}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,a){const s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},u=Object(o["b"])(t);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=t=>(t=t.map((t,e)=>{if(null==t){const t=n[e],r=l["E"](t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],i,a))),this.state.activeTape.push(s)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Object(b["getTensorsInContainer"])(t),n=new Set(e.map(t=>t.id));for(let i=0;i<this.state.activeScope.track.length;i++){const t=this.state.activeScope.track[i];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(l["b"](e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));l["b"](i instanceof g["a"],()=>"The result y returned by f() must be a tensor.");const a=f(this.state.activeTape,e,i);if(!r&&0===a.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[i.id]=null==n?x(i.shape):n,m(t,a,t=>this.tidy(t),k);const r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(const e of t.saved)e.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(t){return l["b"](l["u"](t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;l["b"](e.every(t=>t instanceof g["a"]),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};e.forEach((t,e)=>{r[e]=t});const i=(r,i)=>(n=t(...e,i),l["b"](n.value instanceof g["a"],()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),l["b"](l["u"](n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),a=(t,r)=>{const i=n.gradFunc(t,r),a=Array.isArray(i)?i:[i];l["b"](a.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),l["b"](a.every(t=>t instanceof g["a"]),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const s={};return a.forEach((t,e)=>{s[e]=()=>t}),s};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:r})}}readSync(t){const e=this.state.tensorInfo.get(t);return e.backend.readSync(t)}read(t){const e=this.state.tensorInfo.get(t);return e.backend.read(t)}readToGPU(t,e){const n=this.state.tensorInfo.get(t);return n.backend.readToGPU(t,e)}async time(t){const e=Object(c["now"])(),n=await this.backend.time(t);return n.wallMs=Object(c["now"])()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new v;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function x(t){const e=Object(l["C"])(Object(l["N"])(t),"float32");return S.makeTensor(e,t,"float32")}function O(){const t=Object(a["b"])();if(null==t._tfengine){const e=new i["b"](t);t._tfengine=new w(e)}return Object(i["d"])(t._tfengine.ENV),Object(g["g"])(()=>t._tfengine),t._tfengine}w.nextTensorId=0,w.nextVariableId=0;const S=O();function k(t,e){const n={a:t,b:e};return S.runKernel(s["d"],n)}},"6cae":function(t,e,n){"use strict";n.r(e),n.d(e,"Serializable",(function(){return i})),n.d(e,"SerializationMap",(function(){return a})),n.d(e,"registerClass",(function(){return s}));var r=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class a{constructor(){this.classNameMap={}}static getMap(){return null==a.instance&&(a.instance=new a),a.instance}static register(t){a.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function s(t){Object(r["b"])(null!=t.className,()=>"Class being registered does not have the static className property defined."),Object(r["b"])("string"===typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),Object(r["b"])(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),a.register(t)}},"6d3c":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n){const s=Object(a["a"])(t,"x","slice","string_or_numeric");if(0===s.rank)throw new Error("Slicing scalar is not possible");const o={x:s},u={begin:e,size:n};return r["a"].runKernel(i["Nc"],o,u)}const u=Object(s["b"])({slice_:o})},"6e83":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]},"6eb5":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("6ae2"),i=n("c04e"),a=n("9117"),s=n("c77c"),o=n("a5aa"),u=n("163a"),c=n("93b2"),l=n("a009"),d=n("a09b"),h=n("b2d6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class p extends h["a"]{constructor(t,e=.9,n=0,i=null,a=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==i&&(this.epsilon=r["a"].backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}static get className(){return"RMSProp"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const h=r["a"].registeredVariables[e],p=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:e+"/rms",variable:Object(i["t"])(()=>Object(d["a"])(h).variable(p))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:e+"/momentum",variable:Object(i["t"])(()=>Object(d["a"])(h).variable(p))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:e+"/mg",variable:Object(i["t"])(()=>Object(d["a"])(h).variable(p))});const f=Array.isArray(t)?t[n].tensor:t[e];if(null==f)return;const m=this.accumulatedMeanSquares[n].variable,g=this.accumulatedMoments[n].variable;Object(i["t"])(()=>{const t=Object(a["a"])(Object(o["a"])(m,this.decay),Object(o["a"])(Object(c["a"])(f),1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,r=Object(a["a"])(Object(o["a"])(e,this.decay),Object(o["a"])(f,1-this.decay)),i=Object(s["a"])(Object(o["a"])(f,this.learningRate),Object(u["a"])(Object(l["a"])(t,Object(a["a"])(Object(c["a"])(r),this.epsilon)))),d=Object(a["a"])(Object(o["a"])(g,this.momentum),i);m.assign(t),e.assign(r),g.assign(d);const p=Object(l["a"])(h,d);h.assign(p)}else{const t=Object(a["a"])(Object(o["a"])(m,this.decay),Object(o["a"])(Object(c["a"])(f),1-this.decay)),e=Object(a["a"])(Object(o["a"])(g,this.momentum),Object(s["a"])(Object(o["a"])(f,this.learningRate),Object(u["a"])(Object(a["a"])(t,this.epsilon))));m.assign(t),g.assign(e);const n=Object(l["a"])(h,e);h.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Object(i["d"])(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Object(i["d"])(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&Object(i["d"])(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,n=!1;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e["learningRate"],e["decay"],e["momentum"],e["epsilon"],e["centered"])}}},"6f19":function(t,e,n){var r=n("9112"),i=n("0d26"),a=n("b980"),s=Error.captureStackTrace;t.exports=function(t,e,n,o){a&&(s?s(t,e):r(t,"stack",i(n,o)))}},"6f37":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=.2){const n=Object(a["a"])(t,"x","leakyRelu"),s={x:n},o={alpha:e};return r["a"].runKernel(i["Ab"],s,o)}const u=Object(s["b"])({leakyRelu_:o})},"6fef":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","isNaN"),n={x:e};return r["a"].runKernel(i["xb"],n)}const u=Object(s["b"])({isNaN_:o})},7156:function(t,e,n){var r=n("1626"),i=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var s,o;return a&&r(s=e.constructor)&&s!==n&&i(o=s.prototype)&&o!==n.prototype&&a(t,o),t}},"71db":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("35c9");function u(t){let e;return e=0===t.rank||1===t.rank?Object(o["a"])(t,[1,1,1,t.size]):2===t.rank?Object(o["a"])(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Object(o["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,e}var c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l(t,e,n,c,l,d){null==d&&(d=.001);const h=Object(a["a"])(t,"x","batchNorm"),p=Object(a["a"])(e,"mean","batchNorm"),f=Object(a["a"])(n,"variance","batchNorm");let m,g;null!=l&&(m=Object(a["a"])(l,"scale","batchNorm")),null!=c&&(g=Object(a["a"])(c,"offset","batchNorm")),s["b"](p.rank===f.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),s["b"](null==g||p.rank===g.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),s["b"](null==m||p.rank===m.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const b=u(h),y={x:b,scale:m,offset:g,mean:p,variance:f},v={varianceEpsilon:d},w=r["a"].runKernel(i["lb"],y,v);return Object(o["a"])(w,h.shape)}const d=Object(c["b"])({batchNorm_:l})},7234:function(t,e){t.exports=function(t){return null===t||void 0===t}},7282:function(t,e,n){var r=n("e330"),i=n("59ed");t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(a){}}},"73b8":function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"g",(function(){return f})),n.d(e,"a",(function(){return m}));var r=n("b333"),i=n("f490"),a=n("b294");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s=Object(i["a"])("kernelRegistry",()=>new Map),o=Object(i["a"])("gradRegistry",()=>new Map);function u(t,e){const n=g(t,e);return s.get(n)}function c(t){return o.get(t)}function l(t){const e=s.entries(),n=[];while(1){const{done:r,value:i}=e.next();if(r)break;const[a,s]=i,[o]=a.split("_");o===t&&n.push(s)}return n}function d(t){const{kernelName:e,backendName:n}=t,r=g(e,n);s.has(r)&&a["b"](`The kernel '${e}' for backend '${n}' is already registered`),s.set(r,t)}function h(t){const{kernelName:e}=t;o.has(e)&&Object(r["c"])().getBool("DEBUG")&&a["b"](`Overriding the gradient for '${e}'`),o.set(e,t)}function p(t,e){const n=g(t,e);if(!s.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);s.delete(n)}function f(t){if(!o.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);o.delete(t)}function m(t,e){const n=l(t);n.forEach(t=>{const n=Object.assign({},t,{backendName:e});d(n)})}function g(t,e){return`${e}_${t}`}},"73d3":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("6ad5"),s=n("b818"),o=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,o,c,l="NHWC",d){a["b"](t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let h=t,p=e,f=!1;3===e.rank&&(f=!0,p=Object(u["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]),h=[1,t[0],t[1],t[2]]),a["b"](4===h.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+h.length+"."),a["b"](4===p.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+p.rank),a["b"](4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);const m="NHWC"===l?h[3]:h[1],g="NHWC"===l?p.shape[3]:p.shape[1];a["b"](m===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${m}) must match input depth for filter ${n.shape[2]}.`),a["b"](g===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must match output depth for filter ${n.shape[3]}.`),s["a"]("conv2dDerInput",c,d);const b={dy:p,filter:n},y={strides:o,pad:c,dataFormat:l,dimRoundingMode:d,inputShape:h},v=r["a"].runKernel(i["F"],b,y);return f?Object(u["a"])(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const l=Object(o["b"])({conv2DBackpropInput_:c})},"73f8":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n=!1,o=!1){const c=Object(a["a"])(t,"images","resizeBilinear");s["b"](3===c.rank||4===c.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${c.rank}.`),s["b"](2===e.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."),s["b"](!1===o||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let l=c,d=!1;3===c.rank&&(d=!0,l=Object(u["a"])(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const[]=e,h={images:l},p={alignCorners:n,halfPixelCenters:o,size:e},f=r["a"].runKernel(i["xc"],h,p);return d?Object(u["a"])(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const l=Object(o["b"])({resizeBilinear_:c})},7418:function(t,e){e.f=Object.getOwnPropertySymbols},7568:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e=!1){console.log(t.toString(e))}n.d(e,"a",(function(){return r}))},7580:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const o=Object(a["a"])(t,"x","spaceToBatchND");s["b"](o.rank>=1+e.length,()=>`input rank ${o.rank} should be > than [blockShape] ${e.length}`),s["b"](n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),s["b"](o.shape.reduce((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]===0:t,!0),()=>`input spatial dimensions ${o.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const u={x:o},c={blockShape:e,paddings:n};return r["a"].runKernel(i["Qc"],u,c)}const c=Object(o["b"])({spaceToBatchND_:u})},7675:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("a3f7"),i=n("6ad5"),a=n("dd7e"),s=n("b818"),o=n("54ef"),u=n("35c9");function c(t,e,n,o,c="NWC",l=1,d){const h=Object(r["a"])(t,"x","conv1d"),p=Object(r["a"])(e,"filter","conv1d");let f=h,m=!1;2===h.rank&&(m=!0,f=Object(u["a"])(h,[1,h.shape[0],h.shape[1]])),i["b"](3===f.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),i["b"](3===p.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+p.rank+"."),s["a"]("conv1d",o,d),i["b"](f.shape[2]===p.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match input depth for filter ${p.shape[1]}.`),i["b"](s["i"](n,l),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${l}'`),i["b"](s["j"](l),()=>"Error in conv1D: Dilated rates should be larger than 0."),i["b"](s["j"](n),()=>"Error in conv1D: Stride should be larger than 0."),i["b"]("NWC"===c,()=>`Error in conv1d: got dataFormat of ${c} but only NWC is currently supported.`);const g=Object(u["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]]),b=Object(u["a"])(f,[f.shape[0],1,f.shape[1],f.shape[2]]),y=[1,n],v=[1,l],w="NHWC",x=Object(a["a"])(b,g,y,o,w,v,d);return m?Object(u["a"])(x,[x.shape[2],x.shape[3]]):Object(u["a"])(x,[x.shape[0],x.shape[2],x.shape[3]])}const l=Object(o["b"])({conv1d_:c})},"76c2":function(t,e,n){"use strict";n.r(e),n.d(e,"makeTypesMatch",(function(){return s})),n.d(e,"assertTypesMatch",(function(){return o})),n.d(e,"isTensorInList",(function(){return u})),n.d(e,"getTensorsInContainer",(function(){return c}));var r=n("34d7"),i=n("23bf"),a=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e){if(t.dtype===e.dtype)return[t,e];const n=Object(i["c"])(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function o(t,e){Object(a["b"])(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function u(t,e){return e.some(e=>e.id===t.id)}function c(t){const e=[],n=new Set;return l(t,e,n),e}function l(t,e,n){if(null==t)return;if(t instanceof r["a"])return void e.push(t);if(!d(t))return;const i=t;for(const r in i){const t=i[r];n.has(t)||(n.add(t),l(t,e,n))}}function d(t){return Array.isArray(t)||"object"===typeof t}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7917:function(t,e,n){"use strict";var r=n("c532");function i(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r["a"].inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:r["a"].toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const a=i.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{s[t]={value:t}}),Object.defineProperties(i,s),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=(t,e,n,s,o,u)=>{const c=Object.create(a);return r["a"].toFlatObject(t,c,(function(t){return t!==Error.prototype}),t=>"isAxiosError"!==t),i.call(c,t.message,e,n,s,o),c.cause=t,c.name=t.name,u&&Object.assign(c,u),c},e["a"]=i},"7aec":function(t,e,n){(function(t){var r;(function(t,i,a){function s(t){var e=this;function n(t,e){var n,r,i,a,s,o=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(s=s+1640531527|0,n=o[127&a]^=r+s,i=0==n?i+1:0);for(i>=128&&(o[127&(e&&e.length||0)]=-1),i=127,a=512;a>0;--a)r=o[i+34&127],n=o[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[i]=r^n;t.w=s,t.X=o,t.i=i}e.next=function(){var t,n,r=e.w,i=e.X,a=e.i;return e.w=r=r+1640531527|0,n=i[a+34&127],t=i[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[a]=n^t,e.i=a,n+(r^r>>>16)|0},n(e,t)}function o(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new s(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xor4096=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"7b0b":function(t,e,n){var r=n("1d80"),i=Object;t.exports=function(t){return i(r(t))}},"7cde":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=1.7580993408473768,i=1.0507009873554805},"7e36":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","atan"),n={x:e};return r["a"].runKernel(i["l"],n)}const u=Object(s["b"])({atan_:o})},"7ed6":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(){return"undefined"!==typeof navigator&&null!=navigator}let i;function a(t){i=t}function s(t){if(void 0!==i)return i;if(t||r()){if(t||(t=navigator),"ReactNative"===t.product)return!0;const e=t.userAgent||t.vendor||("undefined"!==typeof window?window.opera:"");if(!e){const e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function o(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(e),n.d(e,"mockIsMobile",(function(){return a})),n.d(e,"isMobile",(function(){return s})),n.d(e,"isBrowser",(function(){return o}))},"804a":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("538e"),i=n("a3f7"),a=n("deb3"),s=n("4f20"),o=n("1359"),u=n("c021"),c=n("a5aa"),l=n("54ef"),d=n("a009"),h=n("e053");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p(t,e=-1){const n=Object(i["a"])(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);const l=Object(r["a"])((t,n)=>{const r=!0,i=Object(u["a"])(t,e,!0),l=Object(d["a"])(t,i),p=Object(d["a"])(Object(a["a"])(l,"float32"),Object(o["a"])(Object(h["a"])(Object(s["a"])(l),e,r)));n([p]);const f=(t,n)=>{const[r]=n,i=!0,a=Object(s["a"])(r);return Object(d["a"])(t,Object(c["a"])(Object(h["a"])(t,e,i),a))};return{value:p,gradFunc:f}});return l(n)}const f=Object(l["b"])({logSoftmax_:p})},"825a":function(t,e,n){var r=n("861d"),i=String,a=TypeError;t.exports=function(t){if(r(t))return t;throw a(i(t)+" is not an object")}},8389:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e,n){const r=i(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function i(t,e,n){return s(t,e,n||a)}function a(t,e){return t>e?1:t<e?-1:0}function s(t,e,n){let r=0,i=t.length,a=0,s=!1;while(r<i){a=r+(i-r>>>1);const o=n(e,t[a]);o>0?r=a+1:(i=a,s=!o)}return s?r:-r-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o(t,e,n,r,i){return l(t,e,n,r,i,0)}function u(t,e,n,r,i,a){return l(t,e,n,r,i,0,!1,a,!0)}function c(t,e,n,r,i,a){return l(t,e,n,r,i,a,!0)}function l(t,e,n,i,a,s,o=!1,u=!1,c=!1){const l=[];for(let r=0;r<e.length;r++)e[r]>a&&l.push({score:e[r],boxIndex:r,suppressBeginIndex:0});l.sort(p);const f=s>0?-.5/s:0,m=[],g=[];while(m.length<n&&l.length>0){const e=l.pop(),{score:n,boxIndex:s,suppressBeginIndex:o}=e;if(n<a)break;let u=!1;for(let r=m.length-1;r>=o;--r){const n=d(t,s,m[r]);if(n>=i){u=!0;break}if(e.score=e.score*h(i,f,n),e.score<=a)break}e.suppressBeginIndex=m.length,u||(e.score===n?(m.push(s),g.push(e.score)):e.score>a&&r(l,e,p))}const b=m.length,y=n-b;u&&y>0&&(m.push(...new Array(y).fill(0)),g.push(...new Array(y).fill(0)));const v={selectedIndices:m};return o&&(v["selectedScores"]=g),c&&(v["validOutputs"]=b),v}function d(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),p=(o-a)*(u-s),f=(d-c)*(h-l);if(p<=0||f<=0)return 0;const m=Math.max(a,c),g=Math.max(s,l),b=Math.min(o,d),y=Math.min(u,h),v=Math.max(b-m,0)*Math.max(y-g,0);return v/(p+f-v)}function h(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function p(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c}))},"838f":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l="NHWC",d=[1,1],h){const p=Object(a["a"])(t,"x","depthwiseConv2d","float32"),f=Object(a["a"])(e,"filter","depthwiseConv2d","float32");let m=p,g=!1;3===p.rank&&(g=!0,m=Object(c["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]])),s["b"](4===m.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),s["b"](4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+f.rank+".");const b="NHWC"===l?m.shape[3]:m.shape[1];s["b"](b===f.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${b}) must match the inChannels dimension in filter ${f.shape[2]}.`),o["a"]("depthwiseConv2d",u,h);const y={x:m,filter:f},v={strides:n,pad:u,dataFormat:l,dilations:d,dimRoundingMode:h},w=r["a"].runKernel(i["Q"],y,v);return g?Object(c["a"])(w,[w.shape[1],w.shape[2],w.shape[3]]):w}const d=Object(u["b"])({depthwiseConv2d_:l})},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"853e":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(a["a"])(t,"x","unique","string_or_numeric");Object(s["b"])(n.rank>0,()=>"The input tensor must be at least 1D");const o={x:n},u={axis:e},[c,l]=r["a"].runKernel(i["nd"],o,u);return{values:c,indices:l}}const c=Object(o["b"])({unique_:u})},"861d":function(t,e,n){var r=n("1626"),i=n("8ea1"),a=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===a}:function(t){return"object"==typeof t?null!==t:r(t)}},8888:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","tanh","float32"),n={x:e};return r["a"].runKernel(i["id"],n)}const u=Object(s["b"])({tanh_:o})},8925:function(t,e,n){var r=n("e330"),i=n("1626"),a=n("c6cd"),s=r(Function.toString);i(a.inspectSource)||(a.inspectSource=function(t){return s(t)}),t.exports=a.inspectSource},"89ed":function(t,e,n){(function(t){var r;(function(t,i,a){function s(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function o(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new s(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.tychei=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"8ae0":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","abs");if("complex64"===e.dtype){const t={x:e};return r["a"].runKernel(i["B"],t)}{const t={x:e};return r["a"].runKernel(i["a"],t)}}const u=Object(s["b"])({abs_:o})},"8b87":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=1e-7,i=1e-4;class a{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class s{refCount(t){return o("refCount")}incRef(t){return o("incRef")}timerAvailable(){return!0}time(t){return o("time")}read(t){return o("read")}readSync(t){return o("readSync")}readToGPU(t,e){return o("readToGPU")}numDataIds(){return o("numDataIds")}disposeData(t,e){return o("disposeData")}write(t,e,n){return o("write")}move(t,e,n,r,i){return o("move")}createTensorFromGPUData(t,e,n){return o("createTensorFromGPUData")}memory(){return o("memory")}floatPrecision(){return o("floatPrecision")}epsilon(){return 32===this.floatPrecision()?r:i}dispose(){return o("dispose")}}function o(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},"8c4f":function(t,e,n){"use strict";function r(t,e){for(var n in e)t[n]=e[n];return t}n.d(e,"a",(function(){return Oe}));var i=/[!'()*]/g,a=function(t){return"%"+t.charCodeAt(0).toString(16)},s=/%2C/g,o=function(t){return encodeURIComponent(t).replace(i,a).replace(s,",")};function u(t){try{return decodeURIComponent(t)}catch(e){0}return t}function c(t,e,n){void 0===e&&(e={});var r,i=n||d;try{r=i(t||"")}catch(o){r={}}for(var a in e){var s=e[a];r[a]=Array.isArray(s)?s.map(l):l(s)}return r}var l=function(t){return null==t||"object"===typeof t?t:String(t)};function d(t){var e={};return t=t.trim().replace(/^(\?|#|&)/,""),t?(t.split("&").forEach((function(t){var n=t.replace(/\+/g," ").split("="),r=u(n.shift()),i=n.length>0?u(n.join("=")):null;void 0===e[r]?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]})),e):e}function h(t){var e=t?Object.keys(t).map((function(e){var n=t[e];if(void 0===n)return"";if(null===n)return o(e);if(Array.isArray(n)){var r=[];return n.forEach((function(t){void 0!==t&&(null===t?r.push(o(e)):r.push(o(e)+"="+o(t)))})),r.join("&")}return o(e)+"="+o(n)})).filter((function(t){return t.length>0})).join("&"):null;return e?"?"+e:""}var p=/\/?$/;function f(t,e,n,r){var i=r&&r.options.stringifyQuery,a=e.query||{};try{a=m(a)}catch(o){}var s={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:a,params:e.params||{},fullPath:y(e,i),matched:t?b(t):[]};return n&&(s.redirectedFrom=y(n,i)),Object.freeze(s)}function m(t){if(Array.isArray(t))return t.map(m);if(t&&"object"===typeof t){var e={};for(var n in t)e[n]=m(t[n]);return e}return t}var g=f(null,{path:"/"});function b(t){var e=[];while(t)e.unshift(t),t=t.parent;return e}function y(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var i=t.hash;void 0===i&&(i="");var a=e||h;return(n||"/")+a(r)+i}function v(t,e,n){return e===g?t===e:!!e&&(t.path&&e.path?t.path.replace(p,"")===e.path.replace(p,"")&&(n||t.hash===e.hash&&w(t.query,e.query)):!(!t.name||!e.name)&&(t.name===e.name&&(n||t.hash===e.hash&&w(t.query,e.query)&&w(t.params,e.params))))}function w(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t).sort(),r=Object.keys(e).sort();return n.length===r.length&&n.every((function(n,i){var a=t[n],s=r[i];if(s!==n)return!1;var o=e[n];return null==a||null==o?a===o:"object"===typeof a&&"object"===typeof o?w(a,o):String(a)===String(o)}))}function x(t,e){return 0===t.path.replace(p,"/").indexOf(e.path.replace(p,"/"))&&(!e.hash||t.hash===e.hash)&&O(t.query,e.query)}function O(t,e){for(var n in e)if(!(n in t))return!1;return!0}function S(t){for(var e=0;e<t.matched.length;e++){var n=t.matched[e];for(var r in n.instances){var i=n.instances[r],a=n.enteredCbs[r];if(i&&a){delete n.enteredCbs[r];for(var s=0;s<a.length;s++)i._isBeingDestroyed||a[s](i)}}}}var k={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,i=e.children,a=e.parent,s=e.data;s.routerView=!0;var o=a.$createElement,u=n.name,c=a.$route,l=a._routerViewCache||(a._routerViewCache={}),d=0,h=!1;while(a&&a._routerRoot!==a){var p=a.$vnode?a.$vnode.data:{};p.routerView&&d++,p.keepAlive&&a._directInactive&&a._inactive&&(h=!0),a=a.$parent}if(s.routerViewDepth=d,h){var f=l[u],m=f&&f.component;return m?(f.configProps&&T(m,s,f.route,f.configProps),o(m,s,i)):o()}var g=c.matched[d],b=g&&g.components[u];if(!g||!b)return l[u]=null,o();l[u]={component:b},s.registerRouteInstance=function(t,e){var n=g.instances[u];(e&&n!==t||!e&&n===t)&&(g.instances[u]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){g.instances[u]=e.componentInstance},s.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==g.instances[u]&&(g.instances[u]=t.componentInstance),S(c)};var y=g.props&&g.props[u];return y&&(r(l[u],{route:c,configProps:y}),T(b,s,c,y)),o(b,s,i)}};function T(t,e,n,i){var a=e.props=_(n,i);if(a){a=e.props=r({},a);var s=e.attrs=e.attrs||{};for(var o in a)t.props&&o in t.props||(s[o]=a[o],delete a[o])}}function _(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}function I(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var i=e.split("/");n&&i[i.length-1]||i.pop();for(var a=t.replace(/^\//,"").split("/"),s=0;s<a.length;s++){var o=a[s];".."===o?i.pop():"."!==o&&i.push(o)}return""!==i[0]&&i.unshift(""),i.join("/")}function C(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var i=t.indexOf("?");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{path:t,query:n,hash:e}}function A(t){return t.replace(/\/(?:\s*\/)+/g,"/")}var E=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},N=X,j=P,D=M,$=z,R=K,F=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function P(t,e){var n,r=[],i=0,a=0,s="",o=e&&e.delimiter||"/";while(null!=(n=F.exec(t))){var u=n[0],c=n[1],l=n.index;if(s+=t.slice(a,l),a=l+u.length,c)s+=c[1];else{var d=t[a],h=n[2],p=n[3],f=n[4],m=n[5],g=n[6],b=n[7];s&&(r.push(s),s="");var y=null!=h&&null!=d&&d!==h,v="+"===g||"*"===g,w="?"===g||"*"===g,x=n[2]||o,O=f||m;r.push({name:p||i++,prefix:h||"",delimiter:x,optional:w,repeat:v,partial:y,asterisk:!!b,pattern:O?U(O):b?".*":"[^"+V(x)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function M(t,e){return z(P(t,e),e)}function L(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function B(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function z(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"===typeof t[r]&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",G(e)));return function(e,r){for(var i="",a=e||{},s=r||{},o=s.pretty?L:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!==typeof c){var l,d=a[c.name];if(null==d){if(c.optional){c.partial&&(i+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(E(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(l=o(d[h]),!n[u].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===h?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?B(d):o(d),!n[u].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function V(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function U(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function W(t,e){return t.keys=e,t}function G(t){return t&&t.sensitive?"":"i"}function H(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return W(t,e)}function q(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(X(t[i],e,n).source);var a=new RegExp("(?:"+r.join("|")+")",G(n));return W(a,e)}function J(t,e,n){return K(P(t,n),e,n)}function K(t,e,n){E(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,a="",s=0;s<t.length;s++){var o=t[s];if("string"===typeof o)a+=V(o);else{var u=V(o.prefix),c="(?:"+o.pattern+")";e.push(o),o.repeat&&(c+="(?:"+u+c+")*"),c=o.optional?o.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",a+=c}}var l=V(n.delimiter||"/"),d=a.slice(-l.length)===l;return r||(a=(d?a.slice(0,-l.length):a)+"(?:"+l+"(?=$))?"),a+=i?"$":r&&d?"":"(?="+l+"|$)",W(new RegExp("^"+a,G(n)),e)}function X(t,e,n){return E(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?H(t,e):E(t)?q(t,e,n):J(t,e,n)}N.parse=j,N.compile=D,N.tokensToFunction=$,N.tokensToRegExp=R;var Y=Object.create(null);function Z(t,e,n){e=e||{};try{var r=Y[t]||(Y[t]=N.compile(t));return"string"===typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(i){return""}finally{delete e[0]}}function Q(t,e,n,i){var a="string"===typeof t?{path:t}:t;if(a._normalized)return a;if(a.name){a=r({},t);var s=a.params;return s&&"object"===typeof s&&(a.params=r({},s)),a}if(!a.path&&a.params&&e){a=r({},a),a._normalized=!0;var o=r(r({},e.params),a.params);if(e.name)a.name=e.name,a.params=o;else if(e.matched.length){var u=e.matched[e.matched.length-1].path;a.path=Z(u,o,"path "+e.path)}else 0;return a}var l=C(a.path||""),d=e&&e.path||"/",h=l.path?I(l.path,d,n||a.append):d,p=c(l.query,a.query,i&&i.options.parseQuery),f=a.hash||l.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:p,hash:f}}var tt,et=[String,Object],nt=[String,Array],rt=function(){},it={name:"RouterLink",props:{to:{type:et,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:nt,default:"click"}},render:function(t){var e=this,n=this.$router,i=this.$route,a=n.resolve(this.to,i,this.append),s=a.location,o=a.route,u=a.href,c={},l=n.options.linkActiveClass,d=n.options.linkExactActiveClass,h=null==l?"router-link-active":l,p=null==d?"router-link-exact-active":d,m=null==this.activeClass?h:this.activeClass,g=null==this.exactActiveClass?p:this.exactActiveClass,b=o.redirectedFrom?f(null,Q(o.redirectedFrom),null,n):o;c[g]=v(i,b,this.exactPath),c[m]=this.exact||this.exactPath?c[g]:x(i,b);var y=c[g]?this.ariaCurrentValue:null,w=function(t){at(t)&&(e.replace?n.replace(s,rt):n.push(s,rt))},O={click:at};Array.isArray(this.event)?this.event.forEach((function(t){O[t]=w})):O[this.event]=w;var S={class:c},k=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:u,route:o,navigate:w,isActive:c[m],isExactActive:c[g]});if(k){if(1===k.length)return k[0];if(k.length>1||!k.length)return 0===k.length?t():t("span",{},k)}if("a"===this.tag)S.on=O,S.attrs={href:u,"aria-current":y};else{var T=st(this.$slots.default);if(T){T.isStatic=!1;var _=T.data=r({},T.data);for(var I in _.on=_.on||{},_.on){var C=_.on[I];I in O&&(_.on[I]=Array.isArray(C)?C:[C])}for(var A in O)A in _.on?_.on[A].push(O[A]):_.on[A]=w;var E=T.data.attrs=r({},T.data.attrs);E.href=u,E["aria-current"]=y}else S.on=O}return t(this.tag,S,this.$slots.default)}};function at(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function st(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=st(e.children)))return e}}function ot(t){if(!ot.installed||tt!==t){ot.installed=!0,tt=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",k),t.component("RouterLink",it);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var ut="undefined"!==typeof window;function ct(t,e,n,r,i){var a=e||[],s=n||Object.create(null),o=r||Object.create(null);t.forEach((function(t){lt(a,s,o,t,i)}));for(var u=0,c=a.length;u<c;u++)"*"===a[u]&&(a.push(a.splice(u,1)[0]),c--,u--);return{pathList:a,pathMap:s,nameMap:o}}function lt(t,e,n,r,i,a){var s=r.path,o=r.name;var u=r.pathToRegexpOptions||{},c=ht(s,i,u.strict);"boolean"===typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var l={path:c,regex:dt(c,u),components:r.components||{default:r.component},alias:r.alias?"string"===typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:o,parent:i,matchAs:a,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=a?A(a+"/"+r.path):void 0;lt(t,e,n,r,l,i)})),e[l.path]||(t.push(l.path),e[l.path]=l),void 0!==r.alias)for(var d=Array.isArray(r.alias)?r.alias:[r.alias],h=0;h<d.length;++h){var p=d[h];0;var f={path:p,children:r.children};lt(t,e,n,f,i,l.path||"/")}o&&(n[o]||(n[o]=l))}function dt(t,e){var n=N(t,[],e);return n}function ht(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]||null==e?t:A(e.path+"/"+t)}function pt(t,e){var n=ct(t),r=n.pathList,i=n.pathMap,a=n.nameMap;function s(t){ct(t,r,i,a)}function o(t,e){var n="object"!==typeof t?a[t]:void 0;ct([e||t],r,i,a,n),n&&n.alias.length&&ct(n.alias.map((function(t){return{path:t,children:[e]}})),r,i,a,n)}function u(){return r.map((function(t){return i[t]}))}function c(t,n,s){var o=Q(t,n,!1,e),u=o.name;if(u){var c=a[u];if(!c)return h(null,o);var l=c.regex.keys.filter((function(t){return!t.optional})).map((function(t){return t.name}));if("object"!==typeof o.params&&(o.params={}),n&&"object"===typeof n.params)for(var d in n.params)!(d in o.params)&&l.indexOf(d)>-1&&(o.params[d]=n.params[d]);return o.path=Z(c.path,o.params,'named route "'+u+'"'),h(c,o,s)}if(o.path){o.params={};for(var p=0;p<r.length;p++){var f=r[p],m=i[f];if(ft(m.regex,o.path,o.params))return h(m,o,s)}}return h(null,o)}function l(t,n){var r=t.redirect,i="function"===typeof r?r(f(t,n,null,e)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return h(null,n);var s=i,o=s.name,u=s.path,l=n.query,d=n.hash,p=n.params;if(l=s.hasOwnProperty("query")?s.query:l,d=s.hasOwnProperty("hash")?s.hash:d,p=s.hasOwnProperty("params")?s.params:p,o){a[o];return c({_normalized:!0,name:o,query:l,hash:d,params:p},void 0,n)}if(u){var m=mt(u,t),g=Z(m,p,'redirect route with path "'+m+'"');return c({_normalized:!0,path:g,query:l,hash:d},void 0,n)}return h(null,n)}function d(t,e,n){var r=Z(n,e.params,'aliased route with path "'+n+'"'),i=c({_normalized:!0,path:r});if(i){var a=i.matched,s=a[a.length-1];return e.params=i.params,h(s,e)}return h(null,e)}function h(t,n,r){return t&&t.redirect?l(t,r||n):t&&t.matchAs?d(t,n,t.matchAs):f(t,n,r,e)}return{match:c,addRoute:o,getRoutes:u,addRoutes:s}}function ft(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var i=1,a=r.length;i<a;++i){var s=t.keys[i-1];s&&(n[s.name||"pathMatch"]="string"===typeof r[i]?u(r[i]):r[i])}return!0}function mt(t,e){return I(t,e.parent?e.parent.path:"/",!0)}var gt=ut&&window.performance&&window.performance.now?window.performance:Date;function bt(){return gt.now().toFixed(3)}var yt=bt();function vt(){return yt}function wt(t){return yt=t}var xt=Object.create(null);function Ot(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),n=r({},window.history.state);return n.key=vt(),window.history.replaceState(n,"",e),window.addEventListener("popstate",Tt),function(){window.removeEventListener("popstate",Tt)}}function St(t,e,n,r){if(t.app){var i=t.options.scrollBehavior;i&&t.app.$nextTick((function(){var a=_t(),s=i.call(t,e,n,r?a:null);s&&("function"===typeof s.then?s.then((function(t){Dt(t,a)})).catch((function(t){0})):Dt(s,a))}))}}function kt(){var t=vt();t&&(xt[t]={x:window.pageXOffset,y:window.pageYOffset})}function Tt(t){kt(),t.state&&t.state.key&&wt(t.state.key)}function _t(){var t=vt();if(t)return xt[t]}function It(t,e){var n=document.documentElement,r=n.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-r.left-e.x,y:i.top-r.top-e.y}}function Ct(t){return Nt(t.x)||Nt(t.y)}function At(t){return{x:Nt(t.x)?t.x:window.pageXOffset,y:Nt(t.y)?t.y:window.pageYOffset}}function Et(t){return{x:Nt(t.x)?t.x:0,y:Nt(t.y)?t.y:0}}function Nt(t){return"number"===typeof t}var jt=/^#\d/;function Dt(t,e){var n="object"===typeof t;if(n&&"string"===typeof t.selector){var r=jt.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(r){var i=t.offset&&"object"===typeof t.offset?t.offset:{};i=Et(i),e=It(r,i)}else Ct(t)&&(e=At(t))}else n&&Ct(t)&&(e=At(t));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:t.behavior}):window.scrollTo(e.x,e.y))}var $t=ut&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Rt(t,e){kt();var n=window.history;try{if(e){var i=r({},n.state);i.key=vt(),n.replaceState(i,"",t)}else n.pushState({key:wt(bt())},"",t)}catch(a){window.location[e?"replace":"assign"](t)}}function Ft(t){Rt(t,!0)}var Pt={redirected:2,aborted:4,cancelled:8,duplicated:16};function Mt(t,e){return Vt(t,e,Pt.redirected,'Redirected when going from "'+t.fullPath+'" to "'+Wt(e)+'" via a navigation guard.')}function Lt(t,e){var n=Vt(t,e,Pt.duplicated,'Avoided redundant navigation to current location: "'+t.fullPath+'".');return n.name="NavigationDuplicated",n}function Bt(t,e){return Vt(t,e,Pt.cancelled,'Navigation cancelled from "'+t.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function zt(t,e){return Vt(t,e,Pt.aborted,'Navigation aborted from "'+t.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}function Vt(t,e,n,r){var i=new Error(r);return i._isRouter=!0,i.from=t,i.to=e,i.type=n,i}var Ut=["params","query","hash"];function Wt(t){if("string"===typeof t)return t;if("path"in t)return t.path;var e={};return Ut.forEach((function(n){n in t&&(e[n]=t[n])})),JSON.stringify(e,null,2)}function Gt(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function Ht(t,e){return Gt(t)&&t._isRouter&&(null==e||t.type===e)}function qt(t,e,n){var r=function(i){i>=t.length?n():t[i]?e(t[i],(function(){r(i+1)})):r(i+1)};r(0)}function Jt(t){return function(e,n,r){var i=!1,a=0,s=null;Kt(t,(function(t,e,n,o){if("function"===typeof t&&void 0===t.cid){i=!0,a++;var u,c=Qt((function(e){Zt(e)&&(e=e.default),t.resolved="function"===typeof e?e:tt.extend(e),n.components[o]=e,a--,a<=0&&r()})),l=Qt((function(t){var e="Failed to resolve async component "+o+": "+t;s||(s=Gt(t)?t:new Error(e),r(s))}));try{u=t(c,l)}catch(h){l(h)}if(u)if("function"===typeof u.then)u.then(c,l);else{var d=u.component;d&&"function"===typeof d.then&&d.then(c,l)}}})),i||r()}}function Kt(t,e){return Xt(t.map((function(t){return Object.keys(t.components).map((function(n){return e(t.components[n],t.instances[n],t,n)}))})))}function Xt(t){return Array.prototype.concat.apply([],t)}var Yt="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Zt(t){return t.__esModule||Yt&&"Module"===t[Symbol.toStringTag]}function Qt(t){var e=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}var te=function(t,e){this.router=t,this.base=ee(e),this.current=g,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function ee(t){if(!t)if(ut){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function ne(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r;n++)if(t[n]!==e[n])break;return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function re(t,e,n,r){var i=Kt(t,(function(t,r,i,a){var s=ie(t,e);if(s)return Array.isArray(s)?s.map((function(t){return n(t,r,i,a)})):n(s,r,i,a)}));return Xt(r?i.reverse():i)}function ie(t,e){return"function"!==typeof t&&(t=tt.extend(t)),t.options[e]}function ae(t){return re(t,"beforeRouteLeave",oe,!0)}function se(t){return re(t,"beforeRouteUpdate",oe)}function oe(t,e){if(e)return function(){return t.apply(e,arguments)}}function ue(t){return re(t,"beforeRouteEnter",(function(t,e,n,r){return ce(t,n,r)}))}function ce(t,e,n){return function(r,i,a){return t(r,i,(function(t){"function"===typeof t&&(e.enteredCbs[n]||(e.enteredCbs[n]=[]),e.enteredCbs[n].push(t)),a(t)}))}}te.prototype.listen=function(t){this.cb=t},te.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},te.prototype.onError=function(t){this.errorCbs.push(t)},te.prototype.transitionTo=function(t,e,n){var r,i=this;try{r=this.router.match(t,this.current)}catch(s){throw this.errorCbs.forEach((function(t){t(s)})),s}var a=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),e&&e(r),i.ensureURL(),i.router.afterHooks.forEach((function(t){t&&t(r,a)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(t){t(r)})))}),(function(t){n&&n(t),t&&!i.ready&&(Ht(t,Pt.redirected)&&a===g||(i.ready=!0,i.readyErrorCbs.forEach((function(e){e(t)}))))}))},te.prototype.confirmTransition=function(t,e,n){var r=this,i=this.current;this.pending=t;var a=function(t){!Ht(t)&&Gt(t)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(t)})):console.error(t)),n&&n(t)},s=t.matched.length-1,o=i.matched.length-1;if(v(t,i)&&s===o&&t.matched[s]===i.matched[o])return this.ensureURL(),t.hash&&St(this.router,i,t,!1),a(Lt(i,t));var u=ne(this.current.matched,t.matched),c=u.updated,l=u.deactivated,d=u.activated,h=[].concat(ae(l),this.router.beforeHooks,se(c),d.map((function(t){return t.beforeEnter})),Jt(d)),p=function(e,n){if(r.pending!==t)return a(Bt(i,t));try{e(t,i,(function(e){!1===e?(r.ensureURL(!0),a(zt(i,t))):Gt(e)?(r.ensureURL(!0),a(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(a(Mt(i,t)),"object"===typeof e&&e.replace?r.replace(e):r.push(e)):n(e)}))}catch(s){a(s)}};qt(h,p,(function(){var n=ue(d),s=n.concat(r.router.resolveHooks);qt(s,p,(function(){if(r.pending!==t)return a(Bt(i,t));r.pending=null,e(t),r.router.app&&r.router.app.$nextTick((function(){S(t)}))}))}))},te.prototype.updateRoute=function(t){this.current=t,this.cb&&this.cb(t)},te.prototype.setupListeners=function(){},te.prototype.teardown=function(){this.listeners.forEach((function(t){t()})),this.listeners=[],this.current=g,this.pending=null};var le=function(t){function e(e,n){t.call(this,e,n),this._startLocation=de(this.base)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,r=$t&&n;r&&this.listeners.push(Ot());var i=function(){var n=t.current,i=de(t.base);t.current===g&&i===t._startLocation||t.transitionTo(i,(function(t){r&&St(e,t,n,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,i=this,a=i.current;this.transitionTo(t,(function(t){Rt(A(r.base+t.fullPath)),St(r.router,t,a,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this,i=this,a=i.current;this.transitionTo(t,(function(t){Ft(A(r.base+t.fullPath)),St(r.router,t,a,!1),e&&e(t)}),n)},e.prototype.ensureURL=function(t){if(de(this.base)!==this.current.fullPath){var e=A(this.base+this.current.fullPath);t?Rt(e):Ft(e)}},e.prototype.getCurrentLocation=function(){return de(this.base)},e}(te);function de(t){var e=window.location.pathname,n=e.toLowerCase(),r=t.toLowerCase();return!t||n!==r&&0!==n.indexOf(A(r+"/"))||(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var he=function(t){function e(e,n,r){t.call(this,e,n),r&&pe(this.base)||fe()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,r=$t&&n;r&&this.listeners.push(Ot());var i=function(){var e=t.current;fe()&&t.transitionTo(me(),(function(n){r&&St(t.router,n,e,!0),$t||ye(n.fullPath)}))},a=$t?"popstate":"hashchange";window.addEventListener(a,i),this.listeners.push((function(){window.removeEventListener(a,i)}))}},e.prototype.push=function(t,e,n){var r=this,i=this,a=i.current;this.transitionTo(t,(function(t){be(t.fullPath),St(r.router,t,a,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this,i=this,a=i.current;this.transitionTo(t,(function(t){ye(t.fullPath),St(r.router,t,a,!1),e&&e(t)}),n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;me()!==e&&(t?be(e):ye(e))},e.prototype.getCurrentLocation=function(){return me()},e}(te);function pe(t){var e=de(t);if(!/^\/#/.test(e))return window.location.replace(A(t+"/#"+e)),!0}function fe(){var t=me();return"/"===t.charAt(0)||(ye("/"+t),!1)}function me(){var t=window.location.href,e=t.indexOf("#");return e<0?"":(t=t.slice(e+1),t)}function ge(t){var e=window.location.href,n=e.indexOf("#"),r=n>=0?e.slice(0,n):e;return r+"#"+t}function be(t){$t?Rt(ge(t)):window.location.hash=t}function ye(t){$t?Ft(ge(t)):window.location.replace(ge(t))}var ve=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,(function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,(function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)}),n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){var t=e.current;e.index=n,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,t)}))}),(function(t){Ht(t,Pt.duplicated)&&(e.index=n)}))}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(te),we=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pt(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!$t&&!1!==t.fallback,this.fallback&&(e="hash"),ut||(e="abstract"),this.mode=e,e){case"history":this.history=new le(this,t.base);break;case"hash":this.history=new he(this,t.base,this.fallback);break;case"abstract":this.history=new ve(this,t.base);break;default:0}},xe={currentRoute:{configurable:!0}};we.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},xe.currentRoute.get=function(){return this.history&&this.history.current},we.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",(function(){var n=e.apps.indexOf(t);n>-1&&e.apps.splice(n,1),e.app===t&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=t;var n=this.history;if(n instanceof le||n instanceof he){var r=function(t){var r=n.current,i=e.options.scrollBehavior,a=$t&&i;a&&"fullPath"in t&&St(e,t,r,!1)},i=function(t){n.setupListeners(),r(t)};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(t){e.apps.forEach((function(e){e._route=t}))}))}},we.prototype.beforeEach=function(t){return Se(this.beforeHooks,t)},we.prototype.beforeResolve=function(t){return Se(this.resolveHooks,t)},we.prototype.afterEach=function(t){return Se(this.afterHooks,t)},we.prototype.onReady=function(t,e){this.history.onReady(t,e)},we.prototype.onError=function(t){this.history.onError(t)},we.prototype.push=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise((function(e,n){r.history.push(t,e,n)}));this.history.push(t,e,n)},we.prototype.replace=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise((function(e,n){r.history.replace(t,e,n)}));this.history.replace(t,e,n)},we.prototype.go=function(t){this.history.go(t)},we.prototype.back=function(){this.go(-1)},we.prototype.forward=function(){this.go(1)},we.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(t){return Object.keys(t.components).map((function(e){return t.components[e]}))}))):[]},we.prototype.resolve=function(t,e,n){e=e||this.history.current;var r=Q(t,e,n,this),i=this.match(r,e),a=i.redirectedFrom||i.fullPath,s=this.history.base,o=ke(s,a,this.mode);return{location:r,route:i,href:o,normalizedTo:r,resolved:i}},we.prototype.getRoutes=function(){return this.matcher.getRoutes()},we.prototype.addRoute=function(t,e){this.matcher.addRoute(t,e),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},we.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(we.prototype,xe);var Oe=we;function Se(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function ke(t,e,n){var r="hash"===n?"#"+e:e;return t?A(t+"/"+r):r}we.install=ot,we.version="3.6.5",we.isNavigationFailure=Ht,we.NavigationFailureType=Pt,we.START_LOCATION=g,ut&&window.Vue&&window.Vue.use(we)},"8cb0":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n,a,o,u=[1,1],c){let l=e,d=!1;3===e.rank&&(d=!0,l=Object(s["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const h={dy:l,filter:n},p={strides:a,pad:o,dimRoundingMode:c,dilations:u,inputShape:t},f=r["a"].runKernel(i["S"],h,p);return d?Object(s["a"])(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const u=Object(a["b"])({depthwiseConv2dNativeBackpropInput_:o})},"8d71":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"x","tile","string_or_numeric");s["b"](n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const o={x:n},u={reps:e};return r["a"].runKernel(i["jd"],o,u)}const c=Object(o["b"])({tile_:u})},"8e05":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("deb3"),u=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t){let e=Object(a["a"])(t,"x","erf");s["b"]("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=Object(o["a"])(e,"float32"));const n={x:e};return r["a"].runKernel(i["bb"],n)}const l=Object(u["b"])({erf_:c})},"8ea1":function(t,e){var n="object"==typeof document&&document.all,r="undefined"==typeof n&&void 0!==n;t.exports={all:n,IS_HTMLDDA:r}},"90e3":function(t,e,n){var r=n("e330"),i=0,a=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+a,36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),a=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},9117:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"a","add"),o=Object(s["a"])(e,"b","add");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["d"],u)}const c=Object(o["b"])({add_:u})},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,c=u>>1,l=-7,d=n?i-1:0,h=n?-1:1,p=t[e+d];for(d+=h,a=p&(1<<-l)-1,p>>=-l,l+=o;l>0;a=256*a+t[e+d],d+=h,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=r;l>0;s=256*s+t[e+d],d+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),a-=c}return(p?-1:1)*s*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var s,o,u,c=8*a-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+d>=1?h/u:h*Math.pow(2,1-d),e*u>=2&&(s++,u/=2),s+d>=l?(o=0,s=l):s+d>=1?(o=(e*u-1)*Math.pow(2,i),s+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&o,p+=f,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;t[n+p]=255&s,p+=f,s/=256,c-=8);t[n+p-f]|=128*m}},"917a":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","relu"),n={x:e};return r["a"].runKernel(i["uc"],n)}const u=Object(s["b"])({relu_:o})},"91a3":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n=0,s=0){const o=Object(a["a"])(t,"x","gather"),u=Object(a["a"])(e,"indices","gather","int32"),c={x:o,indices:u},l={axis:n,batchDims:s};return r["a"].runKernel(i["pb"],c,l)}const u=Object(s["b"])({gather_:o})},"92e0":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c04e"),a=n("8ae0"),s=n("9117"),o=n("c77c"),u=n("09f4"),c=n("a5aa"),l=n("015f"),d=n("a009"),h=n("a09b"),p=n("b2d6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class f extends p["a"]{constructor(t,e,n,a=null,s=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=a,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Object(i["t"])(()=>{this.iteration=Object(l["a"])(0).variable(),this.accBeta1=Object(l["a"])(e).variable()}),null==a&&(this.epsilon=r["a"].backend.epsilon())}static get className(){return"Adamax"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Object(i["t"])(()=>{const n=Object(d["a"])(1,this.accBeta1),i=Object(o["a"])(-this.learningRate,Object(s["a"])(Object(c["a"])(this.iteration,this.decay),1));e.forEach((e,l)=>{const d=r["a"].registeredVariables[e],p=!1;null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:e+"/m",variable:Object(h["a"])(d).variable(p)}),null==this.accumulatedWeightedInfNorm[l]&&(this.accumulatedWeightedInfNorm[l]={originalName:e+"/v",variable:Object(h["a"])(d).variable(p)});const f=Array.isArray(t)?t[l].tensor:t[e];if(null==f)return;const m=this.accumulatedFirstMoment[l].variable,g=this.accumulatedWeightedInfNorm[l].variable,b=Object(s["a"])(Object(c["a"])(m,this.beta1),Object(c["a"])(f,1-this.beta1)),y=Object(c["a"])(g,this.beta2),v=Object(a["a"])(f),w=Object(u["a"])(y,v);m.assign(b),g.assign(w);const x=Object(s["a"])(Object(c["a"])(Object(o["a"])(i,n),Object(o["a"])(b,Object(s["a"])(w,this.epsilon))),d);d.assign(x)}),this.iteration.assign(Object(s["a"])(this.iteration,1)),this.accBeta1.assign(Object(c["a"])(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(i["d"])(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&Object(i["d"])(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e["learningRate"],e["beta1"],e["beta2"],e["epsilon"],e["decay"])}}},"931f":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==r.instance&&(r.instance=new r),r.instance}static registerSaveRouter(t){r.getInstance().saveRouters.push(t)}static registerLoadRouter(t){r.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return r.getHandlers(t,"save")}static getLoadHandlers(t,e){return r.getHandlers(t,"load",e)}static getHandlers(t,e,n){const i=[],a="load"===e?r.getInstance().loadRouters:r.getInstance().saveRouters;return a.forEach(e=>{const r=e(t,n);null!==r&&i.push(r)}),i}}const i=t=>r.registerSaveRouter(t),a=t=>r.registerLoadRouter(t),s=t=>r.getSaveHandlers(t),o=(t,e)=>r.getLoadHandlers(t,e)},"93b2":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("6ae2"),i=n("a3f7"),a=n("54ef");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(i["a"])(t,"x","square"),n={};return r["a"].runKernel("Square",{x:e},n)}const o=Object(a["b"])({square_:s})},"93db":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){s["b"]("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const o=Object(a["a"])(t,"x","mirrorPad");if(0===o.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");s["b"](e.length===o.rank,()=>`Padding doesn't match input. Must be ${o.rank}. Got ${e.length}.`);const u="reflect"===n?1:0;for(let r=0;r<o.rank;r++)s["b"](2===e[r].length,()=>"Invalid number of paddings. Must be length of 2 each."),s["b"](e[r][0]>=0&&e[r][0]<=o.shape[r]-u&&e[r][1]>=0&&e[r][1]<=o.shape[r]-u,()=>`Padding in dimension ${r} cannot be greater than or equal to ${o.shape[r]-u} or less than 0 for input of shape `+o.shape);const c={paddings:e,mode:n},l={x:o};return r["a"].runKernel(i["Wb"],l,c)}const c=Object(o["b"])({mirrorPad_:u})},9489:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},"94ca":function(t,e,n){var r=n("d039"),i=n("1626"),a=/#|\.prototype\./,s=function(t,e){var n=u[o(t)];return n==l||n!=c&&(i(e)?r(e):!!e)},o=s.normalize=function(t){return String(t).replace(a,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},9748:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("deb3"),u=n("b818"),c=n("54ef"),l=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e,n,c,d){const h=Object(a["a"])(t,"x","avgPool","float32"),p=1;s["b"](u["i"](n,p),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${p}'`);let f=h,m=!1;3===h.rank&&(m=!0,f=Object(l["a"])(h,[1,h.shape[0],h.shape[1],h.shape[2]])),s["b"](4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),u["a"]("avgPool",c,d);const g={x:f},b={filterSize:e,strides:n,pad:c,dimRoundingMode:d};let y=r["a"].runKernel(i["o"],g,b);return y=Object(o["a"])(y,h.dtype),m?Object(l["a"])(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const h=Object(c["b"])({avgPool_:d})},9847:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},"99d0":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("6ad5"),s=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n,s,u){a["b"](t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let c=t,l=e,d=!1;4===e.rank&&(d=!0,l=Object(o["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),c=[1,t[0],t[1],t[2],t[3]]);const h=c[4],p=l.shape[4];a["b"](5===c.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+c.length+"."),a["b"](5===l.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+l.rank),a["b"](5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),a["b"](h===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[3]}.`),a["b"](p===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[4]}.`);const f={dy:l,filter:n},m={pad:u,strides:s,inputShape:c},g=r["a"].runKernel(i["I"],f,m);return d?Object(o["a"])(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const c=Object(s["b"])({conv3DBackpropInput_:u})},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),a=n("aed9"),s=n("825a"),o=n("a04b"),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";e.f=r?a?function(t,e,n){if(s(t),e=o(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var r=l(t,e);r&&r[p]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:d in n?n[d]:r[d],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=o(e),s(n),i)try{return c(t,e,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9e38":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","elu","float32"),n={x:e};return r["a"].runKernel(i["Y"],n)}const u=Object(s["b"])({elu_:o})},"9e7b":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]},"9f31":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("6ae2"),i=n("c04e"),a=n("9117"),s=n("c77c"),o=n("a5aa"),u=n("163a"),c=n("93b2"),l=n("a09b"),d=n("b2d6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class h extends d["a"]{constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=r["a"].backend.epsilon())}static get className(){return"Adadelta"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const d=r["a"].registeredVariables[e],h=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:e+"/accum_grad",variable:Object(i["t"])(()=>Object(l["a"])(d).variable(h))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:e+"/accum_var",variable:Object(i["t"])(()=>Object(l["a"])(d).variable(h))});const p=Array.isArray(t)?t[n].tensor:t[e];if(null==p)return;const f=this.accumulatedGrads[n].variable,m=this.accumulatedUpdates[n].variable;Object(i["t"])(()=>{const t=Object(a["a"])(Object(o["a"])(f,this.rho),Object(o["a"])(Object(c["a"])(p),1-this.rho)),e=Object(o["a"])(Object(s["a"])(Object(u["a"])(Object(a["a"])(m,this.epsilon)),Object(u["a"])(Object(a["a"])(f,this.epsilon))),p),n=Object(a["a"])(Object(o["a"])(m,this.rho),Object(o["a"])(Object(c["a"])(e),1-this.rho));f.assign(t),m.assign(n);const r=Object(a["a"])(Object(o["a"])(e,-this.learningRate),d);d.assign(r)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Object(i["d"])(this.accumulatedGrads.map(t=>t.variable)),Object(i["d"])(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=t.length/2,n=!1;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e["learningRate"],e["rho"],e["epsilon"])}}},"9fe6":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l){const d=Object(a["a"])(t,"x","maxPool"),h=1;let p=d,f=!1;3===d.rank&&(f=!0,p=Object(c["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2]])),s["b"](4===p.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${p.rank}.`),s["b"](o["i"](n,h),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${h}'`),o["a"]("maxPool",u,l);const m={x:p},g={filterSize:e,strides:n,pad:u,dimRoundingMode:l},b=r["a"].runKernel(i["Nb"],m,g);return f?Object(c["a"])(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const d=Object(u["b"])({maxPool_:l})},"9ffd":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","softplus"),n={x:e};return r["a"].runKernel(i["Pc"],n)}const u=Object(s["b"])({softplus_:o})},a009:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"a","sub"),o=Object(s["a"])(e,"b","sub");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["fd"],u)}const c=Object(o["b"])({sub_:u})},a04b:function(t,e,n){var r=n("c04ea"),i=n("d9b5");t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},a09b:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","zerosLike"),n={x:e};return r["a"].runKernel(i["rd"],n)}const u=Object(s["b"])({zerosLike_:o})},a34f:function(t,e,n){"use strict";n.r(e),n.d(e,"validateUpdateShape",(function(){return i})),n.d(e,"validateInput",(function(){return a})),n.d(e,"calculateShapes",(function(){return s}));var r=n("6ad5");function i(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+`, indices.shape: ${e.shape}, shape: ${t}`+`, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(a+" update.rank != "+(i+t.length-r));for(let s=0;s<i;++s)if(n.shape[s]!==e.shape[s])throw new Error(a+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-i;++s)if(n.shape[s+i]!==t[s+r])throw new Error(a+` updates.shape[${s+i}] (${n.shape[s+i]}) != shape[${s+i}] (${t[s+i]})`)}function a(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}i(n,e,t)}function s(t,e,n){const i=e.shape.length,a=i>1?e.shape[i-1]:1,s=n.length;let o=1;for(let r=a;r<s;++r)o*=n[r];const u=a<1?1:a,c=Object(r["N"])(e.shape)/u,l=[...Object(r["j"])(n.slice(0,a)),1],d=Object(r["N"])(n);return{sliceRank:a,numUpdates:c,sliceSize:o,strides:l,outputSize:d}}},a374:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","acos"),n={x:e};return r["a"].runKernel(i["b"],n)}const u=Object(s["b"])({acos_:o})},a3f7:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h}));var r=n("6ae2"),i=n("b333"),a=n("34d7"),s=n("eb7e"),o=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=t;if(Object(s["isTypedArray"])(t))return"string"===e?[]:[t.length];const r="object"===typeof t;if(r){if("texture"in t){const e=t.channels||"RGBA";return[t.height,t.width*e.length]}if("buffer"in t&&!(t.buffer instanceof ArrayBuffer))return[t.buffer.size/(null==e?4:Object(o["g"])(e))]}if(!Array.isArray(t))return[];const a=[];while(Array.isArray(n)||Object(s["isTypedArray"])(n)&&"string"!==e)a.push(n.length),n=n[0];return Array.isArray(t)&&Object(i["c"])().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(t,a,[]),a}function c(t,e,n){if(n=n||[],!Array.isArray(t)&&!Object(s["isTypedArray"])(t))return void Object(o["b"])(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);Object(o["b"])(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Object(o["b"])(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)c(t[i],r,n.concat(i))}function l(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function d(t,e,n,i="numeric"){if(t instanceof a["a"])return l(i,t.dtype,e,n),t;let c=Object(o["r"])(t);if("string"!==c&&["bool","int32","float32"].indexOf(i)>=0&&(c=i),l(i,c,e,n),null==t||!Object(s["isTypedArray"])(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t){const r=null==t?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const d=u(t,c);Object(s["isTypedArray"])(t)||Array.isArray(t)||(t=[t]);const h=!0,p="string"!==c?Object(s["toTypedArray"])(t,c):Object(s["flatten"])(t,[],h);return r["a"].makeTensor(p,d,c)}function h(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);const i=t;return i.map((t,i)=>d(t,`${e}[${i}]`,n,r))}},a49d:function(t,e,n){var r;(function(i,a,s){var o,u=256,c=6,l=52,d="random",h=s.pow(u,c),p=s.pow(2,l),f=2*p,m=u-1;function g(t,e,n){var r=[];e=1==e?{entropy:!0}:e||{};var i=w(v(e.entropy?[t,O(a)]:null==t?x():t,3),r),o=new b(r),l=function(){var t=o.g(c),e=h,n=0;while(t<p)t=(t+n)*u,e*=u,n=o.g(1);while(t>=f)t/=2,e/=2,n>>>=1;return(t+n)/e};return l.int32=function(){return 0|o.g(4)},l.quick=function(){return o.g(4)/4294967296},l.double=l,w(O(o.S),a),(e.pass||n||function(t,e,n,r){return r&&(r.S&&y(r,o),t.state=function(){return y(o,{})}),n?(s[d]=t,e):t})(l,i,"global"in e?e.global:this==s,e.state)}function b(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];n||(t=[n++]);while(i<u)s[i]=i++;for(i=0;i<u;i++)s[i]=s[a=m&a+t[i%n]+(e=s[i])],s[a]=e;(r.g=function(t){var e,n=0,i=r.i,a=r.j,s=r.S;while(t--)e=s[i=m&i+1],n=n*u+s[m&(s[i]=s[a=m&a+e])+(s[a]=e)];return r.i=i,r.j=a,n})(u)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(v(t[n],e-1))}catch(a){}return r.length?r:"string"==i?t:t+"\0"}function w(t,e){var n,r=t+"",i=0;while(i<r.length)e[m&i]=m&(n^=19*e[m&i])+r.charCodeAt(i++);return O(e)}function x(){try{var t;return o&&(t=o.randomBytes)?t=t(u):(t=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(t)),O(t)}catch(r){var e=i.navigator,n=e&&e.plugins;return[+new Date,i,n,i.screen,O(a)]}}function O(t){return String.fromCharCode.apply(0,t)}if(w(s.random(),a),t.exports){t.exports=g;try{o=n(3)}catch(S){}}else r=function(){return g}.call(e,n,e,t),void 0===r||(t.exports=r)})("undefined"!==typeof self?self:this,[],Math)},a49e:function(t,e,n){(function(t){var r;(function(t,i,a){function s(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new s(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xorwow=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},a5aa:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"a","mul"),o=Object(s["a"])(e,"b","mul");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["Zb"],u)}const c=Object(o["b"])({mul_:u})},a80f:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},ab36:function(t,e,n){var r=n("861d"),i=n("9112");t.exports=function(t,e){r(e)&&"cause"in e&&i(t,"cause",e.cause)}},ae6d:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=null,n=!1){const s=Object(a["a"])(t,"x","min"),o={x:s},u={axis:e,keepDims:n};return r["a"].runKernel(i["Ub"],o,u)}const u=Object(s["b"])({min_:o})},aeab:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},aeb0:function(t,e,n){var r=n("9bf2").f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},aed9:function(t,e,n){var r=n("83ab"),i=n("d039");t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},afda:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("a3f7"),i=n("6ad5"),a=n("9117"),s=n("36e5"),o=n("4f20"),u=n("1359"),c=n("c021"),l=n("54ef"),d=n("35c9"),h=n("a009"),p=n("e053");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e=null,n=!1){const l=Object(r["a"])(t,"x","logSumExp"),f=Object(i["H"])(e,l.shape),m=Object(c["a"])(l,f,!0),g=Object(h["a"])(l,m),b=Object(o["a"])(g),y=Object(p["a"])(b,f),v=Object(u["a"])(y),w=Object(a["a"])(Object(d["a"])(m,v.shape),v);if(n){const t=Object(s["e"])(w.shape,f);return Object(d["a"])(w,t)}return w}const m=Object(l["b"])({logSumExp_:f})},b21c:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","lessEqual","string_or_numeric"),u=Object(s["a"])(e,"b","lessEqual","string_or_numeric");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u};return r["a"].runKernel(i["Cb"],c)}const l=Object(u["b"])({lessEqual_:c})},b294:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n("b333");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(...t){Object(r["c"])().getBool("IS_TEST")||Object(r["c"])().getBool("PROD")||console.warn(...t)}function a(...t){Object(r["c"])().getBool("IS_TEST")||Object(r["c"])().getBool("PROD")||console.log(...t)}},b2d6:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("c04e"),i=n("538e"),a=n("015f"),s=n("6cae");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class o extends s["Serializable"]{minimize(t,e=!1,n){const{value:i,grads:a}=this.computeGradients(t,n);if(null!=n){const t=n.map(t=>({name:t.name,tensor:a[t.name]}));this.applyGradients(t)}else this.applyGradients(a);return Object(r["d"])(a),e?i:(i.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return Object(i["f"])(t,e)}dispose(){null!=this.iterations_&&Object(r["d"])(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Object(a["a"])(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(o,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients})},b333:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return d}));var r=n("6ad5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i="tfjsflags";class a{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=s,this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&(c().getBool("IS_TEST")||c().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];c().getBool("IS_TEST")||c().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(Object(r["x"])(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const t=this.getQueryParams(this.global.location.search);if(i in t){const e=t[i].split(",");e.forEach(t=>{const[e,n]=t.split(":");this.urlFlags[e]=u(e,n)})}}}function s(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(o(e,n[0],n[1]),n.join("="))),e}function o(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function u(t,e){if(e=e.toLowerCase(),"true"===e||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function c(){return l}let l=null;function d(t){l=t}},b39e:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","selu"),n={x:e};return r["a"].runKernel(i["Ic"],n)}const u=Object(s["b"])({selu_:o})},b42e:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?r:n)(e)}},b500:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","reciprocal"),n={x:e};return r["a"].runKernel(i["tc"],n)}const u=Object(s["b"])({reciprocal_:o})},b61d:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("6ad5"),i=n("0777"),a=n("649e"),s=n("24b0"),o=n("54ef"),u=n("d7b0"),c=n("35c9"),l=n("6d3c"),d=n("45bb"),h=n("5a2c"),p=n("a09b"),f=n("1ab7");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function m(t,e){Object(r["b"])("float32"===t.dtype,()=>"The dtype for rfft() must be real value but got "+t.dtype);let n=t.shape[t.shape.length-1];const o=t.size/n;let m;if(null!=e&&e<n){const r=t.shape.map(t=>0),i=t.shape.map(t=>t);i[t.shape.length-1]=e,m=Object(l["a"])(t,r,i),n=e}else if(null!=e&&e>n){const r=t.shape.map(t=>t);r[t.shape.length-1]=e-n,m=Object(a["a"])([t,Object(h["a"])(r)],t.shape.length-1),n=e}else m=t;const g=Object(p["a"])(m),b=Object(c["a"])(Object(i["a"])(m,g),[o,n]),y=Object(f["a"])(b),v=Math.floor(n/2)+1,w=Object(u["a"])(y),x=Object(s["a"])(y),O=Object(d["a"])(w,[v,n-v],w.shape.length-1),S=Object(d["a"])(x,[v,n-v],x.shape.length-1),k=m.shape.slice();return k[m.shape.length-1]=v,Object(c["a"])(Object(i["a"])(O[0],S[0]),k)}const g=Object(o["b"])({rfft_:m})},b622:function(t,e,n){var r=n("da84"),i=n("5692"),a=n("1a2d"),s=n("90e3"),o=n("04f8"),u=n("fdbf"),c=r.Symbol,l=i("wks"),d=u?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return a(l,t)||(l[t]=o&&a(c,t)?c[t]:d("Symbol."+t)),l[t]}},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),a=n("e3db");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,n,r):"string"===typeof e?f(t,e,n):b(t,e)}function d(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e,n,r){return d(e),e<=0?u(t,e):void 0!==n?"string"===typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function p(t,e){if(d(e),t=u(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(e,n);t=u(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function m(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function g(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=m(t,e),t}function b(t,e){if(c.isBuffer(e)){var n=0|y(e.length);return t=u(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?u(t,0):m(t,e);if("Buffer"===e.type&&a(e.data))return m(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),c.alloc(+t)}function w(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(r)return X(t).length;e=(""+e).toLowerCase(),r=!0}}function x(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return j(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return F(this,e,n);case"base64":return N(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function O(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function S(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:k(t,e,n,r,i);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):k(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function k(t,e,n,r,i){var a,s=1,o=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(a=n;a<o;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*s}else-1!==l&&(a-=a-l),l=-1}else for(n+u>o&&(n=o-u),a=n;a>=0;a--){for(var d=!0,h=0;h<u;h++)if(c(t,a+h)!==c(e,h)){d=!1;break}if(d)return a}return-1}function T(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[n+s]=o}return s}function _(t,e,n,r){return tt(X(e,t.length-n),t,n,r)}function I(t,e,n,r){return tt(Y(e),t,n,r)}function C(t,e,n,r){return I(t,e,n,r)}function A(t,e,n,r){return tt(Q(e),t,n,r)}function E(t,e,n,r){return tt(Z(e,t.length-n),t,n,r)}function N(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function j(t,e,n){n=Math.min(t.length,n);var r=[],i=e;while(i<n){var a,s,o,u,c=t[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:a=t[i+1],128===(192&a)&&(u=(31&c)<<6|63&a,u>127&&(l=u));break;case 3:a=t[i+1],s=t[i+2],128===(192&a)&&128===(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s,u>2047&&(u<55296||u>57343)&&(l=u));break;case 4:a=t[i+1],s=t[i+2],o=t[i+3],128===(192&a)&&128===(192&s)&&128===(192&o)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o,u>65535&&u<1114112&&(l=u))}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return $(r)}e.Buffer=c,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:s(),e.kMaxLength=o(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return h(null,t,e,n)},c.allocUnsafe=function(t){return p(null,t)},c.allocUnsafeSlow=function(t){return p(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=w,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)O(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)O(this,e,e+3),O(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)O(this,e,e+7),O(this,e+1,e+6),O(this,e+2,e+5),O(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?j(this,0,t):x.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,s=n-e,o=Math.min(a,s),u=this.slice(r,i),l=t.slice(e,n),d=0;d<o;++d)if(u[d]!==l[d]){a=u[d],s=l[d];break}return a<s?-1:s<a?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return T(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return I(this,t,e,n);case"latin1":case"binary":return C(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function $(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=D));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function F(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=K(t[a]);return i}function M(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,i,a){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function z(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function V(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function U(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(t,e,n,r,a){return a||U(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function G(t,e,n,r,a){return a||U(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=this[t],i=1,a=0;while(++a<e&&(i*=256))r+=this[t+a]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=this[t],i=1,a=0;while(++a<e&&(i*=256))r+=this[t+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=e,i=1,a=this[t+--r];while(r>0&&(i*=256))a+=this[t+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},c.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;B(this,t,e,n,i,0)}var a=1,s=0;this[e]=255&t;while(++s<n&&(a*=256))this[e+s]=t/a&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;B(this,t,e,n,i,0)}var a=n-1,s=1;this[e+a]=255&t;while(--a>=0&&(s*=256))this[e+a]=t/s&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var a=0,s=1,o=0;this[e]=255&t;while(++a<n&&(s*=256))t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var a=n-1,s=1,o=0;this[e+a]=255&t;while(--a>=0&&(s*=256))t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return W(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return W(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return G(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return G(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=c.isBuffer(t)?t:X(new c(t,r).toString()),o=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%o]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function q(t){if(t=J(t).replace(H,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Z(t,e){for(var n,r,i,a=[],s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s),r=n>>8,i=n%256,a.push(i),a.push(r)}return a}function Q(t){return r.toByteArray(q(t))}function tt(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function et(t){return t!==t}}).call(this,n("c8ba"))},b818:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"k",(function(){return y})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return w})),n.d(e,"h",(function(){return x})),n.d(e,"a",(function(){return O}));var r=n("6ad5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e,n,r,i="NHWC",a){const s=t[3],u=[...e,s],c=x(i);return o(t,u,n,a,r,null,null,c)}function a(t,e,n,r,i,a,s="channelsLast"){const[u,c]=h(e);let l;if("channelsLast"===s)l=[u,c,t[3],t[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=[u,c,t[1],t[1]]}return o(t,l,n,r,i,a,!1,s)}function s(t,e,n,r,i,a,s="NDHWC"){const[o,c,l]=p(e);let d,h;if("NDHWC"===s)h="channelsLast",d=[o,c,l,t[4],t[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat "+s);h="channelsFirst",d=[o,c,l,t[1],t[1]]}return u(t,d,n,r,i,!1,h,a)}function o(t,e,n,r,i,a,s=!1,o="channelsLast"){let[u,c,l,d]=[-1,-1,-1,-1];if("channelsLast"===o)[u,c,l,d]=t;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[u,d,c,l]=t}const[p,g,,b]=e,[y,v]=h(n),[w,x]=h(r),O=f(p,w),S=f(g,x),{padInfo:k,outHeight:T,outWidth:_}=m(i,c,l,y,v,O,S,a,o),I=s?b*d:b;let C;return"channelsFirst"===o?C=[u,I,T,_]:"channelsLast"===o&&(C=[u,T,_,I]),{batchSize:u,dataFormat:o,inHeight:c,inWidth:l,inChannels:d,outHeight:T,outWidth:_,outChannels:I,padInfo:k,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:g,effectiveFilterHeight:O,effectiveFilterWidth:S,dilationHeight:w,dilationWidth:x,inShape:t,outShape:C,filterShape:e}}function u(t,e,n,r,i,a=!1,s="channelsLast",o){let[u,c,l,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[u,c,l,d,h]=t;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);[u,h,c,l,d]=t}const[m,b,y,,v]=e,[w,x,O]=p(n),[S,k,T]=p(r),_=f(m,S),I=f(b,k),C=f(y,T),{padInfo:A,outDepth:E,outHeight:N,outWidth:j}=g(i,c,l,d,w,x,O,_,I,C,o),D=a?v*h:v;let $;return"channelsFirst"===s?$=[u,D,E,N,j]:"channelsLast"===s&&($=[u,E,N,j,D]),{batchSize:u,dataFormat:s,inDepth:c,inHeight:l,inWidth:d,inChannels:h,outDepth:E,outHeight:N,outWidth:j,outChannels:D,padInfo:A,strideDepth:w,strideHeight:x,strideWidth:O,filterDepth:m,filterHeight:b,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:I,effectiveFilterWidth:C,dilationDepth:S,dilationHeight:k,dilationWidth:T,inShape:t,outShape:$,filterShape:e}}function c(t,e,n,r,i){null==r&&(r=d(t,e,n));const a=t[0],s=t[1],o=b((a-e+2*r)/n+1,i),u=b((s-e+2*r)/n+1,i);return[o,u]}function l(t,e,n,r,i,a){null==i&&(i=d(t,e[0],r[0]));const s=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*i>=e[o]&&(s[o]=b((t[o]-e[o]+2*i)/r[o]+1,a));return s}function d(t,e,n,r=1){const i=f(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function h(t){return"number"===typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function p(t){return"number"===typeof t?[t,t,t]:t}function f(t,e){return e<=1?t:t+(t-1)*(e-1)}function m(t,e,n,r,i,a,s,o,u){let l,d,h;if("number"===typeof t){const i=0===t?"VALID":"NUMBER";l={top:t,bottom:t,left:t,right:t,type:i};const s=c([e,n],a,r,t,o);d=s[0],h=s[1]}else if("same"===t){d=Math.ceil(e/r),h=Math.ceil(n/i);const t=Math.max(0,(d-1)*r+a-e),o=Math.max(0,(h-1)*i+s-n),u=Math.floor(t/2),c=t-u,p=Math.floor(o/2),f=o-p;l={top:u,bottom:c,left:p,right:f,type:"SAME"}}else if("valid"===t)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((e-a+1)/r),h=Math.ceil((n-s+1)/i);else{if("object"!==typeof t)throw Error("Unknown padding parameter: "+t);{const c="channelsLast"===u?t[1][0]:t[2][0],p="channelsLast"===u?t[1][1]:t[2][1],f="channelsLast"===u?t[2][0]:t[3][0],m="channelsLast"===u?t[2][1]:t[3][1],g=0===c&&0===p&&0===f&&0===m?"VALID":"EXPLICIT";l={top:c,bottom:p,left:f,right:m,type:g},d=b((e-a+c+p)/r+1,o),h=b((n-s+f+m)/i+1,o)}}return{padInfo:l,outHeight:d,outWidth:h}}function g(t,e,n,r,i,a,s,o,u,c,d){let h,p,f,m;if("valid"===t&&(t=0),"number"===typeof t){const g=0===t?"VALID":"NUMBER";h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:g};const b=l([e,n,r,1],[o,u,c],1,[i,a,s],t,d);p=b[0],f=b[1],m=b[2]}else{if("same"!==t)throw Error("Unknown padding parameter: "+t);{p=Math.ceil(e/i),f=Math.ceil(n/a),m=Math.ceil(r/s);const t=(p-1)*i+o-e,l=(f-1)*a+u-n,d=(m-1)*s+c-r,g=Math.floor(t/2),b=t-g,y=Math.floor(l/2),v=l-y,w=Math.floor(d/2),x=d-w;h={top:y,bottom:v,left:w,right:x,front:g,back:b,type:"SAME"}}}return{padInfo:h,outDepth:p,outHeight:f,outWidth:m}}function b(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function y(t){const[e,n,r]=h(t);return 1===e&&1===n&&1===r}function v(t,e){return y(t)||y(e)}function w(t){return h(t).every(t=>t>0)}function x(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function O(t,e,n){if(null!=n){if("string"===typeof e)throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if("number"===typeof e)r["b"](r["v"](e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else{if("object"!==typeof e)throw Error(`Error in ${t}: Unknown padding parameter: ${e}`);e.forEach(e=>{e.forEach(e=>{r["b"](r["v"](e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`)})})}}}},b838:function(t,e,n){(function(t){var r;(function(t,i,a){function s(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new s(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xor128=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},b980:function(t,e,n){var r=n("d039"),i=n("5c6c");t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},b9b9:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","equal","string_or_numeric"),u=Object(s["a"])(e,"b","equal","string_or_numeric");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u};return r["a"].runKernel(i["ab"],c)}const l=Object(u["b"])({equal_:c})},bb2d:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","greaterEqual","string_or_numeric"),u=Object(s["a"])(e,"b","greaterEqual","string_or_numeric");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u};return r["a"].runKernel(i["rb"],c)}const l=Object(u["b"])({greaterEqual_:c})},bdcf:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function i(t,e){return a(t,e)}function a(t,e,n=new Map,r=new Set){if(null==t)return null;if("function"===typeof Blob&&t instanceof Blob)return t.slice();if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(l(t)){const i=Array.isArray(t)?[]:{};r.add(t);for(const s in t){const o=t[s],u=a(o,e,n,r);i[s]=u}return r.delete(t),t.__proto__&&(i.__proto__=t.__proto__),i}throw new Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function s(t,e=u){return o(t,e)}function o(t,e,n=new Set){const r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(l(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=t.map(t=>t[a]),s=o(r,e,n);i[a]=s}return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function u(t){return null===t?null:l(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}async function c(t,e){const n=new Map;a(t,e,n);for(const a of Array.from(n.keys())){const t=n.get(a);if(r["Ji"].isPromise(t)){const e=await t;n.set(a,e)}}const i=a(t,e,n);return i}function l(t){let e=!1;if(r["hf"]().get("IS_BROWSER"))e=t instanceof TextDecoder;else{const{StringDecoder:r}=n(4);e=t instanceof r}return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"===typeof t&&!(t instanceof r["zd"])&&!(t instanceof Promise)&&!e)}function d(t){return null==t||h(t)||Array.isArray(t)||"object"===typeof t&&t instanceof r["zd"]||r["Ji"].isTypedArray(t)}function h(t){return null===t||"object"!==typeof t&&"function"!==typeof t}},c021:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=null,n=!1){const s=Object(a["a"])(t,"x","max"),o={x:s},u={reductionIndices:e,keepDims:n};return r["a"].runKernel(i["Mb"],o,u)}const u=Object(s["b"])({max_:o})},c04e:function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"h",(function(){return h})),n.d(e,"m",(function(){return p})),n.d(e,"n",(function(){return f})),n.d(e,"t",(function(){return m})),n.d(e,"d",(function(){return g})),n.d(e,"l",(function(){return b})),n.d(e,"u",(function(){return y})),n.d(e,"r",(function(){return v})),n.d(e,"o",(function(){return w})),n.d(e,"k",(function(){return x})),n.d(e,"q",(function(){return O})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return k})),n.d(e,"p",(function(){return T})),n.d(e,"a",(function(){return _})),n.d(e,"s",(function(){return I}));var r=n("6ae2"),i=n("b333"),a=n("34d7"),s=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(){Object(i["c"])().set("PROD",!0)}function u(){Object(i["c"])().set("DEBUG",!0)}function c(){Object(i["c"])().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(t){Object(i["c"])().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d(){r["a"].disposeVariables()}function h(){return r["a"]}function p(){return r["a"].memory()}function f(t){return r["a"].profile(t)}function m(t,e){return r["a"].tidy(t,e)}function g(t){const e=Object(s["getTensorsInContainer"])(t);e.forEach(t=>t.dispose())}function b(t){return r["a"].keep(t)}function y(t){return r["a"].time(t)}function v(t){return r["a"].setBackend(t)}function w(){return r["a"].ready()}function x(){return r["a"].backendName}function O(t){r["a"].removeBackend(t)}function S(t){return r["a"].findBackend(t)}function k(t){return r["a"].findBackendFactory(t)}function T(t,e,n=1){return r["a"].registerBackend(t,e,n)}function _(){return r["a"].backend}function I(t,e){Object(i["c"])().setPlatform(t,e)}Object(a["e"])(l)},c04ea:function(t,e,n){var r=n("c65b"),i=n("861d"),a=n("d9b5"),s=n("dc4a"),o=n("485a"),u=n("b622"),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var n,u=s(t,l);if(u){if(void 0===e&&(e="default"),n=r(u,t,e),!i(n)||a(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},c05b:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return f})),n.d(e,"n",(function(){return m})),n.d(e,"m",(function(){return g})),n.d(e,"o",(function(){return b})),n.d(e,"r",(function(){return y})),n.d(e,"p",(function(){return v})),n.d(e,"q",(function(){return w})),n.d(e,"s",(function(){return x})),n.d(e,"t",(function(){return O})),n.d(e,"u",(function(){return S})),n.d(e,"w",(function(){return k})),n.d(e,"v",(function(){return T})),n.d(e,"x",(function(){return _})),n.d(e,"y",(function(){return I})),n.d(e,"z",(function(){return C})),n.d(e,"A",(function(){return A})),n.d(e,"B",(function(){return E})),n.d(e,"C",(function(){return N})),n.d(e,"D",(function(){return j})),n.d(e,"E",(function(){return D})),n.d(e,"F",(function(){return $})),n.d(e,"G",(function(){return R})),n.d(e,"H",(function(){return F})),n.d(e,"I",(function(){return P})),n.d(e,"J",(function(){return M})),n.d(e,"K",(function(){return L})),n.d(e,"M",(function(){return B})),n.d(e,"N",(function(){return z})),n.d(e,"L",(function(){return V})),n.d(e,"O",(function(){return U})),n.d(e,"P",(function(){return W})),n.d(e,"Q",(function(){return G})),n.d(e,"R",(function(){return H})),n.d(e,"S",(function(){return q})),n.d(e,"T",(function(){return J})),n.d(e,"U",(function(){return K})),n.d(e,"W",(function(){return X})),n.d(e,"V",(function(){return Y})),n.d(e,"sc",(function(){return Z})),n.d(e,"X",(function(){return Q})),n.d(e,"Y",(function(){return tt})),n.d(e,"Z",(function(){return et})),n.d(e,"bb",(function(){return nt})),n.d(e,"ab",(function(){return rt})),n.d(e,"cb",(function(){return it})),n.d(e,"db",(function(){return at})),n.d(e,"eb",(function(){return st})),n.d(e,"fb",(function(){return ot})),n.d(e,"gb",(function(){return ut})),n.d(e,"hb",(function(){return ct})),n.d(e,"ib",(function(){return lt})),n.d(e,"jb",(function(){return dt})),n.d(e,"lb",(function(){return ht})),n.d(e,"pb",(function(){return pt})),n.d(e,"ob",(function(){return ft})),n.d(e,"qb",(function(){return mt})),n.d(e,"rb",(function(){return gt})),n.d(e,"tb",(function(){return bt})),n.d(e,"sb",(function(){return yt})),n.d(e,"ub",(function(){return vt})),n.d(e,"vb",(function(){return wt})),n.d(e,"wb",(function(){return xt})),n.d(e,"xb",(function(){return Ot})),n.d(e,"Ab",(function(){return St})),n.d(e,"Bb",(function(){return kt})),n.d(e,"Cb",(function(){return Tt})),n.d(e,"Db",(function(){return _t})),n.d(e,"Eb",(function(){return It})),n.d(e,"Fb",(function(){return Ct})),n.d(e,"Hb",(function(){return At})),n.d(e,"Ib",(function(){return Et})),n.d(e,"Jb",(function(){return Nt})),n.d(e,"Kb",(function(){return jt})),n.d(e,"Gb",(function(){return Dt})),n.d(e,"Lb",(function(){return $t})),n.d(e,"yb",(function(){return Rt})),n.d(e,"zb",(function(){return Ft})),n.d(e,"Mb",(function(){return Pt})),n.d(e,"Sb",(function(){return Mt})),n.d(e,"Nb",(function(){return Lt})),n.d(e,"Qb",(function(){return Bt})),n.d(e,"Ob",(function(){return zt})),n.d(e,"Pb",(function(){return Vt})),n.d(e,"Rb",(function(){return Ut})),n.d(e,"Tb",(function(){return Wt})),n.d(e,"Ub",(function(){return Gt})),n.d(e,"Vb",(function(){return Ht})),n.d(e,"Wb",(function(){return qt})),n.d(e,"Xb",(function(){return Jt})),n.d(e,"Yb",(function(){return Kt})),n.d(e,"Zb",(function(){return Xt})),n.d(e,"ac",(function(){return Yt})),n.d(e,"ec",(function(){return Zt})),n.d(e,"bc",(function(){return Qt})),n.d(e,"cc",(function(){return te})),n.d(e,"dc",(function(){return ee})),n.d(e,"gc",(function(){return ne})),n.d(e,"fc",(function(){return re})),n.d(e,"hc",(function(){return ie})),n.d(e,"ic",(function(){return ae})),n.d(e,"jc",(function(){return se})),n.d(e,"kc",(function(){return oe})),n.d(e,"lc",(function(){return ue})),n.d(e,"mc",(function(){return ce})),n.d(e,"nc",(function(){return le})),n.d(e,"oc",(function(){return de})),n.d(e,"pc",(function(){return he})),n.d(e,"qc",(function(){return pe})),n.d(e,"rc",(function(){return fe})),n.d(e,"tc",(function(){return me})),n.d(e,"uc",(function(){return ge})),n.d(e,"wc",(function(){return be})),n.d(e,"zc",(function(){return ye})),n.d(e,"Ac",(function(){return ve})),n.d(e,"xc",(function(){return we})),n.d(e,"yc",(function(){return xe})),n.d(e,"vc",(function(){return Oe})),n.d(e,"Bc",(function(){return Se})),n.d(e,"Dc",(function(){return ke})),n.d(e,"Ec",(function(){return Te})),n.d(e,"Fc",(function(){return _e})),n.d(e,"Gc",(function(){return Ie})),n.d(e,"Hc",(function(){return Ce})),n.d(e,"Ic",(function(){return Ae})),n.d(e,"Nc",(function(){return Ee})),n.d(e,"Lc",(function(){return Ne})),n.d(e,"Mc",(function(){return je})),n.d(e,"Kc",(function(){return De})),n.d(e,"Jc",(function(){return $e})),n.d(e,"Pc",(function(){return Re})),n.d(e,"Xc",(function(){return Fe})),n.d(e,"gd",(function(){return Pe})),n.d(e,"Qc",(function(){return Me})),n.d(e,"Wc",(function(){return Le})),n.d(e,"Oc",(function(){return Be})),n.d(e,"Rc",(function(){return ze})),n.d(e,"Sc",(function(){return Ve})),n.d(e,"Tc",(function(){return Ue})),n.d(e,"Uc",(function(){return We})),n.d(e,"Vc",(function(){return Ge})),n.d(e,"Zc",(function(){return He})),n.d(e,"Yc",(function(){return qe})),n.d(e,"bd",(function(){return Je})),n.d(e,"cd",(function(){return Ke})),n.d(e,"dd",(function(){return Xe})),n.d(e,"ed",(function(){return Ye})),n.d(e,"fd",(function(){return Ze})),n.d(e,"hd",(function(){return Qe})),n.d(e,"id",(function(){return tn})),n.d(e,"jd",(function(){return en})),n.d(e,"kd",(function(){return nn})),n.d(e,"ld",(function(){return rn})),n.d(e,"md",(function(){return an})),n.d(e,"nd",(function(){return sn})),n.d(e,"od",(function(){return on})),n.d(e,"pd",(function(){return un})),n.d(e,"qd",(function(){return cn})),n.d(e,"rd",(function(){return ln})),n.d(e,"ad",(function(){return dn})),n.d(e,"kb",(function(){return hn})),n.d(e,"Cc",(function(){return pn})),n.d(e,"sd",(function(){return fn})),n.d(e,"mb",(function(){return mn})),n.d(e,"nb",(function(){return gn}));const r="Abs",i="Acos",a="Acosh",s="Add",o="AddN",u="All",c="Any",l="ArgMax",d="ArgMin",h="Asin",p="Asinh",f="Atan",m="Atanh",g="Atan2",b="AvgPool",y="AvgPoolGrad",v="AvgPool3D",w="AvgPool3DGrad",x="BatchMatMul",O="BatchToSpaceND",S="Bincount",k="BroadcastTo",T="BroadcastArgs",_="Cast",I="Ceil",C="ClipByValue",A="Complex",E="ComplexAbs",N="Concat",j="Conv2D",D="Conv2DBackpropFilter",$="Conv2DBackpropInput",R="Conv3D",F="Conv3DBackpropFilterV2",P="Conv3DBackpropInputV2",M="Cos",L="Cosh",B="Cumprod",z="Cumsum",V="CropAndResize",U="DenseBincount",W="DepthToSpace",G="DepthwiseConv2dNative",H="DepthwiseConv2dNativeBackpropFilter",q="DepthwiseConv2dNativeBackpropInput",J="Diag",K="Dilation2D",X="Dilation2DBackpropInput",Y="Dilation2DBackpropFilter",Z="RealDiv",Q="Einsum",tt="Elu",et="EluGrad",nt="Erf",rt="Equal",it="Exp",at="ExpandDims",st="Expm1",ot="FFT",ut="Fill",ct="FlipLeftRight",lt="Floor",dt="FloorDiv",ht="FusedBatchNorm",pt="GatherV2",ft="GatherNd",mt="Greater",gt="GreaterEqual",bt="Identity",yt="IFFT",vt="Imag",wt="IsFinite",xt="IsInf",Ot="IsNan",St="LeakyRelu",kt="Less",Tt="LessEqual",_t="LinSpace",It="Log",Ct="Log1p",At="LogicalAnd",Et="LogicalNot",Nt="LogicalOr",jt="LogicalXor",Dt="LogSoftmax",$t="LowerBound",Rt="LRN",Ft="LRNGrad",Pt="Max",Mt="Maximum",Lt="MaxPool",Bt="MaxPoolGrad",zt="MaxPool3D",Vt="MaxPool3DGrad",Ut="MaxPoolWithArgmax",Wt="Mean",Gt="Min",Ht="Minimum",qt="MirrorPad",Jt="Mod",Kt="Multinomial",Xt="Multiply",Yt="Neg",Zt="NotEqual",Qt="NonMaxSuppressionV3",te="NonMaxSuppressionV4",ee="NonMaxSuppressionV5",ne="OnesLike",re="OneHot",ie="Pack",ae="PadV2",se="Pool",oe="Pow",ue="Prelu",ce="Prod",le="RaggedGather",de="RaggedRange",he="RaggedTensorToTensor",pe="Range",fe="Real",me="Reciprocal",ge="Relu",be="Reshape",ye="ResizeNearestNeighbor",ve="ResizeNearestNeighborGrad",we="ResizeBilinear",xe="ResizeBilinearGrad",Oe="Relu6",Se="Reverse",ke="Round",Te="Rsqrt",_e="ScatterNd",Ie="SearchSorted",Ce="Select",Ae="Selu",Ee="Slice",Ne="Sin",je="Sinh",De="Sign",$e="Sigmoid",Re="Softplus",Fe="Sqrt",Pe="Sum",Me="SpaceToBatchND",Le="SplitV",Be="Softmax",ze="SparseFillEmptyRows",Ve="SparseReshape",Ue="SparseSegmentMean",We="SparseSegmentSum",Ge="SparseToDense",He="SquaredDifference",qe="Square",Je="StridedSlice",Ke="StringNGrams",Xe="StringSplit",Ye="StringToHashBucketFast",Ze="Sub",Qe="Tan",tn="Tanh",en="Tile",nn="TopK",rn="Transform",an="Transpose",sn="Unique",on="Unpack",un="UnsortedSegmentSum",cn="UpperBound",ln="ZerosLike",dn="Step",hn="FromPixels",pn="RotateWithOffset",fn="_FusedMatMul",mn="FusedConv2D",gn="FusedDepthwiseConv2D"},c08f:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("46b8"),u=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n){const u=Object(a["a"])(t,"x","clipByValue");if(s["b"](e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Object(o["a"])(u.shape,e,u.dtype);const c={x:u},l={clipValueMin:e,clipValueMax:n};return r["a"].runKernel(i["z"],c,l)}const l=Object(u["b"])({clipByValue_:c})},c170:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,o,c=[1,1],l="NHWC"){const d=Object(a["a"])(t,"x","dilation2d"),h=Object(a["a"])(e,"filter","dilation2d");s["b"](3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+d.rank+"."),s["b"](3===h.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+h.rank+"."),s["b"]("NHWC"===l,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+l);let p=d,f=!1;3===d.rank&&(p=Object(u["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2]]),f=!0),s["b"](p.shape[3]===h.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${p.shape[3]} vs ${h.shape[2]}`);const m={x:p,filter:h},g={strides:n,pad:o,dilations:c},b=r["a"].runKernel(i["U"],m,g);return f?Object(u["a"])(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const l=Object(o["b"])({dilation2d_:c})},c1a2:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","cosh","float32"),n={x:e};return r["a"].runKernel(i["K"],n)}const u=Object(s["b"])({cosh_:o})},c22a:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("6ae2"),i=n("6ad5"),a=n("0777"),s=n("5a2c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e="float32"){if(Object(i["c"])(t),"complex64"===e){const e=o(t,"float32"),n=Object(s["a"])(t,"float32");return Object(a["a"])(e,n)}const n=Object(i["C"])(Object(i["N"])(t),e);return r["a"].makeTensor(n,t,e)}},c314:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("538e"),i=n("a3f7"),a=n("a5aa"),s=n("3bb7"),o=n("54ef"),u=n("ffb3"),c=n("9ffd");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t){const e=Object(i["a"])(t,"x","logSigmoid"),n=Object(r["a"])(t=>{const e=Object(s["a"])(Object(c["a"])(Object(s["a"])(t))),n=e=>{const n=Object(a["a"])(e,Object(u["a"])(Object(s["a"])(t)));return n};return{value:e,gradFunc:n}});return n(e)}const d=Object(o["b"])({logSigmoid_:l})},c388:function(t,e,n){"use strict";n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"g",(function(){return f})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return r}));var r,i=n("fa11"),a=n("6125"),s=n("bdcf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function o(t){return Object(s["b"])(t,u)}function u(t){return t instanceof i["zd"]?{value:t.clone(),recurse:!1}:Object(s["e"])(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class c{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){while(t<0)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const e of t)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class l extends c{constructor(){super(l.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){const t=2*this.capacity,e=new Array(t),n=this.length();for(let r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function d(t){return new g(t)}function h(t){return new b(t)}function p(t,e){return new C(t,e)}function f(t,e=r.FAIL){return new A(t,e)}l.INITIAL_CAPACITY=32;class m{async toArray(){const t=[];let e=await this.next();while(!e.done)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let n=await t.next();while(!n.done)e.push(n.value),n=await t.next();return e}async resolveFully(){let t=await this.next();while(!t.done)t=await this.next()}async resolveWhile(t){let e=await this.next(),n=t(e.value);while(!e.done&&n)e=await this.next(),n=t(e.value)}handleErrors(t){return new k(this,t)}filter(t){return new O(this,t)}map(t){return new S(this,t)}mapAsync(t){return new T(this,t)}serialMapAsync(t){return new T(this,t).serial()}flatmap(t){return new I(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new x(this,t,e)}columnMajorBatch(t,e=!0,n=s["f"]){const r=this.rowMajorBatch(t,e);return r.map(t=>Object(s["d"])(t,n))}concatenate(t,e){return new C(d([this,t]),e)}take(t){return t<0||null==t?this:new w(this,t)}skip(t){return t<0||null==t?this:new v(this,t)}prefetch(t){return new E(this,t)}shuffle(t,e){return new N(this,t,e)}serial(){return new y(this)}}class g extends m{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:o(t),done:!1}}}class b extends m{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}}}class y extends m{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class v extends m{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(this.count++<this.maxCount){const t=await this.upstream.next();if(t.done)return t;i["Ve"](t.value)}return this.upstream.next()}}class w extends m{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class x extends m{constructor(t,e,n=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];while(t.length<this.batchSize){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class O extends m{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(1){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;i["Ve"](t.value)}}}class S extends m{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Map"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i["ti"].getTensorsInContainer(t.value),n=this.transform(t.value),r=i["ti"].getTensorsInContainer(n);for(const a of e)i["ti"].isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}}class k extends m{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(1)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class T extends m{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i["ti"].getTensorsInContainer(t.value),n=await this.transform(t.value),r=i["ti"].getTensorsInContainer(n);for(const a of e)i["ti"].isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}}class _ extends m{constructor(){super(),this.outputQueue=new l,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(0===this.outputQueue.length())if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class I extends _{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){const t=await this.upstream.next();if(t.done)return!1;const e=i["ti"].getTensorsInContainer(t.value),n=this.transform(t.value),r=i["ti"].getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const a of e)i["ti"].isTensorInList(a,r)||a.dispose();return!0}}class C extends m{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){const t="TODO: fill in upstream of chained summaries";return t+" -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}(function(t){t[t["FAIL"]=0]="FAIL",t[t["SHORTEST"]=1]="SHORTEST",t[t["LONGEST"]=2]="LONGEST"})(r||(r={}));class A extends m{constructor(t,e=r.FAIL){super(),this.iterators=t,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){const t="TODO: fill in upstream of zip summaries";return`{${t}} -> Zip`}async nextState(t){await t;let e=0,n=0;function i(t){if(t instanceof m){const r=t.next();return{value:r.then(t=>(e++,t.done&&n++,t.value)),recurse:!1}}return{value:null,recurse:!0}}const a=await Object(s["c"])(this.iterators,i);if(e===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case r.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case r.SHORTEST:return{value:null,done:!0};case r.LONGEST:default:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class E extends m{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new c(e)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){while(!this.buffer.isFull()){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}class N extends E{constructor(t,e,n){super(t,e),this.upstream=t,this.windowSize=e,this.upstreamExhausted=!1,this.random=a["alea"](n||i["Ji"].now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){this.upstreamExhausted||this.refill();while(!this.buffer.isEmpty()){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}},c430:function(t,e){t.exports=!1},c532:function(t,e,n){"use strict";(function(t){var r=n("1d2b");const{toString:i}=Object.prototype,{getPrototypeOf:a}=Object,s=(t=>e=>{const n=i.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),o=t=>(t=t.toLowerCase(),e=>s(e)===t),u=t=>e=>typeof e===t,{isArray:c}=Array,l=u("undefined");function d(t){return null!==t&&!l(t)&&null!==t.constructor&&!l(t.constructor)&&m(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const h=o("ArrayBuffer");function p(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&h(t.buffer),e}const f=u("string"),m=u("function"),g=u("number"),b=t=>null!==t&&"object"===typeof t,y=t=>!0===t||!1===t,v=t=>{if("object"!==s(t))return!1;const e=a(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w=o("Date"),x=o("File"),O=o("Blob"),S=o("FileList"),k=t=>b(t)&&m(t.pipe),T=t=>{const e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||i.call(t)===e||m(t.toString)&&t.toString()===e)},_=o("URLSearchParams"),I=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function C(t,e,{allOwnKeys:n=!1}={}){if(null===t||"undefined"===typeof t)return;let r,i;if("object"!==typeof t&&(t=[t]),c(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let s;for(r=0;r<a;r++)s=i[r],e.call(null,t[s],s,t)}}function A(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;while(i-- >0)if(r=n[i],e===r.toLowerCase())return r;return null}const E=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:t)(),N=t=>!l(t)&&t!==E;function j(){const{caseless:t}=N(this)&&this||{},e={},n=(n,r)=>{const i=t&&A(e,r)||r;v(e[i])&&v(n)?e[i]=j(e[i],n):v(n)?e[i]=j({},n):c(n)?e[i]=n.slice():e[i]=n};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&C(arguments[r],n);return e}const D=(t,e,n,{allOwnKeys:i}={})=>(C(e,(e,i)=>{n&&m(e)?t[i]=Object(r["a"])(e,n):t[i]=e},{allOwnKeys:i}),t),$=t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),R=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},F=(t,e,n,r)=>{let i,s,o;const u={};if(e=e||{},null==t)return e;do{i=Object.getOwnPropertyNames(t),s=i.length;while(s-- >0)o=i[s],r&&!r(o,t,e)||u[o]||(e[o]=t[o],u[o]=!0);t=!1!==n&&a(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},P=(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},M=t=>{if(!t)return null;if(c(t))return t;let e=t.length;if(!g(e))return null;const n=new Array(e);while(e-- >0)n[e]=t[e];return n},L=(t=>e=>t&&e instanceof t)("undefined"!==typeof Uint8Array&&a(Uint8Array)),B=(t,e)=>{const n=t&&t[Symbol.iterator],r=n.call(t);let i;while((i=r.next())&&!i.done){const n=i.value;e.call(t,n[0],n[1])}},z=(t,e)=>{let n;const r=[];while(null!==(n=t.exec(e)))r.push(n);return r},V=o("HTMLFormElement"),U=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),W=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),G=o("RegExp"),H=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};C(n,(n,i)=>{!1!==e(n,i,t)&&(r[i]=n)}),Object.defineProperties(t,r)},q=t=>{H(t,(e,n)=>{if(m(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];m(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},J=(t,e)=>{const n={},r=t=>{t.forEach(t=>{n[t]=!0})};return c(t)?r(t):r(String(t).split(e)),n},K=()=>{},X=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Y="abcdefghijklmnopqrstuvwxyz",Z="0123456789",Q={DIGIT:Z,ALPHA:Y,ALPHA_DIGIT:Y+Y.toUpperCase()+Z},tt=(t=16,e=Q.ALPHA_DIGIT)=>{let n="";const{length:r}=e;while(t--)n+=e[Math.random()*r|0];return n};function et(t){return!!(t&&m(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])}const nt=t=>{const e=new Array(10),n=(t,r)=>{if(b(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=c(t)?[]:{};return C(t,(t,e)=>{const a=n(t,r+1);!l(a)&&(i[e]=a)}),e[r]=void 0,i}}return t};return n(t,0)};e["a"]={isArray:c,isArrayBuffer:h,isBuffer:d,isFormData:T,isArrayBufferView:p,isString:f,isNumber:g,isBoolean:y,isObject:b,isPlainObject:v,isUndefined:l,isDate:w,isFile:x,isBlob:O,isRegExp:G,isFunction:m,isStream:k,isURLSearchParams:_,isTypedArray:L,isFileList:S,forEach:C,merge:j,extend:D,trim:I,stripBOM:$,inherits:R,toFlatObject:F,kindOf:s,kindOfTest:o,endsWith:P,toArray:M,forEachEntry:B,matchAll:z,isHTMLForm:V,hasOwnProperty:W,hasOwnProp:W,reduceDescriptors:H,freezeMethods:q,toObjectSet:J,toCamelCase:U,noop:K,toFiniteNumber:X,findKey:A,global:E,isContextDefined:N,ALPHABET:Q,generateString:tt,isSpecCompliantForm:et,toJSONObject:nt}}).call(this,n("c8ba"))},c65b:function(t,e,n){var r=n("40d5"),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},c6b6:function(t,e,n){var r=n("e330"),i=r({}.toString),a=r("".slice);t.exports=function(t){return a(i(t),8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("6374"),a="__core-js_shared__",s=r[a]||i(a,{});t.exports=s},c742:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return g}));n("29a8");var r=n("b333"),i=n("350f"),a=n("931f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s="tensorflowjs",o=1,u="models_store",c="model_info_store";function l(){if(!Object(r["c"])().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"===typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function d(t){const e=t.result;e.createObjectStore(u,{keyPath:"modelPath"}),e.createObjectStore(c,{keyPath:"modelPath"})}class h{constructor(t){if(this.indexedDB=l(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{const r=this.indexedDB.open(s,o);r.onupgradeneeded=()=>d(r),r.onsuccess=()=>{const a=r.result;if(null==e){const e=a.transaction(u,"readonly"),r=e.objectStore(u),i=r.get(this.modelPath);i.onsuccess=()=>{if(null==i.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(i.result.modelArtifacts)},i.onerror=t=>(a.close(),n(i.error)),e.oncomplete=()=>a.close()}else{const r=Object(i["i"])(e),s=a.transaction(c,"readwrite");let o=s.objectStore(c);const l=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let d;l.onsuccess=()=>{d=a.transaction(u,"readwrite");const i=d.objectStore(u),l=i.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});l.onsuccess=()=>t({modelArtifactsInfo:r}),l.onerror=t=>{o=s.objectStore(c);const e=o.delete(this.modelPath);e.onsuccess=()=>(a.close(),n(l.error)),e.onerror=t=>(a.close(),n(l.error))}},l.onerror=t=>(a.close(),n(l.error)),s.oncomplete=()=>{null==d?a.close():d.oncomplete=()=>a.close()}}},r.onerror=t=>n(r.error)})}}h.URL_SCHEME="indexeddb://";const p=t=>Object(r["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(h.URL_SCHEME)?f(t.slice(h.URL_SCHEME.length)):null;function f(t){return new h(t)}function m(t){return t.startsWith(h.URL_SCHEME)?t.slice(h.URL_SCHEME.length):t}a["a"].registerSaveRouter(p),a["a"].registerLoadRouter(p);class g{constructor(){this.indexedDB=l()}async listModels(){return new Promise((t,e)=>{const n=this.indexedDB.open(s,o);n.onupgradeneeded=()=>d(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(c,"readonly"),a=i.objectStore(c),s=a.getAll();s.onsuccess=()=>{const e={};for(const t of s.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},s.onerror=t=>(r.close(),e(s.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){return t=m(t),new Promise((e,n)=>{const r=this.indexedDB.open(s,o);r.onupgradeneeded=()=>d(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(c,"readwrite"),s=a.objectStore(c),o=s.get(t);let l;o.onsuccess=()=>{if(null==o.result)return i.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=s.delete(t),a=()=>{l=i.transaction(u,"readwrite");const r=l.objectStore(u),a=r.delete(t);a.onsuccess=()=>e(o.result.modelArtifactsInfo),a.onerror=t=>n(o.error)};r.onsuccess=a,r.onerror=t=>(a(),i.close(),n(o.error))}},o.onerror=t=>(i.close(),n(o.error)),a.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)})}}},c77c:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("508f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","div"),u=Object(s["a"])(e,"b","div");if([n,u]=Object(a["makeTypesMatch"])(n,u),"int32"===n.dtype&&"int32"===u.dtype)return Object(o["a"])(n,u);const c={a:n,b:u},l={};return r["a"].runKernel(i["sc"],c,l)}const l=Object(u["b"])({div_:c})},c8ad:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c912:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c04e"),a=n("c05b"),s=n("a3f7"),o=n("6ad5"),u=n("0777"),c=n("24b0"),l=n("3bb7"),d=n("54ef"),h=n("d7b0");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p(t,e,n){const d=Object(s["a"])(t,"x","transpose");if(null==e&&(e=d.shape.map((t,e)=>e).reverse()),o["b"](d.rank===e.length,()=>`Error in transpose: rank of input ${d.rank} must match length of perm ${e}.`),e.forEach(t=>{o["b"](t>=0&&t<d.rank,()=>"All entries in 'perm' must be between 0 and "+(d.rank-1)+" but got "+e)}),d.rank<=1)return d.clone();const p={x:d},f={perm:e};return"complex64"===d.dtype?Object(i["t"])(()=>{let t=Object(h["a"])(d),e=Object(c["a"])(d);return t=r["a"].runKernel(a["md"],{x:t},f),e=r["a"].runKernel(a["md"],{x:e},f),n&&(e=Object(l["a"])(e)),Object(u["a"])(t,e)}):r["a"].runKernel(a["md"],p,f)}const f=Object(d["b"])({transpose_:p})},c9f1:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(s["a"])(t,"base","pow"),o=Object(s["a"])(e,"exp","pow");[n,o]=Object(a["makeTypesMatch"])(n,o);const u={a:n,b:o};return r["a"].runKernel(i["kc"],u)}const c=Object(o["b"])({pow_:u})},ca84:function(t,e,n){var r=n("e330"),i=n("1a2d"),a=n("fc6a"),s=n("4d64").indexOf,o=n("d012"),u=r([].push);t.exports=function(t,e){var n,r=a(t),c=0,l=[];for(n in r)!i(o,n)&&i(r,n)&&u(l,n);while(e.length>c)i(r,n=e[c++])&&(~s(l,n)||u(l,n));return l}},cae0:function(t,e,n){(function(t){var r;(function(t,i,a){function s(t){var e=this;function n(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;while(r.length<8)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],t^=t>>>7,n=t^t<<24,t=r[i+1&7],n^=t^t>>>10,t=r[i+3&7],n^=t^t>>>3,t=r[i+4&7],n^=t^t<<7,t=r[i+7&7],t^=t<<13,n^=t^t<<9,r[i]=n,e.i=i+1&7,n},n(e,t)}function o(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new s(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xorshift7=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},cb2d:function(t,e,n){var r=n("1626"),i=n("9bf2"),a=n("13d2"),s=n("6374");t.exports=function(t,e,n,o){o||(o={});var u=o.enumerable,c=void 0!==o.name?o.name:e;if(r(n)&&a(n,c,o),o.global)u?t[e]=n:s(e,n);else{try{o.unsafe?t[e]&&(u=!0):delete t[e]}catch(l){}u?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),a=r.document,s=i(a)&&i(a.createElement);t.exports=function(t){return s?a.createElement(t):{}}},cd1f:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("a3f7"),i=n("73d3"),a=n("54ef");function s(t,e,n,a,s,o){const u=Object(r["a"])(t,"x","conv2dTranspose"),c=Object(r["a"])(e,"filter","conv2dTranspose");return Object(i["a"])(n,u,c,a,s,"NHWC",o)}const o=Object(a["b"])({conv2dTranspose_:s})},cdce:function(t,e,n){var r=n("da84"),i=n("1626"),a=r.WeakMap;t.exports=i(a)&&/native code/.test(String(a))},ce1a:function(t,e,n){"use strict";n.r(e),n.d(e,"AdadeltaOptimizer",(function(){return h["d"]})),n.d(e,"AdagradOptimizer",(function(){return h["e"]})),n.d(e,"AdamOptimizer",(function(){return h["f"]})),n.d(e,"AdamaxOptimizer",(function(){return h["g"]})),n.d(e,"MomentumOptimizer",(function(){return h["gc"]})),n.d(e,"Optimizer",(function(){return h["rc"]})),n.d(e,"OptimizerConstructors",(function(){return h["sc"]})),n.d(e,"RMSPropOptimizer",(function(){return h["zc"]})),n.d(e,"SGDOptimizer",(function(){return h["Uc"]})),n.d(e,"Tensor",(function(){return h["zd"]})),n.d(e,"TensorBuffer",(function(){return h["Ad"]})),n.d(e,"Variable",(function(){return h["Jd"]})),n.d(e,"Rank",(function(){return h["Ec"]})),n.d(e,"sumOutType",(function(){return h["ji"]})),n.d(e,"upcastType",(function(){return h["Hi"]})),n.d(e,"abs",(function(){return h["Md"]})),n.d(e,"acos",(function(){return h["Nd"]})),n.d(e,"acosh",(function(){return h["Od"]})),n.d(e,"add",(function(){return h["Pd"]})),n.d(e,"addN",(function(){return h["Qd"]})),n.d(e,"all",(function(){return h["Rd"]})),n.d(e,"any",(function(){return h["Sd"]})),n.d(e,"argMax",(function(){return h["Td"]})),n.d(e,"argMin",(function(){return h["Ud"]})),n.d(e,"asin",(function(){return h["Vd"]})),n.d(e,"asinh",(function(){return h["Wd"]})),n.d(e,"atan",(function(){return h["Xd"]})),n.d(e,"atan2",(function(){return h["Yd"]})),n.d(e,"atanh",(function(){return h["Zd"]})),n.d(e,"avgPool",(function(){return h["ae"]})),n.d(e,"avgPool3d",(function(){return h["be"]})),n.d(e,"basicLSTMCell",(function(){return h["ee"]})),n.d(e,"batchToSpaceND",(function(){return h["je"]})),n.d(e,"batchNorm",(function(){return h["fe"]})),n.d(e,"batchNorm2d",(function(){return h["ge"]})),n.d(e,"batchNorm3d",(function(){return h["he"]})),n.d(e,"batchNorm4d",(function(){return h["ie"]})),n.d(e,"bincount",(function(){return h["ke"]})),n.d(e,"broadcastArgs",(function(){return h["me"]})),n.d(e,"broadcastTo",(function(){return h["ne"]})),n.d(e,"buffer",(function(){return h["qe"]})),n.d(e,"cast",(function(){return h["re"]})),n.d(e,"ceil",(function(){return h["se"]})),n.d(e,"clipByValue",(function(){return h["te"]})),n.d(e,"clone",(function(){return h["ue"]})),n.d(e,"complex",(function(){return h["ve"]})),n.d(e,"concat",(function(){return h["we"]})),n.d(e,"concat1d",(function(){return h["xe"]})),n.d(e,"concat2d",(function(){return h["ye"]})),n.d(e,"concat3d",(function(){return h["ze"]})),n.d(e,"concat4d",(function(){return h["Ae"]})),n.d(e,"conv1d",(function(){return h["Be"]})),n.d(e,"conv2d",(function(){return h["Ce"]})),n.d(e,"conv2dTranspose",(function(){return h["De"]})),n.d(e,"conv3d",(function(){return h["Ee"]})),n.d(e,"conv3dTranspose",(function(){return h["Fe"]})),n.d(e,"cos",(function(){return h["He"]})),n.d(e,"cosh",(function(){return h["Ie"]})),n.d(e,"cumprod",(function(){return h["Ke"]})),n.d(e,"cumsum",(function(){return h["Le"]})),n.d(e,"denseBincount",(function(){return h["Ne"]})),n.d(e,"depthToSpace",(function(){return h["Pe"]})),n.d(e,"depthwiseConv2d",(function(){return h["Qe"]})),n.d(e,"diag",(function(){return h["Se"]})),n.d(e,"dilation2d",(function(){return h["Te"]})),n.d(e,"div",(function(){return h["Xe"]})),n.d(e,"divNoNan",(function(){return h["Ye"]})),n.d(e,"dot",(function(){return h["Ze"]})),n.d(e,"einsum",(function(){return h["bf"]})),n.d(e,"elu",(function(){return h["cf"]})),n.d(e,"equal",(function(){return h["if"]})),n.d(e,"erf",(function(){return h["jf"]})),n.d(e,"euclideanNorm",(function(){return h["kf"]})),n.d(e,"exp",(function(){return h["lf"]})),n.d(e,"expandDims",(function(){return h["mf"]})),n.d(e,"expm1",(function(){return h["nf"]})),n.d(e,"eye",(function(){return h["of"]})),n.d(e,"fill",(function(){return h["qf"]})),n.d(e,"floor",(function(){return h["tf"]})),n.d(e,"floorDiv",(function(){return h["uf"]})),n.d(e,"gather",(function(){return h["wf"]})),n.d(e,"greater",(function(){return h["Ff"]})),n.d(e,"greaterEqual",(function(){return h["Gf"]})),n.d(e,"imag",(function(){return h["If"]})),n.d(e,"isFinite",(function(){return h["Nf"]})),n.d(e,"isInf",(function(){return h["Of"]})),n.d(e,"isNaN",(function(){return h["Pf"]})),n.d(e,"leakyRelu",(function(){return h["Sf"]})),n.d(e,"less",(function(){return h["Tf"]})),n.d(e,"lessEqual",(function(){return h["Uf"]})),n.d(e,"linspace",(function(){return h["Wf"]})),n.d(e,"localResponseNormalization",(function(){return h["Xf"]})),n.d(e,"log",(function(){return h["Yf"]})),n.d(e,"log1p",(function(){return h["Zf"]})),n.d(e,"logSigmoid",(function(){return h["ag"]})),n.d(e,"logSoftmax",(function(){return h["bg"]})),n.d(e,"logSumExp",(function(){return h["cg"]})),n.d(e,"logicalAnd",(function(){return h["dg"]})),n.d(e,"logicalNot",(function(){return h["eg"]})),n.d(e,"logicalOr",(function(){return h["fg"]})),n.d(e,"logicalXor",(function(){return h["gg"]})),n.d(e,"lowerBound",(function(){return h["ig"]})),n.d(e,"matMul",(function(){return h["jg"]})),n.d(e,"max",(function(){return h["lg"]})),n.d(e,"maxPool",(function(){return h["mg"]})),n.d(e,"maxPool3d",(function(){return h["ng"]})),n.d(e,"maxPoolWithArgmax",(function(){return h["og"]})),n.d(e,"maximum",(function(){return h["pg"]})),n.d(e,"mean",(function(){return h["qg"]})),n.d(e,"meshgrid",(function(){return h["sg"]})),n.d(e,"min",(function(){return h["tg"]})),n.d(e,"minimum",(function(){return h["ug"]})),n.d(e,"mirrorPad",(function(){return h["vg"]})),n.d(e,"mod",(function(){return h["wg"]})),n.d(e,"moments",(function(){return h["xg"]})),n.d(e,"mul",(function(){return h["zg"]})),n.d(e,"multiRNNCell",(function(){return h["Ag"]})),n.d(e,"multinomial",(function(){return h["Bg"]})),n.d(e,"neg",(function(){return h["Cg"]})),n.d(e,"notEqual",(function(){return h["Fg"]})),n.d(e,"oneHot",(function(){return h["Gg"]})),n.d(e,"ones",(function(){return h["Hg"]})),n.d(e,"onesLike",(function(){return h["Ig"]})),n.d(e,"outerProduct",(function(){return h["Kg"]})),n.d(e,"pad",(function(){return h["Lg"]})),n.d(e,"pad1d",(function(){return h["Mg"]})),n.d(e,"pad2d",(function(){return h["Ng"]})),n.d(e,"pad3d",(function(){return h["Og"]})),n.d(e,"pad4d",(function(){return h["Pg"]})),n.d(e,"pool",(function(){return h["Qg"]})),n.d(e,"pow",(function(){return h["Rg"]})),n.d(e,"prelu",(function(){return h["Sg"]})),n.d(e,"print",(function(){return h["Tg"]})),n.d(e,"prod",(function(){return h["Ug"]})),n.d(e,"raggedGather",(function(){return h["Wg"]})),n.d(e,"raggedRange",(function(){return h["Xg"]})),n.d(e,"raggedTensorToTensor",(function(){return h["Yg"]})),n.d(e,"rand",(function(){return h["Zg"]})),n.d(e,"randomGamma",(function(){return h["ah"]})),n.d(e,"randomNormal",(function(){return h["bh"]})),n.d(e,"randomStandardNormal",(function(){return h["ch"]})),n.d(e,"randomUniform",(function(){return h["dh"]})),n.d(e,"range",(function(){return h["eh"]})),n.d(e,"real",(function(){return h["gh"]})),n.d(e,"reciprocal",(function(){return h["hh"]})),n.d(e,"relu",(function(){return h["lh"]})),n.d(e,"relu6",(function(){return h["mh"]})),n.d(e,"reshape",(function(){return h["oh"]})),n.d(e,"reverse",(function(){return h["ph"]})),n.d(e,"reverse1d",(function(){return h["qh"]})),n.d(e,"reverse2d",(function(){return h["rh"]})),n.d(e,"reverse3d",(function(){return h["sh"]})),n.d(e,"reverse4d",(function(){return h["th"]})),n.d(e,"round",(function(){return h["vh"]})),n.d(e,"rsqrt",(function(){return h["wh"]})),n.d(e,"scalar",(function(){return h["xh"]})),n.d(e,"selu",(function(){return h["Bh"]})),n.d(e,"separableConv2d",(function(){return h["Ch"]})),n.d(e,"setdiff1dAsync",(function(){return h["Gh"]})),n.d(e,"sigmoid",(function(){return h["Hh"]})),n.d(e,"sign",(function(){return h["Ih"]})),n.d(e,"sin",(function(){return h["Kh"]})),n.d(e,"sinh",(function(){return h["Lh"]})),n.d(e,"slice",(function(){return h["Mh"]})),n.d(e,"slice1d",(function(){return h["Nh"]})),n.d(e,"slice2d",(function(){return h["Oh"]})),n.d(e,"slice3d",(function(){return h["Ph"]})),n.d(e,"slice4d",(function(){return h["Qh"]})),n.d(e,"softmax",(function(){return h["Sh"]})),n.d(e,"softplus",(function(){return h["Th"]})),n.d(e,"spaceToBatchND",(function(){return h["Uh"]})),n.d(e,"fft",(function(){return h["pf"]})),n.d(e,"ifft",(function(){return h["Hf"]})),n.d(e,"irfft",(function(){return h["Mf"]})),n.d(e,"rfft",(function(){return h["uh"]})),n.d(e,"split",(function(){return h["Yh"]})),n.d(e,"sqrt",(function(){return h["Zh"]})),n.d(e,"square",(function(){return h["ai"]})),n.d(e,"squaredDifference",(function(){return h["bi"]})),n.d(e,"squeeze",(function(){return h["ci"]})),n.d(e,"stack",(function(){return h["di"]})),n.d(e,"step",(function(){return h["ei"]})),n.d(e,"stridedSlice",(function(){return h["fi"]})),n.d(e,"sub",(function(){return h["hi"]})),n.d(e,"sum",(function(){return h["ii"]})),n.d(e,"tan",(function(){return h["ki"]})),n.d(e,"tanh",(function(){return h["li"]})),n.d(e,"tensor",(function(){return h["mi"]})),n.d(e,"tensor1d",(function(){return h["ni"]})),n.d(e,"tensor2d",(function(){return h["oi"]})),n.d(e,"tensor3d",(function(){return h["pi"]})),n.d(e,"tensor4d",(function(){return h["qi"]})),n.d(e,"tensor5d",(function(){return h["ri"]})),n.d(e,"tensor6d",(function(){return h["si"]})),n.d(e,"tile",(function(){return h["wi"]})),n.d(e,"topk",(function(){return h["yi"]})),n.d(e,"truncatedNormal",(function(){return h["Bi"]})),n.d(e,"unique",(function(){return h["Ci"]})),n.d(e,"unsortedSegmentSum",(function(){return h["Fi"]})),n.d(e,"unstack",(function(){return h["Gi"]})),n.d(e,"upperBound",(function(){return h["Ii"]})),n.d(e,"variable",(function(){return h["Mi"]})),n.d(e,"where",(function(){return h["Pi"]})),n.d(e,"whereAsync",(function(){return h["Qi"]})),n.d(e,"zeros",(function(){return h["Ri"]})),n.d(e,"zerosLike",(function(){return h["Si"]})),n.d(e,"booleanMaskAsync",(function(){return h["le"]})),n.d(e,"transpose",(function(){return h["Ai"]})),n.d(e,"norm",(function(){return h["Eg"]})),n.d(e,"movingAverage",(function(){return h["yg"]})),n.d(e,"scatterND",(function(){return h["yh"]})),n.d(e,"searchSorted",(function(){return h["Ah"]})),n.d(e,"sparseToDense",(function(){return h["Wh"]})),n.d(e,"gatherND",(function(){return h["xf"]})),n.d(e,"dropout",(function(){return h["af"]})),n.d(e,"enclosingPowerOfTwo",(function(){return h["ff"]})),n.d(e,"cosineWindow",(function(){return h["Je"]})),n.d(e,"inTopKAsync",(function(){return h["Kf"]})),n.d(e,"op",(function(){return h["Jg"]})),n.d(e,"OP_SCOPE_SUFFIX",(function(){return h["oc"]})),n.d(e,"image",(function(){return h["Jf"]})),n.d(e,"linalg",(function(){return h["Vf"]})),n.d(e,"losses",(function(){return h["hg"]})),n.d(e,"spectral",(function(){return h["Xh"]})),n.d(e,"fused",(function(){return h["vf"]})),n.d(e,"signal",(function(){return h["Jh"]})),n.d(e,"sparse",(function(){return h["Vh"]})),n.d(e,"string",(function(){return h["gi"]})),n.d(e,"Reduction",(function(){return h["Ic"]})),n.d(e,"train",(function(){return h["zi"]})),n.d(e,"enableProdMode",(function(){return h["ef"]})),n.d(e,"enableDebugMode",(function(){return h["df"]})),n.d(e,"disableDeprecationWarnings",(function(){return h["Ue"]})),n.d(e,"deprecationWarn",(function(){return h["Oe"]})),n.d(e,"disposeVariables",(function(){return h["We"]})),n.d(e,"engine",(function(){return h["gf"]})),n.d(e,"memory",(function(){return h["rg"]})),n.d(e,"profile",(function(){return h["Vg"]})),n.d(e,"tidy",(function(){return h["vi"]})),n.d(e,"dispose",(function(){return h["Ve"]})),n.d(e,"keep",(function(){return h["Qf"]})),n.d(e,"time",(function(){return h["xi"]})),n.d(e,"setBackend",(function(){return h["Eh"]})),n.d(e,"ready",(function(){return h["fh"]})),n.d(e,"getBackend",(function(){return h["zf"]})),n.d(e,"removeBackend",(function(){return h["nh"]})),n.d(e,"findBackend",(function(){return h["rf"]})),n.d(e,"findBackendFactory",(function(){return h["sf"]})),n.d(e,"registerBackend",(function(){return h["ih"]})),n.d(e,"backend",(function(){return h["ce"]})),n.d(e,"setPlatform",(function(){return h["Fh"]})),n.d(e,"getKernel",(function(){return h["Bf"]})),n.d(e,"getGradient",(function(){return h["Af"]})),n.d(e,"getKernelsForBackend",(function(){return h["Cf"]})),n.d(e,"registerKernel",(function(){return h["kh"]})),n.d(e,"registerGradient",(function(){return h["jh"]})),n.d(e,"unregisterKernel",(function(){return h["Ei"]})),n.d(e,"unregisterGradient",(function(){return h["Di"]})),n.d(e,"copyRegisteredKernels",(function(){return h["Ge"]})),n.d(e,"customGrad",(function(){return h["Me"]})),n.d(e,"grad",(function(){return h["Df"]})),n.d(e,"grads",(function(){return h["Ef"]})),n.d(e,"valueAndGrad",(function(){return h["Ki"]})),n.d(e,"valueAndGrads",(function(){return h["Li"]})),n.d(e,"variableGrads",(function(){return h["Ni"]})),n.d(e,"Environment",(function(){return h["gb"]})),n.d(e,"env",(function(){return h["hf"]})),n.d(e,"ENV",(function(){return h["cb"]})),n.d(e,"version_core",(function(){return h["Oi"]})),n.d(e,"nextFrame",(function(){return h["Dg"]})),n.d(e,"browser",(function(){return h["pe"]})),n.d(e,"io",(function(){return h["Lf"]})),n.d(e,"math",(function(){return h["kg"]})),n.d(e,"serialization",(function(){return h["Dh"]})),n.d(e,"test_util",(function(){return h["ui"]})),n.d(e,"util",(function(){return h["Ji"]})),n.d(e,"backend_util",(function(){return h["de"]})),n.d(e,"broadcast_util",(function(){return h["oe"]})),n.d(e,"tensor_util",(function(){return h["ti"]})),n.d(e,"slice_util",(function(){return h["Rh"]})),n.d(e,"gather_util",(function(){return h["yf"]})),n.d(e,"scatter_util",(function(){return h["zh"]})),n.d(e,"device_util",(function(){return h["Re"]})),n.d(e,"kernel_impls",(function(){return h["Rf"]})),n.d(e,"KernelBackend",(function(){return h["Fb"]})),n.d(e,"DataStorage",(function(){return h["S"]})),n.d(e,"Abs",(function(){return h["a"]})),n.d(e,"Acos",(function(){return h["b"]})),n.d(e,"Acosh",(function(){return h["c"]})),n.d(e,"Add",(function(){return h["h"]})),n.d(e,"AddN",(function(){return h["i"]})),n.d(e,"All",(function(){return h["j"]})),n.d(e,"Any",(function(){return h["k"]})),n.d(e,"ArgMax",(function(){return h["l"]})),n.d(e,"ArgMin",(function(){return h["m"]})),n.d(e,"Asin",(function(){return h["n"]})),n.d(e,"Asinh",(function(){return h["o"]})),n.d(e,"Atan",(function(){return h["p"]})),n.d(e,"Atanh",(function(){return h["r"]})),n.d(e,"Atan2",(function(){return h["q"]})),n.d(e,"AvgPool",(function(){return h["s"]})),n.d(e,"AvgPoolGrad",(function(){return h["v"]})),n.d(e,"AvgPool3D",(function(){return h["t"]})),n.d(e,"AvgPool3DGrad",(function(){return h["u"]})),n.d(e,"BatchMatMul",(function(){return h["w"]})),n.d(e,"BatchToSpaceND",(function(){return h["x"]})),n.d(e,"Bincount",(function(){return h["y"]})),n.d(e,"BroadcastTo",(function(){return h["A"]})),n.d(e,"BroadcastArgs",(function(){return h["z"]})),n.d(e,"Cast",(function(){return h["B"]})),n.d(e,"Ceil",(function(){return h["C"]})),n.d(e,"ClipByValue",(function(){return h["D"]})),n.d(e,"Complex",(function(){return h["E"]})),n.d(e,"ComplexAbs",(function(){return h["F"]})),n.d(e,"Concat",(function(){return h["G"]})),n.d(e,"Conv2D",(function(){return h["H"]})),n.d(e,"Conv2DBackpropFilter",(function(){return h["I"]})),n.d(e,"Conv2DBackpropInput",(function(){return h["J"]})),n.d(e,"Conv3D",(function(){return h["K"]})),n.d(e,"Conv3DBackpropFilterV2",(function(){return h["L"]})),n.d(e,"Conv3DBackpropInputV2",(function(){return h["M"]})),n.d(e,"Cos",(function(){return h["N"]})),n.d(e,"Cosh",(function(){return h["O"]})),n.d(e,"Cumprod",(function(){return h["Q"]})),n.d(e,"Cumsum",(function(){return h["R"]})),n.d(e,"CropAndResize",(function(){return h["P"]})),n.d(e,"DenseBincount",(function(){return h["T"]})),n.d(e,"DepthToSpace",(function(){return h["U"]})),n.d(e,"DepthwiseConv2dNative",(function(){return h["V"]})),n.d(e,"DepthwiseConv2dNativeBackpropFilter",(function(){return h["W"]})),n.d(e,"DepthwiseConv2dNativeBackpropInput",(function(){return h["X"]})),n.d(e,"Diag",(function(){return h["Y"]})),n.d(e,"Dilation2D",(function(){return h["Z"]})),n.d(e,"Dilation2DBackpropInput",(function(){return h["bb"]})),n.d(e,"Dilation2DBackpropFilter",(function(){return h["ab"]})),n.d(e,"RealDiv",(function(){return h["Gc"]})),n.d(e,"Einsum",(function(){return h["db"]})),n.d(e,"Elu",(function(){return h["eb"]})),n.d(e,"EluGrad",(function(){return h["fb"]})),n.d(e,"Erf",(function(){return h["ib"]})),n.d(e,"Equal",(function(){return h["hb"]})),n.d(e,"Exp",(function(){return h["jb"]})),n.d(e,"ExpandDims",(function(){return h["kb"]})),n.d(e,"Expm1",(function(){return h["lb"]})),n.d(e,"FFT",(function(){return h["mb"]})),n.d(e,"Fill",(function(){return h["nb"]})),n.d(e,"FlipLeftRight",(function(){return h["ob"]})),n.d(e,"Floor",(function(){return h["pb"]})),n.d(e,"FloorDiv",(function(){return h["qb"]})),n.d(e,"FusedBatchNorm",(function(){return h["sb"]})),n.d(e,"GatherV2",(function(){return h["wb"]})),n.d(e,"GatherNd",(function(){return h["vb"]})),n.d(e,"Greater",(function(){return h["xb"]})),n.d(e,"GreaterEqual",(function(){return h["yb"]})),n.d(e,"Identity",(function(){return h["Ab"]})),n.d(e,"IFFT",(function(){return h["zb"]})),n.d(e,"Imag",(function(){return h["Bb"]})),n.d(e,"IsFinite",(function(){return h["Cb"]})),n.d(e,"IsInf",(function(){return h["Db"]})),n.d(e,"IsNan",(function(){return h["Eb"]})),n.d(e,"LeakyRelu",(function(){return h["Ib"]})),n.d(e,"Less",(function(){return h["Jb"]})),n.d(e,"LessEqual",(function(){return h["Kb"]})),n.d(e,"LinSpace",(function(){return h["Lb"]})),n.d(e,"Log",(function(){return h["Mb"]})),n.d(e,"Log1p",(function(){return h["Nb"]})),n.d(e,"LogicalAnd",(function(){return h["Pb"]})),n.d(e,"LogicalNot",(function(){return h["Qb"]})),n.d(e,"LogicalOr",(function(){return h["Rb"]})),n.d(e,"LogicalXor",(function(){return h["Sb"]})),n.d(e,"LogSoftmax",(function(){return h["Ob"]})),n.d(e,"LowerBound",(function(){return h["Tb"]})),n.d(e,"LRN",(function(){return h["Gb"]})),n.d(e,"LRNGrad",(function(){return h["Hb"]})),n.d(e,"Max",(function(){return h["Ub"]})),n.d(e,"Maximum",(function(){return h["ac"]})),n.d(e,"MaxPool",(function(){return h["Vb"]})),n.d(e,"MaxPoolGrad",(function(){return h["Yb"]})),n.d(e,"MaxPool3D",(function(){return h["Wb"]})),n.d(e,"MaxPool3DGrad",(function(){return h["Xb"]})),n.d(e,"MaxPoolWithArgmax",(function(){return h["Zb"]})),n.d(e,"Mean",(function(){return h["bc"]})),n.d(e,"Min",(function(){return h["cc"]})),n.d(e,"Minimum",(function(){return h["dc"]})),n.d(e,"MirrorPad",(function(){return h["ec"]})),n.d(e,"Mod",(function(){return h["fc"]})),n.d(e,"Multinomial",(function(){return h["hc"]})),n.d(e,"Multiply",(function(){return h["ic"]})),n.d(e,"Neg",(function(){return h["jc"]})),n.d(e,"NotEqual",(function(){return h["nc"]})),n.d(e,"NonMaxSuppressionV3",(function(){return h["kc"]})),n.d(e,"NonMaxSuppressionV4",(function(){return h["lc"]})),n.d(e,"NonMaxSuppressionV5",(function(){return h["mc"]})),n.d(e,"OnesLike",(function(){return h["qc"]})),n.d(e,"OneHot",(function(){return h["pc"]})),n.d(e,"Pack",(function(){return h["tc"]})),n.d(e,"PadV2",(function(){return h["uc"]})),n.d(e,"Pool",(function(){return h["vc"]})),n.d(e,"Pow",(function(){return h["wc"]})),n.d(e,"Prelu",(function(){return h["xc"]})),n.d(e,"Prod",(function(){return h["yc"]})),n.d(e,"RaggedGather",(function(){return h["Ac"]})),n.d(e,"RaggedRange",(function(){return h["Bc"]})),n.d(e,"RaggedTensorToTensor",(function(){return h["Cc"]})),n.d(e,"Range",(function(){return h["Dc"]})),n.d(e,"Real",(function(){return h["Fc"]})),n.d(e,"Reciprocal",(function(){return h["Hc"]})),n.d(e,"Relu",(function(){return h["Jc"]})),n.d(e,"Reshape",(function(){return h["Lc"]})),n.d(e,"ResizeNearestNeighbor",(function(){return h["Oc"]})),n.d(e,"ResizeNearestNeighborGrad",(function(){return h["Pc"]})),n.d(e,"ResizeBilinear",(function(){return h["Mc"]})),n.d(e,"ResizeBilinearGrad",(function(){return h["Nc"]})),n.d(e,"Relu6",(function(){return h["Kc"]})),n.d(e,"Reverse",(function(){return h["Qc"]})),n.d(e,"Round",(function(){return h["Sc"]})),n.d(e,"Rsqrt",(function(){return h["Tc"]})),n.d(e,"ScatterNd",(function(){return h["Vc"]})),n.d(e,"SearchSorted",(function(){return h["Wc"]})),n.d(e,"Select",(function(){return h["Xc"]})),n.d(e,"Selu",(function(){return h["Yc"]})),n.d(e,"Slice",(function(){return h["dd"]})),n.d(e,"Sin",(function(){return h["bd"]})),n.d(e,"Sinh",(function(){return h["cd"]})),n.d(e,"Sign",(function(){return h["ad"]})),n.d(e,"Sigmoid",(function(){return h["Zc"]})),n.d(e,"Softplus",(function(){return h["fd"]})),n.d(e,"Sqrt",(function(){return h["nd"]})),n.d(e,"Sum",(function(){return h["wd"]})),n.d(e,"SpaceToBatchND",(function(){return h["gd"]})),n.d(e,"SplitV",(function(){return h["md"]})),n.d(e,"Softmax",(function(){return h["ed"]})),n.d(e,"SparseFillEmptyRows",(function(){return h["hd"]})),n.d(e,"SparseReshape",(function(){return h["id"]})),n.d(e,"SparseSegmentMean",(function(){return h["jd"]})),n.d(e,"SparseSegmentSum",(function(){return h["kd"]})),n.d(e,"SparseToDense",(function(){return h["ld"]})),n.d(e,"SquaredDifference",(function(){return h["pd"]})),n.d(e,"Square",(function(){return h["od"]})),n.d(e,"StridedSlice",(function(){return h["rd"]})),n.d(e,"StringNGrams",(function(){return h["sd"]})),n.d(e,"StringSplit",(function(){return h["td"]})),n.d(e,"StringToHashBucketFast",(function(){return h["ud"]})),n.d(e,"Sub",(function(){return h["vd"]})),n.d(e,"Tan",(function(){return h["xd"]})),n.d(e,"Tanh",(function(){return h["yd"]})),n.d(e,"Tile",(function(){return h["Bd"]})),n.d(e,"TopK",(function(){return h["Cd"]})),n.d(e,"Transform",(function(){return h["Dd"]})),n.d(e,"Transpose",(function(){return h["Ed"]})),n.d(e,"Unique",(function(){return h["Fd"]})),n.d(e,"Unpack",(function(){return h["Gd"]})),n.d(e,"UnsortedSegmentSum",(function(){return h["Hd"]})),n.d(e,"UpperBound",(function(){return h["Id"]})),n.d(e,"ZerosLike",(function(){return h["Kd"]})),n.d(e,"Step",(function(){return h["qd"]})),n.d(e,"FromPixels",(function(){return h["rb"]})),n.d(e,"RotateWithOffset",(function(){return h["Rc"]})),n.d(e,"_FusedMatMul",(function(){return h["Ld"]})),n.d(e,"FusedConv2D",(function(){return h["tb"]})),n.d(e,"FusedDepthwiseConv2D",(function(){return h["ub"]})),n.d(e,"CallbackList",(function(){return vo})),n.d(e,"CustomCallback",(function(){return Oo})),n.d(e,"History",(function(){return xo})),n.d(e,"Callback",(function(){return xp})),n.d(e,"callbacks",(function(){return _p})),n.d(e,"EarlyStopping",(function(){return kp})),n.d(e,"InputSpec",(function(){return gs})),n.d(e,"SymbolicTensor",(function(){return bs})),n.d(e,"LayersModel",(function(){return ec})),n.d(e,"input",(function(){return lc})),n.d(e,"loadLayersModel",(function(){return ic})),n.d(e,"model",(function(){return uc})),n.d(e,"registerCallbackConstructor",(function(){return dc})),n.d(e,"sequential",(function(){return cc})),n.d(e,"RNN",(function(){return fl})),n.d(e,"Sequential",(function(){return oc})),n.d(e,"LayerVariable",(function(){return hs})),n.d(e,"version_layers",(function(){return Tu})),n.d(e,"constraints",(function(){return r})),n.d(e,"initializers",(function(){return i})),n.d(e,"layers",(function(){return a})),n.d(e,"metrics",(function(){return s})),n.d(e,"models",(function(){return o})),n.d(e,"regularizers",(function(){return u})),n.d(e,"GraphModel",(function(){return If})),n.d(e,"loadGraphModel",(function(){return Cf})),n.d(e,"loadGraphModelSync",(function(){return Af})),n.d(e,"deregisterOp",(function(){return Np["a"]})),n.d(e,"registerOp",(function(){return Np["c"]})),n.d(e,"version_converter",(function(){return Nf})),n.d(e,"data",(function(){return l})),n.d(e,"version",(function(){return iM}));var r={};n.r(r),n.d(r,"maxNorm",(function(){return Js})),n.d(r,"unitNorm",(function(){return Ks})),n.d(r,"nonNeg",(function(){return Xs})),n.d(r,"minMaxNorm",(function(){return Ys}));var i={};n.r(i),n.d(i,"zeros",(function(){return Zs})),n.d(i,"ones",(function(){return Qs})),n.d(i,"constant",(function(){return to})),n.d(i,"randomUniform",(function(){return eo})),n.d(i,"randomNormal",(function(){return no})),n.d(i,"truncatedNormal",(function(){return ro})),n.d(i,"identity",(function(){return io})),n.d(i,"varianceScaling",(function(){return ao})),n.d(i,"glorotUniform",(function(){return so})),n.d(i,"glorotNormal",(function(){return oo})),n.d(i,"heNormal",(function(){return uo})),n.d(i,"heUniform",(function(){return co})),n.d(i,"leCunNormal",(function(){return lo})),n.d(i,"leCunUniform",(function(){return ho})),n.d(i,"orthogonal",(function(){return po}));var a={};n.r(a),n.d(a,"inputLayer",(function(){return Fd})),n.d(a,"elu",(function(){return Pd})),n.d(a,"reLU",(function(){return Md})),n.d(a,"leakyReLU",(function(){return Ld})),n.d(a,"prelu",(function(){return Bd})),n.d(a,"softmax",(function(){return zd})),n.d(a,"thresholdedReLU",(function(){return Vd})),n.d(a,"conv1d",(function(){return Ud})),n.d(a,"conv2d",(function(){return Wd})),n.d(a,"conv2dTranspose",(function(){return Gd})),n.d(a,"conv3d",(function(){return Hd})),n.d(a,"conv3dTranspose",(function(){return qd})),n.d(a,"separableConv2d",(function(){return Jd})),n.d(a,"cropping2D",(function(){return Kd})),n.d(a,"upSampling2d",(function(){return Xd})),n.d(a,"depthwiseConv2d",(function(){return Yd})),n.d(a,"activation",(function(){return Zd})),n.d(a,"dense",(function(){return Qd})),n.d(a,"dropout",(function(){return th})),n.d(a,"spatialDropout1d",(function(){return eh})),n.d(a,"flatten",(function(){return nh})),n.d(a,"repeatVector",(function(){return rh})),n.d(a,"reshape",(function(){return ih})),n.d(a,"permute",(function(){return ah})),n.d(a,"embedding",(function(){return sh})),n.d(a,"add",(function(){return oh})),n.d(a,"average",(function(){return uh})),n.d(a,"concatenate",(function(){return ch})),n.d(a,"maximum",(function(){return lh})),n.d(a,"minimum",(function(){return dh})),n.d(a,"multiply",(function(){return hh})),n.d(a,"dot",(function(){return ph})),n.d(a,"batchNormalization",(function(){return fh})),n.d(a,"layerNormalization",(function(){return mh})),n.d(a,"zeroPadding2d",(function(){return gh})),n.d(a,"averagePooling1d",(function(){return bh})),n.d(a,"avgPool1d",(function(){return yh})),n.d(a,"avgPooling1d",(function(){return vh})),n.d(a,"averagePooling2d",(function(){return wh})),n.d(a,"avgPool2d",(function(){return xh})),n.d(a,"avgPooling2d",(function(){return Oh})),n.d(a,"averagePooling3d",(function(){return Sh})),n.d(a,"avgPool3d",(function(){return kh})),n.d(a,"avgPooling3d",(function(){return Th})),n.d(a,"globalAveragePooling1d",(function(){return _h})),n.d(a,"globalAveragePooling2d",(function(){return Ih})),n.d(a,"globalMaxPooling1d",(function(){return Ch})),n.d(a,"globalMaxPooling2d",(function(){return Ah})),n.d(a,"maxPooling1d",(function(){return Eh})),n.d(a,"maxPooling2d",(function(){return Nh})),n.d(a,"maxPooling3d",(function(){return jh})),n.d(a,"gru",(function(){return Dh})),n.d(a,"gruCell",(function(){return $h})),n.d(a,"lstm",(function(){return Rh})),n.d(a,"lstmCell",(function(){return Fh})),n.d(a,"simpleRNN",(function(){return Ph})),n.d(a,"simpleRNNCell",(function(){return Mh})),n.d(a,"convLstm2d",(function(){return Lh})),n.d(a,"convLstm2dCell",(function(){return Bh})),n.d(a,"rnn",(function(){return zh})),n.d(a,"stackedRNNCells",(function(){return Vh})),n.d(a,"bidirectional",(function(){return Uh})),n.d(a,"timeDistributed",(function(){return Wh})),n.d(a,"globalMaxPool1d",(function(){return Gh})),n.d(a,"globalMaxPool2d",(function(){return Hh})),n.d(a,"maxPool1d",(function(){return qh})),n.d(a,"maxPool2d",(function(){return Jh})),n.d(a,"Layer",(function(){return xs})),n.d(a,"RNN",(function(){return fl})),n.d(a,"RNNCell",(function(){return ml})),n.d(a,"input",(function(){return lc})),n.d(a,"gaussianNoise",(function(){return Kh})),n.d(a,"gaussianDropout",(function(){return Xh})),n.d(a,"alphaDropout",(function(){return Yh})),n.d(a,"masking",(function(){return Zh})),n.d(a,"rescaling",(function(){return Qh})),n.d(a,"centerCrop",(function(){return tp})),n.d(a,"resizing",(function(){return ep})),n.d(a,"categoryEncoding",(function(){return np}));var s={};n.r(s),n.d(s,"binaryAccuracy",(function(){return rp})),n.d(s,"binaryCrossentropy",(function(){return ip})),n.d(s,"sparseCategoricalAccuracy",(function(){return ap})),n.d(s,"categoricalAccuracy",(function(){return sp})),n.d(s,"categoricalCrossentropy",(function(){return op})),n.d(s,"precision",(function(){return up})),n.d(s,"recall",(function(){return cp})),n.d(s,"cosineProximity",(function(){return lp})),n.d(s,"meanAbsoluteError",(function(){return dp})),n.d(s,"meanAbsolutePercentageError",(function(){return hp})),n.d(s,"MAPE",(function(){return pp})),n.d(s,"mape",(function(){return fp})),n.d(s,"meanSquaredError",(function(){return mp})),n.d(s,"MSE",(function(){return gp})),n.d(s,"mse",(function(){return bp}));var o={};n.r(o),n.d(o,"modelFromJSON",(function(){return rc}));var u={};n.r(u),n.d(u,"l1l2",(function(){return yp})),n.d(u,"l1",(function(){return vp})),n.d(u,"l2",(function(){return wp}));var c={};n.r(c),n.d(c,"abs",(function(){return jp["b"]})),n.d(c,"acos",(function(){return jp["c"]})),n.d(c,"acosh",(function(){return jp["d"]})),n.d(c,"add",(function(){return jp["e"]})),n.d(c,"addN",(function(){return jp["f"]})),n.d(c,"all",(function(){return jp["g"]})),n.d(c,"any",(function(){return jp["h"]})),n.d(c,"argMax",(function(){return jp["i"]})),n.d(c,"argMin",(function(){return jp["j"]})),n.d(c,"asin",(function(){return jp["k"]})),n.d(c,"asinh",(function(){return jp["l"]})),n.d(c,"atan",(function(){return jp["m"]})),n.d(c,"atan2",(function(){return jp["n"]})),n.d(c,"atanh",(function(){return jp["o"]})),n.d(c,"avgPool",(function(){return jp["p"]})),n.d(c,"avgPool3d",(function(){return jp["q"]})),n.d(c,"basicLSTMCell",(function(){return jp["r"]})),n.d(c,"batchToSpaceND",(function(){return jp["w"]})),n.d(c,"batchNorm",(function(){return jp["s"]})),n.d(c,"batchNorm2d",(function(){return jp["t"]})),n.d(c,"batchNorm3d",(function(){return jp["u"]})),n.d(c,"batchNorm4d",(function(){return jp["v"]})),n.d(c,"bincount",(function(){return jp["x"]})),n.d(c,"broadcastArgs",(function(){return jp["z"]})),n.d(c,"broadcastTo",(function(){return jp["A"]})),n.d(c,"buffer",(function(){return jp["B"]})),n.d(c,"cast",(function(){return jp["C"]})),n.d(c,"ceil",(function(){return jp["D"]})),n.d(c,"clipByValue",(function(){return jp["E"]})),n.d(c,"clone",(function(){return jp["F"]})),n.d(c,"complex",(function(){return jp["G"]})),n.d(c,"concat",(function(){return jp["H"]})),n.d(c,"concat1d",(function(){return jp["I"]})),n.d(c,"concat2d",(function(){return jp["J"]})),n.d(c,"concat3d",(function(){return jp["K"]})),n.d(c,"concat4d",(function(){return jp["L"]})),n.d(c,"conv1d",(function(){return jp["M"]})),n.d(c,"conv2d",(function(){return jp["N"]})),n.d(c,"conv2dTranspose",(function(){return jp["O"]})),n.d(c,"conv3d",(function(){return jp["P"]})),n.d(c,"conv3dTranspose",(function(){return jp["Q"]})),n.d(c,"cos",(function(){return jp["R"]})),n.d(c,"cosh",(function(){return jp["S"]})),n.d(c,"cumprod",(function(){return jp["U"]})),n.d(c,"cumsum",(function(){return jp["V"]})),n.d(c,"denseBincount",(function(){return jp["W"]})),n.d(c,"depthToSpace",(function(){return jp["X"]})),n.d(c,"depthwiseConv2d",(function(){return jp["Y"]})),n.d(c,"diag",(function(){return jp["Z"]})),n.d(c,"dilation2d",(function(){return jp["ab"]})),n.d(c,"div",(function(){return jp["bb"]})),n.d(c,"divNoNan",(function(){return jp["cb"]})),n.d(c,"dot",(function(){return jp["db"]})),n.d(c,"einsum",(function(){return jp["fb"]})),n.d(c,"elu",(function(){return jp["gb"]})),n.d(c,"equal",(function(){return jp["ib"]})),n.d(c,"erf",(function(){return jp["jb"]})),n.d(c,"euclideanNorm",(function(){return jp["kb"]})),n.d(c,"exp",(function(){return jp["lb"]})),n.d(c,"expandDims",(function(){return jp["mb"]})),n.d(c,"expm1",(function(){return jp["nb"]})),n.d(c,"eye",(function(){return jp["ob"]})),n.d(c,"fill",(function(){return jp["qb"]})),n.d(c,"floor",(function(){return jp["rb"]})),n.d(c,"floorDiv",(function(){return jp["sb"]})),n.d(c,"gather",(function(){return jp["ub"]})),n.d(c,"greater",(function(){return jp["wb"]})),n.d(c,"greaterEqual",(function(){return jp["xb"]})),n.d(c,"imag",(function(){return jp["zb"]})),n.d(c,"isFinite",(function(){return jp["Db"]})),n.d(c,"isInf",(function(){return jp["Eb"]})),n.d(c,"isNaN",(function(){return jp["Fb"]})),n.d(c,"leakyRelu",(function(){return jp["Gb"]})),n.d(c,"less",(function(){return jp["Hb"]})),n.d(c,"lessEqual",(function(){return jp["Ib"]})),n.d(c,"linspace",(function(){return jp["Kb"]})),n.d(c,"localResponseNormalization",(function(){return jp["Lb"]})),n.d(c,"log",(function(){return jp["Mb"]})),n.d(c,"log1p",(function(){return jp["Nb"]})),n.d(c,"logSigmoid",(function(){return jp["Ob"]})),n.d(c,"logSoftmax",(function(){return jp["Pb"]})),n.d(c,"logSumExp",(function(){return jp["Qb"]})),n.d(c,"logicalAnd",(function(){return jp["Rb"]})),n.d(c,"logicalNot",(function(){return jp["Sb"]})),n.d(c,"logicalOr",(function(){return jp["Tb"]})),n.d(c,"logicalXor",(function(){return jp["Ub"]})),n.d(c,"lowerBound",(function(){return jp["Wb"]})),n.d(c,"matMul",(function(){return jp["Xb"]})),n.d(c,"max",(function(){return jp["Yb"]})),n.d(c,"maxPool",(function(){return jp["Zb"]})),n.d(c,"maxPool3d",(function(){return jp["ac"]})),n.d(c,"maxPoolWithArgmax",(function(){return jp["bc"]})),n.d(c,"maximum",(function(){return jp["cc"]})),n.d(c,"mean",(function(){return jp["dc"]})),n.d(c,"meshgrid",(function(){return jp["ec"]})),n.d(c,"min",(function(){return jp["fc"]})),n.d(c,"minimum",(function(){return jp["gc"]})),n.d(c,"mirrorPad",(function(){return jp["hc"]})),n.d(c,"mod",(function(){return jp["ic"]})),n.d(c,"moments",(function(){return jp["jc"]})),n.d(c,"mul",(function(){return jp["lc"]})),n.d(c,"multiRNNCell",(function(){return jp["mc"]})),n.d(c,"multinomial",(function(){return jp["nc"]})),n.d(c,"neg",(function(){return jp["oc"]})),n.d(c,"notEqual",(function(){return jp["qc"]})),n.d(c,"oneHot",(function(){return jp["rc"]})),n.d(c,"ones",(function(){return jp["sc"]})),n.d(c,"onesLike",(function(){return jp["tc"]})),n.d(c,"outerProduct",(function(){return jp["vc"]})),n.d(c,"pad",(function(){return jp["wc"]})),n.d(c,"pad1d",(function(){return jp["xc"]})),n.d(c,"pad2d",(function(){return jp["yc"]})),n.d(c,"pad3d",(function(){return jp["zc"]})),n.d(c,"pad4d",(function(){return jp["Ac"]})),n.d(c,"pool",(function(){return jp["Bc"]})),n.d(c,"pow",(function(){return jp["Cc"]})),n.d(c,"prelu",(function(){return jp["Dc"]})),n.d(c,"print",(function(){return jp["Ec"]})),n.d(c,"prod",(function(){return jp["Fc"]})),n.d(c,"raggedGather",(function(){return jp["Gc"]})),n.d(c,"raggedRange",(function(){return jp["Hc"]})),n.d(c,"raggedTensorToTensor",(function(){return jp["Ic"]})),n.d(c,"rand",(function(){return jp["Jc"]})),n.d(c,"randomGamma",(function(){return jp["Kc"]})),n.d(c,"randomNormal",(function(){return jp["Lc"]})),n.d(c,"randomStandardNormal",(function(){return jp["Mc"]})),n.d(c,"randomUniform",(function(){return jp["Nc"]})),n.d(c,"range",(function(){return jp["Oc"]})),n.d(c,"real",(function(){return jp["Pc"]})),n.d(c,"reciprocal",(function(){return jp["Qc"]})),n.d(c,"relu",(function(){return jp["Rc"]})),n.d(c,"relu6",(function(){return jp["Sc"]})),n.d(c,"reshape",(function(){return jp["Tc"]})),n.d(c,"reverse",(function(){return jp["Uc"]})),n.d(c,"reverse1d",(function(){return jp["Vc"]})),n.d(c,"reverse2d",(function(){return jp["Wc"]})),n.d(c,"reverse3d",(function(){return jp["Xc"]})),n.d(c,"reverse4d",(function(){return jp["Yc"]})),n.d(c,"round",(function(){return jp["ad"]})),n.d(c,"rsqrt",(function(){return jp["bd"]})),n.d(c,"scalar",(function(){return jp["cd"]})),n.d(c,"selu",(function(){return jp["fd"]})),n.d(c,"separableConv2d",(function(){return jp["gd"]})),n.d(c,"setdiff1dAsync",(function(){return jp["hd"]})),n.d(c,"sigmoid",(function(){return jp["id"]})),n.d(c,"sign",(function(){return jp["jd"]})),n.d(c,"sin",(function(){return jp["ld"]})),n.d(c,"sinh",(function(){return jp["md"]})),n.d(c,"slice",(function(){return jp["nd"]})),n.d(c,"slice1d",(function(){return jp["od"]})),n.d(c,"slice2d",(function(){return jp["pd"]})),n.d(c,"slice3d",(function(){return jp["qd"]})),n.d(c,"slice4d",(function(){return jp["rd"]})),n.d(c,"softmax",(function(){return jp["sd"]})),n.d(c,"softplus",(function(){return jp["td"]})),n.d(c,"spaceToBatchND",(function(){return jp["ud"]})),n.d(c,"fft",(function(){return jp["pb"]})),n.d(c,"ifft",(function(){return jp["yb"]})),n.d(c,"irfft",(function(){return jp["Cb"]})),n.d(c,"rfft",(function(){return jp["Zc"]})),n.d(c,"split",(function(){return jp["yd"]})),n.d(c,"sqrt",(function(){return jp["zd"]})),n.d(c,"square",(function(){return jp["Ad"]})),n.d(c,"squaredDifference",(function(){return jp["Bd"]})),n.d(c,"squeeze",(function(){return jp["Cd"]})),n.d(c,"stack",(function(){return jp["Dd"]})),n.d(c,"step",(function(){return jp["Ed"]})),n.d(c,"stridedSlice",(function(){return jp["Fd"]})),n.d(c,"sub",(function(){return jp["Hd"]})),n.d(c,"sum",(function(){return jp["Id"]})),n.d(c,"tan",(function(){return jp["Jd"]})),n.d(c,"tanh",(function(){return jp["Kd"]})),n.d(c,"tensor",(function(){return jp["Ld"]})),n.d(c,"tensor1d",(function(){return jp["Md"]})),n.d(c,"tensor2d",(function(){return jp["Nd"]})),n.d(c,"tensor3d",(function(){return jp["Od"]})),n.d(c,"tensor4d",(function(){return jp["Pd"]})),n.d(c,"tensor5d",(function(){return jp["Qd"]})),n.d(c,"tensor6d",(function(){return jp["Rd"]})),n.d(c,"tile",(function(){return jp["Sd"]})),n.d(c,"topk",(function(){return jp["Td"]})),n.d(c,"truncatedNormal",(function(){return jp["Vd"]})),n.d(c,"unique",(function(){return jp["Wd"]})),n.d(c,"unsortedSegmentSum",(function(){return jp["Xd"]})),n.d(c,"unstack",(function(){return jp["Yd"]})),n.d(c,"upperBound",(function(){return jp["Zd"]})),n.d(c,"variable",(function(){return jp["ae"]})),n.d(c,"where",(function(){return jp["be"]})),n.d(c,"whereAsync",(function(){return jp["ce"]})),n.d(c,"zeros",(function(){return jp["de"]})),n.d(c,"zerosLike",(function(){return jp["ee"]})),n.d(c,"booleanMaskAsync",(function(){return jp["y"]})),n.d(c,"transpose",(function(){return jp["Ud"]})),n.d(c,"norm",(function(){return jp["pc"]})),n.d(c,"movingAverage",(function(){return jp["kc"]})),n.d(c,"scatterND",(function(){return jp["dd"]})),n.d(c,"searchSorted",(function(){return jp["ed"]})),n.d(c,"sparseToDense",(function(){return jp["wd"]})),n.d(c,"gatherND",(function(){return jp["vb"]})),n.d(c,"dropout",(function(){return jp["eb"]})),n.d(c,"enclosingPowerOfTwo",(function(){return jp["hb"]})),n.d(c,"cosineWindow",(function(){return jp["T"]})),n.d(c,"inTopKAsync",(function(){return jp["Bb"]})),n.d(c,"op",(function(){return jp["uc"]})),n.d(c,"OP_SCOPE_SUFFIX",(function(){return jp["a"]})),n.d(c,"image",(function(){return jp["Ab"]})),n.d(c,"linalg",(function(){return jp["Jb"]})),n.d(c,"losses",(function(){return jp["Vb"]})),n.d(c,"spectral",(function(){return jp["xd"]})),n.d(c,"fused",(function(){return jp["tb"]})),n.d(c,"signal",(function(){return jp["kd"]})),n.d(c,"sparse",(function(){return jp["vd"]})),n.d(c,"string",(function(){return jp["Gd"]}));var l={};n.r(l),n.d(l,"array",(function(){return Pf})),n.d(l,"Dataset",(function(){return Rf})),n.d(l,"zip",(function(){return Mf})),n.d(l,"CSVDataset",(function(){return Jf})),n.d(l,"TextLineDataset",(function(){return zf})),n.d(l,"csv",(function(){return am})),n.d(l,"func",(function(){return sm})),n.d(l,"generator",(function(){return om})),n.d(l,"microphone",(function(){return cm})),n.d(l,"webcam",(function(){return um})),n.d(l,"FileDataSource",(function(){return rm})),n.d(l,"URLDataSource",(function(){return im})),n.d(l,"version_data",(function(){return lm}));var d={};n.r(d),n.d(d,"simpleAbsImpl",(function(){return ng})),n.d(d,"addImpl",(function(){return Hm})),n.d(d,"bincountImpl",(function(){return Zg})),n.d(d,"bincountReduceImpl",(function(){return Qg})),n.d(d,"castImpl",(function(){return zm})),n.d(d,"ceilImpl",(function(){return ib})),n.d(d,"concatImpl",(function(){return db})),n.d(d,"equalImpl",(function(){return cy})),n.d(d,"expImpl",(function(){return wy})),n.d(d,"expm1Impl",(function(){return Ty})),n.d(d,"floorImpl",(function(){return Hy})),n.d(d,"gatherNdImpl",(function(){return nv})),n.d(d,"gatherV2Impl",(function(){return av})),n.d(d,"greaterImpl",(function(){return uv})),n.d(d,"greaterEqualImpl",(function(){return dv})),n.d(d,"lessImpl",(function(){return Ov})),n.d(d,"lessEqualImpl",(function(){return Tv})),n.d(d,"linSpaceImpl",(function(){return Cv})),n.d(d,"logImpl",(function(){return Nv})),n.d(d,"maxImpl",(function(){return Jv})),n.d(d,"maximumImpl",(function(){return Yv})),n.d(d,"minimumImpl",(function(){return fw})),n.d(d,"multiplyImpl",(function(){return Qb})),n.d(d,"negImpl",(function(){return _w})),n.d(d,"notEqualImpl",(function(){return Mw})),n.d(d,"prodImpl",(function(){return tx})),n.d(d,"raggedGatherImpl",(function(){return lx})),n.d(d,"raggedRangeImpl",(function(){return fx})),n.d(d,"raggedTensorToTensorImpl",(function(){return xx})),n.d(d,"rangeImpl",(function(){return kx})),n.d(d,"rsqrtImpl",(function(){return Vx})),n.d(d,"scatterImpl",(function(){return Gx})),n.d(d,"sigmoidImpl",(function(){return jm})),n.d(d,"sliceImpl",(function(){return qg})),n.d(d,"sparseFillEmptyRowsImpl",(function(){return bO})),n.d(d,"sparseReshapeImpl",(function(){return wO})),n.d(d,"sparseSegmentReductionImpl",(function(){return SO})),n.d(d,"sqrtImpl",(function(){return jO})),n.d(d,"squaredDifferenceImpl",(function(){return FO})),n.d(d,"stridedSliceImpl",(function(){return zO})),n.d(d,"stringNGramsImpl",(function(){return GO})),n.d(d,"stringSplitImpl",(function(){return KO})),n.d(d,"stringToHashBucketFastImpl",(function(){return ZO})),n.d(d,"subImpl",(function(){return Ny})),n.d(d,"tileImpl",(function(){return aS})),n.d(d,"topKImpl",(function(){return lS})),n.d(d,"transposeImpl",(function(){return dg})),n.d(d,"uniqueImpl",(function(){return SS}));var h=n("fa11"),p=n("c05b"),f=n("deb3"),m=n("a5aa"),g=n("2fb1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const b={kernelName:p["a"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,Object(g["a"])(Object(f["a"])(n,"float32"),-1))}}};var y=n("c77c"),v=n("3bb7"),w=n("015f"),x=n("163a"),O=n("93b2"),S=n("a009");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const k={kernelName:p["b"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(O["a"])(Object(f["a"])(n,"float32")),r=Object(x["a"])(Object(S["a"])(Object(w["a"])(1),e));return Object(v["a"])(Object(y["a"])(t,r))}}}},T={kernelName:p["c"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(x["a"])(Object(S["a"])(Object(O["a"])(Object(f["a"])(n,"float32")),1));return Object(y["a"])(t,e)}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var _=n("526f"),I=n("35c9"),C=n("e053");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const A={kernelName:p["d"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_["assertAndGetBroadcastShape"](n.shape,r.shape),a=()=>{let e=t;const r=_["getReductionAxes"](n.shape,i);return r.length>0&&(e=Object(C["a"])(e,r)),Object(I["a"])(e,n.shape)},s=()=>{let e=t;const n=_["getReductionAxes"](r.shape,i);return n.length>0&&(e=Object(C["a"])(e,n)),Object(I["a"])(e,r.shape)};return{a:a,b:s}}},E={kernelName:p["e"],saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((e,r)=>{n[r]=()=>t.clone()}),n}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var N=n("a09b");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j={kernelName:p["h"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(N["a"])(n)}}},D={kernelName:p["i"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(N["a"])(n)}}},$={kernelName:p["j"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(x["a"])(Object(S["a"])(Object(w["a"])(1),Object(O["a"])(Object(f["a"])(n,"float32")))))}}};
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var R=n("9117");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F={kernelName:p["k"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(x["a"])(Object(R["a"])(Object(w["a"])(1),Object(O["a"])(Object(f["a"])(n,"float32"))));return Object(y["a"])(t,e)}}}},P={kernelName:p["m"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(_["assertAndGetBroadcastShape"])(n.shape,r.shape),a=()=>{const e=Object(R["a"])(Object(O["a"])(n),Object(O["a"])(r));let a=Object(m["a"])(t,Object(y["a"])(r,e));const s=Object(_["getReductionAxes"])(n.shape,i);return s.length>0&&(a=Object(C["a"])(a,s)),Object(I["a"])(a,n.shape)},s=()=>{const e=Object(R["a"])(Object(O["a"])(n),Object(O["a"])(r));let a=Object(v["a"])(Object(m["a"])(t,Object(y["a"])(n,e)));const s=Object(_["getReductionAxes"])(r.shape,i);return s.length>0&&(a=Object(C["a"])(a,s)),Object(I["a"])(a,r.shape)};return{a:a,b:s}}},M={kernelName:p["l"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(R["a"])(Object(O["a"])(Object(f["a"])(n,"float32")),1))}}},L={kernelName:p["n"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(S["a"])(Object(w["a"])(1),Object(O["a"])(Object(f["a"])(n,"float32"))))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var B=n("6ae2"),z=n("a3f7"),V=n("6ad5"),U=n("b818"),W=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function G(t,e,n,r,i,a){const s=Object(z["a"])(t,"dy","avgPool3dGrad"),o=Object(z["a"])(e,"input","avgPool3dGrad");let u=s,c=o,l=!1;4===o.rank&&(l=!0,u=Object(I["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=Object(I["a"])(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V["b"](5===u.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+u.rank+"."),V["b"](5===c.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+c.rank+"."),Object(U["a"])("avgPool3dGrad",i,a);const d={dy:u,input:c},h={filterSize:n,strides:r,pad:i,dimRoundingMode:a},f=B["a"].runKernel(p["q"],d,h);return l?Object(I["a"])(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const H=Object(W["b"])({avgPool3dGrad_:G}),q={kernelName:p["p"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:s,dimRoundingMode:o}=n;return{x:()=>H(t,r,i,a,s,o)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function J(t,e,n,r,i){const a=Object(z["a"])(t,"dy","avgPoolGrad"),s=Object(z["a"])(e,"input","avgPoolGrad");V["b"](s.rank===a.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${a.rank})`);let o=s,u=a,c=!1;3===s.rank&&(c=!0,o=Object(I["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=Object(I["a"])(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V["b"](4===u.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+u.rank+"."),V["b"](4===o.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+o.rank+".");const l={dy:u,input:o},d={filterSize:n,strides:r,pad:i},h=B["a"].runKernel(p["r"],l,d);return c?Object(I["a"])(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const K=Object(W["b"])({avgPoolGrad_:J}),X={kernelName:p["o"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:s}=n;return{x:()=>K(t,r,i,a,s)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Y=n("487b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z={kernelName:p["s"],inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:a,transposeB:s}=n;return a||s?!a&&s?{a:()=>Object(Y["a"])(t,i,!1,!1),b:()=>Object(Y["a"])(t,r,!0,!1)}:a&&!s?{a:()=>Object(Y["a"])(i,t,!1,!0),b:()=>Object(Y["a"])(r,t,!1,!1)}:{a:()=>Object(Y["a"])(i,t,!0,!0),b:()=>Object(Y["a"])(t,r,!0,!0)}:{a:()=>Object(Y["a"])(t,i,!1,!0),b:()=>Object(Y["a"])(r,t,!0,!1)}}};var Q=n("7580");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tt={kernelName:p["t"],gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>Object(Q["a"])(t,r,i)}}},et={kernelName:p["w"],gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,a=r.shape,s=Array.from(a);for(let u=i.length-1;u>=0;u--)if(i[u]===a[u])s[u]=1;else if(1!==i[u])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const o=[];for(let u=0;u<s.length;u++)s[u]>1&&o.push(u);return{x:()=>Object(C["a"])(t,o,!0)}}},nt={kernelName:p["x"],gradFunc:t=>({x:()=>t.clone()})},rt={kernelName:p["y"],gradFunc:t=>({x:()=>Object(N["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var it=n("bb2d"),at=n("b21c"),st=n("e333"),ot=n("6791");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ut={kernelName:p["z"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>Object(ot["a"])(Object(st["a"])(Object(it["a"])(r,i),Object(at["a"])(r,a)),t,Object(N["a"])(t))}}},ct={kernelName:p["B"],inputsToSave:["x"],gradFunc:b.gradFunc};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var lt=n("45bb");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dt={kernelName:p["C"],saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(t=>t.shape),{axis:i}=n,a=Object(V["H"])(i,e[0].shape)[0],s=r.map(t=>t[a]),o=Object(lt["a"])(t,s,a);return o.map(t=>()=>t)}};var ht=n("0f6f"),pt=n("73d3");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ft={kernelName:p["D"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:a,strides:s,pad:o,dataFormat:u}=n;return V["b"](U["k"](a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>Object(pt["a"])(r.shape,t,i,s,o,u),filter:()=>Object(ht["a"])(r,t,i.shape,s,o,u)}}};var mt=n("dd7e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gt={kernelName:p["F"],inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:a,pad:s,dataFormat:o,dimRoundingMode:u}=n;return{dy:()=>Object(mt["a"])(t,i,a,s,o,1,u),filter:()=>Object(ht["a"])(t,r,i.shape,a,s,o,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bt(t,e,n,r,i){let a=t;4===t.rank&&(a=Object(I["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=e;4===s.rank&&(s=Object(I["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),V["b"](5===a.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."),V["b"](5===s.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+s.shape+"."),V["b"](5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."),V["b"](a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),V["b"](s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:a,dy:s},u={strides:r,pad:i,filterShape:n};return B["a"].runKernel(p["H"],o,u)}const yt=Object(W["b"])({conv3DBackpropFilter_:bt});var vt=n("99d0");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wt={kernelName:p["G"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a}=n;V["b"](Object(U["k"])(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,o]=e;return{x:()=>Object(vt["a"])(s.shape,t,o,i,a),filter:()=>yt(s,t,o.shape,i,a)}}};var xt=n("6932");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ot={kernelName:p["J"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(Object(v["a"])(Object(xt["a"])(Object(f["a"])(n,"float32"))),t)}}};var St=n("5dc4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kt={kernelName:p["K"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(Object(St["a"])(Object(f["a"])(n,"float32")),t)}}};var Tt=n("36e5"),_t=n("1e68"),It=n("c912");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ct={kernelName:p["N"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:a,reverse:s}=n;return{x:()=>{const e=Object(Tt["f"])([i],r.rank);let n=Object(_t["a"])(t,i,a,!s);return null!=e&&(n=Object(It["a"])(n,e)),n}}}};var At=n("6926"),Et=n("8cb0");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Nt={kernelName:p["Q"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:s}=n,o=null==r?[1,1]:r;V["b"](U["k"](o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[u,c]=e;return V["b"](4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),V["b"](4===c.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),V["b"](u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),V["b"](U["i"](i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),U["a"]("depthwiseConv2d",a,s),{x:()=>Object(Et["a"])(u.shape,t,c,i,a,o,s),filter:()=>Object(At["a"])(u,t,c.shape,i,a,o,s)}}},jt={kernelName:p["U"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,a={x:r,filter:i,dy:t},s={x:r,filter:i,dy:t};return{x:()=>B["a"].runKernel(p["W"],a,n),filter:()=>B["a"].runKernel(p["V"],s,n)}}},Dt={kernelName:p["Y"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>B["a"].runKernel(p["Z"],r)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var $t=n("4f20");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rt={kernelName:p["bb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Object(m["a"])(Object($t["a"])(Object(v["a"])(Object(O["a"])(n))),2/Math.sqrt(Math.PI));return{x:()=>Object(m["a"])(t,r)}}},Ft={kernelName:p["cb"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,n)}}},Pt={kernelName:p["db"],inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Object(I["a"])(t,n.shape)}}},Mt={kernelName:p["eb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,Object($t["a"])(n))}}},Lt={kernelName:p["ib"],gradFunc:t=>({x:()=>Object(N["a"])(t)})},Bt={kernelName:p["jb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(_["assertAndGetBroadcastShape"])(n.shape,r.shape),a=()=>{const e=Object(y["a"])(t,Object(f["a"])(r,"float32")),a=Object(_["getReductionAxes"])(n.shape,i);return a.length>0?Object(I["a"])(Object(C["a"])(e,a),n.shape):e},s=()=>{let e=Object(m["a"])(t,Object(f["a"])(n,"float32"));const a=Object(_["getReductionAxes"])(r.shape,i);a.length>0&&(e=Object(I["a"])(Object(C["a"])(e,a),r.shape));const s=Object(O["a"])(r);return Object(v["a"])(Object(y["a"])(e,Object(f["a"])(s,"float32")))};return{a:a,b:s}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zt=n("5f2a"),Vt=n("8d71");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ut={kernelName:p["lb"],inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,a,s,o]=e,u=null==o?Object(w["a"])(1):o,c=Object(_["getReductionAxes"])(a.shape,i.shape),l=[];if(1===a.rank){for(let t=0;t<i.shape.length-1;++t)l.push(i.shape[t]);l.push(1)}const d=Object(S["a"])(i,a),h=Object(m["a"])(t,u),p=Object(zt["a"])(Object(R["a"])(s,Object(w["a"])(r))),f=Object(m["a"])(Object(m["a"])(Object(m["a"])(p,p),p),Object(w["a"])(-.5)),g=()=>1===a.rank?Object(I["a"])(Object(m["a"])(Object(m["a"])(t,Object(Vt["a"])(Object(I["a"])(p,[1,1,1,a.shape[0]]),l)),u),i.shape):Object(I["a"])(Object(m["a"])(Object(m["a"])(t,p),u),i.shape),b=()=>{let t=Object(m["a"])(Object(m["a"])(p,Object(w["a"])(-1)),h);return 1===a.rank&&(t=Object(C["a"])(t,c)),Object(I["a"])(t,a.shape)},y=()=>{let t=Object(m["a"])(Object(m["a"])(f,d),h);return 1===a.rank&&(t=Object(C["a"])(t,c)),Object(I["a"])(t,a.shape)},v=()=>{const e=Object(m["a"])(d,p);let n=Object(m["a"])(t,e);return 1===a.rank&&(n=Object(C["a"])(n,c)),Object(I["a"])(n,a.shape)},x=()=>{let e=t;return 1===a.rank&&(e=Object(C["a"])(e,c)),Object(I["a"])(e,a.shape)};return{x:g,mean:b,variance:y,scale:v,offset:x}}};var Wt=n("53f2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gt={kernelName:p["pb"],inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:a}=n,s=Object(V["H"])(a,r.shape)[0],o=()=>{const e=r.shape,n=i.size,o=e.slice(0,s),u=o.length,c=e.slice(a,e.length).slice(1),l=c.length,d=Ht(0,u),h=Ht(u+1,u+1+l),p=qt([o,[n],c]),f=Object(I["a"])(t,p),m=Object(I["a"])(i,[n]),g=qt([[u],d,h]),b=Object(It["a"])(f,g);let y=Object(Wt["a"])(b,m,r.shape[s]);const v=Object(Tt["h"])(g);return y=Object(It["a"])(y,v),y};return{x:o,indices:()=>i}}};function Ht(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function qt(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jt={kernelName:p["rb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Object(N["a"])(n),b:()=>Object(N["a"])(r)}}},Kt={kernelName:p["tb"],gradFunc:t=>({x:()=>Object(f["a"])(t,"float32")})},Xt={kernelName:p["vb"],gradFunc:t=>({x:()=>Object(N["a"])(t)})},Yt={kernelName:p["wb"],gradFunc:t=>({x:()=>Object(N["a"])(t)})},Zt={kernelName:p["xb"],gradFunc:t=>({x:()=>Object(N["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qt=n("cef0");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const te={kernelName:p["Ab"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,a=Object(Qt["a"])(r,0);return{x:()=>Object(ot["a"])(a,t,Object(m["a"])(t,i))}}},ee={kernelName:p["Fb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(R["a"])(n,1))}}},ne={kernelName:p["Eb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(f["a"])(n,"float32"))}}},re={kernelName:p["Gb"],inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const e=!0,n=Object($t["a"])(r);return Object(S["a"])(t,Object(m["a"])(Object(C["a"])(t,i,e),n))}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ie(t,e,n,r=5,i=1,a=1,s=.5){const o={x:t,y:e,dy:n},u={depthRadius:r,bias:i,alpha:a,beta:s};return B["a"].runKernel(p["zb"],o,u)}const ae=Object(W["b"])({localResponseNormalizationBackprop_:ie}),se={kernelName:p["yb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:a,bias:s,alpha:o,beta:u}=n;return{x:()=>ae(r,i,t,a,s,o,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oe=n("b9b9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ue(t,e,n,r){return e.rank<n.rank&&(e=Object(I["a"])(e,Tt["e"](e.shape,r))),t.rank<n.rank&&(t=Object(I["a"])(t,Tt["e"](t.shape,r))),{x:()=>{const r=Object(m["a"])(t,Object(f["a"])(Object(oe["a"])(n,e),t.dtype));return r}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ce={kernelName:p["Mb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,a=e[0],s=e[1],o=V["H"](i,a.shape),u=ue(t,s,a,o);return{x:()=>u["x"]()}}};var le=n("e1fd");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const de={kernelName:p["Sb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=()=>Object(m["a"])(t,Object(f["a"])(Object(it["a"])(n,r),"float32")),a=()=>Object(m["a"])(t,Object(f["a"])(Object(le["a"])(n,r),"float32"));return{a:i,b:a}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function he(t,e,n,r,i,a,s){const o=Object(z["a"])(t,"dy","maxPool3dGrad"),u=Object(z["a"])(e,"input","maxPool3dGrad"),c=Object(z["a"])(n,"output","maxPool3dGrad");let l=o,d=u,h=c,f=!1;4===u.rank&&(f=!0,l=Object(I["a"])(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=Object(I["a"])(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=Object(I["a"])(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),V["b"](5===l.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+l.rank+"."),V["b"](5===d.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+d.rank+"."),V["b"](5===h.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+h.rank+"."),Object(U["a"])("maxPool3dGrad",a,s);const m={dy:l,input:d,output:h},g={filterSize:r,strides:i,pad:a,dimRoundingMode:s},b=B["a"].runKernel(p["Pb"],m,g);return f?Object(I["a"])(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const pe=Object(W["b"])({maxPool3dGrad_:he}),fe={kernelName:p["Ob"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:s,pad:o,dimRoundingMode:u}=n;return{x:()=>pe(t,r,i,a,s,o,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function me(t,e,n,r,i,a,s){const o=Object(z["a"])(t,"dy","maxPoolGrad"),u=Object(z["a"])(e,"input","maxPoolGrad"),c=Object(z["a"])(n,"output","maxPoolGrad");V["b"](u.rank===o.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${o.rank})`),V["b"](4===o.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+o.rank+"."),V["b"](4===u.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+u.rank+"."),U["a"]("maxPoolGrad",a,s);const l={dy:o,input:u,output:c},d={filterSize:r,strides:i,pad:a,dimRoundingMode:s};return B["a"].runKernel(p["Qb"],l,d)}const ge=Object(W["b"])({maxPoolGrad_:me}),be={kernelName:p["Nb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:s,pad:o}=n;return{x:()=>ge(t,r,i,a,s,o)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ye=n("c22a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ve={kernelName:p["Tb"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,a=V["H"](i,r.shape),s=Object(Tt["d"])(r.shape,a),o=s[1],u=V["N"](o),c=()=>{const e=r.shape.slice();a.forEach(t=>{e[t]=1});const n=Object(I["a"])(t,e),i=Object(y["a"])(Object(m["a"])(n,Object(ye["a"])(r.shape,"float32")),u);return i};return{x:c}}},we={kernelName:p["Ub"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[a,s]=e,o=V["H"](i,a.shape),u=ue(t,s,a,o);return{x:()=>u["x"]()}}},xe={kernelName:p["Vb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=()=>Object(m["a"])(t,Object(f["a"])(Object(at["a"])(n,r),"float32")),a=()=>Object(m["a"])(t,Object(f["a"])(Object(Qt["a"])(n,r),"float32"));return{a:i,b:a}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Oe=n("6d3c");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Se={kernelName:p["Wb"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(t=>t[0]);return{x:()=>Object(Oe["a"])(t,a,r.shape)}}};var ke=n("d369");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Te={kernelName:p["Xb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(_["assertAndGetBroadcastShape"])(n.shape,r.shape),a=()=>{const e=Object(_["getReductionAxes"])(n.shape,i);return e.length>0?Object(I["a"])(Object(C["a"])(t,e),n.shape):t},s=()=>{const e=Object(m["a"])(t,Object(v["a"])(Object(ke["a"])(Object(y["a"])(n,r)))),a=Object(_["getReductionAxes"])(r.shape,i);return a.length>0?Object(I["a"])(Object(C["a"])(e,a),r.shape):e};return{a:a,b:s}}},_e={kernelName:p["Zb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(_["assertAndGetBroadcastShape"])(n.shape,r.shape),a=()=>{const e=Object(m["a"])(t,Object(f["a"])(r,"float32")),a=Object(_["getReductionAxes"])(n.shape,i);return a.length>0?Object(I["a"])(Object(C["a"])(e,a),n.shape):e},s=()=>{const e=Object(m["a"])(t,Object(f["a"])(n,"float32")),a=Object(_["getReductionAxes"])(r.shape,i);return a.length>0?Object(I["a"])(Object(C["a"])(e,a),r.shape):e};return{a:a,b:s}}},Ie={kernelName:p["ac"],gradFunc:t=>({x:()=>Object(v["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ce=n("5a2c");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ae={kernelName:p["fc"],inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Object(Ce["a"])(n.shape,"float32")}}},Ee={kernelName:p["gc"],gradFunc:t=>({x:()=>Object(N["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ne=n("3a44");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const je={kernelName:p["hc"],saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n,i=Object(Ne["a"])(t,r);return i.map(t=>()=>t)}},De={kernelName:p["ic"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(t=>t[0]);return{x:()=>Object(Oe["a"])(t,a,r.shape)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var $e=n("1359"),Re=n("c9f1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Fe={kernelName:p["kc"],inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,a=n,s=r,o=_["assertAndGetBroadcastShape"](a.shape,s.shape),u=()=>{const e=Object(f["a"])(s,"float32");let n=Object(m["a"])(t,Object(m["a"])(e,Object(Re["a"])(a,Object(S["a"])(e,Object(w["a"])(1)))));const r=_["getReductionAxes"](a.shape,o);return r.length>0&&(n=Object(C["a"])(n,r)),Object(I["a"])(n,a.shape)},c=()=>{const e=Object(Qt["a"])(a,0),n=Object(ot["a"])(e,Object($e["a"])(a),Object(N["a"])(a));let r=Object(m["a"])(t,Object(m["a"])(i,n));const u=_["getReductionAxes"](s.shape,o);return u.length>0&&(r=Object(C["a"])(r,u)),Object(I["a"])(r,s.shape)};return{a:u,b:c}}},Pe={kernelName:p["lc"],inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(Qt["a"])(n,0);return{x:()=>Object(ot["a"])(i,t,Object(m["a"])(t,r)),alpha:()=>{let e=Object(ot["a"])(i,Object(N["a"])(t),Object(m["a"])(t,n));const a=Object(_["getReductionAxes"])(r.shape,t.shape);return a.length>0&&(e=Object(C["a"])(e,a)),Object(I["a"])(e,r.shape)}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Me=n("0ef4"),Le=n("17a3");
/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Be(t,e,n){const r=t.shape.slice();r[n]=1;const i=Object(I["a"])(e,r),a=Object(Le["a"])(t,n,!0,!1),s=Object(Le["a"])(t,n,!0,!0),o=Object(m["a"])(a,s);return Object(m["a"])(i,o)}function ze(t,e,n){const r=t.shape.length,i=r-n.length,a=Me["de"].getAxesPermutation(n,r);let s=t;null!=a&&(s=Object(It["a"])(t,a));const o=s.shape.slice(),u=o.splice(r-n.length,n.length),c=u.reduce((t,e)=>t*e,1);o.push(c);const l=s.reshape(o);let d=Be(l,e,i);if(d=d.reshape(s.shape),null!=a){const t=Me["de"].getUndoAxesPermutation(a);d=Object(It["a"])(d,t)}return d}const Ve={kernelName:p["mc"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let a=[];return a=void 0===i||null===i?r.shape.map((t,e)=>e):"number"===typeof i?[i]:i,{x:()=>ze(r,t,a)}}},Ue={kernelName:p["sc"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_["assertAndGetBroadcastShape"](n.shape,r.shape),a=()=>{const e=Object(y["a"])(t,Object(f["a"])(r,"float32")),a=_["getReductionAxes"](n.shape,i);return a.length>0?Object(I["a"])(Object(C["a"])(e,a),n.shape):e},s=()=>{let e=Object(m["a"])(t,Object(f["a"])(n,"float32"));const a=_["getReductionAxes"](r.shape,i);a.length>0&&(e=Object(I["a"])(Object(C["a"])(e,a),r.shape));const s=Object(O["a"])(r);return Object(v["a"])(Object(y["a"])(e,Object(f["a"])(s,"float32")))};return{a:a,b:s}}},We={kernelName:p["tc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(v["a"])(Object(O["a"])(n)))}}},Ge={kernelName:p["vc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Object(m["a"])(Object(at["a"])(n,6),Object(g["a"])(n));return{x:()=>Object(m["a"])(t,Object(f["a"])(r,"float32"))}}},He={kernelName:p["uc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,Object(f["a"])(Object(g["a"])(n),"float32"))}}},qe={kernelName:p["wc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(I["a"])(t,n.shape)}}},Je={kernelName:p["xc"],inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r},a=()=>B["a"].runKernel(p["yc"],i,n);return{images:a}}},Ke={kernelName:p["zc"],inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r},a=()=>B["a"].runKernel(p["Ac"],i,n);return{images:a}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Xe=n("d08e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ye={kernelName:p["Bc"],gradFunc:(t,e,n)=>{const{dims:r}=n,i=Object(V["H"])(r,t.shape);return{x:()=>Object(Xe["a"])(t,i)}}},Ze={kernelName:p["Dc"],gradFunc:t=>({x:()=>Object(N["a"])(t)})},Qe={kernelName:p["Ec"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(v["a"])(Object(y["a"])(t,Object(m["a"])(Object(Re["a"])(n,1.5),2)))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tn=n("ef00");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const en={kernelName:p["Hc"],inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Object(f["a"])(Object(N["a"])(n),"float32"),t:()=>Object(m["a"])(t,Object(f["a"])(n,t.dtype)),e:()=>Object(m["a"])(t,Object(f["a"])(Object(tn["a"])(n),t.dtype))}}};var nn=n("7cde");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rn={kernelName:p["Ic"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(Qt["a"])(n,Object(w["a"])(0)),r=Object(w["a"])(nn["b"]),i=Object(w["a"])(nn["a"]),a=Object(m["a"])(t,i),s=Object(m["a"])(Object(m["a"])(t,r),Object($t["a"])(Object(f["a"])(n,"float32")));return Object(ot["a"])(e,a,s)}}}},an={kernelName:p["Jc"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,Object(m["a"])(n,Object(S["a"])(Object(w["a"])(1),n)))}}},sn={kernelName:p["Kc"],gradFunc:t=>({x:()=>Object(N["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var on=n("eff7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const un={kernelName:p["Lc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(Object(on["a"])(Object(f["a"])(n,"float32")),t)}}};var cn=n("c1a2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ln={kernelName:p["Mc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(Object(cn["a"])(Object(f["a"])(n,"float32")),t)}}};var dn=n("0eb5"),hn=n("5ebd");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const pn={kernelName:p["Nc"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:a}=n,s=r.shape,[o,u]=Object(hn["parseSliceParams"])(r,i,a),c=[];for(let l=0;l<t.rank;l++)c.push([o[l],s[l]-o[l]-u[l]]);return{x:()=>Object(dn["a"])(t,c)}}},fn={kernelName:p["Oc"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,a=!0,s=Object(m["a"])(t,r);return{logits:()=>Object(S["a"])(s,Object(m["a"])(Object(C["a"])(s,[i],a),r))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var mn=n("ffb3");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gn={kernelName:p["Pc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,Object(mn["a"])(n))}}};var bn=n("3b28");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yn={kernelName:p["Qc"],gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>Object(bn["a"])(t,r,i)}}};var vn=n("649e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wn={kernelName:p["Wc"],gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Object(vn["a"])(t,r)}}},xn={kernelName:p["Xc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(m["a"])(Object(x["a"])(Object(f["a"])(n,"float32")),2))}}},On={kernelName:p["Yc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(t,Object(m["a"])(Object(f["a"])(n,"float32"),2))}}},Sn={kernelName:p["Zc"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(w["a"])(2),a=()=>Object(m["a"])(t,Object(m["a"])(i,Object(S["a"])(n,r))),s=()=>Object(m["a"])(t,Object(m["a"])(i,Object(S["a"])(r,n)));return{a:a,b:s}}},kn={kernelName:p["ad"],gradFunc:t=>({x:()=>Object(N["a"])(t)})},Tn={kernelName:p["fd"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_["assertAndGetBroadcastShape"](n.shape,r.shape),a=()=>{let e=t;const r=_["getReductionAxes"](n.shape,i);return r.length>0&&(e=Object(C["a"])(e,r)),Object(I["a"])(e,n.shape)},s=()=>{let e=t;const n=_["getReductionAxes"](r.shape,i);return n.length>0&&(e=Object(C["a"])(e,n)),Object(I["a"])(Object(v["a"])(e),r.shape)};return{a:a,b:s}}},_n={kernelName:p["gd"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:a}=n,s=Object(V["H"])(a,r.shape);s.forEach(t=>{i[t]=1});const o=Object(I["a"])(t,i),u=Object(m["a"])(o,Object(ye["a"])(r.shape,"float32"));return{x:()=>u}}},In={kernelName:p["hd"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(y["a"])(t,Object(O["a"])(Object(on["a"])(n)))}}},Cn={kernelName:p["id"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(m["a"])(Object(S["a"])(Object(w["a"])(1),Object(O["a"])(n)),t)}}},An={kernelName:p["jd"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n,a=()=>{let e=Object(N["a"])(r);if(1===r.rank)for(let n=0;n<i[0];++n)e=Object(R["a"])(e,Object(Oe["a"])(t,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)e=Object(R["a"])(e,Object(Oe["a"])(t,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let s=0;s<i[2];++s)e=Object(R["a"])(e,Object(Oe["a"])(t,[n*r.shape[0],a*r.shape[1],s*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let s=0;s<i[2];++s)for(let o=0;o<i[3];++o)e=Object(R["a"])(e,Object(Oe["a"])(t,[n*r.shape[0],a*r.shape[1],s*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e};return{x:a}}},En={kernelName:p["md"],gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,a=Tt["h"](i);return{x:()=>Object(It["a"])(t,a)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nn=n("d54d");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jn={kernelName:p["od"],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Object(Nn["a"])(t,i)}}};var Dn=n("dae8"),$n=n("91a3"),Rn=n("09f4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Fn={kernelName:p["pd"],inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e,r=()=>Pn(t,n);return{x:r}}};function Pn(t,e){const n=Object(Rn["a"])(e,Object(N["a"])(e)),r=Object($n["a"])(t,n);let i=Object(it["a"])(e,Object(w["a"])(0,"int32"));const a=r.rank-i.rank;for(let o=0;o<a;++o)i=Object(Dn["a"])(i,o+1);i=Object(st["a"])(i,Object(ye["a"])(r.shape,"bool"));const s=Object(N["a"])(r);return Object(ot["a"])(i,r,s)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mn={kernelName:p["rd"],gradFunc:t=>({x:()=>Object(N["a"])(t)})};var Ln=n("73b8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bn=[b,k,T,A,E,j,D,$,F,P,M,L,q,X,Z,tt,et,nt,rt,ut,ct,dt,gt,ft,wt,Ot,kt,Ct,Nt,jt,Ue,Dt,Rt,Ft,Pt,Mt,Bt,Lt,Ut,Gt,Jt,Kt,Xt,Yt,Zt,te,ee,ne,re,se,ce,ce,de,fe,be,ve,we,xe,Se,Te,_e,Ie,Ae,Ee,je,De,De,Fe,Pe,Ve,We,Ge,He,qe,Je,Ke,Ye,Ze,Qe,en,rn,an,sn,un,ln,pn,fn,gn,yn,yn,wn,wn,xn,Sn,On,kn,Tn,_n,In,Cn,An,En,jn,Fn,Mn];for(const aM of Bn)Object(Ln["e"])(aM);var zn=n("8ae0"),Vn=n("34d7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.abs=function(){return this.throwIfDisposed(),Object(zn["a"])(this)};var Un=n("a374");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.acos=function(){return this.throwIfDisposed(),Object(Un["a"])(this)};var Wn=n("4615");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.acosh=function(){return this.throwIfDisposed(),Object(Wn["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.add=function(t){return this.throwIfDisposed(),Object(R["a"])(this,t)};var Gn=n("df81");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.all=function(t,e){return this.throwIfDisposed(),Object(Gn["a"])(this,t,e)};var Hn=n("4516");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.any=function(t,e){return this.throwIfDisposed(),Object(Hn["a"])(this,t,e)};var qn=n("e89f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.argMax=function(t){return this.throwIfDisposed(),Object(qn["a"])(this,t)};var Jn=n("db49");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.argMin=function(t){return this.throwIfDisposed(),Object(Jn["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.asScalar=function(){return this.throwIfDisposed(),Object(V["b"])(1===this.size,()=>"The array must have only 1 element."),Object(I["a"])(this,[])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.asType=function(t){return this.throwIfDisposed(),Object(f["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.as1D=function(){return this.throwIfDisposed(),Object(I["a"])(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.as2D=function(t,e){return this.throwIfDisposed(),Object(I["a"])(this,[t,e])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Object(I["a"])(this,[t,e,n])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Object(I["a"])(this,[t,e,n,r])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),Object(I["a"])(this,[t,e,n,r,i])};var Kn=n("220f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.asin=function(){return this.throwIfDisposed(),Object(Kn["a"])(this)};var Xn=n("dc59");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.asinh=function(){return this.throwIfDisposed(),Object(Xn["a"])(this)};var Yn=n("7e36");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.atan=function(){return this.throwIfDisposed(),Object(Yn["a"])(this)};var Zn=n("6002");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.atan2=function(t){return this.throwIfDisposed(),Object(Zn["a"])(this,t)};var Qn=n("d1a8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.atanh=function(){return this.throwIfDisposed(),Object(Qn["a"])(this)};var tr=n("9748");Object(Vn["d"])().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Object(tr["a"])(this,t,e,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Object(bn["a"])(this,t,e)};var er=n("71db");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),Object(er["a"])(this,t,e,n,r,i)};var nr=n("48db");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Object(nr["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.cast=function(t){return this.throwIfDisposed(),Object(f["a"])(this,t)};var rr=n("5960");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.ceil=function(){return this.throwIfDisposed(),Object(rr["a"])(this)};var ir=n("c08f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Object(ir["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Vn["a"]&&(t=[t]),Object(vn["a"])([this,...t],e)};var ar=n("7675");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.conv1d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(ar["a"])(this,t,e,n,r,i,a)};var sr=n("cd1f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),Object(sr["a"])(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.conv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(mt["a"])(this,t,e,n,r,i,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.cos=function(){return this.throwIfDisposed(),Object(on["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.cosh=function(){return this.throwIfDisposed(),Object(cn["a"])(this)},
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Object(Le["a"])(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Object(_t["a"])(this,t,e,n)};var or=n("364e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Object(or["a"])(this,t,e)};var ur=n("838f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.depthwiseConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(ur["a"])(this,t,e,n,r,i,a)};var cr=n("c170");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),Object(cr["a"])(this,t,e,n,r,i)};var lr=n("011b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.divNoNan=function(t){return this.throwIfDisposed(),Object(lr["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.div=function(t){return this.throwIfDisposed(),Object(y["a"])(this,t)};var dr=n("29fc");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.dot=function(t){return this.throwIfDisposed(),Object(dr["a"])(this,t)};var hr=n("9e38");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.elu=function(){return this.throwIfDisposed(),Object(hr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.equal=function(t){return this.throwIfDisposed(),Object(oe["a"])(this,t)};var pr=n("8e05");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.erf=function(){return this.throwIfDisposed(),Object(pr["a"])(this)};var fr=n("4e53");
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),Object(fr["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.exp=function(){return this.throwIfDisposed(),Object($t["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.expandDims=function(t){return this.throwIfDisposed(),Object(Dn["a"])(this,t)};var mr=n("1ba2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.expm1=function(){return this.throwIfDisposed(),Object(mr["a"])(this)};var gr=n("1ab7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.fft=function(){return this.throwIfDisposed(),Object(gr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.flatten=function(){return this.throwIfDisposed(),Object(I["a"])(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.floor=function(){return this.throwIfDisposed(),Object(ke["a"])(this)};var br=n("508f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.floorDiv=function(t){return this.throwIfDisposed(),Object(br["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.gather=function(t,e){return this.throwIfDisposed(),Object($n["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Object(it["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.greater=function(t){return this.throwIfDisposed(),Object(Qt["a"])(this,t)};var yr=n("4c7a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.ifft=function(){return this.throwIfDisposed(),Object(yr["a"])(this)};var vr=n("69dc");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.irfft=function(){return this.throwIfDisposed(),Object(vr["a"])(this)};var wr=n("fc0b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.isFinite=function(){return this.throwIfDisposed(),Object(wr["a"])(this)};var xr=n("5980");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.isInf=function(){return this.throwIfDisposed(),Object(xr["a"])(this)};var Or=n("6fef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.isNaN=function(){return this.throwIfDisposed(),Object(Or["a"])(this)};var Sr=n("6f37");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.leakyRelu=function(t){return this.throwIfDisposed(),Object(Sr["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.lessEqual=function(t){return this.throwIfDisposed(),Object(at["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.less=function(t){return this.throwIfDisposed(),Object(le["a"])(this,t)};var kr=n("e101");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Object(kr["a"])(this,t,e,n,r)};var Tr=n("c314");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.logSigmoid=function(){return this.throwIfDisposed(),Object(Tr["a"])(this)};var _r=n("804a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.logSoftmax=function(t){return this.throwIfDisposed(),Object(_r["a"])(this,t)};var Ir=n("afda");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Object(Ir["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.log=function(){return this.throwIfDisposed(),Object($e["a"])(this)};var Cr=n("46b1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.log1p=function(){return this.throwIfDisposed(),Object(Cr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Object(st["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.logicalNot=function(){return this.throwIfDisposed(),Object(tn["a"])(this)};var Ar=n("f183");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.logicalOr=function(t){return this.throwIfDisposed(),Object(Ar["a"])(this,t)};var Er=n("d25f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.logicalXor=function(t){return this.throwIfDisposed(),Object(Er["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Object(Y["a"])(this,t,e,n)};var Nr=n("9fe6");Object(Vn["d"])().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Object(Nr["a"])(this,t,e,n,r)};var jr=n("c021");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.max=function(t,e){return this.throwIfDisposed(),Object(jr["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.maximum=function(t){return this.throwIfDisposed(),Object(Rn["a"])(this,t)};var Dr=n("122e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.mean=function(t,e){return this.throwIfDisposed(),Object(Dr["a"])(this,t,e)};var $r=n("ae6d");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.min=function(t,e){return this.throwIfDisposed(),Object($r["a"])(this,t,e)};var Rr=n("f0e5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.minimum=function(t){return this.throwIfDisposed(),Object(Rr["a"])(this,t)};var Fr=n("93db");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Object(Fr["a"])(this,t,e)};var Pr=n("4611");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.mod=function(t){return this.throwIfDisposed(),Object(Pr["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.mul=function(t){return this.throwIfDisposed(),Object(m["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.neg=function(){return this.throwIfDisposed(),Object(v["a"])(this)};var Mr=n("f757");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Object(Mr["a"])(this,t,e,n)};var Lr=n("d4de");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.notEqual=function(t){return this.throwIfDisposed(),Object(Lr["a"])(this,t)};var Br=n("e22c");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Object(Br["a"])(this,t,e,n)};var zr=n("0db5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.onesLike=function(){return this.throwIfDisposed(),Object(zr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.pad=function(t,e){return this.throwIfDisposed(),Object(dn["a"])(this,t,e)};var Vr=n("eaf4");Object(Vn["d"])().prototype.pool=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(Vr["a"])(this,t,e,n,r,i,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.pow=function(t){return this.throwIfDisposed(),Object(Re["a"])(this,t)};var Ur=n("520f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.prelu=function(t){return this.throwIfDisposed(),Object(Ur["a"])(this,t)};var Wr=n("f3ae");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.prod=function(t,e){return this.throwIfDisposed(),Object(Wr["a"])(this,t,e)};var Gr=n("b500");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.reciprocal=function(){return this.throwIfDisposed(),Object(Gr["a"])(this)};var Hr=n("917a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.relu=function(){return this.throwIfDisposed(),Object(Hr["a"])(this)};var qr=n("46a8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.relu6=function(){return this.throwIfDisposed(),Object(qr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Object(I["a"])(this,t.shape)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.reshape=function(t){return this.throwIfDisposed(),Object(I["a"])(this,t)};var Jr=n("73f8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Object(Jr["a"])(this,t,e,n)};var Kr=n("0f86");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Object(Kr["a"])(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.reverse=function(t){return this.throwIfDisposed(),Object(Xe["a"])(this,t)};var Xr=n("b61d");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.rfft=function(){return this.throwIfDisposed(),Object(Xr["a"])(this)};var Yr=n("08a9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.round=function(){return this.throwIfDisposed(),Object(Yr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.rsqrt=function(){return this.throwIfDisposed(),Object(zt["a"])(this)};var Zr=n("b39e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.selu=function(){return this.throwIfDisposed(),Object(Zr["a"])(this)};var Qr=n("116b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.separableConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(Qr["a"])(this,t,e,n,r,i,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.sigmoid=function(){return this.throwIfDisposed(),Object(mn["a"])(this)};var ti=n("1df6");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.sign=function(){return this.throwIfDisposed(),Object(ti["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.sin=function(){return this.throwIfDisposed(),Object(xt["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.sinh=function(){return this.throwIfDisposed(),Object(St["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.slice=function(t,e){return this.throwIfDisposed(),Object(Oe["a"])(this,t,e)};var ei=n("5f87");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.softmax=function(t){return this.throwIfDisposed(),Object(ei["a"])(this,t)};var ni=n("9ffd");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.softplus=function(){return this.throwIfDisposed(),Object(ni["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Object(Q["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.split=function(t,e){return this.throwIfDisposed(),Object(lt["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.sqrt=function(){return this.throwIfDisposed(),Object(x["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.square=function(){return this.throwIfDisposed(),Object(O["a"])(this)};var ri=n("4184");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Object(ri["a"])(this,t)};var ii=n("d1f4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.squeeze=function(t){return this.throwIfDisposed(),Object(ii["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Vn["a"]?[this,t]:[this,...t];return Object(Nn["a"])(n,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.step=function(t){return this.throwIfDisposed(),Object(g["a"])(this,t)};var ai=n("de1a6");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.stridedSlice=function(t,e,n,r,i,a,s,o){return this.throwIfDisposed(),Object(ai["a"])(this,t,e,n,r,i,a,s,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.sub=function(t){return this.throwIfDisposed(),Object(S["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.sum=function(t,e){return this.throwIfDisposed(),Object(C["a"])(this,t,e)};var si=n("d30a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.tan=function(){return this.throwIfDisposed(),Object(si["a"])(this)};var oi=n("8888");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.tanh=function(){return this.throwIfDisposed(),Object(oi["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.tile=function(t){return this.throwIfDisposed(),Object(Vt["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.toBool=function(){return this.throwIfDisposed(),Object(f["a"])(this,"bool")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.toFloat=function(){return this.throwIfDisposed(),Object(f["a"])(this,"float32")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.toInt=function(){return this.throwIfDisposed(),Object(f["a"])(this,"int32")};var ui=n("5616");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.topk=function(t,e){return this.throwIfDisposed(),Object(ui["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.transpose=function(t){return this.throwIfDisposed(),Object(It["a"])(this,t)};var ci=n("853e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(Vn["d"])().prototype.unique=function(t){return this.throwIfDisposed(),Object(ci["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Object(Wt["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.unstack=function(t){return this.throwIfDisposed(),Object(Ne["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.where=function(t,e){return this.throwIfDisposed(),Object(ot["a"])(t,this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Vn["d"])().prototype.zerosLike=function(){return this.throwIfDisposed(),Object(N["a"])(this)};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class li extends Error{constructor(t){super(t),Object.setPrototypeOf(this,li.prototype)}}class di extends Error{constructor(t){super(t),Object.setPrototypeOf(this,di.prototype)}}class hi extends Error{constructor(t){super(t),Object.setPrototypeOf(this,hi.prototype)}}class pi extends Error{constructor(t){super(t),Object.setPrototypeOf(this,pi.prototype)}}class fi extends Error{constructor(t){super(t),Object.setPrototypeOf(this,fi.prototype)}}Error;
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mi{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let e;return this.cache.has(t)&&(e=this.cache.get(t),this.cache.delete(t),this.cache.set(t,e)),e}put(t,e){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const t=this.cache.keys().next().value;this.cache.delete(t)}this.cache.set(t,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let e=0;e<this.maxEntries-t;e++){const t=this.cache.keys().next().value;this.cache.delete(t)}this.maxEntries=t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gi(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}{const n=new Array(e);return n.fill(t),n}}function bi(t,e){if(!t)throw new fi(e)}function yi(t,e){let n=0;for(const r of t)r===e&&n++;return n}function vi(t){return 1===t.length?t[0]:t}function wi(t){return Array.isArray(t)?t:[t]}function xi(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function Oi(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}let Si={};function ki(t){if(null===t||void 0===t)return null;const e={};return e["className"]=t.getClassName(),e["config"]=t.getConfig(),e}function Ti(t){if(null!=t&&"object"===typeof t)if(Array.isArray(t))t.forEach(t=>Ti(t));else{const e=Object.keys(t);for(const n of e){const e=t[n];null!=e&&"object"===typeof e&&(Array.isArray(e)||"ndarray"!==e["type"]||"number"!==typeof e["value"]?Ti(e):t[n]=e["value"])}}}function _i(t,e={},n={},r="object",i=!1){if("string"===typeof t){const i=t;let a;if(i in n)a=n[i];else if(i in Si)a=Si[i];else if(a=e[i],null==a)throw new hi(`Unknown ${r}: ${t}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{const a=t;if(null==a["className"]||null==a["config"])throw new hi(r+": Improper config format: "+JSON.stringify(a)+".\n'className' and 'config' must set.");const s=a["className"];let o,u;if(s in n?[o,u]=n[s]:s in Si?[o,u]=Si["className"]:s in e&&([o,u]=e[s]),null==o)throw new hi(`Unknown ${r}: ${s}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=u){const t={};for(const n of Object.keys(Si))t[n]=Si[n];for(const i of Object.keys(n))t[i]=n[i];const e=a["config"];e["customObjects"]=t;const r=Object.assign({},Si);for(const i of Object.keys(n))Si[i]=n[i];Ti(a["config"]);const s=u(o,a["config"],n,i);return Si=Object.assign({},r),s}{const t=Object.assign({},Si);for(const r of Object.keys(n))Si[r]=n[r];const e=new o(a["config"]);return Si=Object.assign({},t),e}}}function Ii(t,e){return t<e?-1:t>e?1:0}function Ci(t,e){return-1*Ii(t,e)}function Ai(t){if(null==t)return t;const e=[];for(const n of t)-1===e.indexOf(n)&&e.push(n);return e}function Ei(t){if(null==t)throw new hi("Invalid value in obj: "+JSON.stringify(t));for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ni(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new hi(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function ji(t,e,n=0,r=1/0){return bi(n>=0),bi(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(t=>typeof t===e)}function Di(t,e){Array.isArray(t)?(h["Ji"].assert(t.length>0,()=>e+" is unexpectedly an empty array."),t.forEach((t,n)=>Di(t,`element ${n+1} of ${e}`))):h["Ji"].assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got `+$i(t)+".")}function $i(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>$i(t)).join(",")+"]":"string"===typeof t?`"${t}"`:""+t}function Ri(t,e,n){let r,i=null!=n?n():h["Ji"].now();const a=(...a)=>{const s=null!=n?n():h["Ji"].now();return s-i<e||(i=s,r=t(...a)),r};return a}function Fi(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
let Pi=0;function Mi(){return Pi++}const Li={};function Bi(t=""){return t in Li||(Li[t]=0),Li[t]+=1,t+Li[t].toString()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zi=["channelsFirst","channelsLast"],Vi=["nearest","bilinear"],Ui=["valid","same","causal"],Wi=["max","avg"],Gi=["sum","mul","concat","ave"],Hi=new Map;function qi(t){Ni(zi,"DataFormat",t)}function Ji(t){Ni(Vi,"InterpolationFormat",t)}function Ki(t){Ni(Ui,"PaddingMode",t)}function Xi(t){Ni(Wi,"PoolMode",t)}const Yi=[],Zi="/";function Qi(t,e){Yi.push(t);try{const t=e();return Yi.pop(),t}catch(n){throw Yi.pop(),n}}function ta(){return 0===Yi.length?"":Yi.join(Zi)+Zi}function ea(t){if(!ia(t))throw new Error("Not a valid tensor name: '"+t+"'");return ta()+t}function na(t){if(!ia(t))throw new Error("Not a valid tensor name: '"+t+"'");Hi.has(t)||Hi.set(t,0);const e=Hi.get(t);if(Hi.set(t,Hi.get(t)+1),e>0){const n=`${t}_${e}`;return Hi.set(n,1),n}return t}const ra=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function ia(t){return!!t.match(ra)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aa(t){return t===parseInt(t.toString(),10)}function sa(t,e,n){null==e&&(e=0),null==n&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function oa(t){if(0===t.length)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function ua(t){if(0===t.length)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ca(t,e){if(e<t)throw new hi(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let la;function da(){return null==la&&(la=Object(h["ce"])().epsilon()),la}function ha(){return"channelsLast"}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pa(t,e){return h["re"](t,e)}function fa(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),h["oh"](t,n)}function ma(t,e){return Object(h["vi"])(()=>{if(2!==t.shape.length)throw new hi(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=fa(t,1);return Sa(n,[1,e,1])})}function ga(t){const e=[sa(t.shape)];return h["oh"](t,e)}function ba(t){if(t.rank<=1)throw new hi(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],sa(t.shape,1)];return h["oh"](t,e)}function ya(t,e,n){return Object(h["vi"])(()=>{switch(t.rank){case 1:return h["Nh"](t,e,n);case 2:return h["Oh"](t,[e,0],[n,t.shape[1]]);case 3:return h["Ph"](t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return h["Qh"](t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return h["Mh"](t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return h["Mh"](t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new hi("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function va(t,e,n){return Object(h["vi"])(()=>{switch(t.rank){case 1:return h["Nh"](t,e,n);case 2:return h["Oh"](t,[0,e],[t.shape[0],n]);case 3:return h["Ph"](t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return h["Qh"](t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new hi("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function wa(t,e,n,r){return Object(h["vi"])(()=>{switch(t.rank){case 1:return h["Nh"](t,e,n);case 2:switch(r){case 1:return ya(t,e,n);case 2:return va(t,e,n);default:throw new hi("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return ya(t,e,n);case 2:return h["Ph"](t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return va(t,e,n);default:throw new hi("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return ya(t,e,n);case 2:return h["Qh"](t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return h["Qh"](t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return va(t,e,n);default:throw new hi("The axis is not within the rank of the tensor "+r)}default:throw new hi("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function xa(t,e=-1){let n;return e<0&&(n=t[0].rank,e=0!==n?n:0),e===t[0].rank&&(e=-1),h["we"](t,e)}function Oa(t,e){switch(t.rank){case 1:return h["xe"]([t,e]);case 2:return h["ye"]([t,e],0);case 3:return h["ze"]([t,e],0);case 4:return h["Ae"]([t,e],0);default:throw new hi("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function Sa(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new hi(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return h["wi"](t,e)}function ka(t,e=0,n=1,r,i){return h["bh"](t,e,n,r,i)}function Ta(t,e,n,r){if(t.rank<2||e.rank<2)throw new pi(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const n=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(n!==r)throw new pi(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = `+e.shape)}if(2===t.rank&&2===e.rank){const i=!1,a=!1;return h["vf"].matMul({a:t,b:e,transposeA:i,transposeB:a,bias:r?Ca(t.rank,r,ha()):null,activation:n})}{const i=t.shape.slice(),a=i.pop();t=h["oh"](t,[-1,a]);const s=e.shape.slice(),o=s.pop(),u=s.pop(),c=[...s,o],l=Array.from({length:e.rank},(t,n)=>0===n?e.rank-2:n<=e.rank-2?n-1:n);e=h["oh"](h["Ai"](e,l),[u,-1]);const d=[...i,...c],p=!1,f=!1;return h["oh"](h["vf"].matMul({a:t,b:e,transposeA:p,transposeB:f,bias:r?Ca(t.rank,r,ha()):null,activation:n}),d)}}function _a(t,e,n){return Object(h["vi"])(()=>(e=Array.isArray(e)?Object(h["ni"])(e,"int32"):h["re"](e,"int32"),h["wf"](t,e,n)))}function Ia(t){return h["zg"](t,t)}function Ca(t,e,n){const r=e.shape;if(1!==e.rank&&e.rank!==t)throw new hi("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t);if(5===t){if("channelsFirst"===n)return 1===r.length?h["oh"](e,[1,r[0],1,1,1]):h["oh"](e,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?h["oh"](e,[1,1,1,1,r[0]]):h["oh"](e,[1].concat(r))}else if(4===t){if("channelsFirst"===n)return 1===r.length?h["oh"](e,[1,r[0],1,1]):h["oh"](e,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?h["oh"](e,[1,1,1,r[0]]):h["oh"](e,[1].concat(r))}else if(3===t){if("channelsFirst"===n)return 1===r.length?h["oh"](e,[1,r[0],1]):h["oh"](e,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?h["oh"](e,[1,1,r[0]]):h["oh"](e,[1].concat(r))}else if(t<3)return e;throw new hi("Unsupported input rank by biasAdd: "+e.rank)}function Aa(t,e,n){return Object(h["vi"])(()=>(null==n&&(n=ha()),qi(n),h["Pd"](t,Ca(t.rank,e,n))))}function Ea(t,e=1){if(1!==e)throw new pi(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return h["cf"](t)}function Na(t){return Object(h["vi"])(()=>h["Xe"](t,h["Pd"](h["Md"](t),1)))}function ja(t,e,n,r){return Object(h["vi"])(()=>h["af"](t,e,n,r))}function Da(t){return Object(h["vi"])(()=>{const e=h["Pd"](.5,h["zg"](.2,t));return h["te"](e,0,1)})}function $a(t,e,n=!1){return n?t():e()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ra=["fanIn","fanOut","fanAvg"],Fa=["normal","uniform","truncatedNormal"];
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Pa(t){Ni(Ra,"FanMode",t)}function Ma(t){Ni(Fa,"Distribution",t)}class La extends h["Dh"].Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Ba extends La{apply(t,e){return Object(h["Ri"])(t,e)}}Ba.className="Zeros",h["Dh"].registerClass(Ba);class za extends La{apply(t,e){return Object(h["Hg"])(t,e)}}za.className="Ones",h["Dh"].registerClass(za);class Va extends La{constructor(t){if(super(),"object"!==typeof t)throw new hi("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new hi("config must have value set but got "+t);this.value=t.value}apply(t,e){return Object(h["vi"])(()=>Object(h["zg"])(Object(h["xh"])(this.value),Object(h["Hg"])(t,e)))}getConfig(){return{value:this.value}}}Va.className="Constant",h["Dh"].registerClass(Va);class Ua extends La{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return Object(h["dh"])(t,this.minval,this.maxval,e,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Ua.className="RandomUniform",h["Dh"].registerClass(Ua);class Wa extends La{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32","float32"!==e&&"int32"!==e)throw new pi(`randomNormal does not support dType ${e}.`);return ka(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Wa.className="RandomNormal",h["Dh"].registerClass(Wa);class Ga extends La{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32","float32"!==e&&"int32"!==e)throw new pi(`truncatedNormal does not support dType ${e}.`);return Object(h["Bi"])(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Ga.className="TruncatedNormal",h["Dh"].registerClass(Ga);class Ha extends La{constructor(t){super(),this.gain=null!=t.gain?t.gain:1}apply(t,e){return Object(h["vi"])(()=>{if(2!==t.length||t[0]!==t[1])throw new hi("Identity matrix initializer can only be used for 2D square matrices.");return Object(h["zg"])(this.gain,Object(h["of"])(t[0]))})}getConfig(){return{gain:this.gain}}}function qa(t,e="channelsLast"){let n,r;if(qi(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===e){const e=sa(t,2);n=t[1]*e,r=t[0]*e}else if("channelsLast"===e){const e=sa(t,0,t.length-2);n=t[t.length-2]*e,r=t[t.length-1]*e}}else{const e=sa(t);n=Math.sqrt(e),r=Math.sqrt(e)}return[n,r]}Ha.className="Identity",h["Dh"].registerClass(Ha);class Ja extends La{constructor(t){if(super(),t.scale<0)throw new hi("scale must be a positive float. Got: "+t.scale);this.scale=null==t.scale?1:t.scale,this.mode=null==t.mode?"fanIn":t.mode,Pa(this.mode),this.distribution=null==t.distribution?"normal":t.distribution,Ma(this.distribution),this.seed=t.seed}apply(t,e){const n=qa(t),r=n[0],i=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,i):a/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(a);if(e=e||"float32","float32"!==e&&"int32"!==e)throw new pi(`${this.getClassName()} does not support dType ${e}.`);return Object(h["Bi"])(t,0,n,e,this.seed)}{const n=Math.sqrt(3*a);return Object(h["dh"])(t,-n,n,e,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ja.className="VarianceScaling",h["Dh"].registerClass(Ja);class Ka extends Ja{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Ja.className}}Ka.className="GlorotUniform",h["Dh"].registerClass(Ka);class Xa extends Ja{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Ja.className}}Xa.className="GlorotNormal",h["Dh"].registerClass(Xa);class Ya extends Ja{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Ja.className}}Ya.className="HeNormal",h["Dh"].registerClass(Ya);class Za extends Ja{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Ja.className}}Za.className="HeUniform",h["Dh"].registerClass(Za);class Qa extends Ja{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Ja.className}}Qa.className="LeCunNormal",h["Dh"].registerClass(Qa);class ts extends Ja{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Ja.className}}ts.className="LeCunUniform",h["Dh"].registerClass(ts);class es extends La{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=null==t.gain?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,null!=this.seed)throw new pi("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,e){return Object(h["vi"])(()=>{if(t.length<2)throw new pi("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const e=t[0]>t[1]?[t[1],t[0]]:t,n=ka(e,0,1,"float32");let r=h["Vf"].gramSchmidt(n);return t[0]>t[1]&&(r=Object(h["Ai"])(r)),Object(h["zg"])(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}es.className="Orthogonal",h["Dh"].registerClass(es);const ns={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function rs(t,e={}){return _i(t,h["Dh"].SerializationMap.getMap().classNameMap,e,"initializer")}function is(t){return ki(t)}function as(t){if("string"===typeof t){const e=t in ns?ns[t]:t;if("GlorotNormal"===e)return new Xa;if("GlorotUniform"===e)return new Ka;if("HeNormal"===e)return new Ya;if("HeUniform"===e)return new Za;if("LeCunNormal"===e)return new Qa;if("LeCunUniform"===e)return new ts;{const t={};return t["className"]=e,t["config"]={},rs(t)}}return t instanceof La?t:rs(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ss(t){return Array.isArray(t)&&Array.isArray(t[0])}function os(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function us(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new hi("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function cs(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return t=t,t[0];throw new hi("Expected exactly 1 Shape; got "+t.length)}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ls(t){let e=0;for(const n of t)0===n.shape.length?e+=1:e+=n.shape.reduce((t,e)=>t*e);return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ds="Variable";class hs{constructor(t,e="float32",n=ds,r=!0,i=null){this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=Mi(),n=null==n?ds:n,this.originalName=ea(n),this.name=na(this.originalName),this.trainable_=r,this.constraint=i,this.val=h["Mi"](t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),ps(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function ps(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function fs(t){return t.map(t=>t.read())}function ms(t){t.forEach(t=>{const e=t[0];e.write(t[1])})}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class gs{constructor(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class bs{constructor(t,e,n,r,i,a,s){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=s,this.id=Mi(),null!=a&&(this.originalName=ea(a),this.name=na(this.originalName)),this.rank=e.length}}let ys=0;class vs{constructor(t,e){this.callArgs=e,this.id=ys++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)null!=e?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let ws=0;class xs extends h["Dh"].Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=ws++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const t=this.getClassName();e=xi(t)+"_"+Bi(t)}if(this.name=e,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}null!=t.weights?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new di(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new hi(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return vi(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return vi(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new li("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new li("Layer "+this.name+" is not connected, no input to return.");return vi(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new li("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new li("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return vi(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=wi(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=wi(this.inputSpec);if(t.length!==e.length)throw new hi(`Layer ${this.name} expects ${e.length} inputs, but it received ${t.length} input tensors. Input received: `+t);for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(null==i)continue;const a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new hi(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(null!=i.maxNDim&&a>i.maxNDim)throw new hi(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(null!=i.minNDim&&a<i.minNDim)throw new hi(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new hi(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const t=r.shape;for(const e in i.axes){const r=Number(e),a=i.axes[e],s=r>=0?t[r]:t[t.length+r];if(null!=a&&-1===[a,null].indexOf(s))throw new hi(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${a} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const e=i.shape[t],a=r.shape[t];if(null!=e&&null!=a&&e!==a)throw new hi(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const n=wi(t);let r=!0;for(const a of n)if(!(a instanceof bs)){r=!1;break}let i=!0;for(const a of n)if(a instanceof bs){i=!1;break}if(r===i)throw new hi("Arguments to apply() must be all SymbolicTensors or all Tensors");return Qi(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of wi(t))e.push(n.shape);this.build(vi(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(t),i){let r=this.call(t,e);const i=wi(r),a=[];for(let t of i)-1!==n.indexOf(t)&&(t=t.clone()),a.push(t);if(r=vi(a),null!=this.activityRegularizer)throw new pi("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=Os(t),r=this.computeOutputShape(n);let i;const a=Ss(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new bs(a,n,this,wi(t),e,this.name,r)):new bs(a,r,this,wi(t),e,this.name),this.addInboundNode(t,i,null,null,n,r,e),this._refCount++,null!=this.activityRegularizer)throw new pi("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the "+`batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer `+this.name);else{let e=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: `+JSON.stringify(this.batchInputShape))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new li(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new li(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new di(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return ls(this.weights)}build(t){this.built=!0}getWeights(t=!1){return fs(t?this.trainableWeights:this.weights)}setWeights(t){Object(h["vi"])(()=>{const e=this.weights;if(e.length!==t.length)throw new hi(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(0===e.length)return;const n=[],r=fs(e);for(let i=0;i<r.length;++i){const a=r[i],s=e[i],o=t[i];if(!h["Ji"].arraysEqual(a.shape,o.shape))throw new hi(`Layer weight shape ${a.shape} not compatible with provided weight shape `+o.shape);n.push([s,o])}ms(n)})}addWeight(t,e,n,r,i,a,s,o){if(-1!==this._addedWeightNames.indexOf(t))throw new hi(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=o?o():as("zeros"));const u=r.apply(e,n),c=new hs(u,n,t,a,s);return u.dispose(),null!=i&&this.addLoss(()=>i.apply(c.read())),null==a&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=wi(t),void 0!==this._losses&&null!==this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}addInboundNode(t,e,n,r,i,a,s=null){const o=wi(t);e=wi(e),n=wi(n),r=wi(r),i=os(i),a=os(a);const u=[],c=[],l=[];for(const d of o)u.push(d.sourceLayer),c.push(d.nodeIndex),l.push(d.tensorIndex);new vs({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:l,inputTensors:o,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},s);for(let d=0;d<e.length;d++)e[d].sourceLayer=this,e[d].nodeIndex=this.inboundNodes.length-1,e[d].tensorIndex=d}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t["batchInputShape"]=this.batchInputShape),null!=this.dtype&&(t["dtype"]=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return 0===--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function Os(t){t=wi(t);const e=[];for(const n of t)e.push(n.shape);return vi(e)}function Ss(t){return"float32"}function ks(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const r=t.inputTensors[n],i=t.inboundLayers[n],a=t.nodeIndices[n],s=ks(r,i,a);for(const t of s)-1===e.indexOf(t)&&e.push(t)}return e}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ts extends xs{constructor(t){if(super({dtype:t.dtype,name:null!=t.name?t.name:Bi("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new hi("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(null==e){if(null==t.inputShape)throw new hi("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new hi("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=t.dtype||"float32";this.batchInputShape=e,this.dtype=n,this.inputSpec=[{shape:e}];const r=new bs(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new vs({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new hi("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function _s(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new hi("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));let n=t.dtype;null==n&&(n="float32");const r=new Ts({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}),i=r.inboundNodes[0].outputTensors;return i[0]}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Is(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return Object(h["re"])(e,t.dtype)}catch(n){throw new hi(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}Ts.className="InputLayer",h["Dh"].registerClass(Ts);class Cs{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Cs)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,n){if(null!=this.id2Value[t.id])throw new hi(`Duplicate key: name=${t.name}, id=${t.id}`);return this.id2Value[t.id]=Is(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return null!=this.id2Value[t.id]}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof bs){if(null==this.id2Value[t.id])throw new hi("Nonexistent key: "+t.name);return this.id2Value[t.id]}{const e=this.name2Id[t];if(null==e)throw new hi("Feed dict has no SymbolicTensor name: "+t);return this.id2Value[e]}}getMask(t){if(t instanceof bs){if(null==this.id2Value[t.id])throw new hi("Nonexistent key: "+t.name);return this.id2Mask[t.id]}{const e=this.name2Id[t];if(null==e)throw new hi("Feed dict has no SymbolicTensor name: "+t);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&Object(h["Ve"])(this.id2Mask)}}const As=new mi,Es=new mi;function Ns(t){null!=As&&As.setMaxEntries(t),null!=Es&&Es.setMaxEntries(t)}function js(t,e,n,r){const i=null!=n&&n["training"],a=Array.isArray(t),s=a?t:[t],o=s.map(t=>t.name),u=[],c=e.names();for(const h of o)-1!==c.indexOf(h)?u.push(e.getValue(h)):u.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const l=o.join(",")+"|"+e.names().sort().join(",");let d,p=As.get(l);if(null==p){const t=Ds(s,e);p=t.sorted,d=t.recipientCounts,As.put(l,p),Es.put(l,d)}d={},i||Object.assign(d,Es.get(l));const f=new Cs(e);for(let m=0;m<p.length;++m){if(null!=r){const t=Object(h["rg"])().numTensors;t>r.maxNumTensors&&(r.maxNumTensors=t),t<r.minNumTensors&&(r.minNumTensors=t)}const t=p[m],a=t.sourceLayer;if(a instanceof Ts)continue;const s=[],c=[],l=[];let g=!1;for(const n of t.inputs){const t=f.getValue(n),r=f.getMask(n);s.push(t),c.push(r),null!=r&&(g=!0),i||(d[n.name]--,0!==d[n.name]||e.hasKey(n)||-1!==o.indexOf(n.name)||t.isDisposed||!0===n.sourceLayer.stateful||l.push(t))}g&&(n=n||{},n["mask"]=c[0]);const b=wi(a.apply(s,n));let y=null;a.supportsMasking&&(y=a.computeMask(s,c));const v=Fs(t),w=Array.isArray(v)?v:[v];for(let e=0;e<w.length;++e){f.hasKey(w[e])||f.add(w[e],b[e],Array.isArray(y)?y[0]:y);const t=o.indexOf(w[e].name);-1!==t&&(u[t]=b[e])}i||Object(h["Ve"])(l)}return f.disposeMasks(),a?u:u[0]}function Ds(t,e){h["Ji"].assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===t.length){const i=Rs(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of t){const{sorted:t,recipientMap:s}=Rs(a,e);for(const e of t)i.has(e.name)||(n.push(e),i.add(e.name));for(const e in s)null==r[e]&&(r[e]=new Set),s[e].forEach(t=>r[e].add(t))}}return{sorted:n,recipientCounts:$s(r)}}function $s(t){const e={};for(const n in t)e[n]=t[n].size;return e}function Rs(t,e){const n=new Set,r=[],i={};for(const o of e.names())n.add(o);const a=[],s=[];a.push(t);while(a.length>0){const t=a[a.length-1];if(n.has(t.name)){a.pop();continue}const e=s[s.length-1]===a.length-1;if(0===t.inputs.length||e)a.pop(),r.push(t),n.add(t.name),e&&s.pop();else{s.push(a.length-1);for(const e of t.inputs)null==i[e.name]&&(i[e.name]=new Set),i[e.name].add(t.name),n.has(e.name)||a.push(e)}}return{sorted:r,recipientMap:i}}function Fs(t){let e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{let n=null;for(let e=0;e<t.sourceLayer.inboundNodes.length;++e)for(const r of t.sourceLayer.inboundNodes[e].outputTensors)if(r.id===t.id){n=e;break}e=t.sourceLayer.getOutputAt(n)}return e}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ps=Object(h["hf"])();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Ms(t,e){return Object(h["vi"])(()=>h["Zh"](h["ii"](h["zg"](t,t),e,!0)))}Ps.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Ns);class Ls extends h["Dh"].Serializable{getConfig(){return{}}}class Bs extends Ls{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(h["vi"])(()=>{const e=Ms(t,this.axis),n=h["te"](e,0,this.maxValue);return h["zg"](t,h["Xe"](n,h["Pd"](da(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Bs.className="MaxNorm",h["Dh"].registerClass(Bs);class zs extends Ls{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(h["vi"])(()=>h["Xe"](t,h["Pd"](da(),Ms(t,this.axis))))}getConfig(){return{axis:this.axis}}}zs.className="UnitNorm",h["Dh"].registerClass(zs);class Vs extends Ls{apply(t){return h["lh"](t)}}Vs.className="NonNeg",h["Dh"].registerClass(Vs);class Us extends Ls{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(h["vi"])(()=>{const e=Ms(t,this.axis),n=h["Pd"](h["zg"](this.rate,h["te"](e,this.minValue,this.maxValue)),h["zg"](1-this.rate,e));return h["zg"](t,h["Xe"](n,h["Pd"](da(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Us.className="MinMaxNorm",h["Dh"].registerClass(Us);const Ws={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Gs(t){return ki(t)}function Hs(t,e={}){return _i(t,h["Dh"].SerializationMap.getMap().classNameMap,e,"constraint")}function qs(t){if(null==t)return null;if("string"===typeof t){const e=t in Ws?Ws[t]:t,n={className:e,config:{}};return Hs(n)}return t instanceof Ls?t:Hs(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Js(t){return new Bs(t)}function Ks(t){return new zs(t)}function Xs(){return new Vs}function Ys(t){return new Us(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zs(){return new Ba}function Qs(){return new za}function to(t){return new Va(t)}function eo(t){return new Ua(t)}function no(t){return new Wa(t)}function ro(t){return new Ga(t)}function io(t){return new Ha(t)}function ao(t){return new Ja(t)}function so(t){return new Ka(t)}function oo(t){return new Xa(t)}function uo(t){return new Ya(t)}function co(t){return new Za(t)}function lo(t){return new Qa(t)}function ho(t){return new ts(t)}function po(t){return new es(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function fo(t){if(null==t)return;const e=[],n=[],r=[];for(const i in t){const a=t[i];if("number"!==typeof a){const t=a;e.push(t.data()),n.push(i),r.push(t)}}if(e.length>0){const i=await Promise.all(e);for(let e=0;e<i.length;++e)t[n[e]]=i[e][0];Object(h["Ve"])(r)}}function mo(t){if(null!=t)for(const e in t){const n=t[e];"number"!==typeof n&&n.dispose()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var go;(function(t){t[t["SILENT"]=0]="SILENT",t[t["VERBOSE"]=1]="VERBOSE"})(go||(go={}));const bo=125;class yo{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class vo{constructor(t,e=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochBegin(t,e)}async onEpochEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochEnd(t,e)}async onBatchBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchBegin(t,e)}async onBatchEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchEnd(t,e)}async onTrainBegin(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class wo extends yo{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){null==e&&(e={});const n=null==e["size"]?0:e["size"];this.seen+=n;for(const r in e){const t=e[r];if("number"===typeof t)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+t*n;else{let e;r in this.totals?e=this.totals[r]:this.totals[r]=0;const i=Object(h["vi"])(()=>Object(h["Pd"])(this.totals[r],Object(h["zg"])(t,n)));this.totals[r]=i,null!=e&&e.dispose()}}}async onEpochEnd(t,e){if(null!=e)for(const n of this.params["metrics"])null!=this.totals[n]&&("number"===typeof this.totals[n]?e[n]=this.totals[n]/this.seen:Object(h["vi"])(()=>{const t=Object(h["zg"])(Object(h["Xe"])(1,this.seen),this.totals[n]);e[n]=t,this.totals[n].dispose(),Object(h["Qf"])(e[n])}))}}class xo extends yo{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){null==e&&(e={}),this.epoch.push(t);for(const n in e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n])}async syncData(){const t=[],e=[],n=[];for(const i in this.history){const r=this.history[i];for(let a=0;a<r.length;++a)if("number"!==typeof r[a]){const s=r[a];t.push(s.data()),e.push(i),n.push(a)}}const r=await Promise.all(t);for(let i=0;i<r.length;++i){const t=this.history[e[i]][n[i]];t.dispose(),this.history[e[i]][n[i]]=r[i][0]}}}class Oo extends yo{constructor(t,e){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||h["Dg"],this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=bo),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");h["Ji"].isNumber(this.yieldEvery)&&(this.maybeWait=Ri(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,n){const r=[];null!=this.yield&&(await fo(n),r.push(this.yield(t,e,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(t,e){this.currentEpoch=t,null!=this.epochBegin&&(await fo(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const n=[];null!=this.epochEnd&&(await fo(e),n.push(this.epochEnd(t,e))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(t,e){null!=this.batchBegin&&(await fo(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const n=[];null!=this.batchEnd&&(await fo(e),n.push(this.batchEnd(t,e))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):h["Ji"].isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(n)}async onTrainBegin(t){null!=this.trainBegin&&(await fo(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await fo(t),await this.trainEnd(t))}}function So(t,e){if(null==t&&(t={}),t instanceof yo)return[t];if(Array.isArray(t)&&t[0]instanceof yo)return t;const n=wi(t);return n.map(t=>new Oo(t,e))}class ko{constructor(){}static registerCallbackConstructor(t,e){h["Ji"].assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, but got "+t),ko.checkForDuplicate(e),null==ko.constructors[t]&&(ko.constructors[t]=[]),ko.constructors[t].push(e)}static checkForDuplicate(t){for(const e in ko.constructors){const n=ko.constructors[+e];n.forEach(e=>{if(e===t)throw new hi("Duplicate callback constructor.")})}}static clear(){ko.constructors={}}static createCallbacks(t){const e=[];for(const n in ko.constructors){const r=+n;t>=r&&e.push(...ko.constructors[r])}return e.map(t=>new t)}}function To(t,e,n,r,i,a,s,o,u){const c=new xo,l=[new wo,...ko.createCallbacks(e)];null!=t&&l.push(...t),l.push(c);const d=new vo(l);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:s,verbose:e,doValidation:o,metrics:u}),{callbackList:d,history:c}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _o(t,e={},n=!1){return _i(t,h["Dh"].SerializationMap.getMap().classNameMap,e,"layer",n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Io(t,e){return Object(h["vi"])(()=>{"float32"!==t.dtype&&(t=h["re"](t,"float32"));const n=h["ii"](Ia(t),e,!0),r=h["qf"](n.shape,da()),i=h["Zh"](h["pg"](n,r));return h["Xe"](t,i)})}function Co(t,e){return Object(h["vi"])(()=>h["qg"](Ia(h["hi"](e,t)),-1))}function Ao(t,e){return Object(h["vi"])(()=>h["qg"](h["Md"](h["hi"](e,t)),-1))}function Eo(t,e){return Object(h["vi"])(()=>{const n=h["hi"](t,e),r=h["te"](h["Md"](t),da(),Number.MAX_VALUE),i=h["Md"](h["Xe"](n,r));return h["zg"](100,h["qg"](i,-1))})}function No(t,e){return Object(h["vi"])(()=>{const n=h["te"](e,da(),Number.MAX_VALUE),r=h["Yf"](h["Pd"](1,n)),i=h["te"](t,da(),Number.MAX_VALUE),a=h["Yf"](h["Pd"](1,i));return h["qg"](Ia(h["hi"](r,a)),-1)})}function jo(t,e){return Object(h["vi"])(()=>{const n=h["pg"](0,h["hi"](1,h["zg"](t,e)));return h["qg"](Ia(n),-1)})}function Do(t,e){return Object(h["vi"])(()=>{const n=h["pg"](0,h["hi"](1,h["zg"](t,e)));return h["qg"](n,-1)})}function $o(t,e){return Object(h["vi"])(()=>{const n=h["ii"](h["zg"](t,e),-1),r=h["lg"](h["zg"](h["hi"](1,t),e),-1);return h["pg"](0,h["Pd"](1,h["hi"](r,n)))})}function Ro(t,e){return Object(h["vi"])(()=>{const n=Math.log(2),r=h["hi"](e,t),i=h["hi"](h["Pd"](r,h["Th"](h["zg"](-2,r))),n);return h["qg"](i,-1)})}function Fo(t,e,n=!1){return Object(h["vi"])(()=>{if(n)e=h["Sh"](e);else{const t=h["ii"](e,e.shape.length-1,!0);e=h["Xe"](e,t)}return e=h["te"](e,da(),1-da()),h["Cg"](h["ii"](h["zg"](h["re"](t,"float32"),h["Yf"](e)),e.shape.length-1))})}function Po(t,e,n=!1){return Object(h["vi"])(()=>{const r=h["re"](h["tf"](ga(t)),"int32");e=h["te"](e,da(),1-da());const i=e.shape,a=h["oh"](h["Gg"](r,i[i.length-1]),i);return Fo(a,e,n)})}function Mo(t,e){if(!h["Ji"].arraysEqual(t.shape,e.shape))throw new hi(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Object(h["vi"])(()=>{const n=h["lh"](e),r=h["Cg"](h["Md"](e));return h["Pd"](h["hi"](n,h["zg"](e,t)),h["Zf"](h["lf"](r)))})}function Lo(t,e){return Object(h["vi"])(()=>{let n;return n=h["te"](e,da(),1-da()),n=h["Yf"](h["Xe"](n,h["hi"](1,n))),h["qg"](Mo(t,n),-1)})}function Bo(t,e){return Object(h["vi"])(()=>{const n=h["te"](t,da(),1),r=h["te"](e,da(),1);return h["ii"](h["zg"](t,h["Yf"](h["Xe"](n,r))),-1)})}function zo(t,e){return Object(h["vi"])(()=>{const n=h["Yf"](h["Pd"](da(),e));return h["qg"](h["hi"](e,h["zg"](t,n)),-1)})}function Vo(t,e){return Object(h["vi"])(()=>{const n=Io(t,-1),r=Io(e,-1),i=h["zg"](n,r);return h["Cg"](h["ii"](i,-1))})}ko.constructors={};const Uo={meanSquaredError:Co,meanAbsoluteError:Ao,meanAbsolutePercentageError:Eo,meanSquaredLogarithmicError:No,squaredHinge:jo,hinge:Do,categoricalHinge:$o,logcosh:Ro,categoricalCrossentropy:Fo,sparseCategoricalCrossentropy:Po,binaryCrossentropy:Lo,kullbackLeiblerDivergence:Bo,poisson:zo,cosineProximity:Vo};function Wo(t){if("string"===typeof t){if(t in Uo)return Uo[t];let e="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new hi(e)}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Go(t,e){return Object(h["vi"])(()=>{const n=h["zg"](.5,h["Ig"](e)),r=pa(h["Ff"](e,n),t.dtype);return h["qg"](h["if"](t,r),-1)})}function Ho(t,e){return Object(h["vi"])(()=>pa(h["if"](h["Td"](t,-1),h["Td"](e,-1)),"float32"))}function qo(t,e){return Object(h["vi"])(()=>h["re"](h["ii"](h["dg"](h["if"](t,1),h["if"](e,1))),"float32"))}function Jo(t,e){return Object(h["vi"])(()=>h["re"](h["ii"](h["dg"](h["if"](t,1),h["if"](e,0))),"float32"))}function Ko(t,e){return Object(h["vi"])(()=>h["re"](h["ii"](h["dg"](h["if"](t,0),h["if"](e,1))),"float32"))}function Xo(t,e){return Object(h["vi"])(()=>{const n=qo(t,e),r=Ko(t,e),i=h["Pd"](n,r);return h["re"](h["Pi"](h["Ff"](i,0),h["Xe"](n,i),0),"float32")})}function Yo(t,e){return Object(h["vi"])(()=>{const n=qo(t,e),r=Jo(t,e),i=h["Pd"](n,r);return h["re"](h["Pi"](h["Ff"](i,0),h["Xe"](n,i),0),"float32")})}function Zo(t,e){return Lo(t,e)}function Qo(t,e){return t.rank===e.rank&&(t=h["ci"](t,[t.rank-1])),e=h["Td"](e,-1),e.dtype!==t.dtype&&(e=h["re"](e,t.dtype)),h["re"](h["if"](t,e),"float32")}const tu=Co,eu=Co,nu=Ao,ru=Ao,iu=Eo,au=Eo,su=Fo,ou=Vo,uu=Po,cu={binaryAccuracy:Go,categoricalAccuracy:Ho,precision:Xo,categoricalCrossentropy:su,sparseCategoricalCrossentropy:uu,mse:tu,MSE:eu,mae:nu,MAE:ru,mape:iu,MAPE:au,cosine:ou};function lu(t){if("string"===typeof t&&t in cu)return cu[t];if("string"!==typeof t&&null!=t)return t;throw new hi("Unknown metric "+t)}function du(t){if(bi(null!==t,"Unknown LossOrMetricFn "+t),"string"===typeof t)return t;{let e;for(const n of Object.keys(Uo))if(Uo[n]===t){e=n;break}if(void 0!==e)return e;for(const n of Object.keys(cu))if(cu[n]===t){e=n;break}return void 0!==e?e:t.name}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hu(t){const e={Adagrad:()=>h["zi"].adagrad(.01),Adadelta:()=>h["zi"].adadelta(1,.95,da()),Adam:()=>h["zi"].adam(.001,.9,.999,da()),Adamax:()=>h["zi"].adamax(.002,.9,.999,da(),0),RMSProp:()=>h["zi"].rmsprop(.001,.9,0,da()),SGD:()=>h["zi"].sgd(.01)};if(e["adagrad"]=e["Adagrad"],e["adadelta"]=e["Adadelta"],e["adam"]=e["Adam"],e["adamax"]=e["Adamax"],e["rmsprop"]=e["RMSProp"],e["sgd"]=e["SGD"],t in e)return e[t]();throw new hi("Unknown Optimizer "+t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pu=1048576;function fu(t,e,n=!1){if(null==t||"object"!==typeof t||Object.getPrototypeOf(t)!==Object.prototype||!mu(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(t);n.length>pu&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= `+pu+".")}}function mu(t){if(null===t)return!0;if("object"===typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e){if("string"!==typeof n)return!1;if(!mu(t[n]))return!1}return!0}if(Array.isArray(t)){for(const e of t)if(!mu(e))return!1;return!0}return!1}{const e=typeof t;return"string"===e||"number"===e||"boolean"===e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gu(t,e,n,r=console.log){const i=yu(t),a=["Layer (type)","Input Shape","Output shape","Param #"];let s;if(i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(t=>Math.floor(e*t))),!i){a.push("Receives inputs"),s=[];for(const e in t.nodesByDepth)s.push(...t.nodesByDepth[e])}r("_".repeat(e)),vu(a,n,r),r("=".repeat(e));const o=t.layers;for(let l=0;l<o.length;++l)i?wu(o[l],n,r):xu(o[l],n,s,r),r((l===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=bu(t),c=ls(t.nonTrainableWeights);r("Total params: "+(u+c)),r("Trainable params: "+u),r("Non-trainable params: "+c),r("_".repeat(e))}function bu(t){let e;return e=null!=t.collectedTrainableWeights?ls(t.collectedTrainableWeights):ls(t.trainableWeights),e}function yu(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let t=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(t){e=!1;break}t=!0}if(!e)break}return e}function vu(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function wu(t,e,n){let r,i;try{i=t.inboundNodes.map(t=>JSON.stringify(t.inputShapes)).join(",")}catch(u){i="multiple"}try{r=JSON.stringify(t.outputShape)}catch(u){r="multiple"}const a=t.name,s=t.getClassName(),o=[`${a} (${s})`,i,r,t.countParams().toString()];vu(o,e,n)}function xu(t,e,n,r){let i,a;try{a=t.inboundNodes.map(t=>JSON.stringify(t.inputShapes)).join(",")}catch(d){a="multiple"}try{i=JSON.stringify(t.outputShape)}catch(d){i="multiple"}const s=[];for(const h of t.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(h)))for(let t=0;t<h.inboundLayers.length;++t){const e=h.inboundLayers[t].name,n=h.nodeIndices[t],r=h.tensorIndices[t];s.push(`${e}[${n}][${r}]`)}const o=t.name,u=t.getClassName(),c=0===s.length?"":s[0],l=[`${o} (${u})`,a,i,t.countParams().toString(),c];vu(l,e,r);for(let h=1;h<s.length;++h)vu(["","","","",s[h]],e,r)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ou(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"===typeof n}function Su(t,e){if(null===t)return null;if("string"===typeof t)return Oi(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];Ou(e,i,r)?n.push(r):n.push(Su(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n];if("name"===n&&"string"===typeof r)e[n]=r;else{const t=Oi(n);e[t]=Su(r,t)}}return e}}function ku(t,e){if(null===t||void 0===t)return null;if("string"===typeof t)return xi(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];Ou(e,i,r)?n.push(r):n.push(ku(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n],i=xi(n);e[i]="name"!==n&&"className"!==n||"string"!==typeof r?ku(r,n):r}return e}}
/** @license See the LICENSE file. */const Tu="4.2.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _u extends xs{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=Bi(t)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Ai(this.inputs).length!==this.inputs.length)throw new hi("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(t=>t.name));Ai(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(t=>t.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const t=b.sourceLayer,e=b.nodeIndex,n=b.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(e),this.outputLayersTensorIndices.push(n)}for(const b of this.inputs){const t=b.sourceLayer,e=b.nodeIndex,n=b.tensorIndex;bi(0===e,"input layer has >1 nodes"),bi(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(e),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const e=this.inputLayers[b];if(!(e instanceof Ts))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${e.getClassName()}.`);this.inputNames.push(e.name),this.feedInputShapes.push(e.batchInputShape),this.feedInputNames.push(e.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const e={},n={},r={},i={},a={},s=[],o=(t,e,n,r,i,u)=>{null!=r&&null!=i&&null!=u||(r=t.sourceLayer,i=t.nodeIndex,u=t.tensorIndex);const c=r.inboundNodes[i];if(-1!==n.indexOf(c))throw new di(`The tensor ${t.name} at layer "${r.name}" is part of a cycle.`);if(-1!==e.indexOf(c))return;this.containerNodes.add(_u.nodeKey(r,i)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(c)&&n.push(c);const l=c.inboundLayers.length;for(let a=0;a<l;a++){const t=c.inputTensors[a],r=c.inboundLayers[a],i=c.nodeIndices[a],s=c.tensorIndices[a];o(t,e,n,r,i,s)}e.push(c);while(n.indexOf(c)>=0)n.splice(n.indexOf(c),1);s.push(c)},u=[],c=[];for(const b of this.outputs)o(b,u,c);const l=s.slice().reverse();for(const b of l){n[b.id]=b,b.id in e||(e[b.id]=0);let t=e[b.id];const a=null==r[b.outboundLayer.id]?0:r[b.outboundLayer.id];t=Math.max(t,a),r[b.outboundLayer.id]=t,i[b.outboundLayer.id]=b.outboundLayer,e[b.id]=t;for(let r=0;r<b.inboundLayers.length;r++){const i=b.inboundLayers[r],a=b.nodeIndices[r],s=i.inboundNodes[a],o=null==e[s.id]?0:e[s.id];e[s.id]=Math.max(t+1,o),n[s.id]=s}}const d={};for(const b in e){const t=e[b];t in d||(d[t]=[]),d[t].push(n[b])}const h={};for(const b in r){const t=r[b];t in h||(h[t]=[]),h[t].push(i[b])}let p=Object.keys(h).map(t=>parseInt(t,10)).sort(Ci);this.layers=[];for(const b of p){const t=h[b];t.sort((t,e)=>{const n=a[t.id],r=a[e.id];return n<r?-1:n>r?1:0});for(const e of t)e instanceof _u&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=h,p=Object.keys(d).map(t=>parseInt(t,10)).sort(Ci);const f=this.inputs.slice(),m=[];for(const b of p)for(const t of d[b]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new di("Graph disconnected: cannot obtain value for tensor "+n+` at layer "${e.name}". The following previous layers were accessed without issue: `+m);for(const e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=d;const g=this.layers.map(t=>t.name);for(const b of g){const t=g.filter(t=>t===b).length;if(1!==t)throw new di(`The name "${b}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new vs({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new hi("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let r=0;for(const a of this.layers)for(const t of a.weights){if(null!=n[t.originalName])throw new hi("Duplicate weight name: "+t.originalName);n[t.originalName]=t,r++}const i=[];for(const a in t){let r=a;if(null==n[a]){const t=a.split("/"),e=t.slice(0,-2).concat([t[t.length-1]]);r=e.join("/")}if(null!=n[r])i.push([n[r],t[a]]);else if(e)throw new hi("Provided weight data has no target variable: "+a);delete n[r]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new hi(`${t.length} of ${r} weights are not set: `+t)}ms(i)}updatedConfig(){const t=this.getConfig(),e={};return e["className"]=this.getClassName(),e["config"]=t,e["kerasVersion"]="tfjs-layers "+Tu,e["backend"]="TensorFlow.js",e}toJSON(t,e=!0){const n=ku(this.updatedConfig());return e?JSON.stringify(n):n}call(t,e){return Object(h["vi"])(()=>{t=wi(t);const n=new Cs;for(let e=0;e<this.inputs.length;++e)n.add(this.inputs[e],t[e]);return js(this.outputs,n,e)})}computeMask(t,e){return Object(h["vi"])(()=>{let n;return t=wi(t),n=null==e?gi(null,t.length):wi(e),this.runInternalGraph(t,n)[1]})}computeOutputShape(t){const e=os(t);if(e.length!==this.inputLayers.length)throw new hi(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let s=0;s<e.length;s++){const t=this.inputLayers[s],r=e[s],i=t.name+"_0_0";n[i]=r}const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(Ci);if(r.length>1)for(const s of r){const t=this.nodesByDepth[s];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const r=[];for(let o=0;o<e.inboundLayers.length;o++){const t=e.inboundLayers[o],i=e.nodeIndices[o],a=e.tensorIndices[o],s=`${t.name}_${i}_${a}`,u=n[s];r.push(u)}const i=t.computeOutputShape(vi(r)),a=os(i),s=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++){const r=`${t.name}_${s}_${e}`;n[r]=a[e]}}}const i=[],a=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],e=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],r=`${t.name}_${e}_${n}`;a.push(r)}for(let s=0;s<a.length;s++){const t=a[s];bi(t in n),i.push(n[t])}return vi(i)}runInternalGraph(t,e){null==e&&(e=gi(null,t.length));const n={};for(let o=0;o<this.inputs.length;++o){const r=this.inputs[o],i=t[o],a=e[o];n[r.id]=[i,a]}const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(Ci);for(const o of r){const t=this.nodesByDepth[o];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,a=new Array;for(const e of r)e.id in n&&a.push(n[e.id]);if(a.length===r.length){let r,s,o,u,c={};if(null!=e.callArgs&&(c=e.callArgs),1===a.length){const[e,n]=a[0];null==c["mask"]&&(c["mask"]=n),o=wi(t.call(e,c)),u=wi(t.computeMask(e,n)),r=[e],s=[n]}else r=a.map(t=>t[0]),s=a.map(t=>t[1]),null==c["mask"]&&(c["mask"]=s),o=wi(t.call(r,c)),u=wi(t.computeMask(r,s));if(t.activityRegularizer)throw new pi("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<i.length;++t){const e=i[t],r=o[t],a=u[t];n[e.id]=[r,a]}}}}const i=[],a=[],s=[];for(const o of this.outputs){bi(o.id in n,`Could not compute output ${o.name} : ${o.id}`);const[t,e]=n[o.id];s.push(t.shape),i.push(t),a.push(e)}return[i,a,s]}buildNodeConversionMap(t){const e={};let n;for(const r of this.layers){n=r instanceof _u?1:0;for(let t=0;t<r.inboundNodes.length;t++){const i=_u.nodeKey(r,t);this.containerNodes.has(i)&&(e[i]=n,n+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new hi(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new hi("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===t)return n;throw new hi("No such layer: "+t)}calculateLosses(){return Object(h["vi"])(()=>{const t=[];for(const e of this.layers)for(let n=0;n<e.inboundNodes.length;++n){const r=_u.nodeKey(e,n);this.containerNodes.has(r)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[];for(const s of this.layers){const t=s.getClassName(),r=s.getConfig(),i=[];for(let n=0;n<s.inboundNodes.length;n++){const t=s.inboundNodes[n],r=_u.nodeKey(s,n);let o={};if(this.containerNodes.has(r)){if(t.callArgs)try{JSON.stringify(t.callArgs),o=t.callArgs}catch(a){console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: `+t.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),o={}}if(t.inboundLayers.length>0){const n=[];for(let r=0;r<t.inboundLayers.length;r++){const i=t.inboundLayers[r],a=t.nodeIndices[r],s=t.tensorIndices[r],u=_u.nodeKey(i,a);let c=e[u];null==c&&(c=0),n.push([i.name,c,s,o])}i.push(n)}}}const o={};o["name"]=s.name,o["className"]=t,o["config"]=r,o["inboundNodes"]=i,n.push(o)}t["layers"]=n;const r=[];for(let s=0;s<this.inputLayers.length;s++){const t=this.inputLayers[s],n=this.inputLayersNodeIndices[s],i=_u.nodeKey(t,n);if(!this.containerNodes.has(i))continue;let a=e[i];null!==a&&void 0!==a||(a=0);const o=this.inputLayersTensorIndices[s];r.push([t.name,a,o])}t["inputLayers"]=r;const i=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],n=this.outputLayersNodeIndices[s],r=_u.nodeKey(t,n);if(!this.containerNodes.has(r))continue;let a=e[r];null!==a&&void 0!==a||(a=0);const o=this.outputLayersTensorIndices[s];i.push([t.name,a,o])}return t["outputLayers"]=i,t}static fromConfig(t,e,n={},r=!1){const i={},a={};function s(t,e){t.name in a?a[t.name].push(e):a[t.name]=[e]}function o(t,e){const n=[];let r;for(const a of e){const o=a[0],u=a[1],c=a[2];if(r=null==a[3]?{}:a[3],!(o in i))return void s(t,e);const l=i[o];if(l.inboundNodes.length<=u)return void s(t,e);const d=l.inboundNodes[u];n.push(d.outputTensors[c])}n.length>0&&t.apply(vi(n),r)}function u(t){const n=t["name"],a=_o(t,null!=e["customObjects"]?e["customObjects"]:{});a.setFastWeightInitDuringBuild(r),i[n]=a;const o=t["inboundNodes"];o.forEach(t=>{if(!(t instanceof Array))throw new hi("Corrupted configuration, expected array for nodeData: "+t);s(a,t)})}const c=e["name"],l=e["layers"];for(const m of l)u(m);while(!Ei(a))for(const t of l){const e=i[t["name"]];if(e.name in a){const t=a[e.name];delete a[e.name];for(const n of t)o(e,n)}}const d=[],h=[],p=e["inputLayers"];for(const m of p){const t=m[0],e=m[1],n=m[2];bi(t in i);const r=i[t],a=r.inboundNodes[e].outputTensors;d.push(a[n])}const f=e["outputLayers"];for(const m of f){const t=m[0],e=m[1],n=m[2];bi(t in i);const r=i[t],a=r.inboundNodes[e].outputTensors;h.push(a[n])}return new t({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new hi("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Object(h["vi"])(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Iu(t,e,n){const r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>null);if(1===r)return Array.isArray(t)&&1===t.length?t:"object"===typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"===typeof t&&Object.keys(t).length>0&&"object"===typeof t[Object.keys(t)[0]]){const n=[];return e.forEach(e=>{e in t?n.push(t[e]):n.push(null)}),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function Cu(t,e){return Iu(t,e,"classWeight")}async function Au(t,e,n,r){if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const e=Object(h["vi"])(()=>{if(1===t.shape.length)return Object(h["ue"])(t);if(2===t.shape.length){if(t.shape[1]>1){const e=1;return Object(h["Td"])(t,e)}if(1===t.shape[1])return Object(h["oh"])(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await e.data());Object(h["Ve"])(e);const i=[];return r.forEach(t=>{if(null==n[t])throw new Error(`classWeight must contain all classes in the training data. The class ${t} exists in the data but not in classWeight`);i.push(n[t])}),Object(h["ni"])(i,"float32")}return null}function Eu(t,e){return Object(h["zg"])(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Nu=32;function ju(t,e){let n,r;const i=e;n=i["xs"],r=i["ys"],h["Ji"].assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+e);const a=Du("input",t.inputNames,n),s=Du("output",t.outputNames,r),o=a[0].shape[0];h["Ji"].assert(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: `+JSON.stringify(t.inputNames)+")"),h["Ji"].assert(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: `+JSON.stringify(t.outputNames)+")");for(let u=0;u<a.length;u++)h["Ji"].assert(a[u].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${a[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let u=0;u<s.length;u++)h["Ji"].assert(s[u].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${s[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:a,ys:s}}function Du(t,e,n){if(n instanceof h["zd"])return[n];if(Array.isArray(n))return h["Ji"].assert(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(null==n[i])throw new hi(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function $u(t){if(3===t.length)throw new pi("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Ru(t,e,n){const r=null!=n.batchesPerEpoch;if(h["Ji"].assert(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),h["Ji"].assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),h["Ji"].assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),h["Ji"].assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),h["Ji"].assert(null==n["validationSplit"],()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=null!=n.validationData;let a,s;if(i)if(Pu(n.validationData))h["Ji"].assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{const t=$u(n.validationData);a=t.xs,s=t.ys}const o=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let c;c=i?u.slice().concat(u.map(t=>"val_"+t)):u.slice();const l=So(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:f}=To(l,d,n.epochs,null,null,Fu(e,n),null,i,c);p.setModel(t),t.history=f,await p.onTrainBegin(),t.stopTraining_=!1;let m=null==n.initialEpoch?0:n.initialEpoch,g=await e.iterator();while(m<n.epochs){const c={};await p.onEpochBegin(m);let l=0,d=0;r||(g=await e.iterator());while(!r||l<n.batchesPerEpoch){const e=await g.next();if(r&&e.done){console.warn("You provided `batchesPerEpoch` as "+n.batchesPerEpoch+", but your dataset iterator ran out of data after "+l+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=e.value){const{xs:r,ys:i}=ju(t,e.value),a={};a["batch"]=d,a["size"]=r[0].shape[0],await p.onBatchBegin(d,a);const s=[];if(null!=n.classWeight){const e=Cu(n.classWeight,t.outputNames);for(let t=0;t<e.length;++t)s.push(await Au(i[t],null,e[t]))}const c=r.concat(i).concat(s),f=o(c);h["Ve"](c);for(let t=0;t<u.length;++t){const e=u[t],n=f[t];a[e]=n,h["Qf"](n)}await p.onBatchEnd(d,a),mo(a),d++,l++}if(r?l>=n.batchesPerEpoch:e.done){if(i){let e;e=Pu(n.validationData)?wi(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):wi(t.evaluate(a,s,{batchSize:null==n.validationBatchSize?Nu:n.validationBatchSize,verbose:0}));for(let n=0;n<t.metricsNames.length;++n)c["val_"+t.metricsNames[n]]=e[n]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(m,c),m++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Fu(t,e){let n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Pu(t){return"function"===typeof t.iterator}function Mu(t){return"function"===typeof t.next}async function Lu(t,e,n){n=n||{};const r=null!=n.batches,i=t.testFunction;let a=[];if(n.verbose>0)throw new pi("Verbose mode is not implemented yet.");h["Ji"].assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));const s=Mu(e)?e:await e.iterator();let o=0,u=0;while(!r||u<n.batches){const e=await s.next();if(a=h["vi"](()=>{if(e.value){const{xs:n,ys:r}=ju(t,e.value),s=n.concat(r),c=h["vi"](()=>i(s));if(h["Ve"](s),0===u)for(let t=0;t<c.length;++t)a.push(Object(h["xh"])(0));const l=s[0].shape[0];for(let t=0;t<c.length;++t){const e=c[t],n=a[t];a[t]=h["vi"](()=>h["Pd"](a[t],h["zg"](l,e))),u>0&&h["Ve"](n)}h["Ve"](c),o+=l,++u}return a}),e.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const t=a[c];a[c]=h["Xe"](a[c],o),h["Ve"](t)}return vi(a)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bu(t){h["Ji"].assert(t>0&&Number.isInteger(t),()=>"batchSize is required to be a positive integer, but got "+t)}function zu(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(t=>ya(t,e,n-e)):ya(t,e,n-e)}function Vu(t,e){return h["vi"](()=>null==t?null:Array.isArray(t)?t.map(t=>Vu(t,e)):_a(t,"int32"===e.dtype?e:h["re"](e,"int32")))}function Uu(t,e){const n=[];let r=0,i=null;while(r<t)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function Wu(t){const e=[];t instanceof h["zd"]&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(1===r.rank)e.push(fa(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Gu(t,e){if(null==t)return;const n=[];if(e instanceof h["zd"])n.push(e.id);else if(Array.isArray(e))e.forEach(t=>n.push(t.id));else if(null!=e)for(const i in e){const t=e[i];n.push(t.id)}const r=[];if(t instanceof h["zd"])-1===n.indexOf(t.id)&&r.push(t);else if(Array.isArray(t))t.forEach(t=>{-1===n.indexOf(t.id)&&r.push(t)});else if(null!=t)for(const i in t){const e=t[i];-1===n.indexOf(e.id)&&r.push(e)}r.forEach(t=>{t.isDisposed||t.dispose()})}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hu(t){return t instanceof h["zd"]}function qu(t){return Array.isArray(t)}function Ju(t){return!Hu(t)&&!qu(t)}function Ku(t,e,n,r=!0,i=""){if(null==e||0===e.length){if(null!=t){let e=!1;if(qu(t)&&t.length>0)e=!0;else if(Ju(t)){for(const n in t)if(t.hasOwnProperty(n)){e=!0;break}}else e=!0;if(e)throw new hi(`Error when checking model ${i} expected no data, but got `+t)}return[]}if(null==t)return e.map(t=>null);let a;if(Ju(t)){t=t,a=[];for(const n of e){if(null==t[n])throw new hi(`No data provided for "${n}". Need data for each key in: `+e);a.push(t[n])}}else if(qu(t)){if(t=t,t.length!==e.length)throw new hi(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): `+t);a=t}else{if(t=t,e.length>1)throw new hi(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape `+t.shape);a=[t]}if(a=Wu(a),null!=n)for(let s=0;s<e.length;++s){if(null==n[s])continue;const t=a[s];if(t.shape.length!==n[s].length)throw new hi(`Error when checking ${i}: expected ${e[s]} to have ${n[s].length} dimension(s). but got array with shape `+t.shape);for(let e=0;e<n[s].length;++e){if(0===e&&!r)continue;const a=t.shape[e],o=n[s][e];if(null!=o&&o>=0&&a!==o)throw new hi(i+" expected a batch of elements where each "+`example has shape [${n[s].slice(1,n[s].length)}] `+`(i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}])`+` but the ${i} received an input with ${t.shape[0]}`+` examples, each with shape [${t.shape.slice(1,t.shape.length)}]`+` (tensor shape [${t.shape}])`)}}return a}function Xu(t,e,n){const r=Ai(t.map(t=>t.shape[0]));r.sort();const i=Ai(e.map(t=>t.shape[0]));if(i.sort(),r.length>1)throw new hi("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(t=>t.shape)));if(i.length>1)throw new hi("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(t=>t.shape)));if(r.length>0&&i.length>0&&!h["Ji"].arraysEqual(r,i))throw new hi(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Yu(t,e,n){const r=[Co,Lo,Fo];for(let i=0;i<t.length;++i){const a=t[i],s=e[i],o=n[i];if(null!=s){if(s===Fo&&1===a.shape[a.shape.length-1])throw new hi(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(s)){const t=a.shape.slice(1),e=o.slice(1);for(let n=0;n<t.length;++n){const r=t[n],i=e[n];if(null!=i&&r!==i)throw new hi(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Zu(t,e,n,r=!0,i=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new hi(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new hi(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape `+JSON.stringify(t.shape)+".");a=[t]}if(null!=n)for(let s=0;s<e.length;++s){if(null==n[s])continue;const t=a[s];if(t.shape.length!==n[s].length)throw new hi(`Error when checking ${i}: expected ${e[s]} to have ${n[s].length} dimension(s), but got array with shape `+JSON.stringify(t.shape));for(let a=0;a<n[s].length;++a){if(0===a&&!r)continue;const o=t.shape[a],u=n[s][a];if(null!=u&&u!==o)throw new hi(`Error when checking ${i}: expected ${e[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(t.shape)}.`)}}}function Qu(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>[]);let n;if("string"===typeof t||"function"===typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!==typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);n=t}if(Array.isArray(n))return e.map(t=>n);{const t=[];for(const r of e){let e=n.hasOwnProperty(r)?n[r]:[];Array.isArray(e)||(e=[e]),t.push(e)}return t}}const tc="layers-model";class ec extends _u{constructor(t){super(t),this.isTraining=!1}summary(t,e,n=console.log){if(!this.built)throw new hi("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");gu(this,t,e,n)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"===typeof t.optimizer)this.optimizer_=hu(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof h["rc"]))throw new hi("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(Array.isArray(t.loss)||"string"===typeof t.loss||"function"===typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new hi(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);const n=t.loss;e=n.map(t=>Wo(t))}else{const n=Wo(t.loss);this.outputs.forEach(t=>{e.push(n)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new hi(`Unknown entry in loss dictionary: "${e}". Only expected the following keys: `+this.outputNames);for(const n of this.outputNames)null==t.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),e.push(Wo(t.loss[n]))}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const t=this.internalOutputShapes[a],e=this.outputNames[a];this.feedOutputNames.push(e),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[a])}const n=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Qi("loss",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=this.lossFunctions[t];this.outputs.length>1&&(this.metricsTensors.push([e,t]),this.metricsNames.push(this.outputNames[t]+"_loss"))}});const r=Qu(t.metrics,this.outputNames),i=(t,e,n)=>{this.outputNames.length>1&&(e=this.outputNames[t]+"_"+e),this.metricsNames.push(e),this.metricsTensors.push([n,t])};Qi("metric",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=r[t],a=e=>{const n="";let r,a,s;for(const o of e){if("string"===typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const e=this.internalOutputShapes[t];let i;1===e[e.length-1]||this.lossFunctions[t]===Lo?-1!==["accuracy","acc"].indexOf(o)?a=Go:-1!==["crossentropy","ce"].indexOf(o)&&(a=Zo):this.lossFunctions[t]===Po?-1!==["accuracy","acc"].indexOf(o)?a=Qo:-1!==["crossentropy","ce"].indexOf(o)&&(a=uu):-1!==["accuracy","acc"].indexOf(o)?a=Ho:-1!==["crossentropy","ce"].indexOf(o)&&(a=su),-1!==["accuracy","acc"].indexOf(o)?i="acc":-1!==["crossentropy","ce"].indexOf(o)&&(i="ce"),s=a,r=n+i}else{const t=lu(o);s=t,r=n+du(o)}let e;Qi(r,()=>{e=s}),i(t,r,e)}};a(e)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,n={}){const r=null==n.batchSize?32:n.batchSize;Bu(r);const i=!0,a=this.standardizeUserDataXY(t,e,i,r);try{const i=a[0].concat(a[1]);this.makeTestFunction();const s=this.testFunction,o=this.testLoop(s,i,r,n.verbose,n.steps);return vi(o)}finally{Gu(a[0],t),Gu(a[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),Lu(this,t,e)}checkNumSamples(t,e,n,r="steps"){let i;if(null!=n){if(i=null,null!=e)throw new hi(`If ${r} is set, batchSize must be null or undefined.Got batchSize = `+e)}else{if(null==t)throw new hi("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i}execute(t,e){if(Array.isArray(e)&&0===e.length)throw new hi("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(e),r=n?e:[e],i=this.retrieveSymbolicTensors(r),a=new Cs;if(t instanceof h["zd"]&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new hi(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)a.add(this.inputs[e],t[e])}else for(const o of this.inputs){const e=t[o.name];if(null==e)throw new hi("No value is provided for the model's input "+o.name);a.add(o,e)}const s=js(i,a);return n?s:s[0]}retrieveSymbolicTensors(t){const e=gi(null,t.length);let n=t.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],a=i.map(t=>t.name);for(let r=0;r<t.length;++r){const s=a.indexOf(t[r]);if(-1!==s&&(e[r]=i[s],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw e.forEach((e,r)=>{null==e&&n.push(t[r])}),new hi("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return e}predictLoop(t,e=32,n=!1){return h["vi"](()=>{const r=this.checkNumSamples(t);if(n)throw new pi("Verbose predictLoop() is not implemented yet.");const i=Uu(r,e),a=this.outputs.map(t=>[]);for(let e=0;e<i.length;++e){const n=h["vi"](()=>{const n=i[e][0],r=i[e][1],a=zu(t,n,r),s=[];if(Array.isArray(a))for(let t=0;t<a.length;++t)s.push({key:this.inputs[t],value:a[t]});else s.push({key:this.inputs[0],value:a});const o=new Cs(s);return js(this.outputs,o)});n.forEach((t,e)=>a[e].push(t))}return vi(a.map(t=>h["we"](t,0)))})}predict(t,e={}){const n=Wu(t);Zu(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==e.batchSize?32:e.batchSize;return Bu(r),this.predictLoop(n,r)}finally{Gu(n,t)}}predictOnBatch(t){Zu(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,n=!0,r){if(null==this.optimizer_)throw new di("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const t=this.feedOutputShapes[a],e=this.feedLossFns[a];e===Po?i.push(t.slice(0,t.length-1).concat([1])):i.push(t)}if(t=Ku(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=Ku(e,this.feedOutputNames,i,!1,"target"),Xu(t,e,null),Yu(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!==0)throw new hi(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,n,r,i=!0,a){const[s,o]=this.standardizeUserDataXY(t,e,i,a);if(null!=n)throw new Error("sample weight is not supported yet.");let u=null;if(null!=r){const t=Cu(r,this.outputNames);u=[];for(let e=0;e<t.length;++e)u.push(await Au(o[e],null,t[e]))}return[s,o,u]}testLoop(t,e,n,r=0,i){return h["vi"](()=>{const a=this.checkNumSamples(e,n,i,"steps"),s=[];if(r>0)throw new pi("Verbose mode is not implemented yet.");if(null!=i)throw new pi("steps mode in testLoop() is not implemented yet");{const r=Uu(a,n),i=Object(h["ni"])(ca(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],o=r[n][1],u=ya(i,a,o-a),c=Vu(e,u),l=t(c);if(0===n)for(let t=0;t<l.length;++t)s.push(Object(h["xh"])(0));for(let t=0;t<l.length;++t){const e=l[t];s[t]=h["Pd"](s[t],h["zg"](o-a,e))}}for(let t=0;t<s.length;++t)s[t]=h["Xe"](s[t],a)}return s})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let n=0;n<t.length;++n){const r=t[n];let i=r;if(yi(t,r)>1){const e=yi(t.slice(0,n),r);i+="_"+e}e.push(i)}return e}makeTrainFunction(){return t=>{const e=[],n=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],s=()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:n[e]});const s=new Cs(t),o=js(this.outputs,s,{training:!0});let u;for(let n=0;n<this.lossFunctions.length;++n){const t=this.lossFunctions[n];let a=t(r[n],o[n]);null!=i[n]&&(a=Eu(a,i[n]));const s=h["qg"](a);e.push(s),u=0===n?a:h["Pd"](u,a)}for(let n=0;n<this.metricsTensors.length;++n){let t;if(this.outputs.length>1&&n<this.outputs.length)t=e[n];else{const e=this.metricsTensors[n][0],i=this.metricsTensors[n][1];t=h["qg"](e(r[i],o[i]))}h["Qf"](t),a.push(t)}return u=h["qg"](u),this.calculateLosses().forEach(t=>{u=h["Pd"](u,t)}),u},o=this.collectedTrainableWeights.map(t=>t.read()),u=!0,c=this.optimizer_.minimize(s,u,o);return[c].concat(a)}}makeTestFunction(){this.testFunction=t=>h["vi"](()=>{const e=[];let n;const r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let t=0;t<this.inputs.length;++t)a.push({key:this.inputs[t],value:r[t]});const s=new Cs(a),o=js(this.outputs,s);for(let t=0;t<this.lossFunctions.length;++t){const r=this.lossFunctions[t],a=h["qg"](r(i[t],o[t]));n=0===t?a:h["Pd"](n,a),e.push(n)}for(let t=0;t<this.metricsTensors.length;++t){const n=this.metricsTensors[t][0],r=this.metricsTensors[t][1],a=h["qg"](n(i[r],o[r]));e.push(a)}return e})}async fit(t,e,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let r,i,a,s,o,u,c,l,d;this.isTraining=!0;try{const p=null==n.batchSize?32:n.batchSize;Bu(p);const f=!1,m=await this.standardizeUserData(t,e,n.sampleWeight,n.classWeight,f,p);r=m[0],i=m[1],d=m[2];let g,b=!1;if(null!=n.validationData&&n.validationData.length>0){if(b=!0,2!==n.validationData.length)throw 3===n.validationData.length?new pi("validationData including sample weights is not supported yet."):new hi("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+n.validationData+" is invalid.");o=n.validationData[0],u=n.validationData[1];const t=!0,e=await this.standardizeUserData(o,u,null,null,t,p);c=e[0],l=e[1],g=c.concat(l)}else if(null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1){b=!0;const t=Math.floor(r[0].shape[0]*(1-n.validationSplit)),e=r[0].shape[0];c=zu(r,t,e),a=r,r=zu(r,0,t),l=zu(i,t,e),s=i,i=zu(i,0,t),g=c.concat(l)}else null!=n.validationSteps&&(b=!0);const y=r.concat(i).concat(d);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let x,O;b?(this.makeTestFunction(),x=this.testFunction,O=w.slice().concat(w.map(t=>"val_"+t))):(x=null,g=[],O=w.slice());const S=So(n.callbacks,n.yieldEvery),k=await this.fitLoop(v,y,w,p,n.epochs,n.verbose,S,x,g,n.shuffle,O,n.initialEpoch,null,null);return k}finally{this.isTraining=!1,Gu(r,t),Gu(i,e),Gu(a,t),Gu(s,e),Gu(c,o),Gu(l,u),null!=d&&h["Ve"](d)}}async fitLoop(t,e,n,r,i,a,s,o,u,c,l,d,p,f){null==r&&(r=32),null==i&&(i=1),null==c&&(c=!0),null==d&&(d=0);let m=!1;if(null!=o&&null!=u&&(m=!0),null!=f&&(m=!0,null==p))throw new hi("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(e,r,p,"steps_per_epoch");let b;null!=g&&(b=ca(0,g)),null==a&&(a=1);const{callbackList:y,history:v}=To(s,a,i,d,g,p,r,m,l);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let w=d;w<i;++w){await y.onEpochBegin(w);const i={};if(null!=p)throw new pi("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new pi("batch shuffling is not implemneted yet");c&&h["Ji"].shuffle(b);const a=Object(h["ni"])(b),s=Uu(g,r);for(let c=0;c<s.length;++c){const l={};if(await y.onBatchBegin(c,l),h["vi"](()=>{const d=s[c][0],p=s[c][1],f=ya(a,d,p-d);l["batch"]=c,l["size"]=p-d;const g=Vu(e,f),b=t(g);for(let t=0;t<n.length;++t){const e=n[t],r=b[t];l[e]=r,h["Qf"](r)}if(c===s.length-1&&m){const t=this.testLoop(o,u,r);for(let e=0;e<n.length;++e){const r=n[e],a=t[e];h["Qf"](a),i["val_"+r]=a}}}),await y.onBatchEnd(c,l),mo(l),this.stopTraining_)break}a.dispose()}if(await y.onEpochEnd(w,i),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,e){return Ru(this,t,e)}async trainOnBatch(t,e){const n=await this.standardizeUserData(t,e),r=n[0],i=n[1],a=this.makeTrainFunction(),s=a(r.concat(i)),o=[];for(const u of s){const t=await u.data();o.push(t[0])}return h["Ve"](s),Gu(n[0],t),Gu(n[1],e),vi(o)}getNamedWeights(t){const e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||e.push({name:r[a].originalName,tensor:i[a]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const e=h["rg"]().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-h["rg"]().numTensors}return t}getLossIdentifiers(){let t;if("string"===typeof this.loss)t=xi(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if("string"!==typeof t)throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(t=>xi(t))}else{const e=Object.keys(this.loss);t={};const n=this.loss;for(const r of e){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");t[r]=xi(n[r])}}return t}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[xi(du(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>xi(du(t)));{const t={};for(const e in this.metrics)t[e]=xi(du(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const e=Su(t.optimizer_config),n=_o(e);let r,i;if("string"===typeof t.loss)r=Oi(t.loss);else if(Array.isArray(t.loss))r=t.loss.map(t=>Oi(t));else if(null!=t.loss){r={};for(const e in t.loss)r[e]=Oi(t.loss[e])}if(Array.isArray(t.metrics))i=t.metrics.map(t=>Oi(t));else if(null!=t.metrics){i={};for(const e in t.metrics)i[e]=Oi(t.metrics[e])}this.compile({loss:r,metrics:i,optimizer:n})}async save(t,e){if("string"===typeof t){const e=h["Lf"].getSaveHandlers(t);if(0===e.length)throw new hi(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new hi(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new hi("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await h["Lf"].encodeWeights(this.getNamedWeights(e)),r=!1,i=null,a=this.toJSON(i,r),s={modelTopology:a,format:tc,generatedBy:"TensorFlow.js tfjs-layers v"+Tu,convertedBy:null},o=null!=e&&e.includeOptimizer;if(o&&null!=this.optimizer){s.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:e,specs:r}=await h["Lf"].encodeWeights(await this.optimizer.getWeights(),t);n.specs.push(...r),n.data=h["Lf"].concatenateArrayBuffers([n.data,e])}if(null!=this.userDefinedMetadata){const t=!0;fu(this.userDefinedMetadata,this.name,t),s.userDefinedMetadata=this.userDefinedMetadata}return s.weightData=n.data,s.weightSpecs=n.specs,t.save(s)}setUserDefinedMetadata(t){fu(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}ec.className="Model",h["Dh"].registerClass(ec);class nc extends ec{}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
async function rc(t,e){"modelTopology"in t||(t={modelTopology:t}),t=t;let n=t.modelTopology;null!=n["model_config"]&&(n=n["model_config"]);const r=Su(n),i=_o(r,e);if(null!=t.weightsManifest){const e=await h["Lf"].loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map(t=>t.originalName)),n={};for(const t of i.weights)n[t.originalName]=e[t.originalName];i.loadWeights(n),Object(h["Ve"])(e)}return i}async function ic(t,e){if(null==e&&(e={}),"string"===typeof t){const n=h["Lf"].getLoadHandlers(t,e);if(0===n.length)n.push(h["Lf"].browserHTTPRequest(t,e));else if(n.length>1)throw new hi(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return ac(t,void 0,e)}async function ac(t,e,n){if(null==n&&(n={}),null==t.load)throw new hi("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;null!=i["model_config"]&&(i=i["model_config"]);const a=null==n.strict||n.strict,s=null!=r.weightData&&null!=r.weightSpecs&&a,o=_o(Su(i),e,s),u=r.trainingConfig;if(null!=u&&o.loadTrainingConfig(u),null!=r.userDefinedMetadata&&o.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new hi("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:e}=sc(r.weightData,r.weightSpecs);o.loadWeights(t,a),null!=o.optimizer&&e.length>0&&await o.optimizer.setWeights(e),Object(h["Ve"])(t),Object(h["Ve"])(e.map(t=>t.tensor))}return o}function sc(t,e){const n=h["Lf"].decodeWeights(t,e),r={},i=[];return e.forEach(t=>{"optimizer"===t.group?i.push({name:t.name,tensor:n[t.name]}):r[t.name]=n[t.name]}),{modelWeights:r,optimizerWeights:i}}nc.className="Functional",h["Dh"].registerClass(nc);class oc extends ec{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=null!=t.name?t.name:Bi("sequential_"),null!=t.layers)for(const e of t.layers)this.add(e)}checkShape(t){const e=t.inboundNodes[0].outputTensors[0].shape;if(e.some(t=>t<0))throw new hi("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")}add(t){const e=t instanceof oc||t instanceof ec;let n;if(e){if(n=t,1!==n.outputs.length)throw new hi("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new hi("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new hi("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const e=_s({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(e)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new hi(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(1!==t.inboundNodes[0].outputTensors.length)throw new hi("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=ks(this.outputs[0])}this.inboundNodes=[],new vs({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:gi(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs[0].shape})}else{const e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return null==this.model&&this.build(),this.model.call(t,e)}build(t){if(cs(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ec({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,n=console.log){this.built||this.build(),super.summary(t,e,n)}setWeights(t){null==this.model&&this.build(),this.model.setWeights(t)}evaluate(t,e,n={}){if(!this.built)throw new di("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}async evaluateDataset(t,e){if(!this.built)throw new di("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return null==this.model&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,n={}){if(!this.built)throw new di("The model needs to be compiled before being used.");return this.model.fit(t,e,n)}async fitDataset(t,e){if(!this.built)throw new di("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,n={},r=!1){let i,a={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0]["className"])throw new hi("Legacy serialization format not supported yet.");i=e}else h["Ji"].assert(null!=e["layers"],()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=e["layers"],delete e["layers"],a=e;const s=new t(a);if(!(s instanceof oc))throw new pi("Sequential.fromConfig called on non-Sequential input: "+s);for(const o of i){const t=void 0,e=_o(o,t,r);r&&e.setFastWeightInitDuringBuild(!0),s.add(e)}return s}set stopTraining(t){if(null==this.model)throw new hi("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(null==this.model)throw new hi("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const n={};n["className"]=e.getClassName(),n["config"]=e.getConfig(),t.push(n)}return{name:this.name,layers:t}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function uc(t){return new ec(t)}function cc(t){return new oc(t)}function lc(t){return _s(t)}function dc(t,e){ko.registerCallbackConstructor(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */oc.className="Sequential",h["Dh"].registerClass(oc);class hc extends h["Dh"].Serializable{getConfig(){return{}}}class pc extends hc{apply(t,e=1){return Ea(t,e)}}pc.className="elu",h["Dh"].registerClass(pc);class fc extends hc{apply(t){return h["Bh"](t)}}fc.className="selu",h["Dh"].registerClass(fc);class mc extends hc{apply(t){return h["lh"](t)}}mc.className="relu",h["Dh"].registerClass(mc);class gc extends hc{apply(t){return Object(h["vi"])(()=>h["ug"](6,h["lh"](t)))}}gc.className="relu6",h["Dh"].registerClass(gc);class bc extends hc{apply(t){return t}}bc.className="linear",h["Dh"].registerClass(bc);class yc extends hc{apply(t){return h["Hh"](t)}}yc.className="sigmoid",h["Dh"].registerClass(yc);class vc extends hc{apply(t){return Da(t)}}vc.className="hardSigmoid",h["Dh"].registerClass(vc);class wc extends hc{apply(t){return h["Th"](t)}}wc.className="softplus",h["Dh"].registerClass(wc);class xc extends hc{apply(t){return Na(t)}}xc.className="softsign",h["Dh"].registerClass(xc);class Oc extends hc{apply(t){return h["li"](t)}}Oc.className="tanh",h["Dh"].registerClass(Oc);class Sc extends hc{apply(t,e=-1){return h["Sh"](t,e)}}Sc.className="softmax",h["Dh"].registerClass(Sc);class kc extends hc{apply(t,e=-1){return h["bg"](t,e)}}kc.className="logSoftmax",h["Dh"].registerClass(kc);class Tc extends hc{apply(t,e=1){return Object(h["vi"])(()=>h["zg"](h["Hh"](h["zg"](t,e)),t))}}Tc.className="swish",h["Dh"].registerClass(Tc);class _c extends hc{apply(t){return Object(h["vi"])(()=>h["zg"](t,h["li"](h["Th"](t))))}}function Ic(t){return t.getClassName()}function Cc(t,e={}){return _i(t,h["Dh"].SerializationMap.getMap().classNameMap,e,"activation")}function Ac(t){if(null==t){const t={className:"linear",config:{}};return Cc(t)}if("string"===typeof t){const e={};return e["className"]=t,e["config"]={},Cc(e)}return t instanceof hc?t:Cc(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ec(t){if(null!=t&&"object"!==typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}_c.className="mish",h["Dh"].registerClass(_c);class Nc extends h["Dh"].Serializable{}class jc extends Nc{constructor(t){super(),Ec(t),this.l1=null==t||null==t.l1?.01:t.l1,this.l2=null==t||null==t.l2?.01:t.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return Object(h["vi"])(()=>{let e=Object(h["Ri"])([1]);return this.hasL1&&(e=Object(h["Pd"])(e,Object(h["ii"])(h["zg"](this.l1,Object(h["Md"])(t))))),this.hasL2&&(e=Object(h["Pd"])(e,Object(h["ii"])(h["zg"](this.l2,Ia(t))))),h["oh"](e,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e["l1"],l2:e["l2"]})}}function Dc(t){return Ec(t),new jc({l1:null!=t?t.l1:null,l2:0})}function $c(t){return Ec(t),new jc({l2:null!=t?t.l2:null,l1:0})}jc.className="L1L2",h["Dh"].registerClass(jc);const Rc={l1l2:"L1L2"};function Fc(t){return ki(t)}function Pc(t,e={}){return _i(t,h["Dh"].SerializationMap.getMap().classNameMap,e,"regularizer")}function Mc(t){if(null==t)return null;if("string"===typeof t){const e=t in Rc?Rc[t]:t,n={className:e,config:{}};return Pc(n)}return t instanceof Nc?t:Pc(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Lc extends xs{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,null!=t&&(this.maxValue=t.maxValue)}call(t,e){t=us(t);let n=Object(h["lh"])(t);return null!=this.maxValue&&(n=Object(h["te"])(n,0,this.maxValue)),n}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}Lc.className="ReLU",h["Dh"].registerClass(Lc);class Bc extends xs{constructor(t){super(null==t?{}:t),this.DEFAULT_ALPHA=.3,null==t&&(t={}),this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=us(t);return Object(h["Sf"])(n,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}Bc.className="LeakyReLU",h["Dh"].registerClass(Bc);class zc extends xs{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),this.supportsMasking=!0,this.alphaInitializer=as(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Mc(t.alphaRegularizer),this.alphaConstraint=qs(t.alphaConstraint),null==t.sharedAxes)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else{if("number"!==typeof t.sharedAxes)throw new hi("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);this.sharedAxes=[t.sharedAxes]}}build(t){t=cs(t);const e=t.slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)e[r-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<t.length;++r)n[r]=t[r];this.inputSpec=[new gs({ndim:t.length,axes:n})],this.built=!0}call(t,e){return t=us(t),Object(h["Sg"])(t,this.alpha.read())}getConfig(){const t={alphaInitializer:is(this.alphaInitializer),alphaRegularizer:Fc(this.alphaRegularizer),alphaConstraint:Gs(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}zc.className="PReLU",h["Dh"].registerClass(zc);class Vc extends xs{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==this.DEFAULT_ALPHA)throw new pi(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=us(t);return Object(h["cf"])(n)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}Vc.className="ELU",h["Dh"].registerClass(Vc);class Uc extends xs{constructor(t){super(null==t?{}:t),this.DEFAULT_THETA=1,null==t&&(t={}),this.theta=null==t.theta?this.DEFAULT_THETA:t.theta}call(t,e){const n=us(t);return Object(h["zg"])(n,Object(h["re"])(Object(h["Ff"])(n,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}Uc.className="ThresholdedReLU",h["Dh"].registerClass(Uc);class Wc extends xs{constructor(t){super(null==t?{}:t),this.DEFAULT_AXIS=1,null==t&&(t={}),this.softmax=(new Sc).apply,this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis}call(t,e){const n=us(t);return this.softmax(n,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Gc(t,e,n){if("number"===typeof t)return gi(t,e);if(t.length!==e)throw new hi(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!aa(i))throw new hi(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number `+i)}return t}function Hc(t,e,n,r,i=1){if(null==t)return t;const a=e+(e-1)*(i-1);let s;return s="same"===n?t:t-a+1,Math.floor((s+r-1)/r)}function qc(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+ua([n-e,0]);else{if("same"!==r)throw new hi(`Unsupport padding mode: ${r}.`);t*=e}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jc(t,e){return Object(h["vi"])(()=>(qi(e),"channelsFirst"===e?h["Ai"](t,[0,2,3,1]):t))}function Kc(t,e){return Object(h["vi"])(()=>(qi(e),"channelsFirst"===e?h["Ai"](t,[0,2,3,4,1]):t))}function Xc(t,e,n,r=1,i="valid",a,s=1){return Object(h["vi"])(()=>{if(null==a&&(a=ha()),qi(a),3!==t.shape.length)throw new hi("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new hi("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new hi("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===a&&(t=h["Ai"](t,[0,2,1])),"causal"===i)throw new pi("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=h["Be"](t,e,r,"same"===i?"same":"valid","NWC",s);return null!=n&&(o=Aa(o,n)),o})}function Yc(t,e,n,r=[1,1],i="valid",a,s,o=null){return Object(h["vi"])(()=>{if(null==a&&(a=ha()),qi(a),3!==t.rank&&4!==t.rank)throw new hi(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==e.rank&&4!==e.rank)throw new hi(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=Jc(t,a);if("causal"===i)throw new pi("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=h["vf"].conv2d({x:u,filter:e,strides:r,pad:"same"===i?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===a&&(u=h["Ai"](u,[0,3,1,2])),u})}function Zc(t,e,n,r=[1,1,1],i="valid",a,s){return Object(h["vi"])(()=>{if(null==a&&(a=ha()),qi(a),4!==t.rank&&5!==t.rank)throw new hi("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(4!==e.rank&&5!==e.rank)throw new hi("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");let o=Kc(t,a);if("causal"===i)throw new pi("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=h["Ee"](o,e,r,"same"===i?"same":"valid","NDHWC",s),null!=n&&(o=Aa(o,n)),"channelsFirst"===a&&(o=h["Ai"](o,[0,4,1,2,3])),o})}Wc.className="Softmax",h["Dh"].registerClass(Wc);class Qc extends xs{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Qc.verifyArgs(e),this.rank=t,Di(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new pi(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Gc(e.kernelSize,t,"kernelSize"),this.strides=Gc(null==e.strides?1:e.strides,t,"strides"),this.padding=null==e.padding?"valid":e.padding,Ki(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,qi(this.dataFormat),this.activation=Ac(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=as(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=qs(e.biasConstraint),this.biasRegularizer=Mc(e.biasRegularizer),this.activityRegularizer=Mc(e.activityRegularizer),this.dilationRate=Gc(null==e.dilationRate?1:e.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new hi("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new hi("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new hi("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(t){if(bi("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!==typeof t.kernelSize&&!ji(t.kernelSize,"number",1,3))throw new hi(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ic(this.activation),useBias:this.useBias,biasInitializer:is(this.biasInitializer),biasRegularizer:Fc(this.biasRegularizer),activityRegularizer:Fc(this.activityRegularizer),biasConstraint:Gs(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class tl extends Qc{constructor(t,e){super(t,e),this.kernel=null,tl.verifyArgs(e),this.filters=e.filters,Di(this.filters,"filters"),this.kernelInitializer=as(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=qs(e.kernelConstraint),this.kernelRegularizer=Mc(e.kernelRegularizer)}build(t){t=cs(t);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new hi("The channel dimension of the input should be defined. Found "+t[e]);const n=t[e],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:n}}],this.built=!0}call(t,e){return Object(h["vi"])(()=>{let e;t=us(t);const n=null==this.bias?null:this.bias.read(),r=Fi(this.activation.getClassName());if(null!=r&&2===this.rank)e=Yc(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=Xc(t,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=Yc(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new pi("convolutions greater than 3D are not implemented yet.");e=Zc(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(t){t=cs(t);const e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2);for(let i=0;i<n.length;++i){const t=Hc(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);e.push(t)}let r=[t[0]];return"channelsLast"===this.dataFormat?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){const t={filters:this.filters,kernelInitializer:is(this.kernelInitializer),kernelRegularizer:Fc(this.kernelRegularizer),kernelConstraint:Gs(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||"number"!==typeof t.filters||t.filters<1)throw new hi("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))}}class el extends tl{constructor(t){super(2,t),el.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t["rank"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&!ji(t.kernelSize,"number",1,2))throw new hi(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}el.className="Conv2D",h["Dh"].registerClass(el);class nl extends tl{constructor(t){super(3,t),nl.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t["rank"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new hi(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}nl.className="Conv3D",h["Dh"].registerClass(nl);class rl extends el{constructor(t){if(super(t),this.inputSpec=[new gs({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new hi("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(t){if(t=cs(t),4!==t.length)throw new hi("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new hi("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new gs({ndim:4,axes:{[e]:n}})],this.built=!0}call(t,e){return h["vi"](()=>{let e=us(t);if(4!==e.shape.length)throw new hi("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);const n=e.shape,r=n[0];let i,a;"channelsFirst"===this.dataFormat?(i=2,a=3):(i=1,a=2);const s=n[i],o=n[a],u=this.kernelSize[0],c=this.kernelSize[1],l=this.strides[0],d=this.strides[1],p=qc(s,l,u,this.padding),f=qc(o,d,c,this.padding),m=[r,p,f,this.filters];"channelsLast"!==this.dataFormat&&(e=h["Ai"](e,[0,2,3,1]));let g=h["De"](e,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(g=h["Ai"](g,[0,3,1,2])),null!=this.bias&&(g=Aa(g,this.bias.read(),this.dataFormat)),null!=this.activation&&(g=this.activation.apply(g)),g})}computeOutputShape(t){t=cs(t);const e=t.slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const a=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],u=this.strides[1];return e[n]=this.filters,e[r]=qc(e[r],o,a,this.padding),e[i]=qc(e[i],u,s,this.padding),e}getConfig(){const t=super.getConfig();return delete t["dilationRate"],t}}rl.className="Conv2DTranspose",h["Dh"].registerClass(rl);class il extends nl{constructor(t){if(super(t),this.inputSpec=[new gs({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new hi("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(t){if(t=cs(t),5!==t.length)throw new hi("Input should have rank 5; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new hi("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new gs({ndim:5,axes:{[e]:n}})],this.built=!0}call(t,e){return h["vi"](()=>{let e=us(t);if(5!==e.shape.length)throw new hi("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);const n=e.shape,r=n[0];let i,a,s;"channelsFirst"===this.dataFormat?(s=2,i=3,a=4):(s=1,i=2,a=3);const o=n[s],u=n[i],c=n[a],l=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],f=this.strides[0],m=this.strides[1],g=this.strides[2],b=qc(o,f,l,this.padding),y=qc(u,m,d,this.padding),v=qc(c,g,p,this.padding),w=[r,b,y,v,this.filters];"channelsLast"!==this.dataFormat&&(e=h["Ai"](e,[0,2,3,4,1]));let x=h["Fe"](e,this.kernel.read(),w,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(x=h["Ai"](x,[0,4,1,2,3])),null!==this.bias&&(x=Aa(x,this.bias.read(),this.dataFormat)),null!==this.activation&&(x=this.activation.apply(x)),x})}computeOutputShape(t){t=cs(t);const e=t.slice();let n,r,i,a;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3,a=4):(n=4,r=1,i=2,a=3);const s=this.kernelSize[0],o=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],d=this.strides[2];return e[n]=this.filters,e[r]=qc(e[r],c,s,this.padding),e[i]=qc(e[i],l,o,this.padding),e[a]=qc(e[a],d,u,this.padding),e}getConfig(){const t=super.getConfig();return delete t["dilationRate"],t}}il.className="Conv3DTranspose",h["Dh"].registerClass(il);class al extends tl{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==e.filters)throw new hi("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=e.kernelInitializer||null!=e.kernelRegularizer||null!=e.kernelConstraint)throw new hi("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=e.padding&&"same"!==e.padding&&"valid"!==e.padding)throw new hi(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received `+JSON.stringify(e.padding));this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=as(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Mc(e.depthwiseRegularizer),this.depthwiseConstraint=qs(e.depthwiseConstraint),this.pointwiseInitializer=as(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Mc(e.pointwiseRegularizer),this.pointwiseConstraint=qs(e.pointwiseConstraint)}build(t){if(t=cs(t),t.length<this.rank+2)throw new hi(`Inputs to SeparableConv${this.rank}D should have rank `+(this.rank+2)+", but received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new hi("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[e]));const n=t[e],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new gs({ndim:this.rank+2,axes:{[e]:n}})],this.built=!0}call(t,e){return Object(h["vi"])(()=>{let e;if(t=us(t),1===this.rank)throw new pi("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=h["Ai"](t,[0,2,3,1])),e=h["Ch"](t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(e=Aa(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),"channelsFirst"===this.dataFormat&&(e=h["Ai"](e,[0,3,1,2])),e})}getConfig(){const t=super.getConfig();return delete t["rank"],delete t["kernelInitializer"],delete t["kernelRegularizer"],delete t["kernelConstraint"],t["depthwiseInitializer"]=is(this.depthwiseInitializer),t["pointwiseInitializer"]=is(this.pointwiseInitializer),t["depthwiseRegularizer"]=Fc(this.depthwiseRegularizer),t["pointwiseRegularizer"]=Fc(this.pointwiseRegularizer),t["depthwiseConstraint"]=Gs(this.depthwiseConstraint),t["pointwiseConstraint"]=Gs(this.pointwiseConstraint),t}}al.className="SeparableConv";class sl extends al{constructor(t){super(2,t)}}sl.className="SeparableConv2D",h["Dh"].registerClass(sl);class ol extends tl{constructor(t){super(1,t),ol.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t["rank"],delete t["dataFormat"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&!ji(t.kernelSize,"number",1,1))throw new hi(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}ol.className="Conv1D",h["Dh"].registerClass(ol);class ul extends xs{constructor(t){super(t),"number"===typeof t.cropping?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"===typeof t.cropping[0]?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return Object(h["vi"])(()=>{if(t=us(t),"channelsLast"===this.dataFormat){const e=wa(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return wa(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=wa(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return wa(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}ul.className="Cropping2D",h["Dh"].registerClass(ul);class cl extends xs{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==t.size?this.DEFAULT_SIZE:t.size,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,qi(this.dataFormat),this.interpolation=null==t.interpolation?"nearest":t.interpolation,Ji(this.interpolation)}computeOutputShape(t){if("channelsFirst"===this.dataFormat){const e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}{const e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2];return[t[0],e,n,t[3]]}}call(t,e){return h["vi"](()=>{let e=us(t);const n=e.shape;if("channelsFirst"===this.dataFormat){e=h["Ai"](e,[0,2,3,1]);const t=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?h["Jf"].resizeNearestNeighbor(e,[t,r]):h["Jf"].resizeBilinear(e,[t,r]);return h["Ai"](i,[0,3,1,2])}{const t=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?h["Jf"].resizeNearestNeighbor(e,[t,r]):h["Jf"].resizeBilinear(e,[t,r])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function ll(t,e,n=[1,1],r="valid",i,a){return Object(h["vi"])(()=>{null==i&&(i=ha()),qi(i);let s=Jc(t,i);if(4!==t.rank)throw new hi("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new hi("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return s=h["Qe"](s,e,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===i&&(s=h["Ai"](s,[0,3,1,2])),s})}cl.className="UpSampling2D",h["Dh"].registerClass(cl);class dl extends Qc{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=as(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=qs(t.depthwiseConstraint),this.depthwiseRegularizer=Mc(t.depthwiseRegularizer)}build(t){if(t=cs(t),t.length<4)throw new hi(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new hi(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[e]}).`);const n=t[e],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(h["vi"])(()=>{t=us(t);let e=ll(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=Aa(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(t){t=cs(t);const e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,i=Hc(e,this.kernelSize[0],this.padding,this.strides[0]),a=Hc(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],r,i,a]:[t[0],i,a,r]}getConfig(){const t=super.getConfig();return t["depthMultiplier"]=this.depthMultiplier,t["depthwiseInitializer"]=is(this.depthwiseInitializer),t["depthwiseRegularizer"]=Fc(this.depthwiseRegularizer),t["depthwiseConstraint"]=Gs(this.depthwiseRegularizer),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function hl(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new hi("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function pl(t,e,n,r=!1,i,a,s=!1,o=!1){return h["vi"](()=>{const u=e.shape.length;if(u<3)throw new hi(`Input should be at least 3D, but is ${u}D.`);const c=[1,0].concat(ca(2,u));if(e=h["Ai"](e,c),null!=a)throw new pi("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=h["re"](h["re"](i,"bool"),"float32"),i.rank===u-1&&(i=h["mf"](i,-1)),i=h["Ai"](i,c)),r&&(e=h["ph"](e,0),null!=i&&(i=h["ph"](i,0)));const l=[];let d,p=n;const f=e.shape[0],m=h["Gi"](e);let g,b;null!=i&&(g=h["Gi"](i));for(let e=0;e<f;++e){const n=m[e],r=h["vi"](()=>t(n,p));if(null==i)d=r[0],p=r[1];else{const t=h["vi"](()=>{const t=g[e],n=h["hi"](h["Ig"](t),t),i=h["Pd"](h["zg"](r[0],t),h["zg"](p[0],n)),a=p.map((e,i)=>h["Pd"](h["zg"](r[1][i],t),h["zg"](e,n)));return{output:i,newStates:a}});d=t.output,p=t.newStates}o&&l.push(d)}if(o){const t=1;b=h["di"](l,t)}return[d,b,p]})}dl.className="DepthwiseConv2D",h["Dh"].registerClass(dl);class fl extends xs{constructor(t){let e;if(super(t),null==t.cell)throw new hi("cell property is missing for the constructor of RNN.");if(e=Array.isArray(t.cell)?new Ol({cells:t.cell}):t.cell,null==e.stateSize)throw new hi("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new gs({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ca(0,t).map(t=>null)}return this.states_}setStates(t){this.states_=t}computeOutputShape(t){ss(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const n=e[0];let r;if(r=this.returnSequences?[t[0],t[1],n]:[t[0],n],this.returnState){const n=[];for(const r of e)n.push([t[0],r]);return[r].concat(n)}return r}computeMask(t,e){return h["vi"](()=>{Array.isArray(e)&&(e=e[0]);const t=this.returnSequences?e:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let n=0;n<t;++n)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(t){const e=null;if(null!=this.numConstants)throw new pi("Constants support is not implemented in RNN yet.");ss(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new gs({shape:[n,null,...r]});const i=[t[0]].concat(t.slice(2));if(null!=e)throw new pi("Constants support is not implemented in RNN yet.");let a;if(this.cell.build(i),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!h["Ji"].arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),a))throw new hi(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is `+this.cell.stateSize)}else this.stateSpec=a.map(t=>new gs({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){Object(h["vi"])(()=>{if(!this.stateful)throw new li("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new hi("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>h["Ri"]([n,t])):this.states_=[h["Ri"]([n,this.cell.stateSize])];else if(null==t)h["Ve"](this.states_),null!=this.keptStates&&(h["Ve"](this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>h["Ri"]([n,t])):this.states_[0]=h["Ri"]([n,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new hi(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: `+t);!0===e?this.keptStates.push(this.states_.slice()):h["Ve"](this.states_);for(let e=0;e<this.states_.length;++e){const r=t[e],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[e]:this.cell.stateSize,a=[n,i];if(!h["Ji"].arraysEqual(r.shape,a))throw new hi(`State ${e} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[e]=r}}this.states_=this.states_.map(t=>h["Qf"](t.clone()))})}apply(t,e){let n=null==e?null:e["initialState"],r=null==e?null:e["constants"];null==e&&(e={});const i=hl(t,n,r,this.numConstants);t=i.inputs,n=i.initialState,r=i.constants;let a=[],s=[];if(null!=n){e["initialState"]=n,a=a.concat(n),this.stateSpec=[];for(const t of n)this.stateSpec.push(new gs({shape:t.shape}));s=s.concat(this.stateSpec)}null!=r&&(e["constants"]=r,a=a.concat(r),this.numConstants=r.length);const o=a[0]instanceof bs;if(o){const n=[t].concat(a),r=this.inputSpec.concat(s),i=this.inputSpec;this.inputSpec=r;const o=super.apply(n,e);return this.inputSpec=i,o}return super.apply(t,e)}call(t,e){return Object(h["vi"])(()=>{const n=null==e?null:e["mask"],r=null==e?null:e["training"];let i=null==e?null:e["initialState"];t=us(t),null==i&&(i=this.stateful?this.states_:this.getInitialState(t));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new hi(`RNN Layer has ${a} state(s) but was passed `+i.length+" initial state(s).");this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:r},o=(t,e)=>{const n=this.cell.call([t].concat(e),s);return[n[0],n.slice(1)]},u=pl(o,t,i,this.goBackwards,n,null,this.unroll,this.returnSequences),c=u[0],l=u[1],d=u[2];this.stateful&&this.resetStates(d,r);const h=this.returnSequences?l:c;return this.returnState?[h].concat(d):h})}getInitialState(t){return Object(h["vi"])(()=>{let e=h["Ri"](t.shape);return e=h["ii"](e,[1,2]),e=fa(e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?Sa(e,[1,t]):e):this.cell.stateSize>1?[Sa(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e["numConstants"]=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===fl.className&&(e["cell"]={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),t),e)}static fromConfig(t,e,n={}){const r=e["cell"],i=_o(r,n);return new t(Object.assign(e,{cell:i}))}}fl.className="RNN",h["Dh"].registerClass(fl);class ml extends xs{}class gl extends ml{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Di(this.units,"units"),this.activation=Ac(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=as(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=as(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=as(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Mc(t.kernelRegularizer),this.recurrentRegularizer=Mc(t.recurrentRegularizer),this.biasRegularizer=Mc(t.biasRegularizer),this.kernelConstraint=qs(t.kernelConstraint),this.recurrentConstraint=qs(t.recurrentConstraint),this.biasConstraint=qs(t.biasConstraint),this.dropout=oa([1,ua([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=oa([1,ua([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=cs(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(h["vi"])(()=>{if(t=t,2!==t.length)throw new hi(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let n=t[1];t=t[0];const r=null!=e["training"]&&e["training"];let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Sl({ones:()=>h["Ig"](t),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Sl({ones:()=>h["Ig"](n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=this.recurrentDropoutMask;i=Ta(null!=a?h["zg"](t,a):t,this.kernel.read()),null!=this.bias&&(i=Aa(i,this.bias.read())),null!=s&&(n=h["zg"](n,s));let o=h["Pd"](i,Ta(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:Ic(this.activation),useBias:this.useBias,kernelInitializer:is(this.kernelInitializer),recurrentInitializer:is(this.recurrentInitializer),biasInitializer:is(this.biasInitializer),kernelRegularizer:Fc(this.kernelRegularizer),recurrentRegularizer:Fc(this.recurrentRegularizer),biasRegularizer:Fc(this.biasRegularizer),activityRegularizer:Fc(this.activityRegularizer),kernelConstraint:Gs(this.kernelConstraint),recurrentConstraint:Gs(this.recurrentConstraint),biasConstraint:Gs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),e)}}gl.className="SimpleRNNCell",h["Dh"].registerClass(gl);class bl extends fl{constructor(t){t.cell=new gl(t),super(t)}call(t,e){return Object(h["vi"])(()=>{null!=this.cell.dropoutMask&&(h["Ve"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["Ve"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}static fromConfig(t,e){return new t(e)}}bl.className="SimpleRNN",h["Dh"].registerClass(bl);class yl extends ml{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new hi("GRUCell does not support reset_after parameter set to true.");this.units=t.units,Di(this.units,"units"),this.activation=Ac(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ac(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=as(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=as(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=as(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Mc(t.kernelRegularizer),this.recurrentRegularizer=Mc(t.recurrentRegularizer),this.biasRegularizer=Mc(t.biasRegularizer),this.kernelConstraint=qs(t.kernelConstraint),this.recurrentConstraint=qs(t.recurrentConstraint),this.biasConstraint=qs(t.biasConstraint),this.dropout=oa([1,ua([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=oa([1,ua([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=cs(t);const e=t[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(h["vi"])(()=>{if(t=t,2!==t.length)throw new hi("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");const n=null!=e["training"]&&e["training"];let r=t[1];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Sl({ones:()=>h["Ig"](t),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Sl({ones:()=>h["Ig"](r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let s,o,u;0<this.dropout&&this.dropout<1&&(t=h["zg"](t,i[0]));let c=Ta(t,this.kernel.read());this.useBias&&(c=Aa(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=h["zg"](r,a[0]));const l=this.recurrentKernel.read(),[d,p]=h["Yh"](l,[2*this.units,this.units],l.rank-1),f=Ta(r,d),[m,g,b]=h["Yh"](c,3,c.rank-1),[y,v]=h["Yh"](f,2,f.rank-1);s=this.recurrentActivation.apply(h["Pd"](m,y)),o=this.recurrentActivation.apply(h["Pd"](g,v));const w=Ta(h["zg"](o,r),p);u=this.activation.apply(h["Pd"](b,w));const x=h["Pd"](h["zg"](s,r),h["zg"](h["Pd"](1,h["Cg"](s)),u));return[x,x]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:Ic(this.activation),recurrentActivation:Ic(this.recurrentActivation),useBias:this.useBias,kernelInitializer:is(this.kernelInitializer),recurrentInitializer:is(this.recurrentInitializer),biasInitializer:is(this.biasInitializer),kernelRegularizer:Fc(this.kernelRegularizer),recurrentRegularizer:Fc(this.recurrentRegularizer),biasRegularizer:Fc(this.biasRegularizer),activityRegularizer:Fc(this.activityRegularizer),kernelConstraint:Gs(this.kernelConstraint),recurrentConstraint:Gs(this.recurrentConstraint),biasConstraint:Gs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),e)}}yl.className="GRUCell",h["Dh"].registerClass(yl);class vl extends fl{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new yl(t),super(t)}call(t,e){return Object(h["vi"])(()=>{null!=this.cell.dropoutMask&&(h["Ve"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["Ve"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}static fromConfig(t,e){return 0===e["implmentation"]&&(e["implementation"]=1),new t(e)}}vl.className="GRU",h["Dh"].registerClass(vl);class wl extends ml{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Di(this.units,"units"),this.activation=Ac(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ac(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=as(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=as(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=as(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Mc(t.kernelRegularizer),this.recurrentRegularizer=Mc(t.recurrentRegularizer),this.biasRegularizer=Mc(t.biasRegularizer),this.kernelConstraint=qs(t.kernelConstraint),this.recurrentConstraint=qs(t.recurrentConstraint),this.biasConstraint=qs(t.biasConstraint),this.dropout=oa([1,ua([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=oa([1,ua([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;t=cs(t);const n=t[t.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,n=this.units;r=new(e=class extends La{apply(e,r){const i=t.apply([n]),a=(new za).apply([n]),s=t.apply([2*n]);return Oa(Oa(i,a),s)}},e.className="CustomInit",e)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return Object(h["vi"])(()=>{const n=null!=e["training"]&&e["training"];if(t=t,3!==t.length)throw new hi("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");let r=t[1];const i=t[2];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Sl({ones:()=>h["Ig"](t),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Sl({ones:()=>h["Ig"](r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=this.recurrentDropoutMask;let o,u,c,l;0<this.dropout&&this.dropout<1&&(t=h["zg"](t,a[0]));let d=Ta(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=h["zg"](r,s[0])),d=h["Pd"](d,Ta(r,this.recurrentKernel.read())),this.useBias&&(d=Aa(d,this.bias.read()));const[p,f,m,g]=h["Yh"](d,4,d.rank-1);o=this.recurrentActivation.apply(p),u=this.recurrentActivation.apply(f),c=h["Pd"](h["zg"](u,i),h["zg"](o,this.activation.apply(m))),l=this.recurrentActivation.apply(g);const b=h["zg"](l,this.activation.apply(c));return[b,b,c]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:Ic(this.activation),recurrentActivation:Ic(this.recurrentActivation),useBias:this.useBias,kernelInitializer:is(this.kernelInitializer),recurrentInitializer:is(this.recurrentInitializer),biasInitializer:is(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Fc(this.kernelRegularizer),recurrentRegularizer:Fc(this.recurrentRegularizer),biasRegularizer:Fc(this.biasRegularizer),activityRegularizer:Fc(this.activityRegularizer),kernelConstraint:Gs(this.kernelConstraint),recurrentConstraint:Gs(this.recurrentConstraint),biasConstraint:Gs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),e)}}wl.className="LSTMCell",h["Dh"].registerClass(wl);class xl extends fl{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new wl(t),super(t)}call(t,e){return Object(h["vi"])(()=>{null!=this.cell.dropoutMask&&(h["Ve"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["Ve"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}static fromConfig(t,e){return 0===e["implmentation"]&&(e["implementation"]=1),new t(e)}}xl.className="LSTM",h["Dh"].registerClass(xl);class Ol extends ml{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return Object(h["vi"])(()=>{t=t;let n=t.slice(1);const r=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?r.push(n.splice(0,t.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let a;for(let s=0;s<this.cells.length;++s){const o=this.cells[s];n=r[s],a=0===s?[t[0]].concat(n):[a[0]].concat(n),a=o.call(a,e),i.push(a.slice(1))}n=[];for(const t of i.slice().reverse())n.push(...t);return[a[0]].concat(n)})}build(t){let e;ss(t)&&(t=t[0]),t=t,this.cells.forEach((n,r)=>{Qi("RNNCell_"+r,()=>{n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e=t=>({className:t.getClassName(),config:t.getConfig()}),n=this.cells.map(e),r={cells:n};return Object.assign(Object.assign({},t),r)}static fromConfig(t,e,n={}){const r=[];for(const i of e["cells"])r.push(_o(i,n));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return fs(t)}setWeights(t){const e=[];for(const n of this.cells){const r=n.weights.length,i=t.splice(r);for(let t=0;t<n.weights.length;++t)e.push([n.weights[t],i[t]])}ms(e)}}function Sl(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=t,s=()=>null!=a?a(e(),n):ja(e(),n),o=()=>$a(s,e,r);if(!i||i<=1)return h["Qf"](o().clone());const u=Array(i).fill(void 0).map(o);return u.map(t=>h["Qf"](t.clone()))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */Ol.className="StackedRNNCells",h["Dh"].registerClass(Ol);var kl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class Tl extends fl{constructor(t){if(t.unroll)throw new pi("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new pi("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new gs({ndim:5})]}call(t,e){return h["vi"](()=>{if(null!=this.cell.dropoutMask&&(h["Ve"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["Ve"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),e&&e["constants"])throw new hi("ConvRNN2D cell does not support constants");const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(t){return h["vi"](()=>{const{stateSize:e}=this.cell,n=t.shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],a=h["Ri"](i);return Array.isArray(e)?Array(e.length).fill(a):[a]})}resetStates(t,e=!1){h["vi"](()=>{if(!this.stateful)throw new li("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],a=n[0];if(null==a)throw new hi("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>h["Ri"](i)):this.states_=[h["Ri"](i)];else if(null==t)h["Ve"](this.states_),null!=this.keptStates&&(h["Ve"](this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>h["Ri"](i)):this.states_[0]=h["Ri"](i);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new hi(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: `+t);e?this.keptStates.push(this.states_.slice()):h["Ve"](this.states_);for(let e=0;e<this.states_.length;++e){const n=t[e],r=i;if(!h["Ji"].arraysEqual(n.shape,r))throw new hi(`State ${e} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[e]=n}}this.states_=this.states_.map(t=>h["Qf"](t.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:n,kernelSize:r,padding:i,strides:a,dilationRate:s}=this.cell,o="channelsFirst"===e,u=t[o?3:2],c=t[o?4:3],l=Hc(u,r[0],i,a[0],s[0]),d=Hc(c,r[1],i,a[1],s[1]),h=[...t.slice(0,2),...o?[n,l,d]:[l,d,n]];return h}}Tl.className="ConvRNN2D";class _l extends wl{constructor(t){const{filters:e,kernelSize:n,strides:r,padding:i,dataFormat:a,dilationRate:s}=t;super(Object.assign(Object.assign({},t),{units:e})),this.filters=e,Di(this.filters,"filters"),this.kernelSize=Gc(n,2,"kernelSize"),this.kernelSize.forEach(t=>Di(t,"kernelSize")),this.strides=Gc(r||1,2,"strides"),this.strides.forEach(t=>Di(t,"strides")),this.padding=i||"valid",Ki(this.padding),this.dataFormat=a||"channelsLast",qi(this.dataFormat),this.dilationRate=Gc(s||1,2,"dilationRate"),this.dilationRate.forEach(t=>Di(t,"dilationRate"))}build(t){var e;t=cs(t);const n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new hi("The channel dimension of the input should be defined. Found "+t[n]);const r=t[n],i=4,a=this.kernelSize.concat([r,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let t;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;t=new(e=class extends La{apply(t,e){const i=n.apply([r]),a=h["Hg"]([r]),s=n.apply([2*r]);return xa([i,a,s])}},e.className="CustomInit",e)}else t=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,t,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,e){return h["vi"](()=>{if(3!==t.length)throw new hi("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");const n=e["training"]||!1,r=t[0],i=t[1],a=t[2],s=4;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Sl({ones:()=>h["Ig"](r),rate:this.dropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,u=(t,e,n)=>e&&e[n]?h["zg"](e[n],t):t;let c=u(r,o,0),l=u(r,o,1),d=u(r,o,2),p=u(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Sl({ones:()=>h["Ig"](i),rate:this.recurrentDropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));const f=this.recurrentDropoutMask;let m=u(i,f,0),g=u(i,f,1),b=u(i,f,2),y=u(i,f,3);const v=3,[w,x,O,S]=h["Yh"](this.kernel.read(),s,v),[k,T,_,I]=this.useBias?h["Yh"](this.bias.read(),s):[null,null,null,null];c=this.inputConv(c,w,k,this.padding),l=this.inputConv(l,x,T,this.padding),d=this.inputConv(d,O,_,this.padding),p=this.inputConv(p,S,I,this.padding);const[C,A,E,N]=h["Yh"](this.recurrentKernel.read(),s,v);m=this.recurrentConv(m,C),g=this.recurrentConv(g,A),b=this.recurrentConv(b,E),y=this.recurrentConv(y,N);const j=this.recurrentActivation.apply(h["Pd"](c,m)),D=this.recurrentActivation.apply(h["Pd"](l,g)),$=h["Pd"](h["zg"](D,a),h["zg"](j,this.activation.apply(h["Pd"](d,b)))),R=h["zg"](this.recurrentActivation.apply(h["Pd"](p,y)),this.activation.apply($));return[R,R,$]})}getConfig(){const t=super.getConfig(),{units:e}=t,n=kl(t,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(t,e,n,r){const i=h["Ce"](t,e,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Aa(i,n,this.dataFormat):i}recurrentConv(t,e){const n=1;return h["Ce"](t,e,n,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}_l.className="ConvLSTM2DCell",h["Dh"].registerClass(_l);class Il extends Tl{constructor(t){const e=new _l(t);super(Object.assign(Object.assign({},t),{cell:e}))}static fromConfig(t,e){return new t(e)}}Il.className="ConvLSTM2D",h["Dh"].registerClass(Il);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Cl extends xs{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t);if(0<this.rate&&this.rate<1){const t=null!=e["training"]&&e["training"],r=this.getNoiseShape(n),i=$a(()=>ja(n,this.rate,r,this.seed),()=>n,t);return i}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}Cl.className="Dropout",h["Dh"].registerClass(Cl);class Al extends Cl{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}Al.className="SpatialDropout1D",h["Dh"].registerClass(Al);class El extends xs{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,Di(this.units,"units"),this.activation=Ac(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=as(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=as(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=qs(t.kernelConstraint),this.biasConstraint=qs(t.biasConstraint),this.kernelRegularizer=Mc(t.kernelRegularizer),this.biasRegularizer=Mc(t.biasRegularizer),this.activityRegularizer=Mc(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=cs(t);const e=t[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){t=cs(t);const e=t.slice();return e[e.length-1]=this.units,e}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t),r=Fi(this.activation.getClassName());let i;return null!=r?i=Ta(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Ta(n,this.kernel.read()),null!=this.bias&&(i=Aa(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const t={units:this.units,activation:Ic(this.activation),useBias:this.useBias,kernelInitializer:is(this.kernelInitializer),biasInitializer:is(this.biasInitializer),kernelRegularizer:Fc(this.kernelRegularizer),biasRegularizer:Fc(this.biasRegularizer),activityRegularizer:Fc(this.activityRegularizer),kernelConstraint:Gs(this.kernelConstraint),biasConstraint:Gs(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}El.className="Dense",h["Dh"].registerClass(El);class Nl extends xs{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=cs(t);for(const e of t.slice(1))if(null==e)throw new hi(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],sa(t,1)]}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);let n=us(t);if("channelsFirst"===this.dataFormat&&n.rank>1){const t=[0];for(let e=2;e<n.rank;++e)t.push(e);t.push(1),n=Object(h["Ai"])(n,t)}return ba(n)})}getConfig(){const t={};null!=this.dataFormat&&(t["dataFormat"]=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}Nl.className="Flatten",h["Dh"].registerClass(Nl);class jl extends xs{constructor(t){super(t),this.supportsMasking=!0,this.activation=Ac(t.activation)}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t);return this.activation.apply(n)})}getConfig(){const t={activation:Ic(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}jl.className="Activation",h["Dh"].registerClass(jl);class Dl extends xs{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return Object(h["vi"])(()=>(t=us(t),ma(t,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}Dl.className="RepeatVector",h["Dh"].registerClass(Dl);class $l extends xs{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const n="Total size of new array must be unchanged.",r=e.slice();let i=1,a=null;for(let o=0;o<r.length;++o){const t=r[o];if(this.isUnknown(t)){if(null!==a)throw new hi("Can only specifiy one unknown dimension.");a=o}else i*=t}const s=sa(t);if(null!==a){if(0===i||s%i!==0)throw new hi(n);r[a]=s/i}else if(s!==i)throw new hi(n);return r}computeOutputShape(t){let e=!1;for(let n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return Object(h["oh"])(n,i)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}$l.className="Reshape",h["Dh"].registerClass($l);class Rl extends xs{constructor(t){if(super(t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");const e=ca(1,t.dims.length+1);if(!h["Ji"].arraysEqual(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new gs({ndim:this.dims.length+1})]}computeOutputShape(t){t=cs(t);const e=t.slice();return this.dims.forEach((n,r)=>{e[r+1]=t[n]}),e}call(t,e){return Object(h["Ai"])(us(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}Rl.className="Permute",h["Dh"].registerClass(Rl);class Fl extends xs{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const n=us(t),r=-1;return Object(h["Sd"])(Object(h["Fg"])(n,this.maskValue),r)}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t),r=-1,i=!0,a=Object(h["Sd"])(Object(h["Fg"])(n,this.maskValue),r,i),s=Object(h["zg"])(n,Object(h["re"])(a,n.dtype));return s})}}Fl.className="Masking",h["Dh"].registerClass(Fl);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Pl extends xs{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){let e=null;null!=t.batchSize&&(e=t.batchSize),null==t.inputLength?this.batchInputShape=[e,null]:this.batchInputShape=[e].concat(wi(t.inputLength))}this.inputDim=t.inputDim,Di(this.inputDim,"inputDim"),this.outputDim=t.outputDim,Di(this.outputDim,"outputDim"),this.embeddingsInitializer=as(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Mc(t.embeddingsRegularizer),this.activityRegularizer=Mc(t.activityRegularizer),this.embeddingsConstraint=qs(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return Object(h["vi"])(()=>this.maskZero?(t=us(t),Object(h["Fg"])(t,Object(h["Si"])(t))):null)}computeOutputShape(t){if(t=cs(t),null==this.inputLength)return[...t,this.outputDim];const e=wi(this.inputLength);if(e.length!==t.length-1)throw new hi(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);{let n=0;for(let r=0;r<e.length;++r){const i=e[r],a=t[r+1];if(null!=i&&null!=a&&i!==a)throw new hi(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);null==i&&(e[n]=a),n++}}return[t[0],...e,this.outputDim]}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);let n=us(t);"int32"!==n.dtype&&(n=pa(n,"int32"));const r=_a(this.embeddings.read(),Object(h["oh"])(n,[n.size]));return Object(h["oh"])(r,cs(this.computeOutputShape(n.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:is(this.embeddingsInitializer),embeddingsRegularizer:Fc(this.embeddingsRegularizer),activityRegularizer:Fc(this.activityRegularizer),embeddingsConstraint:Gs(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}Pl.className="Embedding",h["Dh"].registerClass(Pl);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Ml extends xs{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new pi}computeElementwiseOpOutputShape(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;const n=t.slice(0,t.length-e.length);for(let r=0;r<e.length;++r){const i=t[t.length-e.length+r],a=e[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new hi("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[cs(t)]),t=t,t.length<2)throw new hi(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(const i of t)null!=i&&null!==i[0]&&e.push(i[0]);if(e=Ai(e),e.length>1)throw new hi(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let n=null==t[0]?null:t[0].slice(1);for(let i=1;i<t.length;++i){const e=null==t[i]?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,e)}const r=t.map(t=>t.length);-1===t.indexOf(null)&&1===Ai(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,e){return Object(h["vi"])(()=>{if(t=t,this.reshapeRequired){const e=[],n=t.map(t=>t.rank);if(-1===n.indexOf(null)){const r=ua(n);for(let n of t){const t=n.rank;for(let e=0;e<r-t;++e)n=fa(n,1);e.push(n)}return this.mergeFunction(e)}{let n=!1;for(const a of t){const t=a.rank;if(null==t){const t=a.shape,r=t[0],i=t.slice(1).concat([r]);let s=h["oh"](a,[r].concat(sa(t.slice(1))));s=h["Ai"](s,[1,0]),s=h["oh"](s,i),e.push(s),n=!0}else if(t>1){const r=ca(1,t).concat([0]);e.push(h["Ai"](a,r)),n=!0}else e.push(a)}let r=this.mergeFunction(e);const i=r.rank;if(n)if(null==i){const t=r.shape,e=t.length,n=t[e-1],i=[n].concat(t.slice(0,t.length-1));r=h["oh"](h["Ai"](h["oh"](r,[-1,n]),[1,0]),i)}else if(i>1){const t=[i-1].concat(ca(0,i-1));r=h["Ai"](r,t)}return r}}return this.mergeFunction(t)})}computeOutputShape(t){let e;t=t,e=null==t[0]?null:t[0].slice(1);for(let r=1;r<t.length;++r){const n=null==t[r]?null:t[r].slice(1);e=this.computeElementwiseOpOutputShape(e,n)}let n=[];for(const r of t)null!=r&&null!==r[0]&&n.push(r[0]);return n=Ai(n),e=1===n.length?n.concat(e):[null].concat(e),e}computeMask(t,e){return h["vi"](()=>{if(null==e)return null;if(!Array.isArray(e))throw new hi("`mask` should be an Array");if(!Array.isArray(t))throw new hi("`inputs` should be an Array");if(e.length!==t.length)throw new hi(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(t=>null==t))return null;e=e.map(t=>null==t?t:h["mf"](t,0));let n=e[0];for(let t=1;t<e.length-1;++t)n=h["dg"](n,e[t]);return n})}}class Ll extends Ml{constructor(t){super(t)}mergeFunction(t){return Object(h["vi"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=h["Pd"](e,t[n]);return e})}}Ll.className="Add",h["Dh"].registerClass(Ll);class Bl extends Ml{constructor(t){super(t)}mergeFunction(t){return Object(h["vi"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=h["zg"](e,t[n]);return e})}}Bl.className="Multiply",h["Dh"].registerClass(Bl);class zl extends Ml{constructor(t){super(t)}mergeFunction(t){return Object(h["vi"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=h["Pd"](e,t[n]);return h["zg"](1/t.length,e)})}}zl.className="Average",h["Dh"].registerClass(zl);class Vl extends Ml{constructor(t){super(t)}mergeFunction(t){return Object(h["vi"])(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=h["pg"](e,t[n]);return e})}}Vl.className="Maximum",h["Dh"].registerClass(Vl);class Ul extends Ml{constructor(t){super(t)}mergeFunction(t){return Object(h["vi"])(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=h["ug"](e,t[n]);return e})}}Ul.className="Minimum",h["Dh"].registerClass(Ul);class Wl extends Ml{constructor(t){super(t),this.DEFAULT_AXIS=-1,null==t&&(t={}),this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new hi("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const r of t)if(null!=r){e=!1;break}if(e)return;const n=[];for(let r=0;r<t.length;++r){const e=t[r].slice();e.splice(this.axis,1);let i=!1;for(const t of n)if(h["Ji"].arraysEqual(t,e)){i=!0;break}i||n.push(e)}if(n.length>1)throw new hi("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Object(h["vi"])(()=>xa(t,this.axis))}computeOutputShape(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new hi("A `Concatenate` layer should be called on a list of inputs.");const e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of e.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(t,e){if(null==e)return null;if(!Array.isArray(e))throw new hi("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new hi("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new hi(`Mismatch in the length of mask (${e.length}) and the legnth of inputs (${t.length})`);return h["vi"](()=>{let n=!0;if(e.forEach(t=>{null==t||(n=!1)}),n)return null;const r=[];for(let a=0;a<t.length;++a)null==e[a]?r.push(h["re"](h["Ig"](t[a]),"bool")):e[a].rank<t[a].rank?r.push(h["mf"](e[a],-1)):r.push(e[a]);const i=h["we"](r,this.axis);return h["Rd"](i,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function Gl(t,e){while(t<0)t+=e;return t}function Hl(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new pi("batchDot is not implemented for tensors of 4D or higher rank yet");if(h["Ji"].assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+t.shape.length),h["Ji"].assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+e.shape.length),"number"===typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new pi("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;null==n&&(n=[r-1,i-2]);const a=n;return h["vi"](()=>{let n,s;if(r>i){n=r-i;const t=[];for(let e=0;e<n;++e)t.push(1);e=h["oh"](e,e.shape.concat(t))}else if(i>r){n=i-r;const e=[];for(let t=0;t<n;++t)e.push(1);t=h["oh"](t,t.shape.concat(e))}else n=0;if(2===t.shape.length&&2===e.shape.length)s=a[0]===a[1]?h["ii"](h["zg"](t,e),a[0]):h["ii"](h["zg"](h["Ai"](t,[1,0]),e),a[1]);else{const n=a[0]!==t.shape.length-1,r=a[1]===e.shape.length-1;s=h["jg"](t,e,n,r)}if(n>0){let t;t=r>i?r+i-3:r-1;const e=[];for(let r=t;r<t+n;++r)e.push(r);s=h["ci"](s,e)}return 1===s.shape.length&&(s=h["mf"](s,1)),s})}Wl.className="Concatenate",h["Dh"].registerClass(Wl);class ql extends Ml{constructor(t){super(t),this.axes=t.axes,this.normalize=null!=t.normalize&&t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){h["Ji"].assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],n=t[1];if(e.length>3||n.length>3)throw new pi("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(e,n);if(e[r[0]]!==n[r[1]])throw new hi(`Dimension incompatibility: ${e[r[0]]} !== ${n[r[1]]}`)}mergeFunction(t){if(2!==t.length)throw new hi(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let e,n=t[0],r=t[1];return e=Array.isArray(this.axes)?this.axes.map((e,n)=>Gl(e,t[n].shape.length)):[Gl(this.axes,n.shape.length),Gl(this.axes,r.shape.length)],this.normalize&&(n=Io(n,e[0]),r=Io(r,e[1])),Hl(n,r,e)}interpretAxes(t,e){let n;return n=Array.isArray(this.axes)?this.axes:[Gl(this.axes,t.length),Gl(this.axes,e.length)],n}computeOutputShape(t){h["Ji"].assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new pi("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(e,n);e.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=e.concat(n);return 1===i.length&&i.push(1),i}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}ql.className="Dot",h["Dh"].registerClass(ql);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Jl extends xs{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t),r=()=>Object(h["Pd"])(ka(n.shape,0,this.stddev),n),i=$a(r,()=>n,e["training"]||!1);return i})}}Jl.className="GaussianNoise",h["Dh"].registerClass(Jl);class Kl extends xs{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e);const n=us(t);if(this.rate>0&&this.rate<1){const t=()=>{const t=Math.sqrt(this.rate/(1-this.rate));return Object(h["zg"])(n,ka(n.shape,1,t))};return $a(t,()=>n,e["training"]||!1)}return n})}}Kl.className="GaussianDropout",h["Dh"].registerClass(Kl);class Xl extends xs{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||us(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Object(h["vi"])(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(t),r=()=>{const e=us(t),r=1.6732632423543772,i=1.0507009873554805,a=-r*i;let s=Object(h["Gf"])(Object(h["dh"])(n),this.rate);s=pa(s,"float32");const o=((1-this.rate)*(1+this.rate*a**2))**-.5,u=-o*a*this.rate,c=Object(h["Pd"])(Object(h["zg"])(e,s),Object(h["zg"])(Object(h["Pd"])(s,-1),a));return Object(h["Pd"])(Object(h["zg"])(c,o),u)};return $a(r,()=>us(t),e["training"]||!1)}return t})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Yl(t,e,n,r,i,a=.001){let s;if(2===t.rank)s=h["ge"](t,e,n,r,i,a);else if(3===t.rank)s=h["he"](t,e,n,r,i,a);else{if(4!==t.rank)throw new pi(`batchNormalization is not implemented for array of rank ${t.rank} yet`);s=h["ie"](t,e,n,r,i,a)}return s}function Zl(t,e,n,r,i=.001){return Object(h["vi"])(()=>{const a=h["xg"](t,r),s=a.mean,o=a.variance,u=Yl(t,s,o,n,e,i);return[u,s,o]})}function Ql(t,e,n,r,i=.001){return Object(h["vi"])(()=>{const a=h["xg"](t,r),s=a.mean,o=a.variance,u=[];for(const e of ca(0,t.rank))-1!==r.indexOf(e)?u.push(1):u.push(t.shape[e]);const c=Object(h["oh"])(s,u),l=Object(h["oh"])(o,u),d=null==e?null:Object(h["oh"])(e,u),p=null==n?null:Object(h["oh"])(n,u),f=Yl(t,c,l,p,d,i);return[f,s,o]})}function td(t,e,n,r,i=.001){return h["Ji"].arraysEqual(r.slice().sort(),ca(0,t.rank-1))?Zl(t,e,n,r,i):Ql(t,e,n,r,i)}Xl.className="AlphaDropout",h["Dh"].registerClass(Xl);class ed extends xs{constructor(t){null==t&&(t={}),super(t),this.supportsMasking=!0,this.axis=null==t.axis?-1:t.axis,this.momentum=null==t.momentum?.99:t.momentum,this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=as(t.betaInitializer||"zeros"),this.gammaInitializer=as(t.gammaInitializer||"ones"),this.movingMeanInitializer=as(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=as(t.movingVarianceInitializer||"ones"),this.betaConstraint=qs(t.betaConstraint),this.gammaConstraint=qs(t.gammaConstraint),this.betaRegularizer=Mc(t.betaRegularizer),this.gammaRegularizer=Mc(t.gammaRegularizer)}build(t){t=cs(t);const e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new hi(`Axis ${e} of input tensor should have a defined dimension but the layer received an input with shape `+JSON.stringify(t)+".");this.inputSpec=[new gs({ndim:t.length,axes:{[e]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return Object(h["vi"])(()=>{const n=null!=e["training"]&&e["training"],r=us(t),i=r.shape,a=i.length,s=ca(0,a),o=this.axis>=0?this.axis:this.axis+a;s.splice(o,1);const u=gi(1,a);u[o]=i[o];const c=s.slice();c.sort();const l=!h["Ji"].arraysEqual(c,ca(0,a).slice(0,a-1)),d=()=>{if(l){const t=Object(h["oh"])(this.movingMean.read(),u),e=Object(h["oh"])(this.movingVariance.read(),u),n=this.center?Object(h["oh"])(this.beta.read(),u):null,i=this.scale?Object(h["oh"])(this.gamma.read(),u):null;return Yl(r,t,e,n,i,this.epsilon)}return Yl(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)};if(!n)return d();const[p,f,m]=td(r,this.gamma.read(),this.beta.read(),s,this.epsilon),g=(t,e,n)=>{h["vi"](()=>{const r=1-n,i=t.read(),a=h["zg"](h["hi"](i,e),r);t.write(h["hi"](i,a))})},b=()=>{g(this.movingMean,f,this.momentum),g(this.movingVariance,m,this.momentum)};return b(),p})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:is(this.betaInitializer),gammaInitializer:is(this.gammaInitializer),movingMeanInitializer:is(this.movingMeanInitializer),movingVarianceInitializer:is(this.movingVarianceInitializer),betaRegularizer:Fc(this.betaRegularizer),gammaRegularizer:Fc(this.gammaRegularizer),betaConstraint:Gs(this.betaConstraint),gammaConstraint:Gs(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}ed.className="BatchNormalization",h["Dh"].registerClass(ed);class nd extends xs{constructor(t){if(null==t&&(t={}),super(t),this.axis=null==t.axis?-1:t.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(const t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=as(t.betaInitializer||"zeros"),this.gammaInitializer=as(t.gammaInitializer||"ones"),this.betaRegularizer=Mc(t.betaRegularizer),this.gammaRegularizer=Mc(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=cs(t);const e=t.length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=e);for(const i of this.axis)if(i<0||i>=e)throw new Error("Invalid axis: "+i);if(this.axis.length!==Ai(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);const n=this.axis.map(e=>t[e]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(t,e){const n=us(t),r=n.shape,i=r.length;return Object(h["vi"])(()=>{const t=!0;let{mean:e,variance:a}=Object(h["xg"])(n,this.axis,t);const s=gi(1,i);for(const n of this.axis)s[n]=r[n];const o=t=>null!=t&&t.shape.length!==i?h["oh"](t,s):t;let u=this.scale?o(this.gamma.read()):null,c=this.center?o(this.beta.read()):null;const l=[],d=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(l.push(r[n]),d.push(1)):(l.push(1),d.push(r[n]));return e=h["wi"](e,l),a=h["wi"](a,l),null!=u&&(u=h["wi"](u,d)),null!=c&&(c=h["wi"](c,d)),Yl(n,e,a,c,u,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:is(this.betaInitializer),gammaInitializer:is(this.gammaInitializer),betaRegularizer:Fc(this.betaRegularizer),gammaRegularizer:Fc(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}function rd(t,e,n){return Object(h["vi"])(()=>{if(4!==t.rank)throw new hi("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new hi("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n=ha()),"channelsLast"!==n&&"channelsFirst"!==n)throw new hi(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],h["Lg"](t,r)})}nd.className="LayerNormalization",h["Dh"].registerClass(nd);class id extends xs{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?ha():t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new hi(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,n;if("number"===typeof t.padding[0])e=[t.padding[0],t.padding[0]],n=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new hi(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new hi(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);n=t.padding[1]}this.padding=[e,n]}this.inputSpec=[new gs({ndim:4})]}computeOutputShape(t){let e,n;return t=cs(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])}call(t,e){return Object(h["vi"])(()=>rd(us(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function ad(t,e,n,r,i,a){return Object(h["vi"])(()=>{let s;qi(i),Xi(a),Ki(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i=ha()),null==a&&(a="max"),t=Jc(t,i);const o="same"===r?"same":"valid";return s="max"===a?h["mg"](t,e,n,o):h["ae"](t,e,n,o),"channelsFirst"===i&&(s=h["Ai"](s,[0,3,1,2])),s})}function sd(t,e,n,r,i,a){return Object(h["vi"])(()=>{let s;qi(i),Xi(a),Ki(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i=ha()),null==a&&(a="max"),t=Kc(t,i);const o="same"===r?"same":"valid";return s="max"===a?h["ng"](t,e,n,o):h["be"](t,e,n,o),"channelsFirst"===i&&(s=h["Ai"](s,[0,4,1,2,3])),s})}id.className="ZeroPadding2D",h["Dh"].registerClass(id);class od extends xs{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"===typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!==typeof t.poolSize[0])throw new hi("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));this.poolSize=t.poolSize}if(Di(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"===typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!==typeof t.strides[0])throw new hi("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));this.strides=t.strides}Di(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,Ki(this.padding),this.inputSpec=[new gs({ndim:3})]}computeOutputShape(t){t=cs(t);const e=Hc(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return Object(h["vi"])(()=>{this.invokeCallHook(t,e),t=fa(us(t),2);const n=this.poolingFunction(us(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return h["ci"](n,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class ud extends od{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return qi(i),Ki(r),ad(t,e,n,r,i,"max")}}ud.className="MaxPooling1D",h["Dh"].registerClass(ud);class cd extends od{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return qi(i),Ki(r),ad(t,e,n,r,i,"avg")}}cd.className="AveragePooling1D",h["Dh"].registerClass(cd);class ld extends xs{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new hi("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides];Di(this.poolSize,"poolSize"),Di(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,qi(this.dataFormat),Ki(this.padding),this.inputSpec=[new gs({ndim:4})]}computeOutputShape(t){t=cs(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Hc(e,this.poolSize[0],this.padding,this.strides[0]),n=Hc(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}call(t,e){return Object(h["vi"])(()=>(this.invokeCallHook(t,e),this.poolingFunction(us(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class dd extends ld{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return qi(i),Ki(r),ad(t,e,n,r,i,"max")}}dd.className="MaxPooling2D",h["Dh"].registerClass(dd);class hd extends ld{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return qi(i),Ki(r),ad(t,e,n,r,i,"avg")}}hd.className="AveragePooling2D",h["Dh"].registerClass(hd);class pd extends xs{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new hi("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];Di(this.poolSize,"poolSize"),Di(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,qi(this.dataFormat),Ki(this.padding),this.inputSpec=[new gs({ndim:5})]}computeOutputShape(t){t=cs(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=Hc(e,this.poolSize[0],this.padding,this.strides[0]),n=Hc(n,this.poolSize[1],this.padding,this.strides[1]),r=Hc(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}call(t,e){return Object(h["vi"])(()=>(this.invokeCallHook(t,e),this.poolingFunction(us(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class fd extends pd{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return qi(i),Ki(r),sd(t,e,n,r,i,"max")}}fd.className="MaxPooling3D",h["Dh"].registerClass(fd);class md extends pd{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return qi(i),Ki(r),sd(t,e,n,r,i,"avg")}}md.className="AveragePooling3D",h["Dh"].registerClass(md);class gd extends xs{constructor(t){super(t),this.inputSpec=[new gs({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new pi}}class bd extends gd{constructor(t){super(t||{})}call(t,e){return Object(h["vi"])(()=>{const e=us(t);return h["qg"](e,1)})}}bd.className="GlobalAveragePooling1D",h["Dh"].registerClass(bd);class yd extends gd{constructor(t){super(t||{})}call(t,e){return Object(h["vi"])(()=>{const e=us(t);return h["lg"](e,1)})}}yd.className="GlobalMaxPooling1D",h["Dh"].registerClass(yd);class vd extends xs{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,qi(this.dataFormat),this.inputSpec=[new gs({ndim:4})]}computeOutputShape(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new pi}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class wd extends vd{call(t,e){return Object(h["vi"])(()=>{const e=us(t);return"channelsLast"===this.dataFormat?h["qg"](e,[1,2]):h["qg"](e,[2,3])})}}wd.className="GlobalAveragePooling2D",h["Dh"].registerClass(wd);class xd extends vd{call(t,e){return Object(h["vi"])(()=>{const e=us(t);return"channelsLast"===this.dataFormat?h["lg"](e,[1,2]):h["lg"](e,[2,3])})}}xd.className="GlobalMaxPooling2D",h["Dh"].registerClass(xd);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Od extends xs{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(t){null!=this.layer&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,n={}){const r=e["layer"],i=_o(r,n);delete e["layer"];const a={layer:i};return Object.assign(a,e),new t(a)}}class Sd extends Od{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=cs(t),t.length<3)throw new hi("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=cs(t);const e=[t[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e),r=t[1];return[n[0],r].concat(n.slice(1))}call(t,e){return Object(h["vi"])(()=>{t=us(t);const n=(t,n)=>{const r=us(this.layer.call(t,e));return[r,[]]},r=pl(n,t,[],!1,null,null,!1,!0),i=r[1];return i})}}function kd(t){Ni(Gi,"BidirectionalMergeMode",t)}Sd.className="TimeDistributed",h["Dh"].registerClass(Sd);const Td="concat";class _d extends Od{constructor(t){super(t);const e=t.layer.getConfig(),n={};n["className"]=t.layer.getClassName(),n["config"]=e,this.forwardLayer=_o(n),e["goBackwards"]=!0!==e["goBackwards"];const r={};if(r["className"]=t.layer.getClassName(),r["config"]=e,this.backwardLayer=_o(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===t.mergeMode?Td:t.mergeMode,kd(this.mergeMode),t.weights)throw new pi("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=t.length,n=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,n)),this.backwardLayer.setWeights(t.slice(n))}computeOutputShape(t){let e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):vi(n)}apply(t,e){let n=null==e?null:e["initialState"],r=null==e?null:e["constants"];null==e&&(e={});const i=hl(t,n,r,this.numConstants);if(t=i.inputs,n=i.initialState,r=i.constants,Array.isArray(t)&&(n=t.slice(1),t=t[0]),(null==n||0===n.length)&&null==r)return super.apply(t,e);const a=[],s=[];if(null!=n){const t=n.length;if(t%2>0)throw new hi("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e["initialState"]=n,a.push(...n);const r=n.map(t=>new gs({shape:t.shape}));this.forwardLayer.stateSpec=r.slice(0,t/2),this.backwardLayer.stateSpec=r.slice(t/2),s.push(...r)}if(null!=r)throw new pi("Support for constants in Bidirectional layers is not implemented yet.");const o=a[0]instanceof bs;for(const u of a)if(u instanceof bs!==o)throw new hi("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[t].concat(a),r=this.inputSpec.concat(s),i=this.inputSpec;this.inputSpec=r;const o=super.apply(n,e);return this.inputSpec=i,o}return super.apply(t,e)}call(t,e){return Object(h["vi"])(()=>{const n=e["initialState"];let r,i,a,s;if(null==n)r=this.forwardLayer.call(t,e),i=this.backwardLayer.call(t,e);else{const a=n.slice(0,n.length/2),s=n.slice(n.length/2);r=this.forwardLayer.call(t,Object.assign(e,{initialState:a})),i=this.backwardLayer.call(t,Object.assign(e,{initialState:s}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=h["ph"](i,1)),"concat"===this.mergeMode?s=xa([r,i]):"sum"===this.mergeMode?s=h["Pd"](r,i):"ave"===this.mergeMode?s=h["zg"](.5,h["Pd"](r,i)):"mul"===this.mergeMode?s=h["zg"](r,i):null==this.mergeMode&&(s=[r,i]),this.returnState?null==this.mergeMode?s.concat(a):[s].concat(a):s})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Qi(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Qi(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){let n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){const t=this.forwardLayer.states,e=t.map(t=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const n=_o(e["layer"]);if(delete e["layer"],null!=e["numConstants"])throw new pi("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=e;return r["layer"]=n,new t(r)}}_d.className="Bidirectional",h["Dh"].registerClass(_d);
/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Id extends xs{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},e=super.getConfig();return Object.assign(t,e),t}call(t,e){return Object(h["vi"])(()=>(t=us(t),"float32"!==t.dtype&&(t=pa(t,"float32")),Object(h["Pd"])(Object(h["zg"])(t,this.scale),this.offset)))}}Id.className="Rescaling",h["Dh"].registerClass(Id);
/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const{resizeBilinear:Cd,cropAndResize:Ad}=h["Jf"];class Ed extends xs{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,e,n,r,i,a,s,o){return Object(h["vi"])(()=>{let u,c=!1;const l=e/a,d=n/s,p=(r+e)/a,f=(i+n)/s,m=[l,d,p,f],g=[];3===t.rank?(c=!0,u=Object(h["di"])([t])):u=t;for(let t=0;t<u.shape[0];t++)g.push(m);const b=Object(h["mi"])(g,[g.length,4]),y=Object(h["eh"])(0,g.length,1,"int32"),v=[r,i],w=Ad(u,b,y,v,"nearest");return pa(c?us(Object(h["Gi"])(w)):w,o)})}upsize(t,e,n,r){return Object(h["vi"])(()=>{const i=Cd(t,[e,n]);return pa(i,r)})}call(t,e){return Object(h["vi"])(()=>{const e=us(t),n=e.dtype,r=e.shape,i=r[r.length-3],a=r[r.length-2];let s=0;i!==this.height&&(s=Math.floor((i-this.height)/2));let o=0;return a!==this.width&&(o=Math.floor((a-this.width)/2),0===o&&(o=1)),s>=0&&o>=0?this.centerCrop(e,s,o,this.height,this.width,i,a,n):this.upsize(t,this.height,this.width,n)})}getConfig(){const t={height:this.height,width:this.width},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){t=cs(t);const e=t.length-3,n=t.length-2;return t[e]=this.height,t[n]=this.width,t}}
/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Nd(t,e,n,r){let i=us(t);if("int32"!==i.dtype&&(i=pa(i,"int32")),"int"===e)return i;const a=i.shape;if(0===i.rank&&(i=Object(h["mf"])(i,-1)),"oneHot"===e&&1!==i.shape[i.shape.length-1]&&(i=Object(h["mf"])(i,-1)),i.rank>2)throw new hi(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${i.rank}.`);const s=["multiHot","oneHot"].includes(e),o=i;let u;if(u="undefined"!==typeof r&&"count"===e?Object(h["Ne"])(o,r,n,s):Object(h["Ne"])(o,[],n,s),"tfIdf"!==e)return u;if(r)return Object(h["zg"])(u,r);throw new hi("When outputMode is 'tfIdf', weights must be provided.")}
/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */Ed.className="CenterCrop",h["Dh"].registerClass(Ed);class jd extends xs{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){return t=cs(t),null==t?[this.numTokens]:"oneHot"===this.outputMode&&1!==t[t.length-1]?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,e){return Object(h["vi"])(()=>{let n;if(t=us(t),"int32"!==t.dtype&&(t=pa(t,"int32")),"undefined"!==typeof e["countWeights"]){if("count"!==this.outputMode)throw new hi("countWeights is not used when outputMode !== count.\n              Received countWeights="+e["countWeights"]);n=us(e["countWeights"])}const r=Object(h["lg"])(t),i=Object(h["tg"])(t),a=Object(h["Ff"])(this.numTokens,r).bufferSync().get(0),s=Object(h["Gf"])(i,0).bufferSync().get(0);if(!a||!s)throw new hi("Input values must be between 0 < values <= numTokens with numTokens="+this.numTokens);return Nd(t,this.outputMode,this.numTokens,n)})}}jd.className="CategoryEncoding",h["Dh"].registerClass(jd);
/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const Dd=["bilinear","nearest"],$d=new Set(Dd);class Rd extends xs{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation){if(!$d.has(t.interpolation))throw new hi(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);this.interpolation=t.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(t.cropToAspectRatio)}computeOutputShape(t){t=cs(t);const e=t[2];return[this.height,this.width,e]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},e=super.getConfig();return Object.assign(t,e),t}call(t,e){return Object(h["vi"])(()=>{const e=[this.height,this.width];if("bilinear"===this.interpolation)return h["Jf"].resizeBilinear(t,e,!this.cropToAspectRatio);if("nearest"===this.interpolation)return h["Jf"].resizeNearestNeighbor(t,e,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...$d]} are supported`)})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Fd(t){return new Ts(t)}function Pd(t){return new Vc(t)}function Md(t){return new Lc(t)}function Ld(t){return new Bc(t)}function Bd(t){return new zc(t)}function zd(t){return new Wc(t)}function Vd(t){return new Uc(t)}function Ud(t){return new ol(t)}function Wd(t){return new el(t)}function Gd(t){return new rl(t)}function Hd(t){return new nl(t)}function qd(t){return new il(t)}function Jd(t){return new sl(t)}function Kd(t){return new ul(t)}function Xd(t){return new cl(t)}function Yd(t){return new dl(t)}function Zd(t){return new jl(t)}function Qd(t){return new El(t)}function th(t){return new Cl(t)}function eh(t){return new Al(t)}function nh(t){return new Nl(t)}function rh(t){return new Dl(t)}function ih(t){return new $l(t)}function ah(t){return new Rl(t)}function sh(t){return new Pl(t)}function oh(t){return new Ll(t)}function uh(t){return new zl(t)}function ch(t){return new Wl(t)}function lh(t){return new Vl(t)}function dh(t){return new Ul(t)}function hh(t){return new Bl(t)}function ph(t){return new ql(t)}function fh(t){return new ed(t)}function mh(t){return new nd(t)}function gh(t){return new id(t)}function bh(t){return new cd(t)}function yh(t){return bh(t)}function vh(t){return bh(t)}function wh(t){return new hd(t)}function xh(t){return wh(t)}function Oh(t){return wh(t)}function Sh(t){return new md(t)}function kh(t){return Sh(t)}function Th(t){return Sh(t)}function _h(t){return new bd(t)}function Ih(t){return new wd(t)}function Ch(t){return new yd(t)}function Ah(t){return new xd(t)}function Eh(t){return new ud(t)}function Nh(t){return new dd(t)}function jh(t){return new fd(t)}function Dh(t){return new vl(t)}function $h(t){return new yl(t)}function Rh(t){return new xl(t)}function Fh(t){return new wl(t)}function Ph(t){return new bl(t)}function Mh(t){return new gl(t)}function Lh(t){return new Il(t)}function Bh(t){return new _l(t)}function zh(t){return new fl(t)}function Vh(t){return new Ol(t)}function Uh(t){return new _d(t)}function Wh(t){return new Sd(t)}Rd.className="Resizing",h["Dh"].registerClass(Rd);const Gh=Ch,Hh=Ah,qh=Eh,Jh=Nh;function Kh(t){return new Jl(t)}function Xh(t){return new Kl(t)}function Yh(t){return new Xl(t)}function Zh(t){return new Fl(t)}function Qh(t){return new Id(t)}function tp(t){return new Ed(t)}function ep(t){return new Rd(t)}function np(t){return new jd(t)}function rp(t,e){return Go(t,e)}function ip(t,e){return Zo(t,e)}function ap(t,e){return Qo(t,e)}function sp(t,e){return Ho(t,e)}function op(t,e){return su(t,e)}function up(t,e){return Xo(t,e)}function cp(t,e){return Yo(t,e)}function lp(t,e){return Vo(t,e)}function dp(t,e){return Ao(t,e)}function hp(t,e){return Eo(t,e)}function pp(t,e){return Eo(t,e)}function fp(t,e){return Eo(t,e)}function mp(t,e){return Co(t,e)}function gp(t,e){return Co(t,e)}function bp(t,e){return Co(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yp(t){return new jc(t)}function vp(t){return Dc(t)}function wp(t){return $c(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xp extends yo{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof ec))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function Op(t,e){return t<e}function Sp(t,e){return t>e}class kp extends xp{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new pi("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=Op:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=Sp:this.monitorFunc=Op,this.monitorFunc===Op&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===Op?1/0:-1/0}async onEpochEnd(t,e){await fo(e);const n=this.getMonitorValue(e);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: `+Object.keys(t)),e}}function Tp(t){return new kp(t)}const _p={earlyStopping:Tp},Ip=Object(h["hf"])();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ip.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Cp=n("f8bb"),Ap=n("526c");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ep{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,e)=>(t[e]=this.getAttr(e),t),{}))}getInput(t){return Object(Ap["e"])(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return Object(Ap["e"])(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(Cp["f"])(this.node.rawAttrs,t,e);if(null!=n.s)return Object(Cp["i"])(this.node.rawAttrs,t,e);if(null!=n.b)return Object(Cp["c"])(this.node.rawAttrs,t,e);if(null!=n.shape)return Object(Cp["k"])(this.node.rawAttrs,t,e);if(null!=n.type)return Object(Cp["e"])(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(Cp["g"])(this.node.rawAttrs,t,e);if(null!=n.list.s)return Object(Cp["h"])(this.node.rawAttrs,t,e);if(null!=n.list.shape)return Object(Cp["j"])(this.node.rawAttrs,t,e);if(null!=n.list.b)return Object(Cp["b"])(this.node.rawAttrs,t,e);if(null!=n.list.type)return Object(Cp["d"])(this.node.rawAttrs,t,e)}return e}}var Np=n("d303"),jp=n("132b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Dp=(t,e,n,r=c)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"AddN":return[r.addN(Object(Ap["d"])("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Mul":return[r.mul(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"RealDiv":case"Div":return[r.div(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"DivNoNan":return[r.divNoNan(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"FloorDiv":return[r.floorDiv(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Sub":return[r.sub(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Minimum":return[r.minimum(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Maximum":return[r.maximum(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Pow":return[r.pow(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},$p=(t,e,n,r=c)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(Object(Ap["d"])("x",t,e,n))];case"Acos":return[r.acos(Object(Ap["d"])("x",t,e,n))];case"Acosh":return[r.acosh(Object(Ap["d"])("x",t,e,n))];case"Asin":return[r.asin(Object(Ap["d"])("x",t,e,n))];case"Asinh":return[r.asinh(Object(Ap["d"])("x",t,e,n))];case"Atan":return[r.atan(Object(Ap["d"])("x",t,e,n))];case"Atan2":return[r.atan2(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("y",t,e,n))];case"Atanh":return[r.atanh(Object(Ap["d"])("x",t,e,n))];case"Ceil":return[r.ceil(Object(Ap["d"])("x",t,e,n))];case"Complex":return[r.complex(Object(Ap["d"])("real",t,e,n),Object(Ap["d"])("imag",t,e,n))];case"Cos":return[r.cos(Object(Ap["d"])("x",t,e,n))];case"Cosh":return[r.cosh(Object(Ap["d"])("x",t,e,n))];case"Elu":return[r.elu(Object(Ap["d"])("x",t,e,n))];case"Erf":return[r.erf(Object(Ap["d"])("x",t,e,n))];case"Exp":return[r.exp(Object(Ap["d"])("x",t,e,n))];case"Expm1":return[r.expm1(Object(Ap["d"])("x",t,e,n))];case"Floor":return[r.floor(Object(Ap["d"])("x",t,e,n))];case"Log":return[r.log(Object(Ap["d"])("x",t,e,n))];case"Log1p":return[r.log1p(Object(Ap["d"])("x",t,e,n))];case"Imag":return[r.imag(Object(Ap["d"])("x",t,e,n))];case"Neg":return[r.neg(Object(Ap["d"])("x",t,e,n))];case"Reciprocal":return[r.reciprocal(Object(Ap["d"])("x",t,e,n))];case"Real":return[r.real(Object(Ap["d"])("x",t,e,n))];case"Relu":return[r.relu(Object(Ap["d"])("x",t,e,n))];case"Round":return[r.round(Object(Ap["d"])("x",t,e,n))];case"Selu":return[r.selu(Object(Ap["d"])("x",t,e,n))];case"Sigmoid":return[r.sigmoid(Object(Ap["d"])("x",t,e,n))];case"Sin":return[r.sin(Object(Ap["d"])("x",t,e,n))];case"Sign":return[r.sign(Object(Ap["d"])("x",t,e,n))];case"Sinh":return[r.sinh(Object(Ap["d"])("x",t,e,n))];case"Softplus":return[r.softplus(Object(Ap["d"])("x",t,e,n))];case"Sqrt":return[r.sqrt(Object(Ap["d"])("x",t,e,n))];case"Square":return[r.square(Object(Ap["d"])("x",t,e,n))];case"Tanh":return[r.tanh(Object(Ap["d"])("x",t,e,n))];case"Tan":return[r.tan(Object(Ap["d"])("x",t,e,n))];case"ClipByValue":return[r.clipByValue(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("clipValueMin",t,e,n),Object(Ap["d"])("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(Object(Ap["d"])("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Object(Ap["e"])(t.inputNames[0],e,n))];case"Prod":return[r.prod(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("alpha",t,e,n))];case"Prelu":return[r.prelu(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("alpha",t,e,n))];case"IsNan":return[r.isNaN(Object(Ap["e"])(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rp(t,e,n=""){if("number"!==typeof t&&"number"!==typeof e){h["Ji"].assert(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const i=t[r],a=e[r];h["Ji"].assert(i<0||a<0||i===a,()=>n+` Shapes ${t} and ${e} must match`)}}}function Fp(t){return"number"!==typeof t&&!t.some(t=>t<0)}function Pp(t,e,n){let r=Mp(t,n);const i=!Fp(r);if(i&&0===e.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: "+r);if(i&&e.forEach(t=>{r=Mp(t.shape,r)}),!Fp(r))throw new Error("Non-fully-defined elementShape: "+r);return r}function Mp(t,e){if("number"===typeof t)return e;if("number"===typeof e)return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const i=t[r],a=e[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=i>=0?i:a}return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lp{constructor(t,e,n,r,i,a,s){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Object(h["xh"])(0),Object(h["Qf"])(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(e=>{null!=t&&t.has(e.tensor.id)||e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(t=>this.read(t))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),Rp(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,Object(h["Qf"])(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((t,n)=>this.write(t,e[n]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return Object(h["mi"])([],[0].concat(this.elementShape));const n=this.readMany(t);return Rp(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Object(h["di"])(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(0===this.size())return Object(h["mi"])([],[0].concat(this.elementShape));const e=[];for(let r=0;r<this.size();r++)e.push(r);const n=this.readMany(e);return Rp(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Object(h["we"])(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,Object(h["Gi"])(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0;const r=t.map(t=>(n+=t,n));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:e.size/n,a=[];Object(h["vi"])(()=>{e=Object(h["oh"])(e,[1,n,i]);for(let n=0;n<t.length;++n){const s=0===n?0:r[n-1],o=[0,s,0],u=[1,t[n],i];a[n]=Object(h["oh"])(Object(h["Mh"])(e,o,u),this.elementShape)}return a});const s=[];for(let o=0;o<t.length;o++)s[o]=o;this.writeMany(s,a)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bp{constructor(t,e,n,r=-1){this.tensors=t,this.elementShape=e,this.elementDtype=n,null!=t&&t.forEach(t=>{if(n!==t.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${t.dtype}`);Rp(e,t.shape,"TensorList shape mismatch: "),Object(h["Qf"])(t)}),this.idTensor=Object(h["xh"])(0),this.maxNumElements=r,Object(h["Qf"])(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Bp([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(e=>{null!=t&&t.has(e.id)||e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);Rp(t,this.elementShape,"TensorList shape mismatch: ");const r=Pp(this.elementShape,this.tensors,t);return Object(h["vi"])(()=>{const t=this.tensors.map(t=>Object(h["oh"])(t,r));return Object(h["di"])(t,0)})}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=Pp(this.elementShape,this.tensors,t),r=this.tensors.pop();return r.kept=!1,Rp(r.shape,t,"TensorList shape mismatch: "),Object(h["oh"])(r,n)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Rp(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(h["Qf"])(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+t);if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const e=new Bp([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=t;for(let n=0;n<Math.min(this.tensors.length,t);++n)e.tensors[n]=this.tensors[n];return e}getItem(t,e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[t])throw new Error(`element at index ${t} is null.`);Rp(this.tensors[t].shape,e,"TensorList shape mismatch: ");const r=Pp(this.elementShape,this.tensors,e);return Object(h["oh"])(this.tensors[t],r)}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Rp(this.elementShape,e.shape,"TensorList shape mismatch: "),Object(h["Qf"])(e),null!=this.tensors[t]&&(this.tensors[t].kept=!1),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);Rp(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size());const r=Pp(this.elementShape,this.tensors,n);return 0===t.length?Object(h["mi"])([],[0].concat(r)):Object(h["vi"])(()=>{const e=t.map(t=>Object(h["oh"])(this.tensors[t],r));return Object(h["di"])(e,0)})}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);Rp(this.elementShape,e,"TensorList shape mismatch: ");const n=Pp(this.elementShape,this.tensors,e);return 0===this.size()?Object(h["mi"])([],[0].concat(n)):Object(h["vi"])(()=>{const t=this.tensors.map(t=>Object(h["oh"])(t,n));return Object(h["we"])(t,0)})}}function zp(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+t.shape);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const i=t.shape.slice(1);Rp(i,e,"TensorList shape mismatch: ");const a=Object(h["Gi"])(t);return new Bp(a,e,r)}function Vp(t,e,n,r){return new Bp([],t,e,r)}function Up(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const a=new Bp([],n,t.dtype,r),s=Object(h["Gi"])(t,0);return e.forEach((t,e)=>{a.setItem(t,s[e])}),a}function Wp(t,e,n){let r=0;const i=e.map(t=>(r+=t,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);const a=t.shape.slice(1),s=Mp(a,n),o=0===r?0:t.size/r,u=Object(h["vi"])(()=>{const n=[];t=Object(h["oh"])(t,[1,r,o]);for(let r=0;r<e.length;++r){const a=0===r?0:i[r-1],u=[0,a,0],c=[1,e[r],o];n[r]=Object(h["oh"])(Object(h["Mh"])(t,u,c),s)}return t.dispose(),n}),c=new Bp([],n,t.dtype,e.length);for(let l=0;l<u.length;l++)c.setItem(l,u[l]);return c}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gp=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=Object(Ap["d"])("thenBranch",t,e,n),i=Object(Ap["d"])("elseBranch",t,e,n),a=Object(Ap["d"])("cond",t,e,n),s=Object(Ap["d"])("args",t,e,n),o=await a.data();return o[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Object(Ap["d"])("body",t,e,n),i=Object(Ap["d"])("cond",t,e,n),a=Object(Ap["d"])("args",t,e,n),s=await n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),o=a.map(t=>t.id);let u=await s[0].data();s.forEach(t=>{t.kept||-1!==o.indexOf(t.id)||t.dispose()});let c=a;while(u[0]){const t=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const e=c.map(t=>t.id);t.forEach(t=>{t.kept||-1!==o.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()});const a=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=await a[0].data(),a.forEach(t=>{t.kept||-1!==o.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()})}return c}case"LoopCond":{const r=Object(Ap["d"])("pred",t,e,n);return[Object(Ap["a"])(r)]}case"Switch":{const r=Object(Ap["d"])("pred",t,e,n);let i=Object(Ap["d"])("data",t,e,n);return i.kept||(i=Object(Ap["a"])(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find(t=>void 0!==Object(Ap["e"])(t,e,n));if(r){const t=Object(Ap["e"])(r,e,n);return[Object(Ap["a"])(t)]}return}case"Enter":{const r=Object(Ap["d"])("frameName",t,e,n),i=Object(Ap["d"])("tensor",t,e,n);return n.enterFrame(r),[Object(Ap["a"])(i)]}case"Exit":{const r=Object(Ap["d"])("tensor",t,e,n);return n.exitFrame(),[Object(Ap["a"])(r)]}case"NextIteration":{const r=Object(Ap["d"])("tensor",t,e,n);return n.nextIteration(),[Object(Ap["a"])(r)]}case"TensorArrayV3":{const r=Object(Ap["d"])("size",t,e,n),i=Object(Ap["d"])("dtype",t,e,n),a=Object(Ap["d"])("elementShape",t,e,n),s=Object(Ap["d"])("dynamicSize",t,e,n),o=Object(Ap["d"])("clearAfterRead",t,e,n),u=Object(Ap["d"])("identicalElementShapes",t,e,n),c=Object(Ap["d"])("name",t,e,n),l=new Lp(c,i,r,a,u,s,o);return n.addTensorArray(l),[l.idTensor,Object(h["xh"])(1)]}case"TensorArrayWriteV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=Object(Ap["d"])("index",t,e,n),a=Object(Ap["d"])("tensor",t,e,n),s=n.getTensorArray(r.id);return s.write(i,a),[s.idTensor]}case"TensorArrayReadV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=Object(Ap["d"])("index",t,e,n),a=n.getTensorArray(r.id);return[a.read(i)]}case"TensorArrayGatherV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=Object(Ap["d"])("indices",t,e,n),a=Object(Ap["d"])("dtype",t,e,n),s=n.getTensorArray(r.id);return[s.gather(i,a)]}case"TensorArrayScatterV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=Object(Ap["d"])("indices",t,e,n),a=Object(Ap["d"])("tensor",t,e,n),s=n.getTensorArray(r.id);return s.scatter(i,a),[s.idTensor]}case"TensorArrayConcatV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),a=Object(Ap["d"])("dtype",t,e,n);return[i.concat(a)]}case"TensorArraySplitV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=Object(Ap["d"])("tensor",t,e,n),a=Object(Ap["d"])("lengths",t,e,n),s=n.getTensorArray(r.id);return s.split(a,i),[s.idTensor]}case"TensorArraySizeV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[Object(h["xh"])(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=Object(Ap["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("index",t,e,n),a=Object(Ap["d"])("tensor",t,e,n),s=n.getTensorList(r.id);return s.setItem(i,a),[s.idTensor]}case"TensorListGetItem":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("index",t,e,n),a=Object(Ap["d"])("elementShape",t,e,n),s=Object(Ap["d"])("elementDType",t,e,n),o=n.getTensorList(r.id);return[o.getItem(i,a,s)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Object(Ap["d"])("indices",t,e,n),i=Object(Ap["d"])("tensor",t,e,n),a=Object(Ap["d"])("elementShape",t,e,n),s=Object(Ap["d"])("numElements",t,e,n),o=Up(i,r,a,s);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Object(Ap["d"])("elementShape",t,e,n),i=Object(Ap["d"])("elementDType",t,e,n);let a;a="TensorListReserve"===t.op?"numElements":"maxNumElements";const s=Object(Ap["d"])(a,t,e,n),o="TensorListReserve"===t.op?-1:s,u=Vp(r,i,s,o);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("indices",t,e,n),a=Object(Ap["d"])("elementShape",t,e,n),s=Object(Ap["d"])("elementDType",t,e,n),o=n.getTensorList(r.id);return[o.gather(i,s,a)]}case"TensorListStack":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("elementShape",t,e,n),a=Object(Ap["d"])("elementDType",t,e,n),s=Object(Ap["d"])("numElements",t,e,n),o=n.getTensorList(r.id);return[o.stack(i,a,s)]}case"TensorListFromTensor":{const r=Object(Ap["d"])("tensor",t,e,n),i=Object(Ap["d"])("elementShape",t,e,n),a=Object(Ap["d"])("elementDType",t,e,n),s=zp(r,i,a);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=n.getTensorList(r.id),a=Object(Ap["d"])("dtype",t,e,n),s=Object(Ap["d"])("elementShape",t,e,n);return[i.concat(a,s)]}case"TensorListPushBack":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("tensor",t,e,n),a=n.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("elementShape",t,e,n),a=Object(Ap["d"])("elementDType",t,e,n),s=n.getTensorList(r.id);return[s.popBack(i,a)]}case"TensorListSplit":{const r=Object(Ap["d"])("tensor",t,e,n),i=Object(Ap["d"])("elementShape",t,e,n),a=Object(Ap["d"])("lengths",t,e,n),s=Wp(r,a,i);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=n.getTensorList(r.id);return[Object(h["xh"])(i.size(),"int32")]}case"TensorListResize":{const r=Object(Ap["d"])("tensorListId",t,e,n),i=Object(Ap["d"])("size",t,e,n),a=n.getTensorList(r.id),s=a.resize(i);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hp(t,e,n){const[r,i]=Object(Ap["d"])("fusedOps",t,e,n),a="biasadd"===r,s=!a,o="prelu"===i,u="fusedbatchnorm"===r,c=Object(Ap["d"])("numArgs",t,e,n);if(a){if(o&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=Object(Ap["d"])("strides",t,e,n),d=Object(Ap["c"])(t,e,n),h=Object(Ap["d"])("dataFormat",t,e,n).toUpperCase(),p=Object(Ap["d"])("dilations",t,e,n);let[f,m]=Object(Ap["d"])("args",t,e,n);s&&(m=f,f=void 0);const g=Object(Ap["d"])("leakyreluAlpha",t,e,n);return{stride:l,pad:d,dataFormat:h,dilations:p,biasArg:f,preluArg:m,activationFunc:i,leakyreluAlpha:g}}const qp=(t,e,n,r=c)=>{switch(t.op){case"Conv1D":{const i=Object(Ap["d"])("stride",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("dataFormat",t,e,n).toUpperCase(),o=Object(Ap["d"])("dilation",t,e,n);return[r.conv1d(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("filter",t,e,n),i,a,s,o)]}case"Conv2D":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["c"])(t,e,n),s=Object(Ap["d"])("dataFormat",t,e,n).toUpperCase(),o=Object(Ap["d"])("dilations",t,e,n);return[r.conv2d(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("filter",t,e,n),[i[1],i[2]],a,s,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:i,pad:a,dataFormat:s,dilations:o,biasArg:u,preluArg:c,activationFunc:l,leakyreluAlpha:d}=Hp(t,e,n);return[r.fused.conv2d({x:Object(Ap["d"])("x",t,e,n),filter:Object(Ap["d"])("filter",t,e,n),strides:[i[1],i[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:u,activation:l,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:a,dataFormat:s,dilations:o,biasArg:u,preluArg:c,activationFunc:l,leakyreluAlpha:d}=Hp(t,e,n);return[r.fused.depthwiseConv2d({x:Object(Ap["d"])("x",t,e,n),filter:Object(Ap["d"])("filter",t,e,n),strides:[i[1],i[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:u,activation:l,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=Object(Ap["d"])("outputShape",t,e,n),a=Object(Ap["d"])("strides",t,e,n),s=Object(Ap["c"])(t,e,n);return[r.conv2dTranspose(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("filter",t,e,n),i,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["c"])(t,e,n),s=Object(Ap["d"])("dilations",t,e,n),o=Object(Ap["d"])("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(Object(Ap["d"])("input",t,e,n),Object(Ap["d"])("filter",t,e,n),[i[1],i[2]],a,o,[s[1],s[2]])]}case"Conv3D":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("dataFormat",t,e,n).toUpperCase(),o=Object(Ap["d"])("dilations",t,e,n);return[r.conv3d(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("filter",t,e,n),[i[1],i[2],i[3]],a,s,[o[1],o[2],o[3]])]}case"AvgPool":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("kernelSize",t,e,n);return[r.avgPool(Object(Ap["d"])("x",t,e,n),[s[1],s[2]],[i[1],i[2]],a)]}case"MaxPool":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("kernelSize",t,e,n);return[r.maxPool(Object(Ap["d"])("x",t,e,n),[s[1],s[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("kernelSize",t,e,n),o=Object(Ap["d"])("includeBatchInIndex",t,e,n),{result:u,indexes:c}=r.maxPoolWithArgmax(Object(Ap["d"])("x",t,e,n),[s[1],s[2]],[i[1],i[2]],a,o);return[u,c]}case"AvgPool3D":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("kernelSize",t,e,n);return[r.avgPool3d(Object(Ap["d"])("x",t,e,n),[s[1],s[2],s[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("kernelSize",t,e,n);return[r.maxPool3d(Object(Ap["d"])("x",t,e,n),[s[1],s[2],s[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{const i=Object(Ap["d"])("strides",t,e,n),a=Object(Ap["d"])("pad",t,e,n),s=Object(Ap["d"])("dilations",t,e,n),o=i[1],u=i[2],c=s[1],l=s[2];return[r.dilation2d(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("filter",t,e,n),[o,u],a,[c,l],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Jp=(t,e,n,r=c)=>{switch(t.op){case"Fill":{const i=Object(Ap["d"])("shape",t,e,n),a=Object(Ap["d"])("dtype",t,e,n),s=Object(Ap["d"])("value",t,e,n);return[r.fill(i,s,a)]}case"LinSpace":{const i=Object(Ap["d"])("start",t,e,n),a=Object(Ap["d"])("stop",t,e,n),s=Object(Ap["d"])("num",t,e,n);return[r.linspace(i,a,s)]}case"Multinomial":{const i=Object(Ap["d"])("logits",t,e,n),a=Object(Ap["d"])("numSamples",t,e,n),s=Object(Ap["d"])("seed",t,e,n);return[r.multinomial(i,a,s)]}case"OneHot":{const i=Object(Ap["d"])("indices",t,e,n),a=Object(Ap["d"])("depth",t,e,n),s=Object(Ap["d"])("onValue",t,e,n),o=Object(Ap["d"])("offValue",t,e,n),u=Object(Ap["d"])("dtype",t,e,n);return[r.oneHot(i,a,s,o,u)]}case"Ones":return[r.ones(Object(Ap["d"])("shape",t,e,n),Object(Ap["d"])("dtype",t,e,n))];case"OnesLike":return[r.onesLike(Object(Ap["d"])("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(Object(Ap["d"])("shape",t,e,n),Object(Ap["d"])("dtype",t,e,n),Object(Ap["d"])("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(Object(Ap["d"])("shape",t,e,n),Object(Ap["d"])("minval",t,e,n),Object(Ap["d"])("maxval",t,e,n),Object(Ap["d"])("dtype",t,e,n))];case"Range":{const i=Object(Ap["d"])("start",t,e,n),a=Object(Ap["d"])("stop",t,e,n),s=Object(Ap["d"])("step",t,e,n);return[r.range(i,a,s,Object(Ap["d"])("dtype",t,e,n))]}case"TruncatedNormal":{const i=Object(Ap["d"])("shape",t,e,n),a=Object(Ap["d"])("mean",t,e,n),s=Object(Ap["d"])("stdDev",t,e,n),o=Object(Ap["d"])("seed",t,e,n);return[r.truncatedNormal(i,a,s,Object(Ap["d"])("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(Object(Ap["d"])("shape",t,e,n),Object(Ap["d"])("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(Object(Ap["d"])("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kp(t,e,n){const r=Object(Ap["d"])("boxes",t,e,n),i=Object(Ap["d"])("scores",t,e,n),a=Object(Ap["d"])("maxOutputSize",t,e,n),s=Object(Ap["d"])("iouThreshold",t,e,n),o=Object(Ap["d"])("scoreThreshold",t,e,n),u=Object(Ap["d"])("softNmsSigma",t,e,n);return{boxes:r,scores:i,maxOutputSize:a,iouThreshold:s,scoreThreshold:o,softNmsSigma:u}}const Xp=async(t,e,n,r,i=c)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:c}=Kp(t,e,n),l=await i.image.nonMaxSuppressionWithScoreAsync(r,a,s,o,u,c);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=Kp(t,e,n),c=Object(Ap["d"])("padToMaxOutputSize",t,e,n),l=await i.image.nonMaxSuppressionPaddedAsync(r,a,s,o,u,c);return[l.selectedIndices,l.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=Kp(t,e,n);return[await i.image.nonMaxSuppressionAsync(r,a,s,o,u)]}case"Where":{const r=i.cast(Object(Ap["d"])("condition",t,e,n),"bool"),a=[await i.whereAsync(r)];return r.dispose(),a}case"ListDiff":return i.setdiff1dAsync(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}},Yp=(t,e,n,r=c)=>{switch(t.op){case"LowerBound":{const i=Object(Ap["d"])("sortedSequence",t,e,n),a=Object(Ap["d"])("values",t,e,n);return[r.lowerBound(i,a)]}case"TopKV2":{const i=Object(Ap["d"])("x",t,e,n),a=Object(Ap["d"])("k",t,e,n),s=Object(Ap["d"])("sorted",t,e,n),o=r.topk(i,a,s);return[o.values,o.indices]}case"UpperBound":{const i=Object(Ap["d"])("sortedSequence",t,e,n),a=Object(Ap["d"])("values",t,e,n);return[r.upperBound(i,a)]}case"Unique":{const i=Object(Ap["d"])("x",t,e,n),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{const i=Object(Ap["d"])("x",t,e,n),a=Object(Ap["d"])("axis",t,e,n),s=r.unique(i,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Zp=(t,e,n,r=c)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const i=Object(Ap["d"])("default",t,e,n);return[Object(Ap["e"])(t.name,e,n)||i];case"Placeholder":return[Object(Ap["e"])(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const r=Object(Ap["d"])("x",t,e,n);return[Object(Ap["a"])(r)]}case"IdentityN":return Object(Ap["d"])("x",t,e,n).map(t=>Object(Ap["a"])(t));case"Snapshot":const a=Object(Ap["d"])("x",t,e,n);return[Object(Ap["a"])(a)];case"Shape":return[r.tensor1d(Object(Ap["d"])("x",t,e,n).shape,"int32")];case"ShapeN":return Object(Ap["d"])("x",t,e,n).map(t=>r.tensor1d(t.shape));case"Size":return[r.scalar(Object(Ap["d"])("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(Object(Ap["d"])("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const s=Object(Ap["d"])("x",t,e,n),o=Object(Ap["d"])("data",t,e,n),u=Object(Ap["d"])("message",t,e,n),c=Object(Ap["d"])("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let t=0;t<o.length;t++)console.log(Array.prototype.slice.call(o[t].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Qp{constructor(t,e){this.keyDType=t,this.valueDType=e,this.handle=Object(h["xh"])(0),this.tensorMap=new Map,Object(h["Qf"])(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return w["a"](this.size(),"int32")}async import(t,e){this.checkKeyAndValueTensor(t,e);const n=await t.data();return this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),Object(h["vi"])(()=>{const t=Object(h["Gi"])(e),r=n.length,i=t.length;h["Ji"].assert(r===i,()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${i} elements.`);for(let e=0;e<r;e++){const r=n[e],i=t[e];Object(h["Qf"])(i),this.tensorMap.set(r,i)}return this.handle})}async find(t,e){this.checkKeyAndValueTensor(t,e);const n=await t.data();return Object(h["vi"])(()=>{const t=[];for(let r=0;r<n.length;r++){const i=n[r],a=this.findWithDefault(i,e);t.push(a)}return Object(h["di"])(t)})}findWithDefault(t,e){const n=this.tensorMap.get(t);return null!=n?n:e}checkKeyAndValueTensor(t,e){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+t.dtype);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+e.dtype)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tf=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(t.name);if(null!=i)return[i];{const i=Object(Ap["d"])("keyDType",t,e,n),a=Object(Ap["d"])("valueDType",t,e,n),s=new Qp(i,a);return r.addHashTable(t.name,s),[s.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=Object(Ap["d"])("tableHandle",t,e,n,r),a=Object(Ap["d"])("keys",t,e,n),s=Object(Ap["d"])("values",t,e,n),o=r.getHashTableById(i.id);return[await o.import(a,s)]}case"LookupTableFind":case"LookupTableFindV2":{const i=Object(Ap["d"])("tableHandle",t,e,n,r),a=Object(Ap["d"])("keys",t,e,n),s=Object(Ap["d"])("defaultValue",t,e,n),o=r.getHashTableById(i.id);return[await o.find(a,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=Object(Ap["d"])("tableHandle",t,e,n,r),a=r.getHashTableById(i.id);return[a.tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},ef=(t,e,n,r=c)=>{switch(t.op){case"ResizeBilinear":{const i=Object(Ap["d"])("images",t,e,n),a=Object(Ap["d"])("size",t,e,n),s=Object(Ap["d"])("alignCorners",t,e,n),o=Object(Ap["d"])("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(i,[a[0],a[1]],s,o)]}case"ResizeNearestNeighbor":{const i=Object(Ap["d"])("images",t,e,n),a=Object(Ap["d"])("size",t,e,n),s=Object(Ap["d"])("alignCorners",t,e,n),o=Object(Ap["d"])("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],s,o)]}case"CropAndResize":{const i=Object(Ap["d"])("image",t,e,n),a=Object(Ap["d"])("boxes",t,e,n),s=Object(Ap["d"])("boxInd",t,e,n),o=Object(Ap["d"])("cropSize",t,e,n),u=Object(Ap["d"])("method",t,e,n),c=Object(Ap["d"])("extrapolationValue",t,e,n);return[r.image.cropAndResize(i,a,s,o,u,c)]}case"ImageProjectiveTransformV3":{const i=Object(Ap["d"])("images",t,e,n),a=Object(Ap["d"])("transforms",t,e,n),s=Object(Ap["d"])("outputShape",t,e,n),o=Object(Ap["d"])("fillValue",t,e,n),u=Object(Ap["d"])("interpolation",t,e,n),c=Object(Ap["d"])("fillMode",t,e,n);return[r.image.transform(i,a,u.toLowerCase(),c.toLowerCase(),o,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},nf=(t,e,n,r=c)=>{switch(t.op){case"Equal":return[r.equal(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"NotEqual":return[r.notEqual(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Greater":return[r.greater(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Less":return[r.less(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"LessEqual":return[r.lessEqual(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"LogicalNot":return[r.logicalNot(Object(Ap["d"])("a",t,e,n))];case"LogicalOr":return[r.logicalOr(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];case"Select":case"SelectV2":return[r.where(Object(Ap["d"])("condition",t,e,n),Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},rf=(t,e,n,r=c)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Object(Ap["d"])("a",t,e,n),Object(Ap["d"])("b",t,e,n),Object(Ap["d"])("transposeA",t,e,n),Object(Ap["d"])("transposeB",t,e,n))];case"Einsum":return[r.einsum(Object(Ap["d"])("equation",t,e,n),...Object(Ap["d"])("tensors",t,e,n))];case"Transpose":return[r.transpose(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("perm",t,e,n))];case"_FusedMatMul":const[i,a]=Object(Ap["d"])("fusedOps",t,e,n),s="biasadd"===i,o="prelu"===a,u=Object(Ap["d"])("numArgs",t,e,n),c=Object(Ap["d"])("leakyreluAlpha",t,e,n);if(s){if(o&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,d]=Object(Ap["d"])("args",t,e,n);return[r.fused.matMul({a:Object(Ap["d"])("a",t,e,n),b:Object(Ap["d"])("b",t,e,n),transposeA:Object(Ap["d"])("transposeA",t,e,n),transposeB:Object(Ap["d"])("transposeB",t,e,n),bias:l,activation:a,preluActivationWeights:d,leakyreluAlpha:c})];default:throw TypeError(`Node type ${t.op} is not implemented`)}},af=(t,e,n,r=c)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("axis",t,e,n),Object(Ap["d"])("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("mean",t,e,n),Object(Ap["d"])("variance",t,e,n),Object(Ap["d"])("offset",t,e,n),Object(Ap["d"])("scale",t,e,n),Object(Ap["d"])("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("mean",t,e,n),Object(Ap["d"])("variance",t,e,n),Object(Ap["d"])("offset",t,e,n),Object(Ap["d"])("scale",t,e,n),Object(Ap["d"])("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("radius",t,e,n),Object(Ap["d"])("bias",t,e,n),Object(Ap["d"])("alpha",t,e,n),Object(Ap["d"])("beta",t,e,n))];case"Softmax":return[r.softmax(Object(Ap["d"])("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(Object(Ap["d"])("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(Object(Ap["d"])("sparseIndices",t,e,n),Object(Ap["d"])("outputShape",t,e,n),Object(Ap["d"])("sparseValues",t,e,n),Object(Ap["d"])("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},sf=(t,e,n,r=c)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:a}=r.raggedGather(Object(Ap["d"])("paramsNestedSplits",t,e,n),Object(Ap["d"])("paramsDenseValues",t,e,n),Object(Ap["d"])("indices",t,e,n),Object(Ap["d"])("outputRaggedRank",t,e,n));return i.concat(a)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:a}=r.raggedRange(Object(Ap["d"])("starts",t,e,n),Object(Ap["d"])("limits",t,e,n),Object(Ap["d"])("splits",t,e,n));return[i,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(Object(Ap["d"])("shape",t,e,n),Object(Ap["d"])("values",t,e,n),Object(Ap["d"])("defaultValue",t,e,n),Object(Ap["d"])("rowPartitionTensors",t,e,n),Object(Ap["d"])("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},of=(t,e,n,r=c)=>{switch(t.op){case"Max":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.max(Object(Ap["d"])("x",t,e,n),i,a)]}case"Mean":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.mean(Object(Ap["d"])("x",t,e,n),i,a)]}case"Min":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.min(Object(Ap["d"])("x",t,e,n),i,a)]}case"Sum":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.sum(Object(Ap["d"])("x",t,e,n),i,a)]}case"All":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.all(Object(Ap["d"])("x",t,e,n),i,a)]}case"Any":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.any(Object(Ap["d"])("x",t,e,n),i,a)]}case"ArgMax":{const i=Object(Ap["d"])("axis",t,e,n);return[r.argMax(Object(Ap["d"])("x",t,e,n),i)]}case"ArgMin":{const i=Object(Ap["d"])("axis",t,e,n);return[r.argMin(Object(Ap["d"])("x",t,e,n),i)]}case"Prod":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("keepDims",t,e,n);return[r.prod(Object(Ap["d"])("x",t,e,n),i,a)]}case"Cumprod":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("exclusive",t,e,n),s=Object(Ap["d"])("reverse",t,e,n);return[r.cumprod(Object(Ap["d"])("x",t,e,n),i,a,s)]}case"Cumsum":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("exclusive",t,e,n),s=Object(Ap["d"])("reverse",t,e,n);return[r.cumsum(Object(Ap["d"])("x",t,e,n),i,a,s)]}case"Bincount":const i=Object(Ap["d"])("x",t,e,n),a=Object(Ap["d"])("weights",t,e,n),s=Object(Ap["d"])("size",t,e,n);return[r.bincount(i,a,s)];case"DenseBincount":{const i=Object(Ap["d"])("x",t,e,n),a=Object(Ap["d"])("weights",t,e,n),s=Object(Ap["d"])("size",t,e,n),o=Object(Ap["d"])("binaryOutput",t,e,n);return[r.denseBincount(i,a,s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},uf=(t,e,n,r=c)=>{switch(t.op){case"ConcatV2":case"Concat":{const i=Object(Ap["d"])("n",t,e,n),a=Object(Ap["d"])("axis",t,e,n);let s=Object(Ap["d"])("tensors",t,e,n);return s=s.slice(0,i),[r.concat(s,a)]}case"Gather":{const i=Object(Ap["d"])("x",t,e,n),a=Object(Ap["d"])("indices",t,e,n);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("batchDims",t,e,n),s=Object(Ap["d"])("x",t,e,n),o=Object(Ap["d"])("indices",t,e,n);return[r.gather(s,r.cast(o,"int32"),i,a)]}case"Reverse":{const i=Object(Ap["d"])("dims",t,e,n),a=[];for(let t=0;t<i.length;t++)i[t]&&a.push(t);const s=Object(Ap["d"])("x",t,e,n);return[r.reverse(s,a)]}case"ReverseV2":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("x",t,e,n);return[r.reverse(a,i)]}case"Slice":{const i=Object(Ap["d"])("begin",t,e,n),a=Object(Ap["d"])("size",t,e,n);return[r.slice(Object(Ap["d"])("x",t,e,n),i,a)]}case"StridedSlice":{const i=Object(Ap["d"])("begin",t,e,n),a=Object(Ap["d"])("end",t,e,n),s=Object(Ap["d"])("strides",t,e,n),o=Object(Ap["d"])("beginMask",t,e,n),u=Object(Ap["d"])("endMask",t,e,n),c=Object(Ap["d"])("ellipsisMask",t,e,n),l=Object(Ap["d"])("newAxisMask",t,e,n),d=Object(Ap["d"])("shrinkAxisMask",t,e,n),h=Object(Ap["d"])("x",t,e,n);return[r.stridedSlice(h,i,a,s,o,u,c,l,d)]}case"Pack":return Object(h["vi"])(()=>{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("tensors",t,e,n),s=a[0].shape,o=r.squeeze(a[0]).shape,u=a.map(t=>{const e=h["Ji"].arraysEqual(t.shape,s);if(!e&&!h["Ji"].arraysEqual(r.squeeze(t).shape,o))throw new Error("the input tensors shape does not match");return e?t:r.reshape(t,s)});return[r.stack(u,i)]});case"Unpack":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("tensor",t,e,n);return r.unstack(a,i)}case"Tile":{const i=Object(Ap["d"])("reps",t,e,n);return[r.tile(Object(Ap["d"])("x",t,e,n),i)]}case"Split":case"SplitV":{const i=Object(Ap["d"])("axis",t,e,n),a=Object(Ap["d"])("numOrSizeSplits",t,e,n),s=Object(Ap["d"])("x",t,e,n);return r.split(s,a,i)}case"ScatterNd":{const i=Object(Ap["d"])("indices",t,e,n),a=Object(Ap["d"])("values",t,e,n),s=Object(Ap["d"])("shape",t,e,n);return[r.scatterND(i,a,s)]}case"GatherNd":{const i=Object(Ap["d"])("x",t,e,n),a=Object(Ap["d"])("indices",t,e,n);return[r.gatherND(i,a)]}case"SparseToDense":{const i=Object(Ap["d"])("sparseIndices",t,e,n),a=Object(Ap["d"])("outputShape",t,e,n),s=Object(Ap["d"])("sparseValues",t,e,n),o=Object(Ap["d"])("defaultValue",t,e,n);return[r.sparseToDense(i,s,a,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},cf=(t,e,n,r=c)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:a,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(Object(Ap["d"])("indices",t,e,n),Object(Ap["d"])("values",t,e,n),Object(Ap["d"])("denseShape",t,e,n),Object(Ap["d"])("defaultValue",t,e,n));return[i,a,s,o]}case"SparseReshape":{const{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(Object(Ap["d"])("inputIndices",t,e,n),Object(Ap["d"])("inputShape",t,e,n),Object(Ap["d"])("newShape",t,e,n));return[i,a]}case"SparseSegmentMean":{const i=r.sparse.sparseSegmentMean(Object(Ap["d"])("data",t,e,n),Object(Ap["d"])("indices",t,e,n),Object(Ap["d"])("segmentIds",t,e,n));return[i]}case"SparseSegmentSum":{const i=r.sparse.sparseSegmentSum(Object(Ap["d"])("data",t,e,n),Object(Ap["d"])("indices",t,e,n),Object(Ap["d"])("segmentIds",t,e,n));return[i]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},lf=(t,e,n,r=c)=>{switch(t.op){case"FFT":return[r.fft(Object(Ap["d"])("x",t,e,n))];case"IFFT":return[r.ifft(Object(Ap["d"])("x",t,e,n))];case"RFFT":return[r.rfft(Object(Ap["d"])("x",t,e,n))];case"IRFFT":return[r.irfft(Object(Ap["d"])("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},df=(t,e,n,r=c)=>{switch(t.op){case"StringNGrams":{const{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(Object(Ap["d"])("data",t,e,n),Object(Ap["d"])("dataSplits",t,e,n),Object(Ap["d"])("separator",t,e,n),Object(Ap["d"])("nGramWidths",t,e,n),Object(Ap["d"])("leftPad",t,e,n),Object(Ap["d"])("rightPad",t,e,n),Object(Ap["d"])("padWidth",t,e,n),Object(Ap["d"])("preserveShortSequences",t,e,n));return[i,a]}case"StringSplit":{const{indices:i,values:a,shape:s}=r.string.stringSplit(Object(Ap["d"])("input",t,e,n),Object(Ap["d"])("delimiter",t,e,n),Object(Ap["d"])("skipEmpty",t,e,n));return[i,a,s]}case"StringToHashBucketFast":{const i=r.string.stringToHashBucketFast(Object(Ap["d"])("input",t,e,n),Object(Ap["d"])("numBuckets",t,e,n));return[i]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},hf=(t,e,n,r=c)=>{switch(t.op){case"Cast":return[r.cast(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("dtype",t,e,n))];case"ExpandDims":{const i=Object(Ap["d"])("axis",t,e,n);return[r.expandDims(Object(Ap["d"])("x",t,e,n),i)]}case"Squeeze":{const i=Object(Ap["d"])("axis",t,e,n);return[r.squeeze(Object(Ap["d"])("x",t,e,n),i)]}case"Reshape":return[r.reshape(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("padding",t,e,n),Object(Ap["d"])("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("padding",t,e,n),Object(Ap["d"])("constantValue",t,e,n))];case"SpaceToBatchND":{const i=Object(Ap["d"])("blockShape",t,e,n),a=Object(Ap["d"])("paddings",t,e,n);return[r.spaceToBatchND(Object(Ap["d"])("x",t,e,n),i,a)]}case"BatchToSpaceND":{const i=Object(Ap["d"])("blockShape",t,e,n),a=Object(Ap["d"])("crops",t,e,n);return[r.batchToSpaceND(Object(Ap["d"])("x",t,e,n),i,a)]}case"DepthToSpace":{const i=Object(Ap["d"])("blockSize",t,e,n),a=Object(Ap["d"])("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(Object(Ap["d"])("x",t,e,n),i,a)]}case"BroadcastTo":return[r.broadcastTo(Object(Ap["d"])("x",t,e,n),Object(Ap["d"])("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(Object(Ap["d"])("s0",t,e,n),Object(Ap["d"])("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pf(t,e,n,r,i=h["vi"]){const a=((t,e,n)=>{switch(t.category){case"arithmetic":return i(()=>Dp(t,e,n));case"basic_math":return i(()=>$p(t,e,n));case"control":return Gp(t,e,n);case"convolution":return i(()=>qp(t,e,n));case"creation":return i(()=>Jp(t,e,n));case"dynamic":return Xp(t,e,n);case"evaluation":return i(()=>Yp(t,e,n));case"image":return i(()=>ef(t,e,n));case"graph":return i(()=>Zp(t,e,n));case"logical":return i(()=>nf(t,e,n));case"matrices":return i(()=>rf(t,e,n));case"normalization":return i(()=>af(t,e,n));case"ragged":return i(()=>sf(t,e,n));case"reduction":return i(()=>of(t,e,n));case"slice_join":return i(()=>uf(t,e,n));case"sparse":return i(()=>cf(t,e,n));case"spectral":return i(()=>lf(t,e,n));case"string":return i(()=>df(t,e,n));case"transformation":return i(()=>hf(t,e,n));case"hash_table":return tf(t,e,n,r);case"custom":const a=Object(Np["b"])(t.op);if(a&&a.customExecutor)return a.customExecutor(new Ep(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return h["Ji"].isPromise(a)?a.then(t=>[].concat(t)):[].concat(a)}class ff{constructor(t={},e={},n={},r={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mf(t,e,n,r){const i=new Set,a=[];let s=null,o=null;const u=new Set,c=Object.keys(t).map(t=>Object(Ap["g"])(t)[0]);let l=[];null!=r&&(l=r.map(t=>Object(Ap["g"])(t.name)[0]));const d=[...e];while(d.length>0){const t=d.pop();(wf(t)||xf(t)||Of(t))&&null==s&&(s=t,o=s.children.map(t=>t.name).filter(t=>i.has(t))),i.add(t.name),null==n[t.name]&&(-1===c.indexOf(t.name)&&-1===l.indexOf(t.name)&&(0!==t.inputs.length?t.inputs.forEach(t=>{u.has(t.name)||(u.add(t.name),d.push(t))}):a.push(t.name)))}return{inputs:t,outputs:e,usedNodes:i,missingInputs:a,dynamicNode:s,syncInputs:o}}function gf(t,e,n){const{usedNodes:r,inputs:i}=n,a=[],s=Object.keys(i).map(t=>Object(Ap["g"])(t)[0]).map(e=>t.nodes[e]),o=t.initNodes;s.forEach(t=>{r.has(t.name)&&a.push(t)}),t.weights.forEach(t=>{r.has(t.name)&&a.push(t)}),null!=o&&o.forEach(t=>{r.has(t.name)&&a.push(t)});const u=new Set,c=[];while(a.length>0){const t=a.pop();u.add(t.name),e[t.name]||c.push(t),t.children.forEach(t=>{!u.has(t.name)&&r.has(t.name)&&t.inputs.every(t=>u.has(t.name))&&a.push(t)})}return c}const bf=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],yf=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],vf=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function wf(t){return bf.indexOf(t.op)>=0}function xf(t){return yf.indexOf(t.op)>=0}function Of(t){return vf.indexOf(t.op)>=0}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sf{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new Sf(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams["shape"]?t.attrParams["shape"].value:void 0,dtype:t.attrParams["dtype"]?t.attrParams["dtype"].value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams["shape"]?t.attrParams["shape"].value:void 0,dtype:t.attrParams["dtype"]?t.attrParams["dtype"].value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const n=t.map(t=>t.name).sort(),r=e.map(t=>t.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(t,e){const n=mf(t,e,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:a}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const n=e.map(t=>t.name),i=Object.keys(t);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}return gf(this.graph,this.weightMap,n)}cloneAndKeepTensor(t){if(null==t)return null;const e=t.clone();return Object(h["Qf"])(e),e}cloneTensorList(t){if(!t)return null;const e=t.map(t=>this.cloneAndKeepTensor(t));return e}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([t,e])=>[t,this.cloneTensorList(e)]))}execute(t,e){this.disposeIntermediateTensors(),t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map(t=>this.graph.nodes[Object(Ap["g"])(t)[0]]),i=e.map(t=>Object(Ap["g"])(t)[0]);let a=i.map(t=>this.graph.nodes[t]);0===a.length&&(a=this._outputs);const s=this.getCompilationKey(r,a);let o=this.compiledMap.get(s);null==o&&(o=this.compile(t,a),this.compiledMap.set(s,o));try{this.keepIntermediateTensors=Object(h["hf"])().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(l){this.keepIntermediateTensors=!1,console.warn(l.message)}const u={},c={};return Object(h["vi"])(()=>{const n=new ff(this.weightMap,u,c,this.functionExecutorMap),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(e=>{const[n,i]=Object(Ap["g"])(e),a=[];a[i]=t[e],r[n]=a,this.keepIntermediateTensors&&(this.clonedTensorsMap[n]=this.cloneTensorList(a))});const a=this.getFrozenTensorIds(r),s={};for(let t=0;t<o.length;t++){const e=o[t];if(!r[e.name]){const t=pf(e,r,n,this._resourceManager);if(h["Ji"].isPromise(t))throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposal(e.name,e,r,n,a,i,s)}}return null==this.parent&&n.dispose(a),e.map(t=>Object(Ap["e"])(t,r,n))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,a,s){"control"!==e.category&&-1===a.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(s[t.id]=(s[t.id]||0)+e.children.length)}),e.inputs.forEach(t=>{if("control"!==t.category){const e=Object(Ap["f"])(t.name,n,r);null!=e&&e.forEach(t=>{if(t&&!t.kept&&!i.has(t.id)){const e=s[t.id];1===e?(t.dispose(),delete s[t.id]):null!=e&&s[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const e of t)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,e,n=!1,r={},i={}){this.disposeIntermediateTensors(),n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=Object(h["hf"])().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const a=new ff(this.weightMap,r,i,this.functionExecutorMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const s=await this.executeWithControlFlow(t,a,e,n),o=e.map(t=>Object(Ap["e"])(t,s,a)),u=o.map(t=>t.id),c=Object.keys(t).map(e=>t[e].id),l=new Set([...u,...c,...this.weightIds]);return Object.values(s).forEach(t=>{t.forEach(t=>{!t||t.isDisposed||l.has(t.id)||t.dispose()})}),null==this.parent&&a.dispose(l),o}async executeFunctionAsync(t,e,n){const r=t.reduce((t,e,n)=>(t[this.inputs[n].name]=e,t),{});return this._executeAsync(r,this.outputNodes,!0,e,n)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),a=i.map(t=>this.graph.nodes[Object(Ap["g"])(t)[0]]),s=n.map(t=>Object(Ap["g"])(t)[0]);let o=s.map(t=>this.graph.nodes[t]);0===o.length&&(o=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:l,syncInputs:d}=mf(t,o,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map(t=>({node:t,contexts:e.currentContext})),p=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,r]=Object(Ap["g"])(e),i=[];i[r]=t[e],p[n]=i});const f={},m=this.getFrozenTensorIds(p),g={};while(h.length>0){const t=this.processStack(a,h,e,p,g,m,s,f,u);await Promise.all(t)}null!=l||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=o.filter(t=>!wf(t)&&!Object(Ap["e"])(t.name,p,e)).map(t=>t.name);if(b.length>0){let t="";throw null!=l&&(t=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${t}`)}return p}processStack(t,e,n,r,i,a,s,o,u){const c=[];while(e.length>0){const t=e.pop();n.currentContext=t.contexts;let l="";if("Enter"===t.node.op&&Object(Ap["d"])("isConstant",t.node,r,n)&&([l]=Object(Ap["b"])(t.node.name,n)),null==r[t.node.name]){const d=pf(t.node,r,n,this._resourceManager);l||([l]=Object(Ap["b"])(t.node.name,n));const p=n.currentContext;h["Ji"].isPromise(d)?c.push(d.then(c=>(r[l]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[l]=this.cloneTensorList(c)),n.currentContext=p,this.checkTensorForDisposal(l,t.node,r,n,a,s,o),this.processChildNodes(t.node,e,n,r,i,u),c))):(r[l]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[l]=this.cloneTensorList(d)),this.checkTensorForDisposal(l,t.node,r,n,a,s,o),this.processChildNodes(t.node,e,n,r,i,u))}else this.processChildNodes(t.node,e,n,r,i,u)}return c}processChildNodes(t,e,n,r,i,a){t.children.forEach(t=>{const[s]=Object(Ap["b"])(t.name,n);!i[s]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!Object(Ap["e"])(t,r,n))&&(i[s]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!Object(Ap["e"])(t,r,n))&&(i[s]=!0,e.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{const n=t[e],[r]=Object(Ap["g"])(e),i=this.graph.nodes[r];if(i.attrParams["shape"]&&i.attrParams["shape"].value){const t=i.attrParams["shape"].value,e=t.length===n.shape.length&&n.shape.every((e,n)=>-1===t[n]||t[n]===e);h["Ji"].assert(e,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${t}], but was [${n.shape}]`)}i.attrParams["dtype"]&&i.attrParams["dtype"].value&&h["Ji"].assert(n.dtype===i.attrParams["dtype"].value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams["dtype"].value}, but was ${n.dtype}`)})}mapInputs(t){var e,n;const r={};for(const i in t){const a=null===(n=null===(e=this._signature)||void 0===e?void 0:e.inputs)||void 0===n?void 0:n[i];null!=a?r[a.name]=t[i]:r[i]=t[i]}return r}checkInputs(t){const e=Object.keys(t).filter(t=>{const[e]=Object(Ap["g"])(t);return null==this.graph.nodes[e]});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(t=>{var e,n;const r=null===(n=null===(e=this._signature)||void 0===e?void 0:e.outputs)||void 0===n?void 0:n[t];return null!=r?r.name:t},{})}checkOutputs(t){t.forEach(t=>{const[e]=Object(Ap["g"])(t);if(!this.graph.nodes[e])throw new Error(`The output '${t}' is not found in the graph`)})}}class kf{constructor(t={},e={}){this.hashTableNameToHandle=t,this.hashTableMap=e}addHashTable(t,e){this.hashTableNameToHandle[t]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tf="?tfjs-format=file",_f="model.json";class If{constructor(t,e={},n=h["Lf"]){this.modelUrl=t,this.loadOptions=e,this.version="n/a",this.io=n,null==e&&(this.loadOptions={}),this.resourceManager=new kf}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const e=this.io.getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return h["Ji"].isPromise(t)?t.then(t=>this.loadSync(t)):this.loadSync(t)}loadSync(t){this.artifacts=t;const e=this.artifacts.modelTopology;let n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const t=this.artifacts.userDefinedMetadata;null!=t.signature&&(n=t.signature),null!=t.structuredOutputKeys&&(this.structuredOutputKeys=t.structuredOutputKeys)}this.signature=n,this.version=`${e.versions.producer}.${e.versions.minConsumer}`;const r=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Sf(Cp["a"].Instance.transformGraph(e,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=t.modelInitializer&&null!=t.modelInitializer.node){const e=Cp["a"].Instance.transformGraph(t.modelInitializer);this.initializer=new Sf(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,e){if("string"===typeof t){const e=this.io.getSaveHandlers(t);if(0===e.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new Error(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const e=t instanceof h["zd"]?[t]:t,n={};return e.forEach((t,e)=>n[this.structuredOutputKeys[e]]=t),n}return t}predict(t,e){const n=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(t,e){const n=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(t){var e;if(!(t instanceof h["zd"])&&!Array.isArray(t)){const n=null===(e=this.signature)||void 0===e?void 0:e.inputs;if(null!=n)for(const e in n){const r=n[e];null!=r.resourceId&&(t[e]=this.resourceIdToCapturedInput[r.resourceId])}return t}t=Array.isArray(t)?t:[t];const n=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${t.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((e,n)=>{var i,a,s;const o=null===(s=null===(a=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===a?void 0:a[n])||void 0===s?void 0:s.resourceId;return e[n]=null!=o?this.resourceIdToCapturedInput[o]:t[r++],e},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const e=this.initializerSignature.outputs,n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r],a=e[i];this.resourceIdToCapturedInput[a.resourceId]=t[r]}}}execute(t,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,n)=>(e[n]=[t[n]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Object(h["Ve"])(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Cf(t,e={},n=h["Lf"]){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&"string"===typeof t&&(t=Ef(t));const r=new If(t,e,n);return await r.load(),r}function Af(t){if(null==t)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[n,r]=t;if(!n)throw new Error("modelJSON must be the first element of the array");if(!r||!(r instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw new Error("Model JSON is missing 'weightsManifest'");const i=h["Lf"].getWeightSpecs(n.weightsManifest),a=h["Lf"].getModelArtifactsForJSONSync(n,i,r);e=h["Lf"].fromMemorySync(a)}else if("load"in t)e=t;else{if(!("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t))throw new Error("Unknown model format");e=h["Lf"].fromMemorySync(t)}const n=new If(e);return n.load(),n}function Ef(t){return t.endsWith("/")||(t+="/"),`${t}${_f}${Tf}`}
/** @license See the LICENSE file. */const Nf="4.2.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jf=n("6125"),Df=n("c388"),$f=n("bdcf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class Rf{constructor(){this.size=null}batch(t,e=!0){const n=this;let r;return h["Ji"].assert(t>0,()=>"batchSize needs to be positive, but it is\n      "+t),r=this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t),Ff(async()=>(await n.iterator()).columnMajorBatch(t,e,Lf),r)}concatenate(t){const e=this;let n;return n=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null,Ff(async()=>(await e.iterator()).concatenate(await t.iterator()),n)}filter(t){const e=this;let n;return n=this.size===1/0?1/0:null,Ff(async()=>(await e.iterator()).filter(e=>h["vi"](()=>t(e))),n)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(t){const e=this;return Ff(async()=>(await e.iterator()).map(e=>h["vi"](()=>t(e))),this.size)}mapAsync(t){const e=this;return Ff(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return Ff(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let n;return n=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null,Ff(async()=>{const n=Object(Df["e"])(async()=>({value:await e.iterator(),done:!1}));return Object(Df["d"])(n.take(t))},n)}skip(t){const e=this;let n;return n=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null,Ff(async()=>(await e.iterator()).skip(t),n)}shuffle(t,e,n=!0){if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=jf["alea"](e||h["Ji"].now().toString());return Ff(async()=>{let e=i.int32();return n&&(e+=i.int32()),(await r.iterator()).shuffle(t,e.toString())},this.size)}take(t){const e=this;let n;return n=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null,Ff(async()=>(await e.iterator()).take(t),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function Ff(t,e=null){return new class extends Rf{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function Pf(t){return Ff(async()=>Object(Df["f"])(t),t.length)}function Mf(t){if(!Object($f["e"])(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let n=0;n<t.length;n++)e=null==e?t[n].size:Math.min(e,t[n].size);else if(t instanceof Object)for(const n in t)e=null==e?t[n].size:Math.min(e,t[n].size);return Ff(async()=>{const e=await Object($f["c"])(t,t=>{if(t instanceof Rf)return{value:t.iterator(),recurse:!1};if(Object($f["e"])(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Object(Df["g"])(e,Df["c"].SHORTEST)},e)}function Lf(t){if(null===t)return null;const e=t[0];if(Object($f["a"])(e)){const e=Bf(t);return{value:e,recurse:!1}}return{value:null,recurse:!0}}function Bf(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof h["zd"]?h["di"](t):h["mi"](t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */Rf.MAX_BUFFER_SIZE=1e4;class zf extends Rf{constructor(t){super(),this.input=t}async iterator(){const t=await this.input.iterator(),e=t.decodeUTF8(),n=e.split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t));return n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */const Vf='"',Uf=Symbol("out"),Wf=Symbol("field"),Gf=Symbol("quote"),Hf=Symbol("quoteafterquote"),qf=Symbol("quoteinquote");class Jf extends Rf{constructor(t,e){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new zf(t),e||(e={}),this.hasHeader=!1!==e.hasHeader,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(h["Ji"].assert(null==e.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&h["Ji"].assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const e=this.fullColumnNames.reduce((t,e)=>(t[e]=t[e]+1||1,t),{}),n=Object.keys(e).filter(t=>e[t]>1);if(h["Ji"].assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(const r of Object.keys(this.columnConfigs)){const t=this.fullColumnNames.indexOf(r);if(-1===t)throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const t=await this.base.iterator(),e=await t.next();if(e.done)throw new Error("No data was found for CSV parsing.");const n=e.value,r=this.parseRow(n,!1);return r}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let t=await this.base.iterator();return this.hasHeader&&(t=t.skip(1)),t.map(t=>this.makeDataElement(t))}makeDataElement(t){const e=this.parseRow(t),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){const a=this.fullColumnNames[i],s=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||s){const o=e[i];let u=null;if(""===o)if(s&&void 0!==s.default)u=s.default;else{if(s&&(s.required||s.isLabel))throw new Error(`Required column ${a} is empty in this line: ${t}`);u=void 0}else{const t=Number(o);if(isNaN(t))u=s&&"bool"===s.dtype?this.getBoolean(o):o;else if(s&&s.dtype)switch(s.dtype){case"float32":u=t;break;case"int32":u=Math.floor(t);break;case"bool":u=this.getBoolean(o);break;default:u=t}else u=t}s&&s.isLabel?r[a]=u:n[a]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(t){return"1"===t||"true"===t.toLowerCase()?1:0}parseRow(t,e=!0){const n=[];let r=0;const i=t.length;let a=Uf;for(let s=0;s<i;s++)switch(a){case Uf:switch(t.charAt(s)){case Vf:r=s+1,a=Gf;break;case this.delimiter:if(r=s+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),a=Uf;break;default:a=Wf,r=s;break}break;case Wf:switch(t.charAt(s)){case this.delimiter:n.push(t.substring(r,s)),a=Uf,r=s+1;break;default:}break;case Gf:switch(t.charAt(s)){case Vf:a=Hf;break;default:}break;case Hf:switch(t.charAt(s)){case this.delimiter:n.push(t.substring(r,s-1)),a=Uf,r=s+1;break;case Vf:a=Gf;break;default:a=qf;break}break;case qf:switch(t.charAt(s)){case Vf:a=Gf;break;default:}break;default:}if(a===Hf?n.push(t.substring(r,i-1)):n.push(t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Kf extends Df["a"]{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(t={}){if(!Object(h["hf"])().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");const e=new Kf(t);return await e.start(),e}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: "+n.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: `+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const n=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(n.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(n.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let n=0;return new Promise(r=>{const i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),r({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,n=new Float32Array(t.length*e);return t.forEach((t,r)=>n.set(t,r*e)),n}getTensorFromAudioDataArray(t,e){const n=new Float32Array(h["Ji"].sizeFromShape(e));return n.set(t,n.length-t.length),Object(h["mi"])(n,e)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Xf extends Df["a"]{constructor(t,e){if(super(),this.webcamVideoElement=t,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Object(h["ni"])([0],"int32"),this.webcamConfig.centerCrop){const t=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,e=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-t)/2,r=(1-e)/2,i=n+t,a=e+r;this.cropBox=Object(h["oi"])([r,n,a,i],[1,4])}else this.cropBox=Object(h["oi"])([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(t,e={}){if(!Object(h["hf"])().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=e.resizeWidth,t.height=e.resizeHeight}const n=new Xf(t,e);return await n.start(),n}async start(){this.webcamConfig.facingMode&&h["Ji"].assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(t){throw t.message="Error thrown while initializing video stream: "+t.message,t}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(t=>{this.webcamVideoElement.onloadedmetadata=()=>{t()}})}async next(){if(this.isClosed)return{value:null,done:!0};let t;try{t=h["pe"].fromPixels(this.webcamVideoElement)}catch(e){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(e))}if(!this.resize)return{value:t,done:!1};try{return{value:this.cropAndResizeFrame(t),done:!1}}catch(e){throw new Error("Error thrown cropping the video: "+e.message)}finally{t.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(t){return Object(h["vi"])(()=>{const e=Object(h["mf"])(Object(h["re"])(t,"float32"),0);let n;n=h["Jf"].cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const r=n.shape;return Object(h["oh"])(n,r.slice(1))})}async capture(){return(await this.next()).value}stop(){const t=this.stream.getTracks();t.forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Yf{}var Zf=n("dc14");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Qf extends Zf["a"]{constructor(t,e={}){super(),this.file=t,this.options=e,h["Ji"].assert(t instanceof Uint8Array||!!Object(h["hf"])().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const t=new Promise((t,e)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)t(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let i=r.result;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),!(i instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(i)},r.onabort=t=>e(new Error("Aborted")),r.onerror=t=>e(new Error(t.type));const i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n});return{value:await t,done:!1}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function tm(t,e={},n){let r,i;"string"===typeof t?r=t:(r=t.url,i=em(t));const a=await(n||h["Ji"].fetch)(r,i);if(a.ok){const t=new Uint8Array(await a.arrayBuffer());return new Qf(t,e)}throw new Error(a.statusText)}const em=t=>{const e={method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity};return e};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function nm(t){return"string"===typeof t&&"file://"===t.slice(0,7)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rm extends Yf{constructor(t,e={}){super(),this.input=t,this.options=e}async iterator(){if(nm(this.input)&&Object(h["hf"])().get("IS_NODE")){const t=n(6);this.input=t.readFileSync(this.input.slice(7))}return new Qf(this.input,this.options)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class im extends Yf{constructor(t,e={}){super(),this.url=t,this.fileOptions=e}async iterator(){return nm(this.url)?new rm(this.url,this.fileOptions).iterator():tm(this.url,this.fileOptions)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function am(t,e={}){return new Jf(new im(t),e)}function sm(t){const e=Object(Df["e"])(t);return Ff(async()=>e)}function om(t){return Ff(async()=>{const e=await t();return Object(Df["e"])(()=>e.next())})}async function um(t,e){return Xf.create(t,e)}async function cm(t){return Kf.create(t)}
/** @license See the LICENSE file. */const lm="4.2.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dm(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&h["Ji"].assert("complex64"!==t.dtype,()=>e+" does not support complex64 tensors in the CPU backend.")})}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hm=h["Rf"].whereImpl;class pm extends h["Fb"]{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new h["S"](this,Object(h["gf"])())}nextDataId(){return pm.nextDataId++}write(t,e,n){this.firstUse&&(this.firstUse=!1,Object(h["hf"])().get("IS_NODE")&&h["de"].warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:t,dtype:n,refCount:1}),r}makeTensorInfo(t,e,n){let r;if("string"===e&&null!=n&&n.length>0&&h["Ji"].isString(n[0])){const i=n.map(t=>h["Ji"].encodeString(t));r=this.write(i,t,e)}else r=this.write(n,t,e);return{dataId:r,shape:t,dtype:e}}refCount(t){if(this.data.has(t)){const e=this.data.get(t);return e.refCount}return 0}incRef(t){const e=this.data.get(t);e.refCount++}decRef(t){if(this.data.has(t)){const e=this.data.get(t);e.refCount--}}move(t,e,n,r,i){this.data.set(t,{values:e,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensorInfos:n}=this.data.get(t);if("complex64"===e){const t=this.readSync(n.real.dataId),e=this.readSync(n.imag.dataId);return h["de"].mergeRealAndImagArrays(t,e)}return h["Ji"].convertBackendValuesAndArrayBuffer(this.data.get(t).values,e)}bufferSync(t){const e=this.readSync(t.dataId);if("string"===t.dtype)try{const n=e.map(t=>h["Ji"].decodeString(t));return Object(h["qe"])(t.shape,t.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(h["qe"])(t.shape,t.dtype,e)}makeOutput(t,e,n){return Object(h["gf"])().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,t),this)}disposeData(t,e=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!e&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(t);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const e=h["Ji"].now();t();const n=h["Ji"].now()-e;return{kernelMs:n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){dm([t],"where");const e=this.readSync(t.dataId);return hm(t.shape,e)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}pm.nextDataId=0;
/** @license See the LICENSE file. */
const fm="4.2.0";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mm(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:s}=r;if(dm(s,t),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const o=a,u=o.data.get(s.dataId).values,c=h["Ji"].sizeFromShape(s.shape),l=n||s.dtype,d=h["Ji"].getArrayFromDType(l,c);for(let t=0;t<c;++t)d[t]=e(u[t],i);return o.makeTensorInfo(s.shape,l,d)}}function gm(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:s}=r;if(dm(s,t),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const o=a,u=o.data.get(s.dataId).values,c=n||s.dtype,l=e(u,c,i);return o.makeTensorInfo(s.shape,c,l)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(h["ih"])("cpu",()=>new pm,1);const bm=mm(h["eb"],t=>t>=0?t:Math.exp(t)-1),ym={kernelName:h["eb"],backendName:"cpu",kernelFunc:bm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vm(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const wm={kernelName:h["Ab"],backendName:"cpu",kernelFunc:vm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xm(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r;dm([i],"leakyRelu");const s=h["Ji"].sizeFromShape(i.shape),o=n.data.get(i.dataId).values,u=h["Ji"].getTypedArrayFromDType("float32",s);for(let c=0;c<o.length;c++)u[c]=o[c]<0?a*o[c]:o[c];return n.makeTensorInfo(i.shape,"float32",u)}const Om={kernelName:h["Ib"],backendName:"cpu",kernelFunc:xm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sm(t){return(e,n,r,i,a)=>{const s=h["de"].assertAndGetBroadcastShape(e,n),o=s.length,u=h["Ji"].computeStrides(s),c=h["Ji"].sizeFromShape(s),l=h["Ji"].getTypedArrayFromDType(a,c),d=e.length,p=n.length,f=h["Ji"].computeStrides(e),m=h["Ji"].computeStrides(n),g=h["de"].getBroadcastDims(e,s),b=h["de"].getBroadcastDims(n,s);if(g.length+b.length===0)for(let h=0;h<l.length;++h)l[h]=t(r[h%r.length],i[h%i.length]);else for(let y=0;y<l.length;++y){const e=h["Ji"].indexToLoc(y,o,u),n=e.slice(-d);g.forEach(t=>n[t]=0);const a=h["Ji"].locToIndex(n,d,f),s=e.slice(-p);b.forEach(t=>s[t]=0);const c=h["Ji"].locToIndex(s,p,m);l[y]=t(r[a],i[c])}return[l,s]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const km=Sm((t,e)=>t<0?e*t:t);function Tm(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;dm([r,i],"prelu");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,[o,u]=km(r.shape,i.shape,a,s,"float32");return n.makeTensorInfo(u,"float32",o)}const _m={kernelName:h["xc"],backendName:"cpu",kernelFunc:Tm},Im=mm(h["Jc"],t=>Math.max(0,t)),Cm={kernelName:h["Jc"],backendName:"cpu",kernelFunc:Im},Am=mm(h["Kc"],t=>Math.min(Math.max(0,t),6)),Em={kernelName:h["Kc"],backendName:"cpu",kernelFunc:Am};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Nm(t){return(e,n,r)=>{const i=h["Ji"].getTypedArrayFromDType(n,e.length);for(let a=0;a<e.length;++a)i[a]=t(e[a],r);return i}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jm=Nm(t=>1/(1+Math.exp(-t))),Dm=mm(h["Zc"],t=>1/(1+Math.exp(-t))),$m={kernelName:h["Zc"],backendName:"cpu",kernelFunc:Dm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rm(t,e,n,r,i){if("linear"===n)return vm({inputs:{x:e},backend:t});if("relu"===n)return Im({inputs:{x:e},backend:t});if("elu"===n)return bm({inputs:{x:e},backend:t});if("relu6"===n)return Am({inputs:{x:e},backend:t});if("prelu"===n)return Tm({inputs:{x:e,alpha:r},backend:t});if("leakyrelu"===n)return xm({inputs:{x:e},backend:t,attrs:{alpha:i}});if("sigmoid"===n)return Dm({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fm(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(o.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",s)},o}const Pm={kernelName:h["E"],backendName:"cpu",kernelFunc:Fm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mm(t,e,n="float32"){if("complex64"===n){const n=Mm(t,e,"float32"),r=Mm(t,e,"float32");return Fm({inputs:{real:n,imag:r},backend:t})}const r=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(e),n);return t.makeTensorInfo(e,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lm(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const Bm={kernelName:h["Fc"],backendName:"cpu",kernelFunc:Lm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zm(t,e,n,r){if("int32"===r){const n=Int32Array.from(t);return[e,"int32",n]}if("bool"===r){const r=h["Ji"].toTypedArray([0],n),[i,a]=Sm((t,e)=>t!==e?1:0)(e,[],t,r,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Vm(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if("complex64"===a){if("complex64"===i.dtype)return vm({inputs:{x:i},backend:n});const t=Mm(n,i.shape,i.dtype),e=Vm({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=Fm({inputs:{real:e,imag:t},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),r}if("complex64"===i.dtype){const t=Lm({inputs:{input:i},backend:n}),e=Vm({inputs:{x:t},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(t),e}if(!h["Ji"].hasEncodingLoss(i.dtype,a)){const t=vm({inputs:{x:i},backend:n});return{dataId:t.dataId,shape:t.shape,dtype:a}}const s=n.data.get(i.dataId).values,[o,u,c]=zm(s,i.shape,i.dtype,a);return n.makeTensorInfo(o,u,c)}const Um={kernelName:h["B"],backendName:"cpu",kernelFunc:Vm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wm(t,e,n,r){return null==n?({inputs:n,backend:i})=>{const{a:a,b:s}=n,o=i;dm([a,s],t);const u=o.data.get(a.dataId).values,c=o.data.get(s.dataId).values,l="string"===a.dtype?h["de"].fromUint8ToStringArray(u):u,d="string"===a.dtype?h["de"].fromUint8ToStringArray(c):c,p=r||a.dtype,[f,m]=e(a.shape,s.shape,l,d,p);return o.makeTensorInfo(m,p,f)}:({inputs:t,backend:i})=>{const{a:a,b:s}=t,o=i;if("complex64"===a.dtype||"complex64"===s.dtype){const t=Vm({inputs:{x:a},backend:o,attrs:{dtype:"complex64"}}),e=o.data.get(t.dataId),r=e.complexTensorInfos.real,i=e.complexTensorInfos.imag,u=o.data.get(r.dataId).values,c=o.data.get(i.dataId).values,l=Vm({inputs:{x:s},backend:o,attrs:{dtype:"complex64"}}),d=o.data.get(l.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=o.data.get(h.dataId).values,m=o.data.get(p.dataId).values,[g,b,y]=n(a.shape,s.shape,u,c,f,m),v=o.makeTensorInfo(y,"float32",g),w=o.makeTensorInfo(y,"float32",b),x=Fm({inputs:{real:v,imag:w},backend:o});return o.disposeIntermediateTensorInfo(t),o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(w),x}{const t=o.data.get(a.dataId).values,n=o.data.get(s.dataId).values,i=r||a.dtype,[u,c]=e(a.shape,s.shape,t,n,i);return o.makeTensorInfo(c,i,u)}}}function Gm(t){return(e,n,r,i,a,s)=>{const o=h["de"].assertAndGetBroadcastShape(e,n),u=h["Ji"].sizeFromShape(o),c=o.length,l=h["Ji"].computeStrides(o),d=h["Ji"].getTypedArrayFromDType("float32",u),p=h["Ji"].getTypedArrayFromDType("float32",u),f=h["de"].getBroadcastDims(e,o),m=h["de"].getBroadcastDims(n,o),g=h["de"].mergeRealAndImagArrays(r,i),b=h["de"].mergeRealAndImagArrays(a,s),y=e.length,v=h["Ji"].computeStrides(e),w=n.length,x=h["Ji"].computeStrides(n);if(f.length+m.length===0)for(let h=0;h<d.length;h++){const e=h%g.length,n=h%b.length,r=t(g[2*e],g[2*e+1],b[2*n],b[2*n+1]);d[h]=r.real,p[h]=r.imag}else for(let O=0;O<d.length;O++){const e=h["Ji"].indexToLoc(O,c,l),n=e.slice(-y);f.forEach(t=>n[t]=0);const r=h["Ji"].locToIndex(n,y,v),i=e.slice(-w);m.forEach(t=>i[t]=0);const a=h["Ji"].locToIndex(i,w,x),s=t(g[2*r],g[2*r+1],b[2*a],b[2*a+1]);d[O]=s.real,p[O]=s.imag}return[d,p,o]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hm=Sm((t,e)=>t+e),qm=Gm((t,e,n,r)=>({real:t+n,imag:e+r})),Jm=Wm(h["h"],Hm,qm),Km={kernelName:h["h"],backendName:"cpu",kernelFunc:Jm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xm(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,s=h["Ji"].sizeFromShape(i.shape),o=h["Ji"].inferFromImplicitShape(a,s),u=h["Ji"].sizeFromShape(o);h["Ji"].assert(s===u,()=>`The new shape (${o}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(null!=c.complexTensorInfos){const t=c.complexTensorInfos.real,e=c.complexTensorInfos.imag;t.shape=o,e.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const Ym={kernelName:h["Lc"],backendName:"cpu",kernelFunc:Xm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zm(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:s,transposeB:o}=r;dm([i,a],"matMul");const u=i.shape.length,c=a.shape.length,l=s?i.shape[u-2]:i.shape[u-1],d=o?a.shape[c-1]:a.shape[c-2],p=s?i.shape[u-1]:i.shape[u-2],f=o?a.shape[c-2]:a.shape[c-1],m=i.shape.slice(0,-2),g=a.shape.slice(0,-2),b=h["Ji"].sizeFromShape(m),y=h["Ji"].sizeFromShape(g),v=h["oe"].assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)),w=v.concat([p,f]);h["Ji"].assert(l===d,()=>`Error in matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${s} and transposeB=${o} must match.`);const x=s?[b,l,p]:[b,p,l],O=o?[y,f,d]:[y,d,f],S=Xm({inputs:{x:i},backend:n,attrs:{shape:x}}),k=Xm({inputs:{x:a},backend:n,attrs:{shape:O}}),T=s?S.shape[1]:S.shape[2],_=s?S.shape[2]:S.shape[1],I=o?k.shape[1]:k.shape[2],C=Math.max(b,y),A=n.data.get(S.dataId).values,E=n.data.get(k.dataId).values,N=h["Ji"].computeStrides(S.shape),j=h["Ji"].computeStrides(k.shape),[D,$,R]=s?[N[0],1,N[1]]:[N[0],N[1],1],[F,P,M]=o?[1,j[1],j[0]]:[j[1],1,j[0]],L=_*I,B=Object(h["qe"])([C,_,I],S.dtype),z=B.values,V=n.blockSize;for(let h=0;h<C;h++){const t=h%b,e=h%y;for(let n=0;n<_;n+=V){const r=Math.min(n+V,_);for(let i=0;i<I;i+=V){const a=Math.min(i+V,I);for(let s=0;s<T;s+=V){const o=Math.min(s+V,T);for(let u=n;u<r;u++)for(let n=i;n<a;n++){let r=0;for(let i=s;i<o;i++){const a=A[t*D+u*$+i*R],s=E[i*F+n*P+e*M];r+=a*s}z[h*L+(u*I+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(w,B.dtype,B.values)}const Qm={kernelName:h["w"],backendName:"cpu",kernelFunc:Zm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tg(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:s,preluActivationWeights:o}=e,{transposeA:u,transposeB:c,activation:l,leakyreluAlpha:d}=r;let h,p,f;const m=[],g=Zm({inputs:{a:i,b:a},attrs:{transposeA:u,transposeB:c},backend:n});h=g,s&&(p=Jm({inputs:{a:h,b:s},backend:n}),m.push(h),h=p),l&&(f=Rm(n,h,l,o,d),m.push(h),h=f);for(const b of m)n.disposeIntermediateTensorInfo(b);return h}const eg={kernelName:h["Ld"],backendName:"cpu",kernelFunc:tg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ng(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const rg=t=>{const{x:e}=t.inputs,n=t.backend;dm(e,"abs");let r=new Float32Array(h["Ji"].sizeFromShape(e.shape));const i=n.data.get(e.dataId).values;return r=ng(i),n.makeOutput(r,e.shape,e.dtype)},ig={kernelName:h["a"],backendName:"cpu",kernelFunc:rg},ag=mm(h["b"],t=>Math.acos(t)),sg={kernelName:h["b"],backendName:"cpu",kernelFunc:ag},og=mm(h["c"],t=>Math.acosh(t)),ug={kernelName:h["c"],backendName:"cpu",kernelFunc:og};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cg(t){const{inputs:e,backend:n}=t,r=e;dm(e,"addN");const i=r.map(t=>n.data.get(t.dataId).values),a=Object(h["qe"])(r[0].shape,r[0].dtype),s=a.values;for(let o=0;o<r.length;o++){const t=i[o];for(let e=0;e<s.length;e++)s[e]+=t[e]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const lg={kernelName:h["i"],backendName:"cpu",kernelFunc:cg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dg(t,e,n,r,i){const a=e.length,s=h["Ji"].sizeFromShape(e),o=h["Ji"].computeStrides(e),u=h["Ji"].computeStrides(i),c=h["Ji"].getTypedArrayFromDType(n,h["Ji"].sizeFromShape(i));for(let l=0;l<s;++l){const e=h["Ji"].indexToLoc(l,a,o),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[r[t]];const i=h["Ji"].locToIndex(n,a,u);c[i]=t[l]}return c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hg(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:a}=n;dm(i,"transpose");const s=i.shape.length,o=new Array(s);for(let d=0;d<o.length;d++)o[d]=i.shape[a[d]];const u=r.data.get(i.dataId).values,c=dg(u,i.shape,i.dtype,a,o),l=r.write(c,o,i.dtype);return{dataId:l,shape:o,dtype:i.dtype}}const pg={kernelName:h["Ed"],backendName:"cpu",kernelFunc:hg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r;dm(i,"all");const o=h["Ji"].parseAxisParam(a,i.shape);let u=o;const c=h["de"].getAxesPermutation(u,i.shape.length);let l=i;null!=c&&(l=hg({inputs:{x:i},backend:n,attrs:{perm:c}}),u=h["de"].getInnerMostAxes(u.length,i.shape.length)),h["de"].assertAxesAreInnerMostDims("all",u,l.shape.length);const[d,p]=h["de"].computeOutAndReduceShapes(l.shape,u),f=h["Ji"].sizeFromShape(p),m=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(d),l.dtype),g=n.data.get(l.dataId).values;for(let h=0;h<m.length;++h){const t=h*f;let e=g[t];for(let n=0;n<f;++n){const r=g[t+n];e=e&&r}m[h]=e}null!=c&&n.disposeIntermediateTensorInfo(l);const b=n.makeTensorInfo(d,l.dtype,m);if(s){const t=h["de"].expandShapeToKeepDim(d,o),e=Xm({inputs:{x:b},backend:n,attrs:{shape:t}});return n.disposeIntermediateTensorInfo(b),e}return b}const mg={kernelName:h["j"],backendName:"cpu",kernelFunc:fg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r;dm(i,"any");const o=h["Ji"].parseAxisParam(a,i.shape);let u=o;const c=h["de"].getAxesPermutation(u,i.shape.length);let l=i;null!=c&&(l=hg({inputs:{x:i},backend:n,attrs:{perm:c}}),u=h["de"].getInnerMostAxes(u.length,i.shape.length)),h["de"].assertAxesAreInnerMostDims("any",u,l.shape.length);const[d,p]=h["de"].computeOutAndReduceShapes(l.shape,u),f=h["Ji"].sizeFromShape(p),m=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(d),l.dtype),g=n.data.get(l.dataId).values;for(let h=0;h<m.length;++h){const t=h*f;let e=g[t];for(let n=0;n<f;++n){const r=g[t+n];e=e||r}m[h]=e}null!=c&&n.disposeIntermediateTensorInfo(l);const b=n.makeTensorInfo(d,l.dtype,m);if(s){const t=h["de"].expandShapeToKeepDim(d,o),e=Xm({inputs:{x:b},backend:n,attrs:{shape:t}});return n.disposeIntermediateTensorInfo(b),e}return b}const bg={kernelName:h["k"],backendName:"cpu",kernelFunc:gg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;dm(i,"argMax");let s=h["Ji"].parseAxisParam(a,i.shape);const o=h["de"].getAxesPermutation(s,i.shape.length);let u=i;const c=[];null!=o&&(u=hg({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(u),s=h["de"].getInnerMostAxes(s.length,u.shape.length)),s=[s[0]],h["de"].assertAxesAreInnerMostDims("argMax",s,u.shape.length);const[l,d]=h["de"].computeOutAndReduceShapes(u.shape,s),p=h["Ji"].sizeFromShape(l),f=h["Ji"].makeZerosTypedArray(p,"int32"),m=h["Ji"].sizeFromShape(d),g=n.data.get(u.dataId).values;for(let h=0;h<f.length;++h){const t=h*m;let e=g[t],n=0;for(let r=0;r<m;++r){const i=g[t+r];i>e&&(e=i,n=r)}f[h]=n}return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(l,"int32",f)}const vg={kernelName:h["l"],backendName:"cpu",kernelFunc:yg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;dm(i,"argMin");let s=h["Ji"].parseAxisParam(a,i.shape);const o=h["de"].getAxesPermutation(s,i.shape.length);let u=i;const c=[];null!=o&&(u=hg({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(u),s=h["de"].getInnerMostAxes(s.length,u.shape.length)),s=[s[0]],h["de"].assertAxesAreInnerMostDims("argMin",s,u.shape.length);const[l,d]=h["de"].computeOutAndReduceShapes(u.shape,s),p=h["Ji"].sizeFromShape(l),f=h["Ji"].makeZerosTypedArray(p,"int32"),m=h["Ji"].sizeFromShape(d),g=n.data.get(u.dataId).values;for(let h=0;h<f.length;++h){const t=h*m;let e=g[t],n=0;for(let r=0;r<m;++r){const i=g[t+r];i<e&&(e=i,n=r)}f[h]=n}return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(l,"int32",f)}const xg={kernelName:h["m"],backendName:"cpu",kernelFunc:wg},Og=mm(h["n"],t=>Math.asin(t)),Sg={kernelName:h["n"],backendName:"cpu",kernelFunc:Og},kg=mm(h["o"],t=>Math.asinh(t)),Tg={kernelName:h["o"],backendName:"cpu",kernelFunc:kg},_g=mm(h["p"],t=>Math.atan(t)),Ig={kernelName:h["p"],backendName:"cpu",kernelFunc:_g},Cg=Sm((t,e)=>Math.atan2(t,e)),Ag=Wm(h["q"],Cg),Eg={kernelName:h["q"],backendName:"cpu",kernelFunc:Ag},Ng=mm(h["r"],t=>Math.atanh(t)),jg={kernelName:h["r"],backendName:"cpu",kernelFunc:Ng};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Dg(t,e,n,r,i,a){const s=i.strideHeight,o=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,l=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,f=i.padInfo.left,m="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Object(h["qe"])(i.outShape,n),b=g.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],w=i.outShape[3];for(let h=0;h<i.batchSize;++h){const e=h*y,n=h*r[0];for(let h=0;h<i.inChannels;++h)for(let g=0;g<i.outHeight;++g){const y=g*s-p,x=Math.max(0,y),O=Math.min(i.inHeight,l+y),S=e+g*v;for(let e=0;e<i.outWidth;++e){const s=e*o-f,l=Math.max(0,s),p=Math.min(i.inWidth,d+s);let g=m,y=0,v=0;for(let e=x;e<O;e+=u){const i=n+e*r[1];for(let e=l;e<p;e+=c){const n=i+e*r[2],s=t[n+h];"max"===a&&s>g?g=s:"avg"===a&&(y+=s,v++)}if(isNaN(g))break}const k=S+e*w+h;b[k]="avg"===a?y/v:g}}}return g}function $g(t,e,n,r,i=!1,a=!1){const s=Object(h["qe"])(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,m=r.padInfo.left,g=Object(h["qe"])(e,n,t);for(let h=0;h<r.batchSize;++h)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.outHeight;++e){const n=e*o-f;let b=n;while(b<0)b+=c;const y=Math.min(r.inHeight,d+n);for(let o=0;o<r.outWidth;++o){const d=o*u-m;let f=d;while(f<0)f+=l;const v=Math.min(r.inWidth,p+d);let w=Number.NEGATIVE_INFINITY,x=-1;for(let e=b;e<y;e+=c){const s=e-n;for(let n=f;n<v;n+=l){const o=n-d,u=g.get(h,e,n,t);u>w&&(w=u,x=i?a?((h*r.inHeight+e)*r.inWidth+n)*r.inChannels+t:(e*r.inWidth+n)*r.inChannels+t:s*p+o)}}s.set(x,h,e,o,t)}}return s}function Rg(t,e,n,r,i,a){const s=i.strideDepth,o=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,l=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,f=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=i.padInfo.front,b=i.padInfo.top,y=i.padInfo.left,v="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Object(h["qe"])(i.outShape,n),x=w.values,O=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[3]*i.outShape[4],T=i.outShape[4];for(let h=0;h<i.batchSize;++h){const e=h*O,n=h*r[0];for(let h=0;h<i.inChannels;++h)for(let w=0;w<i.outDepth;++w){const O=w*s-g;let _=O;while(_<0)_+=c;const I=Math.min(i.inDepth,p+O),C=e+w*S;for(let e=0;e<i.outHeight;++e){const s=e*o-b;let p=s;while(p<0)p+=l;const g=Math.min(i.inHeight,f+s),w=C+e*k;for(let e=0;e<i.outWidth;++e){const s=e*u-y;let o=s;while(o<0)o+=d;const f=Math.min(i.inWidth,m+s),b=w+e*T;let O=v,S=0,k=0;for(let e=_;e<I;e+=c){const i=n+e*r[1];for(let e=p;e<g;e+=l){const n=i+e*r[2];for(let e=o;e<f;e+=d){const i=n+e*r[3],s=t[i+h];if("max"===a&&s>O?O=s:"avg"===a&&(S+=s,k++),isNaN(O))break}if(isNaN(O))break}if(isNaN(O))break}const C=b+h;x[C]="avg"===a?S/Math.max(k,1):O}}}}return w}function Fg(t,e){const n=Object(h["qe"])(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,m=e.padInfo.left;for(let h=0;h<e.batchSize;++h)for(let g=0;g<e.inChannels;++g)for(let b=0;b<e.outDepth;++b){const y=b*r-p;let v=y;while(v<0)v+=s;const w=Math.min(e.inDepth,c+y);for(let r=0;r<e.outHeight;++r){const c=r*i-f;let p=c;while(p<0)p+=o;const x=Math.min(e.inHeight,l+c);for(let i=0;i<e.outWidth;++i){const f=i*a-m;let O=f;while(O<0)O+=u;const S=Math.min(e.inWidth,d+f);let k=Number.NEGATIVE_INFINITY,T=-1;for(let e=v;e<w;e+=s){const n=e-y;for(let r=p;r<x;r+=o){const i=r-c;for(let a=O;a<S;a+=u){const s=a-f,o=t.get(h,e,r,a,g);o>=k&&(k=o,T=n*l*d+i*l+s)}}}n.set(T,h,b,r,i,g)}}}return n}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;dm(i,"avgPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:u}=r,c=1;h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const l=h["de"].computePool2DInfo(i.shape,a,s,c,o,u);let d;if(1===l.filterWidth&&1===l.filterHeight&&h["Ji"].arraysEqual(l.inShape,l.outShape))d=vm({inputs:{x:i},backend:n});else{const t=n.data.get(i.dataId).values,e=h["Ji"].computeStrides(i.shape),r=Dg(t,i.shape,i.dtype,e,l,"avg");d=n.makeTensorInfo(l.outShape,i.dtype,r.values)}return d}const Mg={kernelName:h["s"],backendName:"cpu",kernelFunc:Pg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:s,pad:o,dimRoundingMode:u,dataFormat:c}=r;dm(i,"avgPool3d");const l=h["de"].computePool3DInfo(i.shape,a,s,1,o,u,c),d=n.data.get(i.dataId).values,p=Rg(d,i.shape,i.dtype,h["Ji"].computeStrides(i.shape),l,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const Bg={kernelName:h["t"],backendName:"cpu",kernelFunc:Lg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:c}=r;dm([i,a],"avgPool3DGrad");const l=h["de"].computePool3DInfo(a.shape,s,o,1,u,c),d=l.strideDepth,p=l.strideHeight,f=l.strideWidth,m=l.filterDepth,g=l.filterHeight,b=l.filterWidth,y=l.dilationDepth,v=l.dilationHeight,w=l.dilationWidth,x=l.effectiveFilterDepth,O=l.effectiveFilterHeight,S=l.effectiveFilterWidth,k=x-1-l.padInfo.front,T=S-1-l.padInfo.left,_=O-1-l.padInfo.top,I=Object(h["qe"])(a.shape,"float32"),C=1/(m*g*b),A=n.bufferSync(i);for(let h=0;h<l.batchSize;++h)for(let t=0;t<l.inChannels;++t)for(let e=0;e<l.inDepth;++e)for(let n=0;n<l.inHeight;++n)for(let r=0;r<l.inWidth;++r){const i=e-k,a=n-_,s=r-T;let o=0;for(let e=0;e<x;e+=y){const n=(i+e)/d;if(!(n<0||n>=l.outDepth||Math.floor(n)!==n))for(let e=0;e<O;e+=v){const r=(a+e)/p;if(!(r<0||r>=l.outHeight||Math.floor(r)!==r))for(let e=0;e<S;e+=w){const i=(s+e)/f;if(i<0||i>=l.outWidth||Math.floor(i)!==i)continue;const a=A.get(h,n,r,i,t);o+=a}}}I.set(o*C,h,e,n,r,t)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const Vg={kernelName:h["u"],backendName:"cpu",kernelFunc:zg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ug(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,s=a;dm([i,a],"avgPoolGrad");const{filterSize:o,strides:u,pad:c}=r,l=h["de"].computePool2DInfo(s.shape,o,u,1,c),d=l.strideHeight,p=l.strideWidth,f=l.filterHeight,m=l.filterWidth,g=l.dilationHeight,b=l.dilationWidth,y=l.effectiveFilterHeight,v=l.effectiveFilterWidth,w=v-1-l.padInfo.left,x=y-1-l.padInfo.top,O=Object(h["qe"])(s.shape,"float32"),S=1/(f*m),k=n.data.get(i.dataId).values,T=Object(h["qe"])(i.shape,"float32",k);for(let h=0;h<l.batchSize;++h)for(let t=0;t<l.inChannels;++t)for(let e=0;e<l.inHeight;++e)for(let n=0;n<l.inWidth;++n){const r=e-x,i=n-w;let a=0;for(let e=0;e<y;e+=g){const n=(r+e)/d;if(!(n<0||n>=l.outHeight||Math.floor(n)!==n))for(let e=0;e<v;e+=b){const r=(i+e)/p;if(r<0||r>=l.outWidth||Math.floor(r)!==r)continue;const s=T.get(h,n,r,t);a+=s}}O.set(a*S,h,e,n,t)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const Wg={kernelName:h["v"],backendName:"cpu",kernelFunc:Ug};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:a,offset:s,mean:o,variance:u}=e;h["Ji"].assert(o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),h["Ji"].assert(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),h["Ji"].assert(null==a||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),dm([i,o,u,a,s],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const l=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=n.data.get(u.dataId).values,f=a?n.data.get(a.dataId).values:new Float32Array([1]),m=s?n.data.get(s.dataId).values:new Float32Array([0]),g=new Float32Array(l.length),b=m.length,y=f.length,v=p.length,w=d.length;let x=0,O=0,S=0,k=0;for(let h=0;h<l.length;++h)g[h]=m[x++]+(l[h]-d[O++])*f[S++]/Math.sqrt(p[k++]+c),x>=b&&(x=0),O>=w&&(O=0),S>=y&&(S=0),k>=v&&(k=0);return n.makeTensorInfo(i.shape,i.dtype,g)}const Hg={kernelName:h["sb"],backendName:"cpu",kernelFunc:Gg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qg(t,e,n,r,i){const a=h["Rh"].isSliceContinous(r,e,n),s=h["Ji"].sizeFromShape(n),o=h["Ji"].computeStrides(r);if(a){const n=h["Rh"].computeFlatOffset(e,o);return"string"===i?t.slice(n,n+s):t.subarray(n,n+s)}const u="string"===i?h["de"].fromUint8ToStringArray(t):t,c=Object(h["qe"])(r,i,u),l=Object(h["qe"])(n,i);for(let d=0;d<l.size;++d){const t=l.indexToLoc(d),n=t.map((t,n)=>t+e[n]);l.set(c.get(...n),...t)}return"string"===i?h["de"].fromStringArrayToUint8(l.values):l.values}function Jg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:s}=r;dm(i,"slice");const[o,u]=h["Rh"].parseSliceParams(i,a,s);h["Rh"].assertParamsValid(i,o,u);const c=n.data.get(i.dataId).values,l=qg(c,o,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,l)}const Kg={kernelName:h["dd"],backendName:"cpu",kernelFunc:Jg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:s}=r;dm([i],"batchToSpaceND");const o=a.reduce((t,e)=>t*e),u=h["de"].getReshaped(i.shape,a,o),c=h["de"].getPermuted(u.length,a.length),l=h["de"].getReshapedPermuted(i.shape,a,o),d=h["de"].getSliceBeginCoords(s,a.length),p=h["de"].getSliceSize(l,s,a.length),f=Xm({inputs:{x:i},backend:n,attrs:{shape:u}}),m=hg({inputs:{x:f},backend:n,attrs:{perm:c}}),g=Xm({inputs:{x:m},backend:n,attrs:{shape:l}}),b=Jg({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}const Yg={kernelName:h["x"],backendName:"cpu",kernelFunc:Xg};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zg(t,e,n,r,i){const a=h["Ji"].sizeFromShape(r),s=h["Ji"].makeZerosTypedArray(i,n);for(let o=0;o<t.length;o++){const n=t[o];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(s[n]+=a>0?e[o]:1)}return s}function Qg(t,e,n,r=!1){const i=t.shape[0],a=t.shape[1],s=Object(h["qe"])([i,n],e.dtype);for(let o=0;o<i;o++)for(let i=0;i<a;i++){const a=t.get(o,i);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?s.set(1,o,a):e.size>0?s.set(s.get(o,a)+e.get(o,i),o,a):s.set(s.get(o,a)+1,o,a))}return s}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:s}=r,o=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=Zg(o,u,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,c)}const eb={kernelName:h["y"],backendName:"cpu",kernelFunc:tb};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nb(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,o=h["de"].assertAndGetBroadcastShape(Array.from(a),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const rb={kernelName:h["z"],backendName:"cpu",kernelFunc:nb},ib=Nm(t=>Math.ceil(t)),ab=gm(h["C"],ib),sb={kernelName:h["C"],backendName:"cpu",kernelFunc:ab},ob=mm(h["D"],(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),ub={kernelName:h["D"],backendName:"cpu",kernelFunc:ob},cb=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(h["Ji"].sizeFromShape(e.shape)),i=n.data.get(e.dataId),a=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values;for(let c=0;c<o.length;c++){const t=o[c],e=u[c];r[c]=Math.hypot(t,e)}return n.makeOutput(r,e.shape,"float32")},lb={kernelName:h["F"],backendName:"cpu",kernelFunc:cb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function db(t,e,n,r){const i=h["Ji"].getArrayFromDType(n,h["Ji"].sizeFromShape(e));if(r&&"string"!==n){let e=0;t.forEach(t=>{const n=h["Ji"].sizeFromShape(t.shape);i.set(t.vals,e),e+=n})}else{let r=0;t.forEach(t=>{const a="string"===n?h["de"].fromUint8ToStringArray(t.vals):t.vals;let s=0;for(let n=0;n<t.shape[0];++n){const o=n*e[1]+r;for(let e=0;e<t.shape[1];++e)i[o+e]=a[s++]}r+=t.shape[1]})}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hb(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const pb={kernelName:h["Bb"],backendName:"cpu",kernelFunc:hb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fb(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=h["Ji"].parseAxisParam(i,e[0].shape)[0],s=e.map(t=>t.shape);h["de"].assertParamsConsistent(s,a);let o=h["de"].computeOutShape(e.map(t=>t.shape),a);if(0===h["Ji"].sizeFromShape(o))return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(t=>h["Ji"].sizeFromShape(t.shape)>0);if(1===u.length)return vm({inputs:{x:u[0]},backend:n});if("complex64"===u[0].dtype){const t=u.map(t=>Lm({inputs:{input:t},backend:n})),e=u.map(t=>hb({inputs:{input:t},backend:n})),r=fb({inputs:t,backend:n,attrs:{axis:a}}),i=fb({inputs:e,backend:n,attrs:{axis:a}}),s=Fm({inputs:{real:r,imag:i},backend:n});return t.forEach(t=>n.disposeIntermediateTensorInfo(t)),e.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),s}const c=u.map(t=>{const e=h["Ji"].sizeFromShape(t.shape.slice(a)),r=[-1,e];return Xm({inputs:{x:t},backend:n,attrs:{shape:r}})}),l=c.map(t=>({vals:n.data.get(t.dataId).values,shape:t.shape}));o=h["de"].computeOutShape(c.map(t=>t.shape),1);const d=1===c[0].shape[0],p=db(l,o,e[0].dtype,d),f=h["de"].computeOutShape(u.map(t=>t.shape),a),m=n.makeTensorInfo(f,e[0].dtype,p);return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),m}const mb={kernelName:h["G"],backendName:"cpu",kernelFunc:fb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dataFormat:u,dilations:c,dimRoundingMode:l}=r;dm([i,a],"conv2d");const d=h["de"].convertConv2DDataFormat(u),p=h["de"].computeConv2DInfo(i.shape,a.shape,s,c,o,l,!1,d),f=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,b=p.dilationWidth,y=p.padInfo.left,v=p.padInfo.top,w="channelsLast"===p.dataFormat,x=new h["Ad"](p.outShape,i.dtype),O=h["Ji"].computeStrides(i.shape),S=h["Ji"].computeStrides(a.shape),k=O[0],T=w?O[1]:O[2],_=w?O[2]:1,I=w?1:O[1],C=x.strides[0],A=w?x.strides[1]:x.strides[2],E=w?x.strides[2]:1,N=w?1:x.strides[1],j=n.data.get(i.dataId).values,D=n.data.get(a.dataId).values,$=x.values;for(let h=0;h<p.batchSize;++h){const t=h*k,e=h*C;for(let n=0;n<p.outHeight;++n){const r=e+n*A,i=n*p.strideHeight-v;for(let e=0;e<f;++e){const n=i+e*g;if(n<0||n>=p.inHeight)continue;const a=e*S[0],s=t+n*T;for(let t=0;t<p.outWidth;++t){const e=r+t*E,n=t*p.strideWidth-y;for(let t=0;t<m;++t){const r=n+t*b;if(r<0||r>=p.inWidth)continue;const i=a+t*S[1],o=s+r*_;let u=i;for(let t=0;t<p.inChannels;++t){const n=j[o+t*I];for(let t=0;t<p.outChannels;++t)$[e+t*N]+=n*D[u+t];u+=p.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,$)}const bb={kernelName:h["H"],backendName:"cpu",kernelFunc:gb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:c,filterShape:l}=r;dm([i,a],"conv2dBackpropFilter");const d=h["de"].convertConv2DDataFormat(u),p=h["de"].computeConv2DInfo(i.shape,l,s,1,o,c,!1,d),{strideHeight:f,strideWidth:m,filterHeight:g,filterWidth:b}=p,y="channelsLast"===p.dataFormat,v=new h["Ad"](p.filterShape,"float32"),w=p.padInfo.left,x=p.padInfo.top,O=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,k=new h["Ad"](i.shape,i.dtype,O),T=new h["Ad"](a.shape,a.dtype,S);for(let h=0;h<g;++h){const t=Math.max(0,Math.ceil((x-h)/f)),e=Math.min(p.outHeight,(p.inHeight+x-h)/f);for(let n=0;n<b;++n){const r=Math.max(0,Math.ceil((w-n)/m)),i=Math.min(p.outWidth,(p.inWidth+w-n)/m);for(let a=0;a<p.inChannels;++a)for(let s=0;s<p.outChannels;++s){let o=0;for(let u=0;u<p.batchSize;++u)for(let c=t;c<e;++c){const t=h+c*f-x;for(let e=r;e<i;++e){const r=n+e*m-w;o+=y?k.get(u,t,r,a)*T.get(u,c,e,s):k.get(u,a,t,r)*T.get(u,s,c,e)}}v.set(o,h,n,a,s)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const vb={kernelName:h["I"],backendName:"cpu",kernelFunc:yb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wb(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:s,strides:o,pad:u,dataFormat:c,dimRoundingMode:l}=r;dm([i,a],"conv2dBackpropInput");const d=h["Ji"].computeStrides(a.shape),p=h["Ji"].computeStrides(i.shape);let f=h["de"].convertConv2DDataFormat(c);const m=h["de"].computeConv2DInfo(s,a.shape,o,1,u,l,!1,f),g=new h["Ad"](m.inShape,"float32"),b=g.values,y=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,[w,x,O]=d,{batchSize:S,filterHeight:k,filterWidth:T,inChannels:_,inHeight:I,inWidth:C,outChannels:A,outHeight:E,outWidth:N,strideHeight:j,strideWidth:D}=m;f=m.dataFormat;const $=k-1-m.padInfo.top,R=T-1-m.padInfo.left,F="channelsLast"===f,P=g.strides[0],M=F?g.strides[1]:g.strides[2],L=F?g.strides[2]:1,B=F?1:g.strides[1],z=p[0],V=F?p[1]:p[2],U=F?p[2]:1,W=F?1:p[1];for(let h=0;h<S;++h)for(let t=0;t<_;++t)for(let e=0;e<I;++e){const n=e-$,r=Math.max(0,Math.ceil(n/j)),i=Math.min(E,(k+n)/j);for(let a=0;a<C;++a){const s=a-R,o=Math.max(0,Math.ceil(s/D)),u=Math.min(N,(T+s)/D);let c=0;for(let e=r;e<i;++e){const r=e*j-n;for(let n=o;n<u;++n){const i=n*D-s,a=z*h+V*e+U*n,o=w*(k-1-r)+x*(T-1-i)+O*t;for(let t=0;t<A;++t){const e=y[a+W*t],n=v[o+t];c+=e*n}}}const l=P*h+M*e+L*a+B*t;b[l]=c}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const xb={kernelName:h["J"],backendName:"cpu",kernelFunc:wb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ob(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dilations:u}=r;dm([i,a],"conv3d");const c=h["de"].computeConv3DInfo(i.shape,a.shape,s,u,o),{filterDepth:l,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:m,dilationWidth:g,padInfo:b}=c,y=b.front,v=b.left,w=b.top,x=new h["Ad"](c.outShape,i.dtype),O=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,k=x.values,T=h["Ji"].computeStrides(i.shape),_=h["Ji"].computeStrides(a.shape);for(let h=0;h<c.batchSize;++h){const t=h*T[0],e=h*x.strides[0];for(let n=0;n<c.outDepth;++n){const r=e+n*x.strides[1],i=n*c.strideDepth-y;for(let e=0;e<l;++e){const n=i+e*f;if(n<0||n>=c.inDepth)continue;const a=e*_[0],s=t+n*T[1];for(let t=0;t<c.outHeight;++t){const e=r+t*x.strides[2],n=t*c.strideHeight-w;for(let t=0;t<d;++t){const r=n+t*m;if(r<0||r>=c.inHeight)continue;const i=a+t*_[1],o=s+r*T[2];for(let t=0;t<c.outWidth;++t){const n=e+t*c.outChannels,r=t*c.strideWidth-v;for(let t=0;t<p;++t){const e=r+t*g;if(e<0||e>=c.inWidth)continue;const a=i+t*_[2],s=o+e*c.inChannels;let u=a;for(let t=0;t<c.inChannels;++t){const e=O[s+t];for(let t=0;t<c.outChannels;++t)k[n+t]+=e*S[u+t];u+=c.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Sb={kernelName:h["K"],backendName:"cpu",kernelFunc:Ob};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:s,pad:o,filterShape:u}=r;dm([i,a],"conv3dBackpropFilterV2");const c=h["Ji"].computeStrides(i.shape),l=h["Ji"].computeStrides(a.shape),d=h["de"].computeConv3DInfo(i.shape,u,s,1,o),p=d.strideDepth,f=d.strideHeight,m=d.strideWidth,g=d.filterDepth,b=d.filterHeight,y=d.filterWidth,v=new h["Ad"](d.filterShape,"float32"),w=v.values,[x,O,S,k]=v.strides,T=n.data.get(a.dataId).values,[_,I,C,A]=l,E=n.data.get(i.dataId).values,[N,j,D,$]=c,R=d.padInfo.front,F=d.padInfo.left,P=d.padInfo.top;for(let h=0;h<g;++h){const t=Math.max(0,Math.ceil((R-h)/p)),e=Math.min(d.outDepth,(d.inDepth+R-h)/p),n=h*x;for(let r=0;r<b;++r){const i=Math.max(0,Math.ceil((P-r)/f)),a=Math.min(d.outHeight,(d.inHeight+P-r)/f),s=r*O+n;for(let n=0;n<y;++n){const o=Math.max(0,Math.ceil((F-n)/m)),u=Math.min(d.outWidth,(d.inWidth+F-n)/m),c=n*S+s;for(let s=0;s<d.inChannels;++s){const l=s*k+c;for(let c=0;c<d.outChannels;++c){let g=0;for(let l=0;l<d.batchSize;++l){const d=l*N,b=l*_;for(let l=t;l<e;++l){const t=h+l*p-R,e=t*j+d,y=l*I+b;for(let l=i;l<a;++l){const t=r+l*f-P,i=t*D+e,a=l*C+y;for(let e=o;e<u;++e){const t=n+e*m-F,r=t*$+i,o=e*A+a;g+=E[r+s]*T[o+c]}}}}w[l+c]=g}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Tb={kernelName:h["L"],backendName:"cpu",kernelFunc:kb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _b(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:s,strides:o,inputShape:u}=r;dm([i],"conv3dBackpropInputV2");const c=h["Ji"].computeStrides(i.shape),l=h["Ji"].computeStrides(a.shape),d=h["de"].computeConv3DInfo(u,a.shape,o,1,s),p=new h["Ad"](d.inShape,"float32"),f=p.values,[m,g,b,y]=p.strides,v=n.data.get(i.dataId).values,[w,x,O,S]=c,k=n.data.get(a.dataId).values,[T,_,I,C]=l,{batchSize:A,filterDepth:E,filterHeight:N,filterWidth:j,inChannels:D,inDepth:$,inHeight:R,inWidth:F,outChannels:P,outDepth:M,outHeight:L,outWidth:B,strideDepth:z,strideHeight:V,strideWidth:U}=d,W=E-1-d.padInfo.front,G=N-1-d.padInfo.top,H=j-1-d.padInfo.left;for(let h=0;h<A;++h)for(let t=0;t<D;++t)for(let e=0;e<$;++e){const n=e-W,r=Math.max(0,Math.ceil(n/z)),i=Math.min(M,(E+n)/z);for(let a=0;a<R;++a){const s=a-G,o=Math.max(0,Math.ceil(s/V)),u=Math.min(L,(N+s)/V);for(let c=0;c<F;++c){const l=c-H,d=Math.max(0,Math.ceil(l/U)),p=Math.min(B,(j+l)/U);let A=0;for(let e=r;e<i;++e){const r=e*z-n;for(let n=o;n<u;++n){const i=n*V-s;for(let a=d;a<p;++a){const s=a*U-l,o=w*h+x*e+O*n+S*a,u=T*(E-1-r)+_*(N-1-i)+I*(j-1-s)+C*t;for(let t=0;t<P;++t){const e=v[o+t],n=k[u+t];A+=e*n}}}}f[m*h+g*e+b*a+y*c+t]=A}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Ib={kernelName:h["M"],backendName:"cpu",kernelFunc:_b},Cb=mm(h["N"],t=>Math.cos(t)),Ab={kernelName:h["N"],backendName:"cpu",kernelFunc:Cb},Eb=mm(h["O"],t=>Math.cosh(t)),Nb={kernelName:h["O"],backendName:"cpu",kernelFunc:Eb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jb(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:s}=e,{cropSize:o,method:u,extrapolationValue:c}=r,[l,d,p,f]=i.shape,m=a.shape[0],[g,b]=o,y=Object(h["qe"])([m,g,b,f],"float32"),v=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,O=h["Ji"].computeStrides(i.shape),S=h["Ji"].computeStrides(y.shape);for(let h=0;h<m;h++){const t=4*h,e=v[t],n=v[t+1],r=v[t+2],i=v[t+3],a=w[h];if(a>=l)continue;const s=g>1?(r-e)*(d-1)/(g-1):0,o=b>1?(i-n)*(p-1)/(b-1):0;for(let l=0;l<g;l++){const t=g>1?e*(d-1)+l*s:.5*(e+r)*(d-1);if(t<0||t>d-1)for(let e=0;e<b;e++)for(let t=0;t<f;t++){const n=t+e*S[2]+l*S[1]+h*S[0];y.values[n]=c}else if("bilinear"===u){const e=Math.floor(t),r=Math.ceil(t),s=t-e;for(let t=0;t<b;t++){const u=b>1?n*(p-1)+t*o:.5*(n+i)*(p-1);if(u<0||u>p-1){for(let e=0;e<f;e++){const n=e+t*S[2]+l*S[1]+h*S[0];y.values[n]=c}continue}const d=Math.floor(u),m=Math.ceil(u),g=u-d;for(let n=0;n<f;n++){let i=n+d*O[2]+e*O[1]+a*O[0];const o=x[i];i=n+m*O[2]+e*O[1]+a*O[0];const u=x[i];i=n+d*O[2]+r*O[1]+a*O[0];const c=x[i];i=n+m*O[2]+r*O[1]+a*O[0];const p=x[i],f=o+(u-o)*g,b=c+(p-c)*g;i=n+t*S[2]+l*S[1]+h*S[0],y.values[i]=f+(b-f)*s}}}else for(let e=0;e<b;++e){const r=b>1?n*(p-1)+e*o:.5*(n+i)*(p-1);if(r<0||r>p-1){for(let t=0;t<f;t++){const n=t+e*S[2]+l*S[1]+h*S[0];y.values[n]=c}continue}const s=Math.round(r),u=Math.round(t);for(let t=0;t<f;t++){const n=t+s*O[2]+u*O[1]+a*O[0],r=t+e*S[2]+l*S[1]+h*S[0];y.values[r]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Db={kernelName:h["P"],backendName:"cpu",kernelFunc:jb};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $b(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:s,reverse:o}=r;dm(i,"cumprod");const u=h["de"].getAxesPermutation([a],i.shape.length);let c=i;null!=u&&(c=hg({inputs:{x:i},backend:n,attrs:{perm:u}}));const l=h["de"].getInnerMostAxes(1,i.shape.length)[0];if(l!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${l}`);const d=Object(h["Hi"])(c.dtype,"int32"),p=h["Ji"].makeOnesTypedArray(h["Ji"].sizeFromShape(c.shape),d),f=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=o?(t,e)=>t+m-e-1:(t,e)=>t+e;for(let h=0;h<f.length;h+=m)for(let t=0;t<m;t++){const e=g(h,t);if(0===t)p[e]=s?1:f[e];else{const n=g(h,t-1);p[e]=s?f[n]*p[n]:f[e]*p[n]}}const b=n.makeTensorInfo(c.shape,d,p);if(null!=u){const t=h["de"].getUndoAxesPermutation(u),e=hg({inputs:{x:b},backend:n,attrs:{perm:t}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),e}return b}const Rb={kernelName:h["Q"],backendName:"cpu",kernelFunc:$b};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:s,reverse:o}=r;dm(i,"cumsum");const u=h["de"].getAxesPermutation([a],i.shape.length);let c=i;null!=u&&(c=hg({inputs:{x:i},backend:n,attrs:{perm:u}}));const l=h["de"].getInnerMostAxes(1,i.shape.length)[0];if(l!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${l}`);const d=Object(h["Hi"])(c.dtype,"int32"),p=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(c.shape),d),f=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=o?(t,e)=>t+m-e-1:(t,e)=>t+e;for(let h=0;h<f.length;h+=m)for(let t=0;t<m;t++){const e=g(h,t);if(0===t)p[e]=s?0:f[e];else{const n=g(h,t-1);p[e]=s?f[n]+p[n]:f[e]+p[n]}}const b=n.makeTensorInfo(c.shape,d,p);if(null!=u){const t=h["de"].getUndoAxesPermutation(u),e=hg({inputs:{x:b},backend:n,attrs:{perm:t}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),e}return b}const Pb={kernelName:h["R"],backendName:"cpu",kernelFunc:Fb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:s,binaryOutput:o}=r;if(1===i.shape.length){const t=n.data.get(i.dataId).values,e=n.data.get(a.dataId).values,r=Zg(t,e,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,r)}if(2===i.shape.length){const t=n.bufferSync(i),e=n.bufferSync(a),r=Qg(t,e,s,o);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+i.shape.length+".")}const Lb={kernelName:h["T"],backendName:"cpu",kernelFunc:Mb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:s}=r;h["Ji"].assert("NHWC"===s,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+s);const o=i.shape[0],u=i.shape[1],c=i.shape[2],l=i.shape[3],d=u*a,p=c*a,f=l/(a*a),m=n.data.get(i.dataId).values,g=new Float32Array(o*d*p*f);let b=0;for(let h=0;h<o;++h)for(let t=0;t<d;++t){const e=Math.floor(t/a),n=t%a;for(let t=0;t<p;++t){const r=Math.floor(t/a),i=t%a,s=(n*a+i)*f;for(let t=0;t<f;++t){const n=t+s,i=n+l*(r+c*(e+u*h));g[b++]=m[i]}}}return n.makeTensorInfo([o,d,p,f],i.dtype,g)}const zb={kernelName:h["U"],backendName:"cpu",kernelFunc:Bb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dilations:u,dimRoundingMode:c}=r;dm([i,a],"depthwiseConv2DNative");const l=h["Ji"].computeStrides(i.shape),d=h["Ji"].computeStrides(a.shape);let p=u;null==p&&(p=[1,1]),h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);const f=h["de"].computeConv2DInfo(i.shape,a.shape,s,p,o,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:b,dilationWidth:y,padInfo:v}=f,w=v.left,x=v.top,O=f.outChannels/f.inChannels,S=new h["Ad"](f.outShape,i.dtype),k=n.data.get(i.dataId).values,T=n.data.get(a.dataId).values,_=S.values;for(let h=0;h<f.batchSize;++h){const t=h*l[0],e=h*S.strides[0];for(let n=0;n<f.outHeight;++n){const r=e+n*S.strides[1],i=n*f.strideHeight-x;for(let e=0;e<m;++e){const n=i+e*b;if(n<0||n>=f.inHeight)continue;const a=e*d[0],s=t+n*l[1];for(let t=0;t<f.outWidth;++t){const e=r+t*S.strides[2],n=t*f.strideWidth-w;for(let t=0;t<g;++t){const r=n+t*y;if(r<0||r>=f.inWidth)continue;const i=a+t*d[1],o=s+r*f.inChannels;let u=e,c=i;for(let t=0;t<f.inChannels;++t){const e=k[o+t];for(let t=0;t<O;++t)_[u+t]+=e*T[c+t];u+=O,c+=O}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Ub={kernelName:h["V"],backendName:"cpu",kernelFunc:Vb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:c,filterShape:l}=r;dm([i,a],"depthwiseConv2dNativeBackpropFilter");const d=h["de"].computeConv2DInfo(i.shape,l,s,o,u,c,!0),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,b=new h["Ad"](d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,w=d.outChannels/d.inChannels,x=n.data.get(i.dataId).values,O=new h["Ad"](i.shape,i.dtype,x),S=n.data.get(a.dataId).values,k=new h["Ad"](a.shape,a.dtype,S);for(let h=0;h<m;++h){const t=Math.max(0,Math.ceil((v-h)/p)),e=Math.min(d.outHeight,(d.inHeight+v-h)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/f)),i=Math.min(d.outWidth,(d.inWidth+y-n)/f);for(let a=0;a<d.outChannels;++a){const s=Math.trunc(a/w),o=a%w;let u=0;for(let c=0;c<d.batchSize;++c)for(let o=t;o<e;++o){const t=h+o*p-v;for(let e=r;e<i;++e){const r=n+e*f-y;u+=O.get(c,t,r,s)*k.get(c,o,e,a)}}b.set(u,h,n,s,o)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Gb={kernelName:h["W"],backendName:"cpu",kernelFunc:Wb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hb(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:c,inputShape:l}=r;dm([i,a],"depthwiseConv2DNativeBackpropInput");const d=h["Ji"].computeStrides(i.shape),p=h["Ji"].computeStrides(a.shape),f=h["de"].computeConv2DInfo(l,a.shape,s,o,u,c,!0),m=new h["Ad"](f.inShape,"float32"),g=m.values,[b,y,v]=m.strides,w=n.data.get(i.dataId).values,[x,O,S]=d,k=n.data.get(a.dataId).values,[T,_,I]=p,{batchSize:C,filterHeight:A,filterWidth:E,inChannels:N,inHeight:j,inWidth:D,outChannels:$,outHeight:R,outWidth:F,strideHeight:P,strideWidth:M}=f,L=A-1-f.padInfo.top,B=E-1-f.padInfo.left,z=$/N;for(let h=0;h<C;++h)for(let t=0;t<N;++t)for(let e=0;e<j;++e){const n=e-L,r=Math.max(0,Math.ceil(n/P)),i=Math.min(R,(A+n)/P);for(let a=0;a<D;++a){const s=a-B,o=Math.max(0,Math.ceil(s/M)),u=Math.min(F,(E+s)/M);let c=0;for(let e=r;e<i;++e){const r=e*P-n;for(let n=o;n<u;++n){const i=n*M-s,a=x*h+O*e+S*n,o=T*(A-1-r)+_*(E-1-i)+I*t;for(let e=0;e<z;++e){const n=t*z+e,r=w[a+n],i=k[o+e];c+=r*i}}}g[b*h+y*e+v*a+t]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const qb={kernelName:h["X"],backendName:"cpu",kernelFunc:Hb};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jb(t){const{inputs:e,backend:n}=t,{x:r}=e,i=h["Ji"].sizeFromShape(r.shape),a=n.data.get(r.dataId).values,s=Object(h["qe"])([i,i],r.dtype),o=s.values;for(let c=0;c<a.length;c++)o[c*i+c]=a[c];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,s.dtype,s.values)}const Kb={kernelName:h["Y"],backendName:"cpu",kernelFunc:Jb},Xb={kernelName:h["Z"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:a,pad:s,dilations:o}=n,u=e,c=u.data.get(r.dataId).values,l=r.shape.length,d=u.data.get(i.dataId).values,p=i.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:b,outHeight:y,outWidth:v,padInfo:w,strideHeight:x,strideWidth:O,filterHeight:S,filterWidth:k,dilationHeight:T,dilationWidth:_,outShape:I}=h["de"].computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",o),C=h["Ji"].sizeFromShape(I),A=I.length,E=h["Ji"].getArrayFromDType(r.dtype,C);for(let j=0;j<f;++j)for(let t=0;t<y;++t){const e=t*x-w.top;for(let n=0;n<v;++n){const a=n*O-w.left;for(let s=0;s<b;++s){let o=Number.MIN_SAFE_INTEGER;for(let t=0;t<S;++t){const n=e+t*T;if(n>=0&&n<m)for(let e=0;e<k;++e){const u=a+e*_;if(u>=0&&u<g){const a=h["Ji"].locToIndex([j,n,u,s],l,h["Ji"].computeStrides(r.shape)),f=h["Ji"].locToIndex([t,e,s],p,h["Ji"].computeStrides(i.shape)),m=c[a]+d[f];m>o&&(o=m)}}}const u=h["Ji"].locToIndex([j,t,n,s],A,h["Ji"].computeStrides(I));E[u]=o}}}const N=u.write(h["Ji"].toTypedArray(E,r.dtype),I,r.dtype);return{dataId:N,shape:I,dtype:r.dtype}}},Yb={kernelName:h["ab"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:s,pad:o,dilations:u}=n,c=e,l=h["Ji"].toNestedArray(r.shape,c.data.get(r.dataId).values),d=h["Ji"].toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:v,strideHeight:w,strideWidth:x,filterHeight:O,filterWidth:S,dilationHeight:k,dilationWidth:T,outShape:_}=h["de"].computeDilation2DInfo(r.shape,i.shape,s,o,"NHWC",u);h["Ji"].assert(a.rank===_.length,()=>`Error in ${h["ab"]}, dy must have the same rank as output ${_.length}, but got `+a.rank);const I=h["Ji"].toNestedArray(_,c.data.get(a.dataId).values),C=h["Ji"].makeZerosNestedTypedArray(i.shape,i.dtype);for(let h=0;h<p;++h)for(let t=0;t<b;++t){const e=t*w-v.top;for(let n=0;n<y;++n){const r=n*x-v.left;for(let i=0;i<g;++i){let a=Number.MIN_SAFE_INTEGER,s=0,o=0;for(let t=0;t<O;++t){const n=e+t*k;if(n>=0&&n<f)for(let e=0;e<S;++e){const u=r+e*T;if(u>=0&&u<m){const r=l[h][n][u][i]+d[t][e][i];r>a&&(a=r,s=t,o=e)}}}C[s][o][i]+=I[h][t][n][i]}}}const A=c.write(h["Ji"].toTypedArray(C,r.dtype),i.shape,i.dtype);return{dataId:A,shape:i.shape,dtype:i.dtype}}},Zb={kernelName:h["bb"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:s,pad:o,dilations:u}=n,c=e,l=h["Ji"].toNestedArray(r.shape,c.data.get(r.dataId).values),d=h["Ji"].toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:v,strideHeight:w,strideWidth:x,filterHeight:O,filterWidth:S,dilationHeight:k,dilationWidth:T,outShape:_}=h["de"].computeDilation2DInfo(r.shape,i.shape,s,o,"NHWC",u);h["Ji"].assert(a.rank===_.length,()=>`Error in ${h["bb"]}, dy must have the same rank as output ${_.length}, but got `+a.rank);const I=h["Ji"].toNestedArray(_,c.data.get(a.dataId).values),C=h["Ji"].makeZerosNestedTypedArray(r.shape,r.dtype);for(let h=0;h<p;++h)for(let t=0;t<b;++t){const e=t*w-v.top;for(let n=0;n<y;++n){const r=n*x-v.left;for(let i=0;i<g;++i){let a=Number.MIN_SAFE_INTEGER,s=e<0?0:e,o=r<0?0:r;for(let t=0;t<O;++t){const n=e+t*k;if(n>=0&&n<f)for(let e=0;e<S;++e){const u=r+e*T;if(u>=0&&u<m){const r=l[h][n][u][i]+d[t][e][i];r>a&&(a=r,s=n,o=u)}}}C[h][s][o][i]+=I[h][t][n][i]}}}const A=c.write(h["Ji"].toTypedArray(C,r.dtype),r.shape,r.dtype);return{dataId:A,shape:r.shape,dtype:r.dtype}}},Qb=Sm((t,e)=>t*e),ty=Gm((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),ey=Wm(h["ic"],Qb,ty),ny={kernelName:h["ic"],backendName:"cpu",kernelFunc:ey};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ry(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r;let o;dm(i,"sum"),o="bool"===i.dtype?Vm({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):vm({inputs:{x:i},backend:n});const u=o.shape.length,c=h["Ji"].parseAxisParam(a,o.shape),l=h["de"].getAxesPermutation(c,u);let d=c,p=o;null!=l&&(p=hg({inputs:{x:o},backend:n,attrs:{perm:l}}),d=h["de"].getInnerMostAxes(d.length,u)),h["de"].assertAxesAreInnerMostDims("sum",d,p.shape.length);const[f,m]=h["de"].computeOutAndReduceShapes(p.shape,d),g=h["de"].upcastType(p.dtype,"int32");let b=Mm(n,f,g);const y=h["Ji"].sizeFromShape(m),v=n.data.get(b.dataId).values,w=n.data.get(p.dataId).values;for(let h=0;h<v.length;++h){const t=h*y;let e=0;for(let n=0;n<y;++n)e+=w[t+n];v[h]=e}if(s){const t=h["de"].expandShapeToKeepDim(b.shape,c),e=b;b=Xm({inputs:{x:b},backend:n,attrs:{shape:t}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(o),null!=l&&n.disposeIntermediateTensorInfo(p),b}const iy={kernelName:h["wd"],backendName:"cpu",kernelFunc:ry};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ay(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:s,summedDims:o,idDims:u}=h["de"].decodeEinsumEquation(i,a.length);h["de"].checkEinsumDimSizes(s.length,u,a);const{path:c,steps:l}=h["de"].getEinsumComputePath(o,u),d=l.length;let p=null,f=s.length;const m=[];for(let g=0;g<d;++g){for(const t of l[g]){const{permutationIndices:e,expandDims:r}=h["de"].getEinsumPermutation(f,u[t]);let i;h["de"].isIdentityPermutation(e)?i=a[t]:(i=hg({inputs:{x:a[t]},backend:n,attrs:{perm:e}}),m.push(i));const s=i.shape.slice();for(let t=0;t<r.length;++t)s.splice(r[t],0,1);h["Ji"].arraysEqual(i.shape,s)||(i=Xm({inputs:{x:i},backend:n,attrs:{shape:s}}),m.push(i)),null===p?p=i:(p=ey({inputs:{a:i,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=ry({inputs:{x:p},backend:n,attrs:{axis:c[g]-(s.length-f),keepDims:!1}}),m.push(p)),f--)}for(const h of m)h!==p&&n.disposeIntermediateTensorInfo(h);return p}const sy={kernelName:h["db"],backendName:"cpu",kernelFunc:ay};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oy(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;dm([r,i],"eluGrad");const a=new Float32Array(h["Ji"].sizeFromShape(i.shape)),s=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let u=0;u<s.length;++u){const t=s[u];a[u]=t>=1?o[u]:o[u]*(t+1)}return n.makeTensorInfo(i.shape,"float32",a)}const uy={kernelName:h["fb"],backendName:"cpu",kernelFunc:oy},cy=Sm((t,e)=>t===e?1:0),ly=Wm(h["hb"],cy,null,"bool"),dy={kernelName:h["hb"],backendName:"cpu",kernelFunc:ly},hy=h["de"].ERF_P,py=h["de"].ERF_A1,fy=h["de"].ERF_A2,my=h["de"].ERF_A3,gy=h["de"].ERF_A4,by=h["de"].ERF_A5,yy=mm(h["ib"],t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+hy*n);return e*(1-((((by*r+gy)*r+my)*r+fy)*r+py)*r*Math.exp(-n*n))}),vy={kernelName:h["ib"],backendName:"cpu",kernelFunc:yy},wy=Nm(t=>Math.exp(t)),xy=gm(h["jb"],wy,"float32"),Oy={kernelName:h["jb"],backendName:"cpu",kernelFunc:xy};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Sy(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:a}=r,s=i.shape.length,o=i.shape.slice();let u=a;return a<0&&(h["Ji"].assert(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+a+1),o.splice(u,0,1),Xm({inputs:{x:i},backend:n,attrs:{shape:o}})}const ky={kernelName:h["kb"],backendName:"cpu",kernelFunc:Sy},Ty=Nm(t=>Math.expm1(t)),_y=gm(h["lb"],Ty),Iy={kernelName:h["lb"],backendName:"cpu",kernelFunc:_y},Cy=Sm((t,e)=>t/e),Ay=Wm(h["Gc"],Cy),Ey={kernelName:h["Gc"],backendName:"cpu",kernelFunc:Ay},Ny=Sm((t,e)=>t-e),jy=Gm((t,e,n,r)=>({real:t-n,imag:e-r})),Dy=Wm(h["vd"],Ny,jy),$y={kernelName:h["vd"],backendName:"cpu",kernelFunc:Dy};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ry(t,e,n){const r=t.shape,i=r[0],a=r[1],s=n.data.get(t.dataId),o=s.complexTensorInfos.real,u=s.complexTensorInfos.imag,c=[i,a],l=h["Ji"].sizeFromShape(c),d=h["Ji"].getTypedArrayFromDType("float32",l),p=h["Ji"].getTypedArrayFromDType("float32",l);for(let b=0;b<i;b++){const t=Jg({inputs:{x:o},backend:n,attrs:{begin:[b,0],size:[1,a]}}),r=Jg({inputs:{x:u},backend:n,attrs:{begin:[b,0],size:[1,a]}}),i=Fm({inputs:{real:t,imag:r},backend:n}),{real:s,imag:c}=Fy(i,e,n),l=h["de"].mergeRealAndImagArrays(s,c);for(let e=0;e<a;e++){const t=h["de"].getComplexWithIndex(l,e);d[b*a+e]=t.real,p[b*a+e]=t.imag}n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i)}const f=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",p),g=Fm({inputs:{real:f,imag:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}function Fy(t,e,n){const r=h["Ji"].sizeFromShape(t.shape),i=n.data.get(t.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(Py(r)){const i=My(a,s,r,e,n),o=[t.shape[0],t.shape[1]];if(e){const t=n.makeTensorInfo(o,"float32",i.real),e=n.makeTensorInfo(o,"float32",i.imag),a=n.makeTensorInfo([],"float32",h["Ji"].createScalarValue(r,"float32")),s=vm({inputs:{x:a},backend:n}),u=Ey.kernelFunc({inputs:{a:t,b:a},backend:n}),c=Ey.kernelFunc({inputs:{a:e,b:s},backend:n}),l=n.data.get(u.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),{real:l,imag:d}}return i}{const t=h["de"].mergeRealAndImagArrays(a,s),n=Ly(t,r,e);return h["de"].splitRealAndImagArrays(n)}}function Py(t){return 0===(t&t-1)}function My(t,e,n,r,i){if(1===n)return{real:t,imag:e};const a=h["de"].mergeRealAndImagArrays(t,e),s=n/2,o=h["de"].complexWithEvenIndex(a),u=o.real,c=o.imag,l=[u.length],d=i.makeTensorInfo(l,"float32",u),p=i.makeTensorInfo(l,"float32",c),f=Fm({inputs:{real:d,imag:p},backend:i}),m=h["de"].complexWithOddIndex(a),g=m.real,b=m.imag,y=[g.length],v=i.makeTensorInfo(y,"float32",g),w=i.makeTensorInfo(y,"float32",b),x=Fm({inputs:{real:v,imag:w},backend:i}),O=My(u,c,s,r,i),S=O.real,k=O.imag,T=[S.length],_=i.makeTensorInfo(T,"float32",S),I=i.makeTensorInfo(T,"float32",k),C=Fm({inputs:{real:_,imag:I},backend:i}),A=My(g,b,s,r,i),E=A.real,N=A.imag,j=[E.length],D=i.makeTensorInfo(j,"float32",E),$=i.makeTensorInfo(j,"float32",N),R=Fm({inputs:{real:D,imag:$},backend:i}),F=h["de"].exponents(n,r),P=[F.real.length],M=i.makeTensorInfo(P,"float32",F.real),L=i.makeTensorInfo(P,"float32",F.imag),B=Fm({inputs:{real:M,imag:L},backend:i}),z=ey({inputs:{a:B,b:R},backend:i}),V=Jm({inputs:{a:C,b:z},backend:i}),U=Dy({inputs:{a:C,b:z},backend:i}),W=Lm({inputs:{input:V},backend:i}),G=Lm({inputs:{input:U},backend:i}),H=hb({inputs:{input:V},backend:i}),q=hb({inputs:{input:U},backend:i}),J=fb({inputs:[W,G],backend:i,attrs:{axis:0}}),K=fb({inputs:[H,q],backend:i,attrs:{axis:0}}),X=i.data.get(J.dataId).values,Y=i.data.get(K.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(J),i.disposeIntermediateTensorInfo(K),{real:X,imag:Y}}function Ly(t,e,n){const r=new Float32Array(2*e);for(let i=0;i<e;i++){let a=0,s=0;for(let r=0;r<e;r++){const o=h["de"].exponent(i*r,e,n),u=h["de"].getComplexWithIndex(t,r);a+=u.real*o.real-u.imag*o.imag,s+=u.real*o.imag+u.imag*o.real}n&&(a/=e,s/=e),h["de"].assignToTypedArray(r,a,s,i)}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(t){const{inputs:e,backend:n}=t,{input:r}=e,i=h["Ji"].sizeFromShape(r.shape),a=r.shape[r.shape.length-1],s=i/a,o=Xm({inputs:{x:r},backend:n,attrs:{shape:[s,a]}}),u=Ry(o,!1,n),c=Xm({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}const zy={kernelName:h["mb"],backendName:"cpu",kernelFunc:By};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vy(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:a}=n,s=a||h["Ji"].inferDtype(i),o=h["Ji"].getArrayFromDType(s,h["Ji"].sizeFromShape(r));return Wy(o,i,s),e.makeTensorInfo(r,s,o)}const Uy={kernelName:h["nb"],backendName:"cpu",kernelFunc:Vy};function Wy(t,e,n){t.fill(e)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gy={kernelName:h["ob"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,a=h["Ji"].getTypedArrayFromDType(r.dtype,h["Ji"].sizeFromShape(r.shape)),[s,o,u,c]=r.shape,l=i.data.get(r.dataId).values;for(let h=0;h<s;h++){const t=h*u*o*c;for(let e=0;e<o;e++){const n=e*(u*c);for(let e=0;e<u;e++){const r=e*c;for(let i=0;i<c;i++){const s=Math.round(u-e-1),o=t+n+r+i;let d=l[o];if(s>=0&&s<u){const e=s*c,r=t+n+e+i;d=l[r]}a[o]=d}}}}const d=i.write(a,r.shape,r.dtype);return{dataId:d,shape:r.shape,dtype:r.dtype}}},Hy=Nm(t=>Math.floor(t)),qy=gm(h["pb"],Hy),Jy={kernelName:h["pb"],backendName:"cpu",kernelFunc:qy},Ky=Sm((t,e)=>Math.floor(t/e)),Xy=Wm(h["qb"],Ky,null,"int32"),Yy={kernelName:h["qb"],backendName:"cpu",kernelFunc:Xy};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zy(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:s,preluActivationWeights:o}=e,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=gb({inputs:{x:i,filter:a},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:h}});if(s){const t=m;if("NCHW"===l&&1===s.shape.length&&1!==s.shape[0]){const t=Xm({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=Jm({inputs:{a:m,b:t},backend:n}),n.disposeIntermediateTensorInfo(t)}else m=Jm({inputs:{a:m,b:s},backend:n});n.disposeIntermediateTensorInfo(t)}if(p){const t=m;if("NCHW"===l&&"prelu"===p&&1===o.shape.length&&1!==o.shape[0]){const t=Xm({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Rm(n,m,p,t,f),n.disposeIntermediateTensorInfo(t)}else m=Rm(n,m,p,o,f);n.disposeIntermediateTensorInfo(t)}return m}const Qy={kernelName:h["tb"],backendName:"cpu",kernelFunc:Zy};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:s,preluActivationWeights:o}=e,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let m=Vb({inputs:{x:i,filter:a},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:h}});if(s){const t=m;m=Jm({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(t)}if(p){const t=m;m=Rm(n,m,p,o,f),n.disposeIntermediateTensorInfo(t)}return m}const ev={kernelName:h["ub"],backendName:"cpu",kernelFunc:tv};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nv(t,e,n,r,i,a,s,o,u){const c=Object(h["qe"])([r,a],n);for(let l=0;l<r;l++){const n=[];let r=0;for(let e=0;e<i;e++){const a=t[l*i+e];r+=a*s[e],n.push(a)}if(r<0||r>=u/a)throw new Error(`Invalid indices: ${n} does not index into ${o}`);for(let t=0;t<a;t++)c.values[l*a+t]=e.get(...e.indexToLoc(r*a+t))}return c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rv(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=h["Ji"].sizeFromShape(r.shape),s=i.shape,o=s[s.length-1],[u,c,l,d]=h["de"].prepareAndValidate(r,i);if(0===c)return n.makeTensorInfo(u,r.dtype,[]);const p=n.data.get(i.dataId).values,f=n.bufferSync(r),m=nv(p,f,r.dtype,c,o,l,d,r.shape,a);return n.makeTensorInfo(u,r.dtype,m.values)}const iv={kernelName:h["vb"],backendName:"cpu",kernelFunc:rv};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function av(t,e,n){const r=Object(h["qe"])(n,t.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i),a=n.slice(),s=a[0],o=a[2],u=e.locToIndex([s,o]);a[2]=e.values[u];const c=t.locToIndex(a);0<=c&&c<t.values.length&&(r.values[i]=t.values[c])}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:s,batchDims:o}=r;dm([i,a],"gatherV2");const u=h["Ji"].parseAxisParam(s,i.shape)[0],c=n.data.get(a.dataId).values,l=i.shape[u];for(let x=0;x<c.length;++x){const t=c[x];h["Ji"].assert(t<=l-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${l-1}]`)}let d=o;null==o&&(d=0);const p=h["Ji"].sizeFromShape(a.shape),f=h["de"].segment_util.collectGatherOpShapeInfo(i,a,u,d),m=Xm({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),g=Xm({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}}),b=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],y=n.bufferSync(g),v=n.bufferSync(m),w=av(v,y,b);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const ov={kernelName:h["wb"],backendName:"cpu",kernelFunc:sv},uv=Sm((t,e)=>t>e?1:0),cv=Wm(h["xb"],uv,null,"bool"),lv={kernelName:h["xb"],backendName:"cpu",kernelFunc:cv},dv=Sm((t,e)=>t>=e?1:0),hv=Wm(h["yb"],dv,null,"bool"),pv={kernelName:h["yb"],backendName:"cpu",kernelFunc:hv};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fv(t){const{inputs:e,backend:n}=t,{input:r}=e,i=h["Ji"].sizeFromShape(r.shape),a=r.shape[r.shape.length-1],s=i/a,o=Xm({inputs:{x:r},backend:n,attrs:{shape:[s,a]}}),u=Ry(o,!0,n),c=Xm({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}const mv={kernelName:h["zb"],backendName:"cpu",kernelFunc:fv},gv=mm(h["Cb"],t=>Number.isFinite(t)?1:0,"bool"),bv={kernelName:h["Cb"],backendName:"cpu",kernelFunc:gv},yv=mm(h["Db"],t=>Math.abs(t)===1/0?1:0,"bool"),vv={kernelName:h["Db"],backendName:"cpu",kernelFunc:yv},wv=mm(h["Eb"],t=>Number.isNaN(t)?1:0,"bool"),xv={kernelName:h["Eb"],backendName:"cpu",kernelFunc:wv},Ov=Sm((t,e)=>t<e?1:0),Sv=Wm(h["Jb"],Ov,null,"bool"),kv={kernelName:h["Jb"],backendName:"cpu",kernelFunc:Sv},Tv=Sm((t,e)=>t<=e?1:0),_v=Wm(h["Kb"],Tv,null,"bool"),Iv={kernelName:h["Kb"],backendName:"cpu",kernelFunc:_v};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Cv(t,e,n){const r=(e-t)/(n-1),i=h["Ji"].makeZerosTypedArray(n,"float32");i[0]=t;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Av(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,s=Cv(r,i,a);return e.makeTensorInfo([s.length],"float32",s)}const Ev={kernelName:h["Lb"],backendName:"cpu",kernelFunc:Av},Nv=Nm(t=>Math.log(t)),jv=gm(h["Mb"],Nv),Dv={kernelName:h["Mb"],backendName:"cpu",kernelFunc:jv},$v=mm(h["Nb"],t=>Math.log1p(t)),Rv={kernelName:h["Nb"],backendName:"cpu",kernelFunc:$v},Fv=Sm((t,e)=>t&&e),Pv=Wm(h["Pb"],Fv,null,"bool"),Mv={kernelName:h["Pb"],backendName:"cpu",kernelFunc:Pv},Lv=mm(h["Qb"],t=>t?0:1,"bool"),Bv={kernelName:h["Qb"],backendName:"cpu",kernelFunc:Lv},zv=Sm((t,e)=>t||e),Vv=Wm(h["Rb"],zv,null,"bool"),Uv={kernelName:h["Rb"],backendName:"cpu",kernelFunc:Vv};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:s,alpha:o,beta:u}=r;dm(i,"LRN");const c=i.shape[3],l=c-1,d=n.data.get(i.dataId).values,p=h["Ji"].sizeFromShape(i.shape),f=new Float32Array(p);function m(t){const e=t%c;let n=t-e+Math.max(0,e-a);const r=t-e+Math.min(e+a,l);let i=0;for(;n<=r;n++){const t=d[n];i+=t*t}return i}for(let h=0;h<p;h++){const t=m(h),e=d[h]*Math.pow(s+o*t,-u);f[h]=e}return n.makeTensorInfo(i.shape,i.dtype,f)}const Gv={kernelName:h["Gb"],backendName:"cpu",kernelFunc:Wv};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:s}=e,{depthRadius:o,bias:u,alpha:c,beta:l}=r;dm(s,"LRNGrad");const d=h["Ji"].sizeFromShape(s.shape),p=s.shape[3],f=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(a.dataId).values,b=new Float32Array(d),y=d;for(let h=0;h<y;h++){const t=h%p,e=h-t+Math.max(0,t-o),n=h-t+Math.min(p,t+o+1);let r=0;for(let i=e;i<n;i++)r+=Math.pow(m[i],2);r=c*r+u;for(let i=e;i<n;i++){let t=-2*c*l*m[i]*g[h]/r;h===i&&(t+=Math.pow(r,-l)),t*=f[h],b[i]+=t}}return n.makeTensorInfo(s.shape,i.dtype,b)}const qv={kernelName:h["Hb"],backendName:"cpu",kernelFunc:Hv};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jv(t,e,n,r){const i=h["Ji"].getTypedArrayFromDType(r,h["Ji"].sizeFromShape(n));for(let a=0;a<i.length;++a){const n=a*e;let r=t[n];for(let i=0;i<e;++i){const e=t[n+i];(Number.isNaN(e)||e>r)&&(r=e)}i[a]=r}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:s}=r,o=n;let u=i.shape;const c=u.length,l=h["Ji"].parseAxisParam(a,u);let d=l;const p=h["de"].getAxesPermutation(d,c);let f=o.data.get(i.dataId).values;if(null!=p){const t=new Array(c);for(let e=0;e<t.length;e++)t[e]=u[p[e]];f=dg(f,u,i.dtype,p,t),d=h["de"].getInnerMostAxes(d.length,c),u=t}dm(i,"max"),h["de"].assertAxesAreInnerMostDims("max",d,c);const[m,g]=h["de"].computeOutAndReduceShapes(u,d),b=h["Ji"].sizeFromShape(g),y=Jv(f,b,m,i.dtype),v=o.write(y,m,i.dtype);let w=m;if(s){const t=h["de"].expandShapeToKeepDim(m,l);w=t}return{dataId:v,shape:w,dtype:i.dtype}}const Xv={kernelName:h["Ub"],backendName:"cpu",kernelFunc:Kv},Yv=Sm((t,e)=>Math.max(t,e)),Zv=Wm(h["ac"],Yv),Qv={kernelName:h["ac"],backendName:"cpu",kernelFunc:Zv};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;dm(i,"maxPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:u}=r,c=1;h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const l=h["de"].computePool2DInfo(i.shape,a,s,c,o,u);let d;if(1===l.filterWidth&&1===l.filterHeight&&h["Ji"].arraysEqual(l.inShape,l.outShape))d=vm({inputs:{x:i},backend:n});else{const t=n.data.get(i.dataId).values,e=h["Ji"].computeStrides(i.shape),r=Dg(t,i.shape,i.dtype,e,l,"max");d=n.makeTensorInfo(l.outShape,i.dtype,r.values)}return d}const ew={kernelName:h["Vb"],backendName:"cpu",kernelFunc:tw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:s,pad:o,dimRoundingMode:u,dataFormat:c}=r;dm(i,"maxPool3d");const l=h["de"].computePool3DInfo(i.shape,a,s,1,o,u,c),d=n.data.get(i.dataId).values,p=Rg(d,i.shape,i.dtype,h["Ji"].computeStrides(i.shape),l,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const rw={kernelName:h["Wb"],backendName:"cpu",kernelFunc:nw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iw(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:c}=r;dm([i,a],"maxPool3DGrad");const l=h["de"].computePool3DInfo(a.shape,s,o,1,u,c),d=n.bufferSync(a),p=Fg(d,l),f=l.strideDepth,m=l.strideHeight,g=l.strideWidth,b=l.dilationDepth,y=l.dilationHeight,v=l.dilationWidth,w=l.effectiveFilterDepth,x=l.effectiveFilterHeight,O=l.effectiveFilterWidth,S=w-1-l.padInfo.front,k=O-1-l.padInfo.left,T=x-1-l.padInfo.top,_=Object(h["qe"])(a.shape,"float32"),I=n.bufferSync(i);for(let h=0;h<l.batchSize;++h)for(let t=0;t<l.inChannels;++t)for(let e=0;e<l.inDepth;++e)for(let n=0;n<l.inHeight;++n)for(let r=0;r<l.inWidth;++r){const i=e-S,a=n-T,s=r-k;let o=0;for(let e=0;e<w;e+=b){const n=(i+e)/f;if(!(n<0||n>=l.outDepth||Math.floor(n)!==n))for(let r=0;r<x;r+=y){const i=(a+r)/m;if(!(i<0||i>=l.outHeight||Math.floor(i)!==i))for(let a=0;a<O;a+=v){const u=(s+a)/g;if(u<0||u>=l.outWidth||Math.floor(u)!==u)continue;const c=w*x*O-1-p.get(h,n,i,u,t),d=e*x*O+r*O+a,f=c===d?1:0;if(0===f)continue;const m=I.get(h,n,i,u,t);o+=m*f}}}_.set(o,h,e,n,r,t)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const aw={kernelName:h["Xb"],backendName:"cpu",kernelFunc:iw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sw(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:s}=e,o=a;dm([a,s],"maxPoolGrad");const{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,p=h["de"].computePool2DInfo(o.shape,u,c,1,l,d),f=n.data.get(o.dataId).values,m=Object(h["qe"])(p.outShape,o.dtype,$g(f,o.shape,o.dtype,p).values),g=p.strideHeight,b=p.strideWidth,y=p.dilationHeight,v=p.dilationWidth,w=p.effectiveFilterHeight,x=p.effectiveFilterWidth,O=x-1-p.padInfo.left,S=w-1-p.padInfo.top,k=Object(h["qe"])(o.shape,"float32"),T=n.data.get(i.dataId).values,_=Object(h["qe"])(i.shape,"float32",T);for(let h=0;h<p.batchSize;++h)for(let t=0;t<p.inChannels;++t)for(let e=0;e<p.inHeight;++e)for(let n=0;n<p.inWidth;++n){const r=e-S,i=n-O;let a=0;for(let e=0;e<w;e+=y){const n=(r+e)/g;if(!(n<0||n>=p.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const s=(i+r)/b;if(s<0||s>=p.outWidth||Math.floor(s)!==s)continue;const o=w*x-1-m.get(h,n,s,t),u=e*x+r,c=o===u?1:0;if(0===c)continue;const l=_.get(h,n,s,t);a+=l*c}}k.set(a,h,e,n,t)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const ow={kernelName:h["Yb"],backendName:"cpu",kernelFunc:sw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uw(t,e,n,r,i){const a=h["Ji"].computeStrides(e),s=Dg(t,e,n,a,i,"max"),o=$g(t,e,n,i,!0,r);return[s.values,o.values]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cw={kernelName:h["Zb"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=e,u=n;dm(r,"MaxPoolWithArgmax");const c=u.data.get(r.dataId).values,l=h["de"].computePool2DInfo(r.shape,i,a,[1,1],s),[d,p]=uw(c,r.shape,r.dtype,o,l),f=u.write(d,l.outShape,r.dtype),m=u.write(p,l.outShape,r.dtype);return[{dataId:f,shape:l.outShape,dtype:r.dtype},{dataId:m,shape:l.outShape,dtype:"int32"}]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r,o=h["Ji"].parseAxisParam(a,i.shape),u=h["de"].computeOutAndReduceShapes(i.shape,o),c=u[1],l=h["Ji"].sizeFromShape(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([l]));d.push(p);const f=Vm({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(f);const m=Ay({inputs:{a:f,b:p},backend:n});d.push(m);const g=ry({inputs:{x:m},backend:n,attrs:{axis:a,keepDims:s}});return d.forEach(t=>n.disposeIntermediateTensorInfo(t)),g}const dw={kernelName:h["bc"],backendName:"cpu",kernelFunc:lw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r;dm(i,"min");const o=h["Ji"].parseAxisParam(a,i.shape);let u=o;const c=h["de"].getAxesPermutation(u,i.shape.length);let l=i;null!=c&&(l=hg({inputs:{x:i},backend:n,attrs:{perm:c}}),u=h["de"].getInnerMostAxes(u.length,i.shape.length)),h["de"].assertAxesAreInnerMostDims("min",u,l.shape.length);const[d,p]=h["de"].computeOutAndReduceShapes(l.shape,u),f=h["Ji"].sizeFromShape(p),m=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(d),l.dtype),g=n.data.get(l.dataId).values;for(let h=0;h<m.length;++h){const t=h*f;let e=g[t];for(let n=0;n<f;++n){const r=g[t+n];(Number.isNaN(r)||r<e)&&(e=r)}m[h]=e}null!=c&&n.disposeIntermediateTensorInfo(l);const b=n.makeTensorInfo(d,l.dtype,m);if(s){const t=h["de"].expandShapeToKeepDim(d,o),e=Xm({inputs:{x:b},backend:n,attrs:{shape:t}});return n.disposeIntermediateTensorInfo(b),e}return b}const pw={kernelName:h["cc"],backendName:"cpu",kernelFunc:hw},fw=Sm((t,e)=>Math.min(t,e)),mw=Wm(h["dc"],fw),gw={kernelName:h["dc"],backendName:"cpu",kernelFunc:mw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,mode:s}=r;dm(i,"mirrorPad");const o=a.map((t,e)=>t[0]+i.shape[e]+t[1]),u=a.map(t=>t[0]),c=a.map((t,e)=>t[0]+i.shape[e]),l="reflect"===s?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,f=h["Ji"].computeStrides(i.shape),m=h["Ji"].sizeFromShape(o),g=o.length,b=h["Ji"].computeStrides(o),y=h["Ji"].getTypedArrayFromDType(i.dtype,m);for(let w=0;w<m;w++){let t=h["Ji"].indexToLoc(w,g,b);for(let n=0;n<g;n++)t[n]<u[n]?t[n]=2*u[n]-t[n]-l:t[n]>=c[n]&&(t[n]=2*(c[n]-1)-t[n]+l);t=t.map((t,e)=>t-u[e]);const e=h["Ji"].locToIndex(t,p,f);y[w]=d[e]}const v=n.write(y,o,i.dtype);return{dataId:v,shape:o,dtype:i.dtype}}const yw={kernelName:h["ec"],backendName:"cpu",kernelFunc:bw},vw=Sm((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),ww=Wm(h["fc"],vw),xw={kernelName:h["fc"],backendName:"cpu",kernelFunc:ww};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ow(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,s=i.shape.length;let o=a;if(-1===o&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);const u=h["Ji"].parseAxisParam([o],i.shape),c=Kv({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=h["de"].expandShapeToKeepDim(c.shape,u),d=Xm({inputs:{x:c},backend:n,attrs:{shape:l}}),p=Dy({inputs:{a:i,b:d},backend:n}),f=xy({inputs:{x:p},backend:n}),m=ry({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),g=Xm({inputs:{x:m},backend:n,attrs:{shape:l}}),b=Ay({inputs:{a:f,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}const Sw={kernelName:h["ed"],backendName:"cpu",kernelFunc:Ow};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kw(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:s,normalized:o}=r;dm(i,"multinomial");const u=o?i:Ow({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,p=[c,a],f=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(p),"int32");for(let h=0;h<c;++h){const t=h*l,e=new Float32Array(l-1);e[0]=d[t];for(let i=1;i<e.length;++i)e[i]=e[i-1]+d[t+i];const n=jf["alea"](s.toString()),r=h*a;for(let i=0;i<a;++i){const t=n();f[r+i]=e.length;for(let n=0;n<e.length;n++)if(t<e[n]){f[r+i]=n;break}}}return o||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",f)}const Tw={kernelName:h["hc"],backendName:"cpu",kernelFunc:kw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _w(t,e,n){const r=h["Ji"].createScalarValue(-1,n);return Qb([],e,r,t,n)}function Iw(t){const{inputs:e,backend:n}=t,{x:r}=e;dm(r,"neg");const i=n.data.get(r.dataId).values,[a,s]=_w(i,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,a)}const Cw={kernelName:h["jc"],backendName:"cpu",kernelFunc:Iw},Aw=h["Rf"].nonMaxSuppressionV3Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ew(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=r;dm(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,{selectedIndices:d}=Aw(c,l,s,o,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Nw={kernelName:h["kc"],backendName:"cpu",kernelFunc:Ew},jw=h["Rf"].nonMaxSuppressionV4Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dw(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:c}=r;dm(i,"NonMaxSuppressionPadded");const l=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:h,validOutputs:p}=jw(l,d,s,o,u,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const $w={kernelName:h["lc"],backendName:"cpu",kernelFunc:Dw},Rw=h["Rf"].nonMaxSuppressionV5Impl;
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fw(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:c}=r;dm(i,"NonMaxSuppressionWithScore");const l=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,h=s,p=o,f=u,m=c,{selectedIndices:g,selectedScores:b}=Rw(l,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Pw={kernelName:h["mc"],backendName:"cpu",kernelFunc:Fw},Mw=Sm((t,e)=>t!==e?1:0),Lw=Wm(h["nc"],Mw,null,"bool"),Bw={kernelName:h["nc"],backendName:"cpu",kernelFunc:Lw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zw(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:s,onValue:o,offValue:u}=r;dm(i,"oneHot");const c=h["Ji"].sizeFromShape(i.shape),l=new Float32Array(c*s);l.fill(u);const d=n.data.get(i.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<s&&(l[h*s+d[h]]=o);return n.makeTensorInfo([...i.shape,s],a,l)}const Vw={kernelName:h["pc"],backendName:"cpu",kernelFunc:zw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uw(t){const{inputs:e,backend:n}=t,{x:r}=e;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const t=Lm({inputs:{input:r},backend:n}),e=Uw({inputs:{x:t},backend:n}),i=hb({inputs:{input:r},backend:n}),a=Uw({inputs:{x:i},backend:n}),s=Fm({inputs:{real:e,imag:a},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),s}return Vy({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Ww={kernelName:h["Kd"],backendName:"cpu",kernelFunc:Uw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gw(t){const{inputs:e,backend:n}=t,{x:r}=e;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){const t=Lm({inputs:{input:r},backend:n}),e=Gw({inputs:{x:t},backend:n}),i=hb({inputs:{input:r},backend:n}),a=Uw({inputs:{x:i},backend:n}),s=Fm({inputs:{real:e,imag:a},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),s}return Vy({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Hw={kernelName:h["qc"],backendName:"cpu",kernelFunc:Gw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qw(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(1===e.length)return Sy({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,s=e[0].dtype;e.forEach(t=>{h["Ji"].assertShapesMatch(a,t.shape,"All tensors passed to stack must have matching shapes"),h["Ji"].assert(s===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(t=>{const e=Sy({inputs:{input:t},backend:n,attrs:{dim:i}});return o.push(e),e}),c=fb({inputs:u,backend:n,attrs:{axis:i}});return o.forEach(t=>n.disposeIntermediateTensorInfo(t)),c}const Jw={kernelName:h["tc"],backendName:"cpu",kernelFunc:qw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kw(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:s}=r;dm(i,"pad");const o=a.map((t,e)=>t[0]+i.shape[e]+t[1]),u=a.map(t=>t[0]),c=n.data.get(i.dataId).values,l=h["Ji"].sizeFromShape(i.shape),d=i.shape.length,p=h["Ji"].computeStrides(i.shape),f=h["Ji"].sizeFromShape(o),m=o.length,g=h["Ji"].computeStrides(o),b=h["Ji"].getTypedArrayFromDType(i.dtype,f);0!==s&&b.fill(s);for(let v=0;v<l;v++){const t=h["Ji"].indexToLoc(v,d,p),e=t.map((t,e)=>t+u[e]),n=h["Ji"].locToIndex(e,m,g);b[n]=c[v]}const y=n.write(b,o,i.dtype);return{dataId:y,shape:o,dtype:i.dtype}}const Xw={kernelName:h["uc"],backendName:"cpu",kernelFunc:Kw},Yw=Sm((t,e)=>Math.pow(t,e)),Zw=Wm(h["wc"],Yw),Qw={kernelName:h["wc"],backendName:"cpu",kernelFunc:Zw};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tx(t,e,n,r){const[i,a]=h["de"].computeOutAndReduceShapes(t,r),s=Object(h["Hi"])(e,"int32"),o=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(i),s),u=h["Ji"].sizeFromShape(a);for(let c=0;c<o.length;++c){const t=c*u;let e=1;for(let r=0;r<u;++r)e*=n[t+r];o[c]=e}return{outVals:o,outShape:i,outDtype:s}}function ex(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r;dm(i,"prod");const o=i.shape.length,u=h["Ji"].parseAxisParam(a,i.shape),c=h["de"].getAxesPermutation(u,o);let l=u,d=i;const p=[];null!=c&&(d=hg({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),l=h["de"].getInnerMostAxes(l.length,o));const f=n.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:b}=tx(d.shape,d.dtype,f,l);let y=g;return s&&(y=h["de"].expandShapeToKeepDim(g,u)),p.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(y,b,m)}const nx={kernelName:h["yc"],backendName:"cpu",kernelFunc:ex};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rx(t,e,n){t.forEach((t,r)=>{if(t<0||t>=n){const i=h["Ji"].indexToLoc(r,e.length,h["Ji"].computeStrides(e)).join(",");throw new Error(`indices[${i}] = ${t} is not in [0, ${n})`)}})}function ix(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let t=1;t<r.length;++t)if(r[t-1]>r[t])throw new Error("Ragged splits must be sorted in ascending order")}}function ax(t,e,n,r){const i=[];let a=0;const s=e.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);ix(n,r);let u=1;for(let c=0;c<e.length-1;++c){u*=e[c];const t=e[c+1];for(let e=1;e<u+1;++e)o[c].push(e*t)}for(let c=0;c<t.length;++c){let r=t[c],s=t[c]+1;for(let t=0;t<n.length;++t){const i=n[t],a=t+e.length-1;if(a>=0){const t=o[a],e=t[t.length-1]-i[r];for(let n=r;n<s;++n)o[a].push(i[n+1]+e)}r=i[r],s=i[s]}s!==r&&(i.push([r,s]),a+=s-r)}return{outSplits:o,valueSlices:i,numValues:a}}function sx(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=h["Ji"].getArrayFromDType("int32",r);e.push(i),t[n].forEach((t,e)=>i[e]=t)}return e}function ox(t,e){const n=t.slice(0,e);while(n.length<e)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function ux(t,e,n,r,i,a){const s=ox(e,2)[1],o=ox(a,2)[1];let u=0;for(const c of n)for(let e=c[0];e<c[1];++e){for(let n=0;n<r;++n)i[u*o+n]=t[e*s+n];++u}}function cx(t,e,n,r,i){const a=e.slice();a[0]=i;const s=h["Ji"].getArrayFromDType(n,h["Ji"].sizeFromShape(a)),o=t.length,u=0===o?0:o/e[0];return ux(t,e,r,u,s,a),[s,a]}function lx(t,e,n,r,i,a,s,o){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===e[0].length)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(rx(a,s,u),0===r.length)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:l,valueSlices:d,numValues:h}=ax(a,s,t,c),p=sx(l),f=cx(n,r,i,d,h);return[p,f[0],f[1]]}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dx(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=e,{outputRaggedRank:o}=r,u=i.map(t=>n.data.get(t.dataId).values),c=i.map(t=>t.shape),l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,[h,p,f]=lx(u,c,l,a.shape,a.dtype,d,s.shape,o),m=h.map(t=>n.makeTensorInfo([t.length],"int32",t)),g=n.makeTensorInfo(f,a.dtype,p);return m.concat([g])}const hx={kernelName:h["Ac"],backendName:"cpu",kernelFunc:dx},px=2147483647;
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fx(t,e,n,r,i,a,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const o=0===e.length,u=0===i.length,c=0===s.length,l=[];o||l.push(e[0]),u||l.push(i[0]),c||l.push(s[0]);for(let h=1;h<l.length;++h)if(l[h]!==l[h-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===l.length?1:l[0],p=h["Ji"].getArrayFromDType("int32",d+1);p[0]=0;for(let h=0;h<d;++h){const e=o?t[0]:t[h],n=u?r[0]:r[h],i=c?a[0]:a[h];if(0===i)throw new Error("Requires delta != 0");let s;if(i>0&&n<e||i<0&&n>e)s=0;else if(s=Math.ceil(Math.abs((n-e)/i)),s>px)throw new Error("Requires ((limit - start) / delta) <= "+px);p[h+1]=p[h]+s}const f=p[d],m=h["Ji"].getArrayFromDType(n,f);let g=0;for(let h=0;h<d;++h){const e=p[h+1]-p[h];let n=o?t[0]:t[h];const r=c?a[0]:a[h];for(let t=0;t<e;++t)m[g++]=n,n+=r}return[p,m]}
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mx(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,[c,l]=fx(s,r.shape,r.dtype,o,i.shape,u,a.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([l.length],r.dtype,l);return[d,h]}const gx={kernelName:h["Bc"],backendName:"cpu",kernelFunc:mx};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var bx=h["de"].RowPartitionType;class yx{constructor(t,e,n,r,i,a,s,o,u,c){this.shape=t,this.shapeShape=e,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=s,this.rowPartitionValues=o,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=h["de"].getRowPartitionTypesHelper(c),this.raggedRank=h["de"].getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===bx.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===bx.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const e=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case bx.VALUE_ROWIDS:return yx.getMaxWidthValueRowID(e);case bx.ROW_SPLITS:return yx.getMaxWidthRowSplit(e);default:throw new Error("Cannot handle partition type "+bx[this.getRowPartitionTypeByDimension(t-1)])}}static getMaxWidthRowSplit(t){const e=t.length;if(0===e||1===e)return 0;let n=0;for(let r=0;r<e-1;++r){const e=t[r+1]-t[r];e>n&&(n=e)}return n}static getMaxWidthValueRowID(t){const e=t.length;if(0===e)return 0;let n=0,r=t[0],i=0;for(let a=1;a<e;++a){const e=t[a];e!==r&&(r=e,i=Math.max(a-n,i),n=a)}return Math.max(e-n,i)}tensorShapeFromTensor(t,e,n=!0){if(0===e.length){if(-1===t[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return wx(t,n)}calculateOutputSize(t){const e=this.valuesShape,n=this.defaultValueShape;h["de"].validateDefaultValueShape(n,e);const r=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=h["de"].combineRaggedTensorToTensorShapes(this.raggedRank,r,e),a=i;a[0]<0&&(a[0]=t);for(let s=1;s<=this.raggedRank;++s)a[s]<0&&(a[s]=this.getMaxWidth(s));return a}calculateFirstParentOutputIndex(t,e,n){const r=Math.min(t,n),i=[];let a=0;for(let s=0;s<r;++s,a+=e)i.push(a);for(let s=r;s<t;++s)i.push(-1);return h["Ji"].assert(i.length===t,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(t,e,n,r){const i=t.length,a=[];for(let s=0;s<i-1;++s){const i=t[s+1]-t[s];let o=Math.min(r,i),u=e[s];-1===u&&(o=0);for(let t=0;t<o;++t)a.push(u),u+=n;for(let t=0;t<i-o;++t)a.push(-1)}if(i>0&&a.length!==t[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(t,e,n,r){const i=t.length,a=[];if(0===i)return[];let s=0,o=t[0];if(o>=e.length)throw new Error(`Got currentValueRowId=${o}, which is not less than ${e.length}`);let u=e[o];a.push(u);for(let c=1;c<i;++c){const i=t[c];if(i===o)u>=0&&(++s,s<r?u+=n:u=-1);else{if(s=0,o=i,i>=e.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${e.length}`);u=e[i]}a.push(u)}if(a.length!==t.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(t,e,n,r){const i=this.getRowPartitionTensor(t),a=this.getRowPartitionTypeByDimension(t);switch(a){case bx.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,e,n,r);case bx.ROW_SPLITS:if(i.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(i,e,n,r);default:throw new Error("Unsupported partition type: "+bx[a])}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case bx.FIRST_DIM_SIZE:return t[0];case bx.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case bx.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type "+bx[e])}}compute(){const t=this.rowPartitionValues[0];if(t.length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const i=wx(n,!1),a=h["Ji"].getArrayFromDType(this.valuesDType,h["Ji"].sizeFromShape(i)),s=r[0]*n[0];if(s>0){let t=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let e=1;e<=this.raggedRank;++e){const i=this.calculateOutputIndex(e-1,t,r[e],n[e]);t=i}this.setOutput(this.raggedRank,t,a,i)}return[i,a]}setOutput(t,e,n,r){if(0===n.length)return;const i=this.values,a=n;let s=r.slice();s=s.slice(t+1);const o=h["Ji"].sizeFromShape(s),u=e.length;let c=this.defaultValue;if(c.length!==o&&1!==c.length){const t=this.defaultValueShape;Object(h["vi"])(()=>{const e=Object(h["oh"])(c,t),n=Object(h["ne"])(e,s);c=n.dataSync()})}let l=0,d=0,p=0;for(let h=0;h<=u;++h){let t=h<u?e[h]:-1;if(t!==p){if(d<p){const t=i.subarray(l*o),e=a.subarray(d*o),n=(p-d)*o;vx(e,t,n)}if(h>=u){const e=n.length;t=Math.floor(e/o)}if(t>p)if(1===this.defaultValue.length)a.subarray(p*o,t*o).fill(this.defaultValue[0]),p=t;else while(t>p){const t=a.slice(p*o);vx(t,c,o),++p}t<0?(l=h+1,d=p):(l=h,d=p,p=d+1)}else++p}}}function vx(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function wx(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function xx(t,e,n,r,i,a,s,o,u,c){return new yx(t,e,n,r,i,a,s,o,u,c).compute()}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ox(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,c=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,h=o.map(t=>n.data.get(t.dataId).values),p=o.map(t=>t.shape),[f,m]=xx(c,i.shape,l,a.shape,a.dtype,d,s.shape,h,p,u);return n.makeTensorInfo(f,a.dtype,m)}const Sx={kernelName:h["Cc"],backendName:"cpu",kernelFunc:Ox};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kx(t,e,n,r){const i=t===e,a=t<e&&n<0,s=e<t&&n>1;if(i||a||s)return h["Ji"].makeZerosTypedArray(0,r);const o=Math.abs(Math.ceil((e-t)/n)),u=h["Ji"].makeZerosTypedArray(o,r);e<t&&1===n&&(n=-1),u[0]=t;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tx(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:a,step:s}=n,o=kx(r,i,s,a);return e.makeTensorInfo([o.length],a,o)}const _x={kernelName:h["Dc"],backendName:"cpu",kernelFunc:Tx},Ix=mm(h["Hc"],t=>1/t),Cx={kernelName:h["Hc"],backendName:"cpu",kernelFunc:Ix};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ax(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:s,size:o}=r;dm(i,"resizeBilinear");const u=h["Ji"].computeStrides(i.shape),[c,l]=o,[d,p,f,m]=i.shape,g=n.data.get(i.dataId).values,b=new Float32Array(h["Ji"].sizeFromShape([d,c,l,m])),y=[a&&c>1?p-1:p,a&&l>1?f-1:f],v=[a&&c>1?c-1:c,a&&l>1?l-1:l];let w=0;const x=y[0]/v[0],O=y[1]/v[1];for(let h=0;h<d;h++)for(let t=0;t<c;t++){let e;e=s?x*(t+.5)-.5:x*t;const n=Math.max(0,Math.floor(e)),r=e-n,i=Math.min(p-1,Math.ceil(e)),a=h*u[0]+n*u[1],o=h*u[0]+i*u[1];for(let t=0;t<l;t++){let e;e=s?O*(t+.5)-.5:O*t;const n=Math.max(0,Math.floor(e)),i=e-n,c=Math.min(f-1,Math.ceil(e)),l=a+n*u[2],d=o+n*u[2],h=a+c*u[2],p=o+c*u[2];for(let t=0;t<m;t++){const e=g[l+t],n=g[d+t],a=g[h+t],s=g[p+t],o=e+(a-e)*i,u=n+(s-n)*i,c=o+(u-o)*r;b[w++]=c}}}return n.makeTensorInfo([d,c,l,m],"float32",b)}const Ex={kernelName:h["Mc"],backendName:"cpu",kernelFunc:Ax};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nx(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:s}=r;dm([a,i],"resizeBilinearGrad");const o=h["Ji"].computeStrides(i.shape),[u,c,l,d]=i.shape,[,p,f]=a.shape,m=new Float32Array(u*c*l*d),g=[s&&p>1?c-1:c,s&&f>1?l-1:l],b=[s&&p>1?p-1:p,s&&f>1?f-1:f],y=g[0]/b[0],v=g[1]/b[1],w=n.data.get(a.dataId).values;let x=0;for(let h=0;h<u;h++){const t=h*o[0];for(let e=0;e<p;e++){const n=e*y,r=Math.floor(n),i=Math.min(Math.ceil(n),c-1),a=t+r*o[1],s=t+i*o[1],u=n-r,h=1-u;for(let t=0;t<f;t++){const e=t*v,n=Math.floor(e),r=Math.min(Math.ceil(e),l-1),i=e-n,c=1-i,p=a+n*o[2],f=a+r*o[2],g=s+n*o[2],b=s+r*o[2],y=h*c,O=h*i,S=u*c,k=u*i;for(let t=0;t<d;t++){const e=w[x++];m[p+t]+=e*y,m[f+t]+=e*O,m[g+t]+=e*S,m[b+t]+=e*k}}}}return n.makeTensorInfo([u,l,c,d],"float32",m)}const jx={kernelName:h["Nc"],backendName:"cpu",kernelFunc:Nx};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dx(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:s,size:o}=r;dm(i,"resizeNearestNeighbor");const u=h["Ji"].computeStrides(i.shape),[c,l]=o,[d,p,f,m]=i.shape,g=n.data.get(i.dataId).values,b=new Float32Array(d*c*l*m),y=[a&&c>1?p-1:p,a&&l>1?f-1:f],v=[a&&c>1?c-1:c,a&&l>1?l-1:l],w=y[0]/v[0],x=y[1]/v[1];let O=0;for(let h=0;h<d;h++){const t=h*u[0];for(let e=0;e<c;e++){const n=s?w*(e+.5):w*e;let r=Math.min(p-1,a?Math.round(n):Math.floor(n));s&&(r=Math.max(0,r));const i=t+r*u[1];for(let t=0;t<l;t++){const e=s?x*(t+.5):x*t;let n=Math.min(f-1,a?Math.round(e):Math.floor(e));s&&(n=Math.max(0,n));const r=i+n*u[2];for(let t=0;t<m;t++){const e=g[r+t];b[O++]=e}}}}return n.makeTensorInfo([d,c,l,m],i.dtype,b)}const $x={kernelName:h["Oc"],backendName:"cpu",kernelFunc:Dx};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rx(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:s}=r;dm([a,i],"resizeNearestNeighborGrad");const o=h["Ji"].computeStrides(i.shape),u=h["Ji"].computeStrides(a.shape),[c,l,d,p]=i.shape,[,f,m]=a.shape,g=new Float32Array(c*l*d*p),b=n.data.get(a.dataId).values,y=[s&&f>1?l-1:l,s&&m>1?d-1:d],v=[s&&f>1?f-1:f,s&&m>1?m-1:m],w=y[0]/v[0],x=y[1]/v[1],O=1/w,S=1/x,k=2*Math.ceil(O)+2,T=2*Math.ceil(S)+2;for(let h=0;h<c;h++){const t=h*o[0];for(let e=0;e<l;e++){const n=t+e*o[1],r=Math.floor(e*O),i=Math.floor(r-k/2);for(let a=0;a<d;a++){const r=n+a*o[2],c=Math.floor(a*S),h=Math.floor(c-T/2);for(let n=0;n<p;n++){let o=0;for(let r=0;r<k;r++){const c=r+i;if(c<0||c>=f)continue;const p=t+c*u[1],g=c*w,y=Math.min(l-1,s?Math.round(g):Math.floor(g));if(e===y)for(let t=0;t<T;t++){const e=t+h;if(e<0||e>=m)continue;const r=p+e*u[2],i=e*x,c=Math.min(d-1,s?Math.round(i):Math.floor(i));a===c&&(o+=b[r+n])}}g[r+n]=o}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}const Fx={kernelName:h["Pc"],backendName:"cpu",kernelFunc:Rx};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Px(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r;dm(i,"reverse");const s=i.shape.length,o=h["Ji"].parseAxisParam(a,i.shape);if(0===s)return vm({inputs:{x:i},backend:n});const u=new h["Ad"](i.shape,i.dtype),c=n.bufferSync(i);for(let l=0;l<u.size;l++){const t=u.indexToLoc(l),e=t.slice();o.forEach(t=>e[t]=i.shape[t]-1-e[t]),u.set(c.get(...e),...t)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const Mx={kernelName:h["Qc"],backendName:"cpu",kernelFunc:Px},Lx={kernelName:h["Rc"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:s}=e,o=n,u=h["Ji"].getTypedArrayFromDType(r.dtype,h["Ji"].sizeFromShape(r.shape)),[c,l,d,p]=r.shape,[f,m]=h["de"].getImageCenter(s,l,d),g=255,b=Math.sin(i),y=Math.cos(i),v=o.data.get(r.dataId).values;for(let h=0;h<c;h++){const t=h*d*l*p;for(let e=0;e<l;e++){const n=e*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let s=0;s<p;s++){const o=[c,e,r,s],h=o[2],w=o[1];let x=(h-f)*y-(w-m)*b,O=(h-f)*b+(w-m)*y;x=Math.round(x+f),O=Math.round(O+m);let S=a;if("number"!==typeof a&&(S=3===s?g:a[s]),x>=0&&x<d&&O>=0&&O<l){const e=O*(d*p),n=x*p,r=t+e+n+s;S=v[r]}const k=t+n+i+s;u[k]=S}}}}const w=o.write(u,r.shape,r.dtype);return{dataId:w,shape:r.shape,dtype:r.dtype}}},Bx=mm(h["Sc"],t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),zx={kernelName:h["Sc"],backendName:"cpu",kernelFunc:Bx},Vx=Nm(t=>1/Math.sqrt(t)),Ux=gm(h["Tc"],Vx),Wx={kernelName:h["Tc"],backendName:"cpu",kernelFunc:Ux};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Gx(t,e,n,r,i,a,s,o,u,c){const l=[r/i,i],d=t.values,p=e.values;if(0===r)return Object(h["qe"])(n,e.dtype);const f=Object(h["qe"])(l,e.dtype);"string"===typeof u||"number"===typeof u?f.values.fill(u):"boolean"===typeof u&&f.values.fill(+u);for(let h=0;h<a;h++){const t=[];let a=0;for(let e=0;e<s;e++){const n=d[h*s+e];t.push(n),a+=n*o[e]}if(a<0||a>=r/i)throw new Error(`Invalid indices: ${t} does not index into ${n}`);for(let n=0;n<i;n++)c?f.values[a*i+n]+=p[h*i+n]:f.values[a*i+n]=0===e.rank?p[0]:p[h*i+n]}return f}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hx(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:s}=r,{sliceRank:o,numUpdates:u,sliceSize:c,strides:l,outputSize:d}=h["de"].calculateShapes(a,i,s),p=!0,f=n.bufferSync(i),m=n.bufferSync(a),g=Gx(f,m,s,d,c,u,o,l,0,p);return n.makeTensorInfo(s,g.dtype,g.values)}const qx={kernelName:h["Vc"],backendName:"cpu",kernelFunc:Hx};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jx(t,e){let n=0,r=t.length,i=0;while(n<r)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function Kx(t,e){let n=0,r=t.length,i=0;while(n<r)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function Xx(t,e,n,r,i,a){const s=h["Ji"].getArrayFromDType("int32",n*i);for(let o=0;o<n;++o){const n=t.slice(o*r,(o+1)*r),u=o*i;for(let t=0;t<i;++t)s[u+t]="left"===a?Jx(n,e[t+u]):Kx(n,e[t+u])}return s}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yx(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:s}=r,o=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=Xx(o,u,i.shape[0],i.shape[1],a.shape[1],s);return n.makeTensorInfo(a.shape,"int32",c)}const Zx={kernelName:h["Wc"],backendName:"cpu",kernelFunc:Yx};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qx(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e;dm([r,i,a],"select");const s=r.shape.length,o=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,l=Object(h["Hi"])(i.dtype,a.dtype),d=h["Ji"].makeZerosTypedArray(h["Ji"].sizeFromShape(i.shape),l);let p=0;const f=0===s||s>1||1===i.shape.length?1:h["Ji"].sizeFromShape(i.shape.slice(1));for(let h=0;h<o.length;h++)for(let t=0;t<f;t++)1===o[h]?d[p++]=u[h]:d[p++]=c[h];return n.makeTensorInfo(i.shape,l,d)}const tO={kernelName:h["Xc"],backendName:"cpu",kernelFunc:Qx},eO=h["de"].SELU_SCALEALPHA,nO=h["de"].SELU_SCALE,rO=mm(h["Yc"],t=>t>=0?nO*t:eO*(Math.exp(t)-1)),iO={kernelName:h["Yc"],backendName:"cpu",kernelFunc:rO},aO=mm(h["ad"],t=>t<0?-1:t>0?1:0),sO={kernelName:h["ad"],backendName:"cpu",kernelFunc:aO},oO=mm(h["bd"],t=>Math.sin(t)),uO={kernelName:h["bd"],backendName:"cpu",kernelFunc:oO},cO=mm(h["cd"],t=>Math.sinh(t)),lO={kernelName:h["cd"],backendName:"cpu",kernelFunc:cO},dO=1.1920928955078125e-7,hO=Math.log(dO)+2,pO=mm(h["fd"],t=>{const e=t>-hO,n=t<hO,r=Math.exp(t);let i;return i=n?r:e?t:Math.log(1+r),i}),fO={kernelName:h["fd"],backendName:"cpu",kernelFunc:pO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mO(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:s}=r;dm([i],"spaceToBatchND");const o=h["Ji"].sizeFromShape(a),u=[[0,0]];u.push(...s);for(let h=1+a.length;h<i.shape.length;++h)u.push([0,0]);const c=Xw.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),l=h["de"].getReshaped(c.shape,a,o,!1),d=h["de"].getPermuted(l.length,a.length,!1),p=h["de"].getReshapedPermuted(c.shape,a,o,!1),f={x:c},m={shape:l},g=Xm({inputs:f,backend:n,attrs:m}),b={x:g},y={perm:d},v=hg({inputs:b,backend:n,attrs:y}),w={x:v},x={shape:p},O=Xm({inputs:w,backend:n,attrs:x});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),O}const gO={kernelName:h["gd"],backendName:"cpu",kernelFunc:mO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bO(t,e,n,r,i,a,s){const o=e[0],u=a[0],c=new Array(u),l=new Array(o),d=e[1];if(0===u){if(0!==o)throw new Error(h["de"].getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));const t=h["Ji"].getArrayFromDType(n,0),e=h["Ji"].getArrayFromDType(i,0);return[t,[0,d],e,c,l]}let p=!0,f=0;const m=new Array(u).fill(0);for(let b=0;b<o;++b){const e=t[b*d];if(e<0)throw new Error(h["de"].getSparseFillEmptyRowsNegativeIndexErrorMessage(b,e));if(e>=u)throw new Error(h["de"].getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(b,e,u));++m[e],p=p&&e>=f,f=e}let g=!0;for(let h=0;h<u;++h){const t=0===m[h];c[h]=t,g=g&&!t,m[h]=Math.max(m[h],1),h>0&&(m[h]+=m[h-1])}if(g&&p){const e=t,n=r;for(let t=0;t<o;++t)l[t]=t;return[e,[o,d],n,c,l]}{const e=m[u-1],a=h["Ji"].getArrayFromDType(n,e*d),p=h["Ji"].getArrayFromDType(i,e),f=new Array(u).fill(0);for(let n=0;n<o;++n){const e=t[n*d],i=f[e],s=(0===e?0:m[e-1])+i;f[e]++;for(let r=0;r<d;++r)a[s*d+r]=t[n*d+r];p[s]=r[n],l[n]=s}for(let t=0;t<u;++t){const e=f[t];if(0===e){const e=0===t?0:m[t-1];a[e*d+0]=t;for(let t=1;t<d;++t)a[e*d+t]=0;p[e]=s}}return[a,[e,d],p,c,l]}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yO(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:s}=e;if(1!==a.shape.length)throw new Error("Dense shape must be a vector, saw:\n        "+a.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        "+r.shape);if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n        "+i.shape);if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+s.shape);const o=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values[0],[d,h,p,f,m]=bO(o,r.shape,r.dtype,u,i.dtype,c,l);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(t=>Number(t)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const vO={kernelName:h["hd"],backendName:"cpu",kernelFunc:yO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wO(t,e,n,r,i){const a=h["Ji"].sizeFromShape(r),s=e[0],o=i.length,u=[];let c=1,l=-1;for(let b=0;b<o;++b){const t=i[b];if(-1===t){if(-1!==l)throw new Error(h["de"].getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,b));l=b,u.push(1)}else{if(t<0)throw new Error(h["de"].getSparseReshapeNegativeOutputDimErrorMessage(b,t));c*=t,u.push(t)}}if(-1!==l){if(c<=0)throw new Error(h["de"].getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const t=Math.trunc(a/c);if(c*t!==a)throw new Error(h["de"].getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[l]=t}const d=h["Ji"].sizeFromShape(u);if(d!==a)throw new Error(h["de"].getSparseReshapeInputOutputMismatchErrorMessage(r,u));const p=r.length,f=[];if(p>0){f[p-1]=1;for(let t=p-2;t>=0;--t)f[t]=f[t+1]*r[t+1]}const m=[];if(o>0){m[o-1]=1;for(let t=o-2;t>=0;--t)m[t]=m[t+1]*u[t+1]}const g=h["Ji"].getArrayFromDType(n,s*o);for(let h=0;h<s;++h){let e=0;for(let n=0;n<p;++n)e+=t[h*p+n]*f[n];for(let t=0;t<o;++t)g[h*o+t]=Math.trunc(e/m[t]),e%=m[t]}return[g,[s,o],u]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xO(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        "+r.shape);if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape\n        "+i.shape);if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape "+a.shape);const s=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,u=Array.from(n.data.get(a.dataId).values),[c,l,d]=wO(o,r.shape,r.dtype,s,u);return[n.makeTensorInfo(l,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const OO={kernelName:h["id"],backendName:"cpu",kernelFunc:xO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(t,e,n,r,i,a=!1,s=0){const o=r.length,u=[e[0],t.length/e[0]],c=u[1],l=o>0?i[o-1]+1:0,d=l;if(d<0)throw new Error(h["de"].getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const p=e.slice();p[0]=d;const f=p.reduce((t,e)=>t*e,1),m=h["Ji"].getArrayFromDType(n,f);if(0===o)return d>0&&m.fill(s),[m,p];if(d<=0)throw new Error(h["de"].getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,b=1,y=0,v=i[g];while(1){let e=0;if(b<o){if(e=i[b],v===e){++b;continue}if(v>=e)throw new Error(h["de"].getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(v<0||v>=d)throw new Error(h["de"].getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(v,d));v>y&&m.fill(s,y*c,v*c);for(let n=g;n<b;++n){const e=r[n];if(e<0||e>=u[0])throw new Error(h["de"].getSparseSegmentReductionIndicesOutOfRangeErrorMessage(n,r[n],u[0]));for(let n=0;n<c;n++)m[v*c+n]+=t[e*c+n]}if(a)for(let t=0;t<c;t++)m[v*c+t]/=b-g;if(g=b,++b,y=v+1,v=e,b>o)break}return y<d&&m.fill(s,y*c,d*c),[m,p]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kO(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n          "+i.shape);if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n          "+a.shape);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,[c,l]=SO(s,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(l,r.dtype,c)}const TO={kernelName:h["jd"],backendName:"cpu",kernelFunc:kO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _O(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n         "+i.shape);if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n         "+a.shape);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,[c,l]=SO(s,r.shape,r.dtype,o,u);return n.makeTensorInfo(l,r.dtype,c)}const IO={kernelName:h["kd"],backendName:"cpu",kernelFunc:_O};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CO(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:p}=h["de"].calculateShapes(a,i,o),f=!1,m=n.bufferSync(i);let g;switch(a.dtype){case"bool":{const t=n.bufferSync(a),e=Boolean(n.data.get(s.dataId).values[0]);g=Gx(m,t,o,p,l,c,u,d,e,f);break}case"float32":{const t=n.bufferSync(a),e=n.data.get(s.dataId).values[0];g=Gx(m,t,o,p,l,c,u,d,e,f);break}case"int32":{const t=n.bufferSync(a),e=n.data.get(s.dataId).values[0];g=Gx(m,t,o,p,l,c,u,d,e,f);break}case"string":{const t=n.bufferSync(a),e=h["Ji"].decodeString(n.data.get(s.dataId).values[0]);g=Gx(m,t,o,p,l,c,u,d,e,f);break}default:throw new Error("Unsupported type "+a.dtype)}return n.makeTensorInfo(o,g.dtype,g.values)}const AO={kernelName:h["ld"],backendName:"cpu",kernelFunc:CO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:s}=r,o=h["Ji"].parseAxisParam(s,i.shape)[0],u=h["de"].prepareSplitSize(i,a,o),c=new Array(i.shape.length).fill(0),l=i.shape.slice();return u.map(t=>{const e=[...l];e[o]=t;const r=Jg({inputs:{x:i},backend:n,attrs:{begin:c,size:e}});return c[o]+=t,r})}const NO={kernelName:h["md"],backendName:"cpu",kernelFunc:EO},jO=Nm(t=>Math.sqrt(t)),DO=mm(h["nd"],t=>Math.sqrt(t)),$O={kernelName:h["nd"],backendName:"cpu",kernelFunc:DO},RO={kernelName:h["od"],backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;dm(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let o=0;o<i.length;++o){const t=i[o];a[o]=t*t}const s=r.write(a,n.shape,n.dtype);return{dataId:s,shape:n.shape,dtype:n.dtype}}},FO=Sm((t,e)=>{const n=t-e;return n*n}),PO=Wm(h["pd"],FO),MO={kernelName:h["pd"],backendName:"cpu",kernelFunc:PO},LO=mm(h["qd"],(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),BO={kernelName:h["qd"],backendName:"cpu",kernelFunc:LO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zO(t,e,n,r){const i=Object(h["qe"])(t,e.dtype);for(let a=0;a<i.size;a++){const t=i.indexToLoc(a),s=new Array(t.length);for(let e=0;e<s.length;e++)s[e]=t[e]*n[e]+r[e];i.set(e.get(...s),...t)}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VO(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:s,strides:o,beginMask:u,endMask:c,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=r;dm(i,"stridedSlice");const{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:b,isSimpleSlice:y,begin:v,end:w,strides:x}=h["Rh"].sliceInfo(i.shape,a,s,o,u,c,l,d,p);let O;if(g)O=Xm({inputs:{x:i},backend:n,attrs:{shape:m}});else if(b||y){h["Ji"].assert(i.shape.length>=1,()=>"Input must have rank at least 1, got: "+i.shape.length);const t=h["Rh"].computeOutShape(v,w,x),e=Jg({inputs:{x:i},backend:n,attrs:{begin:v,size:t}});O=Xm({inputs:{x:e},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(e)}else{const t=n.bufferSync(i),e=zO(f,t,x,v);O=n.makeTensorInfo(m,e.dtype,e.values)}return O}const UO={kernelName:h["rd"],backendName:"cpu",kernelFunc:VO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WO{constructor(t,e,n,r,i,a){this.separator=h["Ji"].encodeString(t),this.nGramWidths=e,this.leftPad=h["Ji"].encodeString(n),this.rightPad=h["Ji"].encodeString(r),this.padWidth=i,this.preserveShort=a}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const n=this.getPadWidth(e);return Math.max(0,t+2*n-e+1)}createNGrams(t,e,n,r,i,a){for(let s=0;s<i;++s){const o=this.getPadWidth(a),u=Math.max(0,o-s),c=Math.max(0,o-(i-(s+1))),l=a-(u+c),d=e+(u>0?0:s-o);let h=0;h+=u*this.leftPad.length;for(let e=0;e<l;++e)h+=t[d+e].length;h+=c*this.rightPad.length;const p=u+c+l-1;h+=p*this.separator.length,n[r+s]=new Uint8Array(h);const f=n[r+s];let m=0;const g=t=>t.forEach(t=>f[m++]=t);for(let t=0;t<u;++t)g(this.leftPad),g(this.separator);for(let e=0;e<l-1;++e)g(t[d+e]),g(this.separator);if(l>0){g(t[d+l-1]);for(let t=0;t<c;++t)g(this.separator),g(this.rightPad)}else{for(let t=0;t<c-1;++t)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(t,e){const n=t.length,r=e.length;if(r>0){let t=e[0];if(0!==t)throw new Error("First split value must be 0, got "+t);for(let i=1;i<r;++i){let r=e[i]>=t;if(r=r&&e[i]<=n,!r)throw new Error(`Invalid split value ${e[i]}, must be in [${t}, ${n}]`);t=e[i]}if(t!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${t}`)}const i=r-1,a=h["Ji"].getArrayFromDType("int32",r);if(0===n||0===r){const t=new Array(n);for(let e=0;e<=i;++e)a[e]=0;return[t,a]}a[0]=0;for(let o=1;o<=i;++o){const t=e[o]-e[o-1];let n=0;this.nGramWidths.forEach(e=>{n+=this.getNumNGrams(t,e)}),this.preserveShort&&t>0&&0===n&&(n=1),a[o]=a[o-1]+n}const s=new Array(a[i]);for(let o=0;o<i;++o){const n=e[o];let r=a[o];if(this.nGramWidths.forEach(i=>{const a=e[o+1]-e[o],u=this.getNumNGrams(a,i);this.createNGrams(t,n,s,r,u,i),r+=u}),this.preserveShort&&r===a[o]){const i=e[o+1]-e[o];if(0===i)continue;const a=i+2*this.padWidth,u=1;this.createNGrams(t,n,s,r,u,a)}}return[s,a]}}function GO(t,e,n,r,i,a,s,o){return new WO(n,r,i,a,s,o).compute(t,e)}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HO(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:u,preserveShortSequences:c}=r,{data:l,dataSplits:d}=e,h=n.data.get(l.dataId).values,p=n.data.get(d.dataId).values,[f,m]=GO(h,p,i,a,s,o,u,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}const qO={kernelName:h["sd"],backendName:"cpu",kernelFunc:HO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JO(t,e,n,r){if(!t.length)return;if(0===e.length){for(let e=0;e<t.length;++e)r.push(t.subarray(e,e+1));return}if(1===e.length){const i=e[0];let a=t.indexOf(i);while(-1!==a){const e=t.subarray(0,a);n&&0===e.length||r.push(e),t=t.subarray(a+1),a=t.indexOf(i)}return void(n&&0===t.length||r.push(t))}let i=0;for(let a=0;a<t.length+1;a++)if(a===t.length||-1!==e.indexOf(t[a])){const e=t.subarray(i,a);n&&0===e.length||r.push(e),i=a+1}}function KO(t,e,n){const r=t.length,i=[];let a=0,s=0;const o=new Array(r);for(let h=0;h<r;++h){const r=i.length;JO(t[h],e,n,i);const u=i.length-r;o[h]=u,a+=u,s=Math.max(s,u)}const u=h["Ji"].getArrayFromDType("int32",2*a),c=new Array(a),l=[r,s];let d=0;for(let h=0;h<r;++h)for(let t=0;t<o[h];++t)u[2*d]=h,u[2*d+1]=t,c[d]=i[d],++d;return[u,c,l]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XO(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:s}=e;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: "+a.shape);if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+s.shape);const o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values[0],[c,l,d]=KO(o,u,i),h=l.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const YO={kernelName:h["td"],backendName:"cpu",kernelFunc:XO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZO(t,e){const n=h["Ji"].getArrayFromDType("int32",t.length);for(let r=0;r<t.length;++r)n[r]=h["Ji"].fingerPrint64(t[r]).modulo(e).getLowBitsUnsigned();return n}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QO(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(a.dataId).values,o=ZO(s,i);return n.makeTensorInfo(a.shape,"int32",o)}const tS={kernelName:h["ud"],backendName:"cpu",kernelFunc:QO},eS=mm(h["xd"],t=>Math.tan(t)),nS={kernelName:h["xd"],backendName:"cpu",kernelFunc:eS},rS=mm(h["yd"],t=>Math.tanh(t)),iS={kernelName:h["yd"],backendName:"cpu",kernelFunc:rS};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function aS(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Object(h["qe"])(n,t.dtype);for(let i=0;i<r.values.length;++i){const e=r.indexToLoc(i),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const a=t.locToIndex(n);r.values[i]=t.values[a]}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sS(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;dm(i,"tile");const s=aS(n.bufferSync(i),a);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const oS={kernelName:h["Bd"],backendName:"cpu",kernelFunc:sS},uS=(t,e)=>{const n=e.value-t.value;return 0===n?t.index-e.index:n};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cS(t,e,n=0,r=t.length-1){while(r>n){if(r-n>600){const i=r-n+1,a=e-n+1,s=Math.log(i),o=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*o*(i-o)/i)*Math.sign(a-i/2),c=Math.max(n,Math.floor(e-a*o/i+u)),l=Math.min(r,Math.floor(e+(i-a)*o/i+u));cS(t,e,c,l)}const i=t[e];let a=n,s=r;h["Ji"].swap(t,n,e),uS(t[r],i)>0&&h["Ji"].swap(t,n,r);while(a<s){h["Ji"].swap(t,a,s),a++,s--;while(uS(t[a],i)<0)a+=1;while(uS(t[s],i)>0)s-=1}0===uS(t[n],i)?h["Ji"].swap(t,n,s):(s+=1,h["Ji"].swap(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}}function lS(t,e,n,r,i){const a=e[e.length-1],[s,o]=[t.length/a,a],u=h["Ji"].getTypedArrayFromDType(n,s*r),c=h["Ji"].getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){const e=d*o,n=t.subarray(e,e+o);let a=new Array(n.length);n.forEach((t,e)=>a[e]={value:t,index:e}),r<a.length&&(cS(a,r),a=a.slice(0,r)),i&&a.sort(uS);const s=d*r,l=u.subarray(s,s+r),h=c.subarray(s,s+r);for(let t=0;t<r;t++)l[t]=a[t].value,h[t]=a[t].index}const l=e.slice();return l[l.length-1]=r,[Object(h["qe"])(l,n,u),Object(h["qe"])(l,"int32",c)]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dS(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:s}=r;dm(i,"topk");const o=n.data.get(i.dataId).values,[u,c]=lS(o,i.shape,i.dtype,a,s);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const hS={kernelName:h["Cd"],backendName:"cpu",kernelFunc:dS};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pS(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:a}=e,{interpolation:s,fillMode:o,fillValue:u,outputShape:c}=n,[l,d,p,f]=i.shape,[m,g]=null!=c?c:[d,p],b=[l,m,g,f],y=h["Ji"].computeStrides(i.shape),v=y[0],w=y[1],x=y[2],O=h["Ji"].computeStrides(b),S=O[0],k=O[1],T=O[2],_=h["Ji"].getTypedArrayFromDType(i.dtype,h["Ji"].sizeFromShape(b));_.fill(u);const I=r.data.get(i.dataId).values,C=r.data.get(a.dataId).values;for(let h=0;h<l;++h){const t=1===a.shape[0]?C:C.subarray(8*h,8*h+8);for(let e=0;e<m;++e)for(let n=0;n<g;++n)for(let r=0;r<f;++r){let i;const a=t[6]*n+t[7]*e+1;if(0===a)continue;const c=(t[0]*n+t[1]*e+t[2])/a,l=(t[3]*n+t[4]*e+t[5])/a,f=mS(c,p,o),m=mS(l,d,o);switch(s){case"nearest":i=xS(I,d,p,v,w,x,h,m,f,r,u);break;case"bilinear":i=OS(I,d,p,v,w,x,h,m,f,r,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got "+s)}const g=h*S+e*k+n*T+r;_[g]=i}return r.makeTensorInfo(b,i.dtype,_)}const A=r.write(_,b,i.dtype);return{dataId:A,shape:i.shape,dtype:i.dtype}}const fS={kernelName:h["Dd"],backendName:"cpu",kernelFunc:pS};function mS(t,e,n){switch(n){case"reflect":return gS(t,e);case"wrap":return bS(t,e);case"nearest":return vS(t,e);case"constant":default:return yS(t,e)}}function gS(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const t=2*e;n<t&&(n=t*Math.trunc(-n/t)+n),n=n<-e?n+t:-n-1}else if(n>e-1)if(e<=1)n=0;else{const t=2*e;n-=t*Math.trunc(n/t),n>=e&&(n=t-n-1)}return h["Ji"].clamp(0,n,e-1)}function bS(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const t=e-1;n+=e*(Math.trunc(-n/t)+1)}else if(n>e-1)if(e<=1)n=0;else{const t=e-1;n-=e*Math.trunc(n/t)}return h["Ji"].clamp(0,n,e-1)}function yS(t,e){return t}function vS(t,e){return h["Ji"].clamp(0,t,e-1)}function wS(t,e,n,r,i,a,s,o,u,c,l){const d=s*r+o*i+u*a+c;return 0<=o&&o<e&&0<=u&&u<n?t[d]:l}function xS(t,e,n,r,i,a,s,o,u,c,l){const d=Math.round(o),h=Math.round(u);return wS(t,e,n,r,i,a,s,d,h,c,l)}function OS(t,e,n,r,i,a,s,o,u,c,l){const d=Math.floor(o),h=Math.floor(u),p=d+1,f=h+1,m=(f-u)*wS(t,e,n,r,i,a,s,d,h,c,l)+(u-h)*wS(t,e,n,r,i,a,s,d,f,c,l),g=(f-u)*wS(t,e,n,r,i,a,s,p,h,c,l)+(u-h)*wS(t,e,n,r,i,a,s,p,f,c,l);return(p-o)*m+(o-d)*g}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SS(t,e,n,r){const i=h["Ji"].parseAxisParam(e,n)[0],a=[1,n[0],1];for(let h=0;h<i;h++)a[0]*=n[h];a[1]=n[i];for(let h=i+1;h<n.length;h++)a[2]*=n[h];const s={},o=new Int32Array(n[i]),u=new h["Ad"](a,r,t),c=[],l=1===a[0]&&1===a[2];for(let h=0;h<n[i];h++){let e;if(l)e=t[h].toString();else{const t=[];for(let e=0;e<a[0];e++)for(let n=0;n<a[2];n++)t.push(u.get(e,h,n));e=t.join(",")}if(void 0!==s[e])o[h]=s[e];else{const t=Object.keys(s).length;s[e]=t,o[h]=t,c.push(h)}}const d=a.slice();d[1]=Object.keys(s).length;const p=new h["Ad"](d,r);c.forEach((t,e)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)p.set(u.get(n,t,r),n,e,r)});const f=n.slice();return f[i]=d[1],{outputValues:p.values,outputShape:f,indices:o}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kS(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;dm(a,"unique");const s=r.data.get(a.dataId).values,{outputValues:o,outputShape:u,indices:c}=SS(s,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const TS={kernelName:h["Fd"],backendName:"cpu",kernelFunc:kS};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _S(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const s=i.shape.length,o=i.shape[a],u=new Array(s-1);let c=0;for(let p=0;p<s;p++)p!==a&&(u[c++]=i.shape[p]);const l=new Array(s).fill(0),d=i.shape.slice();d[a]=1;const h=new Array(o);for(let p=0;p<h.length;p++){l[a]=p;const t=Jg({inputs:{x:i},backend:n,attrs:{begin:l,size:d}});h[p]=Xm({inputs:{x:t},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(t)}return h}const IS={kernelName:h["Gd"],backendName:"cpu",kernelFunc:_S};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CS(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:s}=r;dm(i,"unsortedSegmentSum");const o=i.shape.length,u=a.shape.length,c=[],l=[],d=o-u;let p=a;for(let h=0;h<d;++h){const t=Sy({inputs:{input:p},backend:n,attrs:{dim:h+1}});p=t,l.push(t)}for(let m=0;m<s;++m){const t=h["Ji"].createScalarValue(m,"int32"),e=n.makeTensorInfo([],"int32",t),r=ly({inputs:{a:e,b:p},backend:n}),a=Vm({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),s=ey({inputs:{a:a,b:i},backend:n}),o=ry({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});c.push(o),l.push(e),l.push(r),l.push(a),l.push(s),l.push(o)}const f=qw({inputs:c,backend:n,attrs:{axis:0}});return l.forEach(t=>n.disposeIntermediateTensorInfo(t)),f}const AS={kernelName:h["Hd"],backendName:"cpu",kernelFunc:CS},ES=[eg,ig,sg,ug,Km,lg,mg,bg,vg,xg,Sg,Tg,Ig,Eg,jg,Mg,Bg,Vg,Wg,Qm,Hg,Yg,eb,rb,Um,sb,ub,Pm,lb,mb,bb,vb,xb,Sb,Tb,Ib,Ab,Nb,Db,Rb,Pb,Lb,zb,Ub,Gb,qb,Kb,Xb,Yb,Zb,sy,ym,uy,dy,vy,Oy,ky,Iy,zy,Uy,Gy,Jy,Yy,Qy,ev,iv,ov,lv,pv,wm,mv,pb,bv,vv,xv,Om,kv,Iv,Ev,Dv,Rv,Mv,Bv,Uv,Gv,qv,Xv,Qv,ew,rw,aw,ow,cw,dw,pw,gw,yw,xw,Tw,ny,Cw,Nw,$w,Pw,Bw,Vw,Hw,Jw,Xw,Qw,_m,nx,hx,gx,Sx,_x,Bm,Ey,Cx,Cm,Em,Ym,Ex,jx,$x,Fx,Mx,Lx,zx,Wx,qx,Zx,tO,iO,$m,sO,uO,lO,Kg,Sw,fO,gO,vO,OO,TO,IO,AO,NO,$O,RO,MO,BO,UO,qO,YO,tS,$y,iy,nS,iS,oS,hS,fS,pg,TS,IS,AS,Ww];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const aM of ES)Object(h["kh"])(aM);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NS={},jS={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function DS(t,e){NS[t]=e}function $S(t,e){if(!(t in NS)||null!=e){const n=FS(t,e);if(null===n)return console.log("Could not get context for WebGL version",t),null;NS[t]=n}const n=NS[t];return null==n||n.isContextLost()?(delete NS[t],$S(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),NS[t])}function RS(t){if("undefined"!==typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function FS(t,e){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==e?RS(t):e;return n.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete NS[t]},!1),Object(h["hf"])().getBool("SOFTWARE_WEBGL_ENABLED")&&(jS.failIfMajorPerformanceCaveat=!1),1===t?n.getContext("webgl",jS)||n.getContext("experimental-webgl",jS):n.getContext("webgl2",jS)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var PS,MS,LS;function BS(t,e){return[e,t]}function zS(t,e){return t*e}function VS(t){const e=h["Ji"].sizeFromShape(t),n=Math.ceil(e/4);return h["Ji"].sizeToSquarishShape(n)}function US(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function WS(t,e){const[n,r]=US(t,e);return n*r*4}function GS(t,e){const n=t;let r,i,a,s,o,u,c,l,d,p;return 2===Object(h["hf"])().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,a=n.RGBA16F,s=n.RGBA32F,o=n.RED,c=4,l=1,d=n.HALF_FLOAT,p=n.FLOAT,u=n.RGBA8):(r=t.RGBA,i=t.RGBA,a=t.RGBA,s=n.RGBA,o=t.RGBA,c=4,l=4,d=null!=e?e.HALF_FLOAT_OES:null,p=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:p}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HS(t,e){const n=e();return Object(h["hf"])().getBool("DEBUG")&&qS(t),n}function qS(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+YS(t,e))}(function(t){t[t["DENSE"]=0]="DENSE",t[t["SHARED_BATCH"]=1]="SHARED_BATCH"})(PS||(PS={})),function(t){t[t["RENDER"]=0]="RENDER",t[t["UPLOAD"]=1]="UPLOAD",t[t["PIXELS"]=2]="PIXELS",t[t["DOWNLOAD"]=3]="DOWNLOAD"}(MS||(MS={})),function(t){t[t["UNPACKED_FLOAT16"]=0]="UNPACKED_FLOAT16",t[t["UNPACKED_FLOAT32"]=1]="UNPACKED_FLOAT32",t[t["PACKED_4X1_UNSIGNED_BYTE"]=2]="PACKED_4X1_UNSIGNED_BYTE",t[t["PACKED_2X2_FLOAT32"]=3]="PACKED_2X2_FLOAT32",t[t["PACKED_2X2_FLOAT16"]=4]="PACKED_2X2_FLOAT16"}(LS||(LS={}));const JS=5.96e-8,KS=65504;function XS(t){return!!(Object(h["hf"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||JS<Math.abs(t)&&Math.abs(t)<KS)}function YS(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function ZS(t,e){return wk(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function QS(t,e){const n=wk(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(HS(t,()=>t.shaderSource(n,e)),HS(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function tk(t,e){const n=wk(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(HS(t,()=>t.shaderSource(n,e)),HS(t,()=>t.compileShader(n)),Object(h["hf"])().get("ENGINE_COMPILE_ONLY"))return n;if(!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw nk(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const ek=/ERROR: [0-9]+:([0-9]+):/g;function nk(t,e){const n=ek.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);const r=+n[1],i=t.split("\n"),a=i.length.toString().length+2,s=i.map((t,e)=>h["Ji"].rightPad((e+1).toString(),a)+t);let o=0;for(let d=0;d<s.length;d++)o=Math.max(s[d].length,o);const u=s.slice(0,r-1),c=s.slice(r-1,r),l=s.slice(r);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+h["Ji"].rightPad(c[0],o),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function rk(t){return wk(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ik(t,e){if(HS(t,()=>t.linkProgram(e)),!Object(h["hf"])().get("ENGINE_COMPILE_ONLY")&&!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function ak(t,e){if(HS(t,()=>t.validateProgram(e)),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function sk(t,e){const n=wk(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return HS(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),HS(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function ok(t,e){const n=wk(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return HS(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),HS(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function uk(t){return wk(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ck(t,e){const n=Object(h["hf"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const n=`[${t}x${e}]`;throw new Error("Requested texture size "+n+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function lk(t){return wk(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function dk(t,e,n,r,i,a,s){const o=t.getAttribLocation(e,n);return-1!==o&&(HS(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),HS(t,()=>t.vertexAttribPointer(o,i,t.FLOAT,!1,a,s)),HS(t,()=>t.enableVertexAttribArray(o)),!0)}function hk(t,e,n){xk(t,n),HS(t,()=>t.activeTexture(t.TEXTURE0+n)),HS(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function pk(t,e,n){return wk(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function fk(t,e,n){return t.getUniformLocation(e,n)}function mk(t,e,n,r){HS(t,()=>hk(t,e,r)),HS(t,()=>t.uniform1i(n,r))}function gk(t,e,n){HS(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),HS(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function bk(t,e){HS(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),HS(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function yk(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+vk(t,e))}function vk(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function wk(t,e,n){const r=HS(t,()=>e());if(null==r)throw new Error(n);return r}function xk(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const t=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${t}.`)}}function Ok(t,e=2){return h["Ji"].sizeFromShape(t.slice(0,t.length-e))}function Sk(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function kk(t){let e=[1,1,1];const n=0===t.length||1===t.length&&1===t[0];return n||(e=[Ok(t),...Sk(t)]),e}function Tk(t,e=!1){let n=Object(h["hf"])().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Object(h["hf"])().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Object(h["hf"])().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n*=2,r*=2,t=t.map((e,n)=>n>=t.length-2?h["Ji"].nearestLargerEven(t[n]):t[n]),1===t.length&&(t=[2,t[0]])),2!==t.length){const e=h["Ji"].squeezeShape(t);t=e.newShape}let i=h["Ji"].sizeFromShape(t),a=null;t.length<=1&&i<=n?a=[1,i]:2===t.length&&t[0]<=n&&t[1]<=n?a=t:3===t.length&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:3===t.length&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const s=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(null==a||s)if(e){const e=Ok(t);let n=2,r=2;t.length&&([n,r]=Sk(t)),i=e*(n/2)*(r/2),a=h["Ji"].sizeToSquarishShape(i).map(t=>2*t)}else a=h["Ji"].sizeToSquarishShape(i);return a}function _k(t){return t%2===0}function Ik(t,e){if(t=t.slice(-2),e=e.slice(-2),h["Ji"].arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(_k(n)&&_k(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&_k(t[0])&&_k(e[0])}let Ck,Ak;function Ek(t){if(null==Ck){const e=$S(t);Ck=e.getParameter(e.MAX_TEXTURE_SIZE)}return Ck}function Nk(t){if(null==Ak){const e=$S(t);Ak=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ak)}function jk(t){if(0===t)return 0;let e;const n=$S(t);return e=Dk(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:Dk(n,"EXT_disjoint_timer_query")?1:0,e}function Dk(t,e){const n=t.getExtension(e);return null!=n}function $k(t){try{const e=$S(t);if(null!=e)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Rk(t){if(0===t)return!1;const e=$S(t);if(1===t){if(!Dk(e,"OES_texture_float"))return!1}else if(!Dk(e,"EXT_color_buffer_float"))return!1;const n=Pk(e);return n}function Fk(t){if(0===t)return!1;const e=$S(t);if(1!==t){if(Dk(e,"EXT_color_buffer_float"))return Pk(e);const t="EXT_color_buffer_half_float";if(Dk(e,t)){const n=e.getExtension(t);return Mk(e,n)}return!1}if(!Dk(e,"OES_texture_float"))return!1;if(!Dk(e,"WEBGL_color_buffer_float"))return!1;const n=Pk(e);return n}function Pk(t){const e=GS(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),s}function Mk(t,e){const n=GS(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,a=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),o}function Lk(t){if(2!==t)return!1;const e=$S(t),n=null!=e.fenceSync;return n}function Bk(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&h["Ji"].assert("complex64"!==t.dtype,()=>e+" does not support complex64 tensors in the WebGL backend.")})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zk=Object(h["hf"])();
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vk(){let t,e,n,r,i,a,s,o,u,c;return 2===Object(h["hf"])().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",s="out vec4 outputColor;",o=Object(h["hf"])().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",s="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:u,defineRound:c}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uk(t,e,n="index"){const r=h["Ji"].computeStrides(e);return r.map((e,i)=>{const a=`int ${t[i]} = ${n} / ${e}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${e}`:`index -= ${t[i]} * ${e}`;return`${a}; ${s};`}).join("")}function Wk(t,e,n="index"){const r=h["Ji"].computeStrides(e);return r.map((e,i)=>{const a=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${a}; ${s};`}).join("")}function Gk(t,e){const n=t.length,r=t.map(t=>`${e}[${t}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function Hk(t,e,n="index"){const r=t.map((t,e)=>e),i=Gk(r,e);return i.map((e,r)=>{const a=`int ${t[r]} = ${n} / ${i[r]}`,s=r===i.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${i[r]}`:`index -= ${t[r]} * ${i[r]}`;return`${a}; ${s};`}).join("")}function qk(t){const e=h["Ji"].computeStrides(t).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}function Jk(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}zk.registerFlag("HAS_WEBGL",()=>zk.getNumber("WEBGL_VERSION")>0),zk.registerFlag("WEBGL_VERSION",()=>$k(2)?2:$k(1)?1:0),zk.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),zk.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===zk.get("WEBGL_VERSION")),zk.registerFlag("WEBGL_CPU_FORWARD",()=>!0),zk.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),zk.registerFlag("WEBGL_PACK",()=>zk.getBool("HAS_WEBGL")),zk.registerFlag("WEBGL_PACK_NORMALIZATION",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_CLIP",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_PACK_REDUCE",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_LAZILY_UNPACK",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_CONV_IM2COL",()=>zk.getBool("WEBGL_PACK")),zk.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Ek(zk.getNumber("WEBGL_VERSION"))),zk.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Nk(zk.getNumber("WEBGL_VERSION"))),zk.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=zk.getNumber("WEBGL_VERSION");return 0===t?0:jk(t)}),zk.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>zk.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!h["Re"].isMobile()),zk.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Rk(zk.getNumber("WEBGL_VERSION"))),zk.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!zk.getBool("WEBGL_FORCE_F16_TEXTURES")&&zk.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),zk.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Fk(zk.getNumber("WEBGL_VERSION"))),zk.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Lk(zk.getNumber("WEBGL_VERSION"))),zk.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{const t=zk.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return t?4:0}),zk.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),zk.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>h["Re"].isMobile()?1:-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),zk.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),zk.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),zk.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),zk.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),zk.registerFlag("WEBGL_EXP_CONV",()=>!1),zk.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>zk.getBool("IS_TEST")),zk.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),zk.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),zk.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),zk.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const Kk="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:Xk}=h["de"];
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yk(t,e,n){const r=[];if(t.forEach(t=>{const e=h["Ji"].sizeFromShape(t.shapeInfo.logicalShape);if(t.shapeInfo.isUniform?r.push(`uniform float ${t.name}${e>1?`[${e}]`:""};`):(r.push(`uniform sampler2D ${t.name};`),r.push(`uniform int offset${t.name};`)),n.enableShapeUniforms){const{uniformShape:e}=LT(n.packedInputs,t.shapeInfo.logicalShape,t.shapeInfo.texShape);switch(e.length){case 1:r.push(`uniform int ${t.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${t.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${t.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${t.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${t.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(t=>{r.push(`uniform ${t.type} ${t.name}${t.arrayIndex?`[${t.arrayIndex}]`:""};`)});const i=r.join("\n"),a=t.map(t=>tT(t,e,n.packedInputs,n.enableShapeUniforms)).join("\n"),s=e.texShape,o=Vk(),u=rT(o);let c,l,d=sT(o);e.isPacked?(c=eT(e.logicalShape,s,n.enableShapeUniforms),l=aT(o)):(c=nT(e.logicalShape,s,n.enableShapeUniforms),l=iT(o)),n.packedInputs&&(d+=lT);const p=[d,u,l,i,c,a,n.userCode].join("\n");return p}function Zk(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return kT(t,e);case 1:return _T(t,e);case 2:return CT(t,e);case 3:return ET(t,e);case 4:return jT(t,e);case 5:return DT(t);case 6:return $T(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function Qk(t,e){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return ST(t);case 1:return TT(t,e);case 2:return IT(t,e);case 3:return AT(t,e);default:return NT(t,e)}}function tT(t,e,n=!1,r){let i="";i+=n?Qk(t,r):Zk(t,r);const a=t.shapeInfo.logicalShape,s=e.logicalShape;return a.length<=s.length&&(i+=n?FT(t,e):PT(t,e)),i}function eT(t,e,n){switch(t.length){case 0:return dT();case 1:return hT(t,e,n);case 2:return wT(t,e,n);case 3:return fT(t,e,n);default:return gT(t,e,n)}}function nT(t,e,n){switch(t.length){case 0:return dT();case 1:return pT(t,e,n);case 2:return xT(t,e,n);case 3:return mT(t,e,n);case 4:return bT(t,e,n);case 5:return yT(t,e);case 6:return vT(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}function rT(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}function iT(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}function aT(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}function sT(t){const e=`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${oT}\n    ${uT}\n    ${cT}\n  `;return e}const oT="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uT="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cT="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",lT="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function dT(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function hT(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}function pT(t,e,n){return 1===e[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `}function fT(t,e,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),a=i*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function mT(t,e,n){if(n){const e=Wk(["r","c","d"],t);return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${e}\n    return ivec3(r, c, d);\n  }\n`}const r=Uk(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}function gT(t,e,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),a=i*Math.ceil(t[t.length-2]/2);let s=a,o="",u="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],o=`\n      int b${c} = index / ${s};\n      index -= b${c} * ${s};\n    `+o,u=`b${c}, `+u;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${t.length}(${u});\n    }\n  `}function bT(t,e,n){if(n){const e=Wk(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${e}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=Uk(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}function yT(t,e){const n=Uk(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function vT(t,e){const n=Uk(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function wT(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(h["Ji"].arraysEqual(t,e))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(t[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function xT(t,e,n){return h["Ji"].arraysEqual(t,e)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));\n      }\n    `:1===t[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}function OT(t){return"offset"+t}function ST(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Vk();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${e}, halfCR);\n    }\n  `}function kT(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=t.shapeInfo.texShape;if(1===i&&1===a)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=OT(n);if(e)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[o,u]=t.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${o}, ${u}, ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}function TT(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=Vk();if(e)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `;const s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${s[0]}, ${s[1]}, index);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}function _T(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${RT(t)}\n      }\n    `;const i=t.shapeInfo.texShape,a=i[0],s=i[1];if(1===s&&1===a)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const o=OT(n);return 1===s?e?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:1===a?e?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:e?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${s}, index + ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `}function IT(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,s=a[0],o=a[1],u=Vk();if(null!=a&&h["Ji"].arraysEqual(n,a))return e?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${u.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);\n\n        return ${u.texture2D}(${r}, uv);\n      }\n    `;if(e)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${u.texture2D}(${r}, uv);\n    }\n  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=Math.ceil(n[1]/2);return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${l}, ${c[0]}, ${c[1]}, row, col);\n      return ${u.texture2D}(${r}, uv);\n    }\n  `}function CT(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(null!=a&&h["Ji"].arraysEqual(n,a)){if(e)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const t=a[0],n=a[1];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${n}.0, ${t}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:s,keptDims:o}=h["Ji"].squeezeShape(n),u=s;if(u.length<n.length){const n=BT(t,u),r=["row","col"];return`\n      ${Zk(n,e)}\n      float ${i}(int row, int col) {\n        return ${i}(${zT(r,o)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${RT(t)}\n      }\n    `;const c=a[0],l=a[1],d=OT(r);return 1===l?e?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===c?e?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:e?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${c}, ${l}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}function AT(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=n.slice(1),a=[1,2],s=BT(t,r),o=["b","row","col"];return`\n        ${Qk(s,e)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${zT(o,a)});\n        }\n      `}const o=Vk();if(e)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `;const u=s[0],c=s[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${u}, ${c}, ${d}, ${l}, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `}function ET(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],s=n[2],{newShape:o,keptDims:u}=h["Ji"].squeezeShape(n),c=o;if(c.length<n.length){const n=BT(t,c),r=["row","col","depth"];return`\n        ${Zk(n,e)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${zT(r,u)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${s}, 1)));\n        ${RT(t)}\n      }\n    `;const l=t.shapeInfo.texShape,d=l[0],p=l[1],f=t.shapeInfo.flatOffset;if(p===a&&null==f)return e?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${s}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${p}.0, ${d}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(p===s&&null==f)return e?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const m=OT(r);return e?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${m};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${s} + depth + ${m};\n        vec2 uv = uvFromFlat(${d}, ${p}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}function NT(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Vk();if(e)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;const a=t.shapeInfo.logicalShape,s=a.length,o=t.shapeInfo.texShape,u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=u[0],l=u[1],d=Math.ceil(a[s-1]/2);let h=d*Math.ceil(a[s-2]/2),p="int b, int row, int col",f=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<s-1;m++)p=`int b${m}, `+p,h*=a[s-m-1],f=`b${m} * ${h} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${c});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}function jT(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],s=n[2]*a,o=n[1]*s,{newShape:u,keptDims:c}=h["Ji"].squeezeShape(n);if(u.length<n.length){const n=BT(t,u),r=["row","col","depth","depth2"];return`\n      ${Zk(n,e)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${zT(r,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${o}, ${s}, ${a}, 1)));\n        ${RT(t)}\n      }\n    `;const l=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1],m=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(f===o&&null==l)return e?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${m}\n        ${g}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(f===a&&null==l)return e?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const y=OT(r);return e?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${m}\n      ${g}\n      ${b}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${s} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${f}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}function DT(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,s=e[2]*a,o=e[1]*s,{newShape:u,keptDims:c}=h["Ji"].squeezeShape(e);if(u.length<e.length){const e=BT(t,u),n=["row","col","depth","depth2","depth3"];return`\n      ${Zk(e)}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${zT(n,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${o}, ${s}, ${a}, ${i})) +\n          depth3;\n        ${RT(t)}\n      }\n    `;const l=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===o&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${s}, ${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===i&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]},\n               ${e[2]*e[3]}, ${e[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=OT(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${s} + depth * ${a} +\n          depth2 * ${i} + depth3 + ${m};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function $T(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=h["Ji"].squeezeShape(e);if(i.length<e.length){const e=BT(t,i),n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${Zk(e)}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${zT(n,a)});\n      }\n    `}const s=e[5],o=e[4]*s,u=e[3]*o,c=e[2]*u,l=e[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${c}, ${u}, ${o})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${s}, 1)));\n        ${RT(t)}\n      }\n    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],m=p[1];if(m===l&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${u}, ${o}, ${s})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(m===s&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]*e[4]},\n               ${e[2]*e[3]*e[4]},\n               ${e[3]*e[4]},\n               ${e[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const g=OT(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${c} + depth * ${u} +\n          depth2 * ${o} + depth3 * ${s} + depth4 + ${g};\n      vec2 uv = uvFromFlat(${f}, ${m}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function RT(t){const e=t.name,n=h["Ji"].sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${e}[i];\n      }\n    }\n  `}function FT(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,o=Xk(t.shapeInfo.logicalShape,e.logicalShape),u=MT(s),c=s-a;let l;const d=["x","y","z","w","u","v"];l=0===a?"":s<2&&o.length>=1?"coords = 0;":o.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let p="";p=s<2&&a>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+d[e+c]).join(", ");let f="return outputValue;";const m=h["Ji"].sizeFromShape(t.shapeInfo.logicalShape),g=1===m,b=h["Ji"].sizeFromShape(e.logicalShape),y=1===b;if(1!==a||g||y){if(g&&!y)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){const t=a-2,e=a-1;o.indexOf(t)>-1&&o.indexOf(e)>-1?f="return vec4(outputValue.x);":o.indexOf(t)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(e)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${u} coords = getOutputCoords();\n      ${l}\n      vec4 outputValue = get${r}(${p});\n      ${f}\n    }\n  `}function PT(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,s=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===u&&null==t.shapeInfo.flatOffset&&h["Ji"].arraysEqual(s,a))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const c=MT(u),l=Xk(t.shapeInfo.logicalShape,e.logicalShape),d=u-o;let p;const f=["x","y","z","w","u","v"];p=0===o?"":u<2&&l.length>=1?"coords = 0;":l.map(t=>`coords.${f[t+d]} = 0;`).join("\n");let m="";return m=u<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+f[e+d]).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${p}\n      return get${r}(${m});\n    }\n  `}function MT(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function LT(t,e,n){const{newShape:r,keptDims:i}=h["Ji"].squeezeShape(e),a=e.length,s=t&&3===a&&1===e[0],o=s?e.slice(1):r,u=!t&&a>1&&!h["Ji"].arraysEqual(e,n)&&r.length<a||s,c=u?o:e;return{useSqueezeShape:u,uniformShape:c,keptDims:i}}function BT(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function zT(t,e){return e.map(e=>t[e]).join(", ")}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VT(t,e,n,r){const i=n.map((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),a=i.map(t=>t.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=Yk(i,s,e),u=tk(t.gl,o),c=t.createProgram(u);return Object(h["hf"])().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:s,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:u,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:s},UT(t,e,c))}function UT(t,e,n){const r={},i={},a={},s=[];let o,u,c,l=null,d=null;d=t.getUniformLocation(n,"NAN",!1),1===Object(h["hf"])().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let h=0;h<e.variableNames.length;h++){const s=e.variableNames[h];r[s]=t.getUniformLocation(n,s,p),r["offset"+s]=t.getUniformLocation(n,"offset"+s,p),e.enableShapeUniforms&&(i[s+"Shape"]=t.getUniformLocation(n,s+"Shape",p),a[s+"TexShape"]=t.getUniformLocation(n,s+"TexShape",p))}return e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",p),c=t.getUniformLocation(n,"outShapeStrides",p),u=t.getUniformLocation(n,"outTexShape",p)),e.customUniforms&&e.customUniforms.forEach((e,r)=>{s[r]=t.getUniformLocation(n,e.name,p)}),{uniformLocations:r,customUniformLocations:s,infLoc:l,nanLoc:d,inShapesLocations:i,inTexShapesLocations:a,outShapeLocation:o,outShapeStridesLocation:c,outTexShapeLocation:u}}function WT(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((t,n)=>{const r=t.logicalShape,i=e[n],a=i.shape;if(!h["Ji"].arraysEqual(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(t.isUniform&&i.isUniform)return;const s=t.texShape,o=i.isUniform?null:i.texData.texShape;if(!h["Ji"].arraysEqual(s,o))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${o} must match`)})}function GT(t,e,n,r,i){e.program.enableShapeUniforms||(WT(e.inShapeInfos,n),WT([e.outShapeInfo],[r]));const a=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,s[0],s[1]):t.setOutputMatrixTexture(a.texture,s[0],s[1]),t.setProgram(e.webGLProgram),1===Object(h["hf"])().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((n,r)=>{const i=e.program.variableNames[r],a=e.uniformLocations[i],s=e.uniformLocations["offset"+i],o=e.inShapesLocations[i+"Shape"],u=e.inTexShapesLocations[i+"TexShape"];if(o){const{uniformShape:r}=LT(e.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:t.gl.uniform1iv(o,new Int32Array(r));break;case 2:t.gl.uniform2iv(o,new Int32Array(r));break;case 3:t.gl.uniform3iv(o,new Int32Array(r));break;case 4:t.gl.uniform4iv(o,new Int32Array(r));break;default:break}}if(u&&t.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=a)if(n.isUniform)if(h["Ji"].sizeFromShape(n.shape)<2)t.gl.uniform1f(a,n.uniformValues[0]);else{let e=n.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(a,e)}else null!=n.texData.slice&&null!=s&&t.gl.uniform1i(s,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture.texture,a,r)});const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break;default:break}if(e.outShapeStridesLocation){const n=h["Ji"].computeStrides(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(n));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(n));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(n));break;default:break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i&&e.program.customUniforms.forEach((n,r)=>{const a=e.customUniformLocations[r],s=i[r];if("float"===n.type)t.gl.uniform1fv(a,s);else if("vec2"===n.type)t.gl.uniform2fv(a,s);else if("vec3"===n.type)t.gl.uniform3fv(a,s);else if("vec4"===n.type)t.gl.uniform4fv(a,s);else if("int"===n.type)t.gl.uniform1iv(a,s);else if("ivec2"===n.type)t.gl.uniform2iv(a,s);else if("ivec3"===n.type)t.gl.uniform3iv(a,s);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);t.gl.uniform4iv(a,s)}}),t.executeProgram()}function HT(t,e,n){let r="";e.concat(n).forEach(e=>{const i=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!e.isUniform){const a=e.texData.texShape,{useSqueezeShape:s,uniformShape:o,keptDims:u}=LT(t.packedInputs,e.shape,a);let c="",l="",d="";if(1===o.length&&t.packedInputs){const t=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];c=`${t[0]>1}_${t[1]>1}`}else if(2!==o.length||t.packedInputs){if(o.length>2&&!t.packedInputs){const t=h["Ji"].computeStrides(o);d=`${t[0]===a[1]}_${t[t.length-1]===a[1]}`}}else l=`${o[0]>1}_${o[1]>1}`;const p=e.shape.length,f=2===o.length&&h["Ji"].arraysEqual(e.shape,a),m=1===h["Ji"].sizeFromShape(e.shape),g=h["de"].getBroadcastDims(e.shape,n.shape),b=!t.packedInputs&&p===n.shape.length&&h["Ji"].arraysEqual(a,n.texData.texShape),y=t.packedInputs||o.length>2?"":`${a[0]>1}_${a[1]>1}`;r+=`${p}_${b}_${s?u:""}_${o.length}_${m}_${g}_${f}_${c}_${l}_${d}_${y}_${i}`}else{const t=e.isUniform?"uniform":e.texData.texShape;r+=`${e.shape}_${t}_${i}`}});const i=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+i+Object(h["hf"])().getNumber("WEBGL_VERSION"),a}function qT(t){return Object(h["hf"])().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JT{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=PS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Vk();this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Wk(["r","c","d"],t):Uk(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${e.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KT{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=PS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Vk();this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Wk(["r","c","d"],t):Uk(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${e.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XT{constructor(t){this.variableNames=["A"],this.outTexUsage=MS.DOWNLOAD;const e=Vk();this.outputShape=t,this.userCode=`\n      ${Kk}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YT{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=MS.DOWNLOAD;const e=Vk();this.outputShape=t,this.userCode=`\n      ${Kk}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZT={R:0,G:1,B:2,A:3};class QT{constructor(t,e=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Vk();this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length);let i="result";e&&(i="floor(result * 255. + 0.5)");let a="";for(let s=0;s<n.length;s++){const t=n[s];a+=`\n          if(offset == ${s}) {\n            result = values[${ZT[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?Jk():qk(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${a}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t_{constructor(t,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Vk();this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length);let r="",i="result";e&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let e=0;e<=1;e++){const i=2*a+e;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${e} < ${this.enableShapeUniforms?"outShape[2]":""+t[2]}) {\n          localCoords[2] += ${e};\n          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":""+t[1]}) {\n            localCoords[1] += ${a};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${i}] = values[0];\n            } else if (offset == 1) {\n              result[${i}] = values[1];\n            } else if (offset == 2) {\n              result[${i}] = values[2];\n            } else {\n              result[${i}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?Jk():qk(t)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_(t){const e=Vk(),n=`${e.version}\n    precision highp float;\n    ${e.attribute} vec3 clipSpacePos;\n    ${e.attribute} vec2 uv;\n    ${e.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return QS(t,n)}function n_(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return sk(t,e)}function r_(t){const e=new Uint16Array([0,1,2,2,1,3]);return ok(t,e)}function i_(t,e,n,r,i,a){ck(e,n);const s=uk(t),o=t.TEXTURE_2D;return HS(t,()=>t.bindTexture(o,s)),HS(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),HS(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),HS(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),HS(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),1===Object(h["hf"])().getNumber("WEBGL_VERSION")?HS(t,()=>t.texImage2D(o,0,r,e,n,0,i,a,null)):HS(t,()=>t.texStorage2D(o,1,r,e,n)),HS(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[n,e]}}function a_(t){return t.internalFormatFloat}function s_(t,e,n,r){const[i,a]=BS(e,n);return i_(t,i,a,a_(r),r.textureFormatFloat,t.FLOAT)}function o_(t){return t.internalFormatHalfFloat}function u_(t,e,n,r){const[i,a]=BS(e,n);return i_(t,i,a,o_(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function c_(t){return t.downloadTextureFormat}function l_(t,e,n,r){const[i,a]=BS(e,n);return i_(t,i,a,c_(r),t.RGBA,t.UNSIGNED_BYTE)}function d_(t){return t.internalFormatPackedFloat}function h_(t,e,n,r){const[i,a]=US(e,n);return i_(t,i,a,d_(r),t.RGBA,t.FLOAT)}function p_(t){return t.internalFormatPackedHalfFloat}function f_(t,e,n,r){const[i,a]=US(e,n);return i_(t,i,a,p_(r),t.RGBA,r.textureTypeHalfFloat)}function m_(t,e,n){const r=0,i=12,a=20;HS(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n));const s=dk(t,e,"clipSpacePos",n,3,a,r);return s&&dk(t,e,"uv",n,2,a,i)}function g_(t,e,n,r,i,a){let s,o,u;HS(t,()=>t.bindTexture(t.TEXTURE_2D,e)),i instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,u=t.RGBA):(s=new Float32Array(n*r*4),o=t.FLOAT,u=a.internalFormatPackedFloat),s.set(i),2===Object(h["hf"])().getNumber("WEBGL_VERSION")?HS(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,s)):HS(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,o,s)),HS(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function b_(t,e,n){HS(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?2===Object(h["hf"])().getNumber("WEBGL_VERSION")?HS(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):HS(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):2===Object(h["hf"])().getNumber("WEBGL_VERSION")?HS(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):HS(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),HS(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function y_(t,e,n,r){const i=t.createBuffer();HS(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4,s=4,o=a*s*e*n;return HS(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),HS(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),HS(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function v_(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function w_(t,e,n,r){const[i,a]=BS(e,n),s=4,o=new Uint8Array(zS(e*n,s));return HS(t,()=>t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function x_(t,e,n,r,i,a,s,o){const u=t,c=new Float32Array(WS(a,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function O_(t,e,n){const r=new Float32Array(e*n*4);return HS(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S_{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const e=Object(h["hf"])().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,DS(e,t)):this.gl=$S(e),t=this.gl,2===Object(h["hf"])().getNumber("WEBGL_VERSION")){const e=t;this.createVertexArray=()=>HS(e,()=>e.createVertexArray()),this.bindVertexArray=t=>HS(e,()=>e.bindVertexArray(t)),this.deleteVertexArray=t=>HS(e,()=>e.deleteVertexArray(t)),this.getVertexArray=()=>HS(e,()=>e.getParameter(e.VERTEX_ARRAY_BINDING))}else if(null!=t){const e=t.getExtension("OES_vertex_array_object");if(null==e)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>HS(t,()=>e.createVertexArrayOES()),this.bindVertexArray=n=>HS(t,()=>e.bindVertexArrayOES(n)),this.deleteVertexArray=n=>HS(t,()=>e.deleteVertexArrayOES(n)),this.getVertexArray=()=>HS(t,()=>t.getParameter(e.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Object(h["hf"])().getNumber("WEBGL_VERSION")){const t="OES_texture_float",e="OES_texture_half_float";if(this.textureFloatExtension=ZS(this.gl,t),Dk(this.gl,e))this.textureHalfFloatExtension=ZS(this.gl,e);else if(Object(h["hf"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Dk(this.gl,r))this.colorBufferHalfFloatExtension=ZS(this.gl,r);else if(Object(h["hf"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Dk(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Dk(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=n_(this.gl),this.indexBuffer=r_(this.gl),this.framebuffer=lk(this.gl),this.textureConfig=GS(this.gl,this.textureHalfFloatExtension)}get debug(){return Object(h["hf"])().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;HS(t,()=>t.finish()),HS(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),HS(t,()=>t.deleteFramebuffer(this.framebuffer)),HS(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),HS(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),HS(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),s_(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),u_(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),l_(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),b_(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),g_(this.gl,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),f_(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),h_(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(bk(this.gl,this.framebuffer),this.outputTexture=null),HS(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,()=>w_(this.gl,e,n,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,n,r,i,a){return x_(this.gl,t,e,n,r,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,e){return v_(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=y_(this.gl,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(Object(h["hf"])().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(i,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=i}else Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,()=>O_(this.gl,e,n))}createProgram(t){this.throwIfDisposed();const e=this.gl;null==this.vertexShader&&(this.vertexShader=e_(e));const n=rk(e);let r;return HS(e,()=>e.attachShader(n,this.vertexShader)),HS(e,()=>e.attachShader(n,t)),ik(e,n),r=Object.assign(n,{vao:this.createVertexArray()}),this.bindVertexArray(r.vao),HS(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),console.assert(m_(e,r,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&ak(e,r),this.setProgram(r),r}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&(HS(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&ak(this.gl,this.program)),HS(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,n=!0){return this.throwIfDisposed(),n?pk(this.gl,t,e):fk(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),HS(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),mk(this.gl,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,i]=US(e,n);this.setOutputMatrixTextureDriver(t,r,i)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&ak(this.gl,this.program),yk(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}HS(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),HS(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ZS(this.gl,2===Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await h["Ji"].repeatedTry(()=>this.disposed||this.isQueryAvailable(t,Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl,n=e.getQueryParameter(t,e.QUERY_RESULT);return n/1e6}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT);return n/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=k_(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1)return;let n=void 0;"setTimeoutCustom"in Object(h["hf"])().platform&&(n=Object(h["hf"])().platform.setTimeoutCustom.bind(Object(h["hf"])().platform)),h["Ji"].repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),gk(this.gl,t,this.framebuffer),this.debug&&yk(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(gk(this.gl,this.outputTexture,this.framebuffer),this.debug&&yk(this.gl)):bk(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;gk(r,t,this.framebuffer),this.debug&&yk(r),this.outputTexture=t,HS(r,()=>r.viewport(0,0,e,n)),HS(r,()=>r.scissor(0,0,e,n))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),HS(this.gl,()=>this.gl.scissor(t,e,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function k_(t){let e=0;for(;e<t.length;++e){const n=t[e]();if(!n)break}return e-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:T_,bincountImpl:__,bincountReduceImpl:I_,castImpl:C_,ceilImpl:A_,concatImpl:E_,equalImpl:N_,expImpl:j_,expm1Impl:D_,floorImpl:$_,gatherNdImpl:R_,gatherV2Impl:F_,greaterImpl:P_,greaterEqualImpl:M_,lessImpl:L_,lessEqualImpl:B_,linSpaceImpl:z_,logImpl:V_,maxImpl:U_,maximumImpl:W_,minimumImpl:G_,multiplyImpl:H_,negImpl:q_,notEqualImpl:J_,prodImpl:K_,raggedGatherImpl:X_,raggedRangeImpl:Y_,raggedTensorToTensorImpl:Z_,rangeImpl:Q_,rsqrtImpl:tI,scatterImpl:eI,sigmoidImpl:nI,simpleAbsImpl:rI,sliceImpl:iI,sparseFillEmptyRowsImpl:aI,sparseReshapeImpl:sI,sparseSegmentReductionImpl:oI,sqrtImpl:uI,stridedSliceImpl:cI,stringNGramsImpl:lI,stringSplitImpl:dI,stringToHashBucketFastImpl:hI,subImpl:pI,tileImpl:fI,topKImpl:mI,transposeImpl:gI,uniqueImpl:bI}=d;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yI(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function vI(t,e){return 1===e?[t]:yI(t,e)}function wI(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xI{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=qT(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const t=vI("rc",this.rank),e=MT(this.rank),n=this.getOutOfBoundsCondition(t),r=this.getSetup(t),i=this.getOutput(t);this.userCode=`\n        void main() {\n          ${e} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(t){const e=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let e=2;e<this.rank;e++)i=t[t.length-1-e]+","+i;e.push(i)}return e}getOutOfBoundsCondition(t){if(1===this.rank)return"rc > "+(this.enableShapeUniforms?"outShape":this.outputShape[0]);let e="";for(let n=this.rank-2;n<this.rank;n++)e+=`${t[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(e+="||");return e}getSetup(t){if(1===this.rank)return"";const e=t.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${e[0]};\n      int c = ${e[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(t){const e=this.getSourceCoordsArr(t);if(1===this.rank){const t=this.enableShapeUniforms?"outShape":this.outputShape[0];return`getA(rc), (rc + 1 >= ${t} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${e[0]}),\n            cEdge ? 0. : getA(${e[1]}),\n            rEdge ? 0. : getA(${e[2]}),\n            rEdge || cEdge ? 0. : getA(${e[3]})`}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OI{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length);let n="";for(let r=0;r<4;r++){let t="thisRC = rc;";r%2===1&&(t+="thisRC.z += 1;"),r>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${SI(e,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?Jk():qk(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}function SI(t,e){const n=e?Hk(["r","c","d"],"inputShape"):Uk(["r","c","d"],t);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kI{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,e,n){const r=AI(e,n),i=EI(t,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=_I(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const t=this.freeTextures[i].shift();return this.usedTextures[i].push(t),t}let s;return r===LS.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===LS.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===LS.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===LS.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===LS.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),s}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const i=AI(n,r),a=EI(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]);const s=_I(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Object(h["hf"])().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=s):(this.freeTextures[a].push(t),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[a],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function TI(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error("Unknown internal format "+e)}function _I(t,e,n,r,i){const a=II(e,r);let s;if(i){const[e,n]=US(t[0],t[1]);s=e*n}else{const[e,n]=BS(t[0],t[1]);s=e*n}const o=TI(n,a);return s*o}function II(t,e){switch(t){case LS.PACKED_2X2_FLOAT32:return d_(e);case LS.PACKED_2X2_FLOAT16:return p_(e);case LS.UNPACKED_FLOAT32:return a_(e);case LS.UNPACKED_FLOAT16:return o_(e);case LS.PACKED_4X1_UNSIGNED_BYTE:return c_(e);default:throw new Error("Unknown physical texture type "+t)}}function CI(t){return Object(h["hf"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?LS.PACKED_2X2_FLOAT32:LS.UNPACKED_FLOAT32:t?LS.PACKED_2X2_FLOAT16:LS.UNPACKED_FLOAT16}function AI(t,e){if(t===MS.UPLOAD)return LS.PACKED_2X2_FLOAT32;if(t===MS.RENDER||null==t)return CI(e);if(t===MS.DOWNLOAD||t===MS.PIXELS)return LS.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function EI(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NI{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const jI="if (isnan(x)) return x;",DI="return x;",$I="return abs(x);";const RI="return (x >= 0.0) ? x : (exp(x) - 1.0);",FI=jI+"\n  return (x < 0.0) ? 0.0 : x;\n",PI=jI+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",MI="return x;",LI="return 1.0 / (1.0 + exp(-1.0 * x));",BI="return x;",zI="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",VI="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",UI="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",WI="return 1.0 / (1.0 + exp(-1.0 * x));";class GI{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HI{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length);const e=t.length,n=vI("rc",e),r=MT(e),i=wI(e,n),a=n.slice(-2),s=e<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${s}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qI=h["Rf"].whereImpl,JI=1e-7,KI=1e-4,XI={};function YI(t){return t in XI||(XI[t]={}),XI[t]}const ZI=Object(h["hf"])().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),QI=600;function tC(){return null==Object(h["hf"])().global.screen?1024:Object(h["hf"])().global.screen.height*Object(h["hf"])().global.screen.width*window.devicePixelRatio*QI/1024/1024}class eC extends h["Fb"]{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Object(h["hf"])().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let e;if(null!=t){if(t instanceof S_)e=t;else{const n=$S(Object(h["hf"])().getNumber("WEBGL_VERSION"),t);e=new S_(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const t=$S(Object(h["hf"])().getNumber("WEBGL_VERSION"));e=new S_(t),this.binaryCache=YI(Object(h["hf"])().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=e,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new kI(this.gpgpu),this.numMBBeforeWarning=tC(),this.texData=new h["S"](this,Object(h["gf"])())}nextDataId(){return eC.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,e,n,r,i,a){const s=this.makeTensorInfo(e,n),o=this.texData.get(s.dataId);o.isPacked=!1,o.texture={texture:t,texShape:[r,i]},o.texShape=[r,i];const u=kk(e),c=new QT(u,!1,a),l=this.runWebGLProgram(c,[s],n,[[r,i]]);return l.shape=e,o.texture=null,this.disposeIntermediateTensorInfo(s),l.dataId}write(t,e,n){if((Object(h["hf"])().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(h["hf"])().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:MS.UPLOAD,refCount:1}),r}refCount(t){if(this.texData.has(t)){const e=this.texData.get(t);return e.refCount}return 0}incRef(t){const e=this.texData.get(t);e.refCount++}decRef(t){if(this.texData.has(t)){const e=this.texData.get(t);e.refCount--}}move(t,e,n,r,i){if(Object(h["hf"])().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:MS.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const e=this.texData.get(t),{values:n,dtype:r,complexTensorInfos:i,slice:a,shape:s,isPacked:o}=e;if(null!=a){let e;e=o?new GI(s,MI):new NI(s,MI);const n=this.runWebGLProgram(e,[{dataId:t,shape:s,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;const u=null!=this.activeTimers;let c,l;if(u&&(c=h["Ji"].now()),"complex64"===r){const t=this.readSync(i.real.dataId),e=this.readSync(i.imag.dataId);l=h["de"].mergeRealAndImagArrays(t,e)}else l=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=h["Ji"].now()-c),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const e=this.texData.get(t),{values:n,shape:r,slice:i,dtype:a,complexTensorInfos:s,isPacked:o}=e;if(null!=i){let e;e=o?new GI(r,MI):new NI(r,MI);const n=this.runWebGLProgram(e,[{dataId:t,shape:r,dtype:a}],a),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(t);if(Object(h["hf"])().getBool("DEBUG")&&!Object(h["hf"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Object(h["hf"])().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,c,l=null;if("complex64"!==a&&Object(h["hf"])().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(e.texture.texture,...VS(r))}if(this.pendingRead.set(t,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const t=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),e=t[0],n=t[1];c=h["de"].mergeRealAndImagArrays(e,n)}else if(null==l)c=this.getValuesFromTexture(t);else{const t=h["Ji"].sizeFromShape(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}if(null!=u&&this.disposeIntermediateTensorInfo(u),null!=l){const t=this.gpgpu.gl;HS(t,()=>t.deleteBuffer(l))}const d=this.convertAndCacheOnCPU(t,c),p=this.pendingRead.get(t);return this.pendingRead.delete(t),p.forEach(t=>t(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Object(h["gf"])().removeDataId(t,this),this.pendingDeletes--),d}readToGPU(t,e={}){const n=this.texData.get(t),{values:r,shape:i,slice:a,dtype:s,isPacked:o,texture:u}=n;if("complex64"===s)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let n;n=o?new GI(i,MI):new NI(i,MI);const r=this.runWebGLProgram(n,[{dataId:t,shape:i,dtype:s}],s),a=this.readToGPU(r,e);return this.disposeIntermediateTensorInfo(r),a}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,e.customTexShape),l=Object(h["gf"])().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:l},d.texture)}bufferSync(t){const e=this.readSync(t.dataId);if("string"===t.dtype)try{const n=e.map(t=>h["Ji"].decodeString(t));return Object(h["qe"])(t.shape,t.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(h["qe"])(t.shape,t.dtype,e)}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!XS(n)){if(Object(h["hf"])().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:r}=this.texData.get(t),i=h["Ji"].sizeFromShape(e);if(Object(h["hf"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...VS(e)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),a}const a=Object(h["hf"])().getBool("WEBGL_PACK")&&!0===r,s=a?kk(e):e,o=a?new YT(s):new XT(s),u=this.runWebGLProgram(o,[{shape:s,dtype:n,dataId:t}],"float32"),c=this.texData.get(u.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),l}timerAvailable(){return Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const e=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t();const i=h["Ji"].flatten(this.activeTimers.map(t=>t.query)).filter(t=>null!=t),a=h["Ji"].flatten(this.activeTimers.map(t=>t.name)).filter(t=>null!=t);this.activeTimers=e,r&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(i);s["kernelMs"]=h["Ji"].sum(t),s["getExtraProfileInfo"]=()=>t.map((t,e)=>({name:a[e],ms:t})).map(t=>`${t.name}: ${t.ms}`).join(", ")}else s["kernelMs"]={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:h["Ji"].now(),endMs:null}}endTimer(t){return Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=h["Ji"].now(),t)}async getQueryTime(t){if(Object(h["hf"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const e=t;return e.endMs-e.startMs}disposeData(t,e=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(e?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!e&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:n}=this.texData.get(t);return null!=n&&(this.disposeData(n.real.dataId,e),this.disposeData(n.imag.dataId,e)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:i,isPacked:a,slice:s}=this.texData.get(t),o=s&&s.origDataId||t,u=this.dataRefCount.get(o);u>1?this.dataRefCount.set(o,u-1):(this.dataRefCount.delete(o),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,i,a)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,e=ZI){return Object(h["hf"])().getBool("WEBGL_CPU_FORWARD")&&t.every(t=>null==this.texData.get(t.dataId).texture&&h["Ji"].sizeFromShape(t.shape)<e)}getGPGPUContext(){return this.gpgpu}where(t){h["de"].warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return qI(t.shape,e)}packedUnaryOp(t,e,n){const r=new GI(t.shape,e),i=this.compileAndRun(r,[t],n);return Object(h["gf"])().makeTensorFromTensorInfo(i)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=rI(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if(Object(h["hf"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,$I,t.dtype);const e=new NI(t.shape,$I),n=this.compileAndRun(e,[t]);return Object(h["gf"])().makeTensorFromTensorInfo(n)}makeTensorInfo(t,e,n){let r;if("string"===e&&null!=n&&n.length>0&&h["Ji"].isString(n[0])){const i=n.map(t=>h["Ji"].encodeString(t));r=this.write(i,t,e)}else r=this.write(n,t,e);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:e}}makeOutput(t,e,n){return Object(h["gf"])().makeTensorFromTensorInfo(this.makeTensorInfo(t,e,n),this)}unpackTensor(t){const e=new HI(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new xI(t.shape),n=!0;return this.runWebGLProgram(e,[t],t.dtype,null,n)}packedReshape(t,e){const n=[Ok(t.shape),...Sk(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[Ok(e),...Sk(e)],a=new OI(i,n),s=!0,o=[n],u=this.runWebGLProgram(a,[r],t.dtype,o,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}decode(t,e){const n=this.texData.get(t),{isPacked:r,shape:i,dtype:a}=n;if(null!=e){const t=h["Ji"].sizeFromShape(i),n=e[0]*e[1]*4;h["Ji"].assert(t<=n,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=kk(i);let o;o=r?new KT(s):new JT(s);const u=!0,c=[null!=e?e:VS(s)],l=this.runWebGLProgram(o,[{shape:s,dtype:a,dataId:t}],a,c,u,e);return{dtype:a,shape:i,dataId:l.dataId}}runWebGLProgram(t,e,n,r,i=!1,a){const s=this.makeTensorInfo(t.outputShape,n),o=this.texData.get(s.dataId);if(t.packedOutput&&(o.isPacked=!0),t.outPackingScheme===PS.DENSE){const e=null!=a?a:VS(t.outputShape);o.texShape=e.map(t=>2*t)}if(null!=t.outTexUsage&&(o.usage=t.outTexUsage),0===h["Ji"].sizeFromShape(s.shape))return o.values=h["Ji"].getTypedArrayFromDType(s.dtype,0),s;const u=[],c=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&h["Ji"].sizeFromShape(e.shape)<=Object(h["hf"])().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}if(this.uploadToGPU(e.dataId),!!n.isPacked!==!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),u.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!Ik(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),u.push(e),n=this.texData.get(e.dataId),t.shape=r}return{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);const l={shape:s.shape,texData:o,isUniform:!1},d=HT(t,c,l),p=this.getAndSaveBinary(d,()=>VT(this.gpgpu,t,c,l)),f=null!=this.activeTimers;let m;f&&(m=this.startTimer()),Object(h["hf"])().get("ENGINE_COMPILE_ONLY")||GT(this.gpgpu,p,c,l,r),u.forEach(t=>this.disposeIntermediateTensorInfo(t)),f&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)}));const g=Object(h["hf"])().get("WEBGL_FLUSH_THRESHOLD");if(g>0){const t=h["Ji"].now();t-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=t)}if(!Object(h["hf"])().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===i){const t=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),t}return s}compileAndRun(t,e,n,r,i=!1){n=n||e[0].dtype;const a=this.runWebGLProgram(t,e,n,r,i);return a}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Object(h["hf"])().getBool("IS_TEST")){const t=Object.keys(this.binaryCache);t.forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(h["vi"])(()=>{if(!Object(h["hf"])().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Object(h["hf"])().getBool("DEBUG");Object(h["hf"])().set("DEBUG",!1);const e=this.abs(Object(h["xh"])(1e-8)).dataSync()[0];if(Object(h["hf"])().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?JI:KI}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:r,values:i,texture:a,usage:s,isPacked:o}=e;if(null!=a)return;const u=null!=this.activeTimers;let c;u&&(c=h["Ji"].now());let l=e.texShape;if(null==l&&(l=Tk(n,o),e.texShape=l),null!=i){const t=kk(n);let a,s=l[1],d=l[0];const p=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!o&&p||([s,d]=US(l[0],l[1])),a=o?new t_(t,p):new QT(t,p);const f=p?[d,s]:l,m=this.makeTensorInfo(f,r),g=this.texData.get(m.dataId);g.usage=p?MS.PIXELS:MS.UPLOAD,g.texShape=f,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(m.dataId),s,d,i);const b=[[d,s]],y=!0,v=this.runWebGLProgram(a,[m],r,b,y),w=this.texData.get(v.dataId);e.texShape=w.texShape,e.isPacked=w.isPacked,e.usage=w.usage,Object(h["hf"])().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(e.texture=w.texture,e.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(m),u&&(this.uploadWaitMs+=h["Ji"].now()-c)}else{const t=this.acquireTexture(l,s,r,o);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return null!=e&&(n.values=nC(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${t} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*h["Ji"].bytesPerElement(e)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,e]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(e));return Promise.all(t)}for(const[,e]of Object.entries(this.binaryCache)){const n=new Promise(t=>{try{this.checkCompletion_(e),t(!0)}catch(n){throw n}});t.push(n)}return Promise.all(t)}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await Object(h["Dg"])(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(!1===this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw nk(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,t]of Object.entries(this.binaryCache)){const{uniformLocations:e,customUniformLocations:n,infLoc:r,nanLoc:i,inShapesLocations:a,inTexShapesLocations:s,outShapeLocation:o,outShapeStridesLocation:u,outTexShapeLocation:c}=UT(this.gpgpu,t.program,t.webGLProgram);t.uniformLocations=e,t.customUniformLocations=n,t.infLoc=r,t.nanLoc=i,t.inShapesLocations=a,t.inTexShapesLocations=s,t.outShapeLocation=o,t.outShapeStridesLocation=u,t.outTexShapeLocation=c}}createTensorFromGPUData(t,e,n){t.channels=t.channels||"RGBA";const{texture:r,height:i,width:a,channels:s}=t,o=Object(h["gf"])().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=o.writeTexture(r,e,n,i,a,s);return Object(h["gf"])().makeTensorFromDataId(u,e,n,o)}}function nC(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error("Unknown dtype "+e)}
/** @license See the LICENSE file. */eC.nextDataId=0;const rC="4.2.0";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
h["Re"].isBrowser()&&Object(h["ih"])("webgl",()=>new eC,2);const iC="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aC{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=h["de"].assertAndGetBroadcastShape(e,n),this.enableShapeUniforms=qT(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${t}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sC="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class oC{constructor(t,e,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=h["de"].assertAndGetBroadcastShape(e,n);const i=this.outputShape.length;this.enableShapeUniforms=qT(i);let a="";if(r)if(0===i||1===h["Ji"].sizeFromShape(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const t=MT(i);if(a=`\n          ${t} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=vI("coords",i);this.enableShapeUniforms?a+=`\n            bool nextRowOutOfBounds =\n              (${t[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${t[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:a+=`\n            bool nextRowOutOfBounds =\n              (${t[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${t[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${t}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uC(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const cC={kernelName:h["Ab"],backendName:"webgl",kernelFunc:uC};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lC(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(a.dataId),o=uC({inputs:{x:r},backend:n}),u=uC({inputs:{x:i},backend:n});return s.complexTensorInfos={real:o,imag:u},a}const dC={kernelName:h["E"],backendName:"webgl",kernelFunc:lC},hC="return (a < 0.) ? b * a : a;",pC="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fC(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r,s=n.makeTensorInfo([],"float32",h["Ji"].createScalarValue(a,"float32")),o=Object(h["hf"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oC(pC,i.shape,s.shape):new aC(hC,i.shape,s.shape),u=n.runWebGLProgram(o,[i,s],"float32");return n.disposeIntermediateTensorInfo(s),u}const mC={kernelName:h["Ib"],backendName:"webgl",kernelFunc:fC},gC="return (a < 0.) ? b * a : a;",bC="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yC(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,a=Object(h["hf"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oC(bC,r.shape,i.shape):new aC(gC,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}const vC={kernelName:h["xc"],backendName:"webgl",kernelFunc:yC},wC="if (isnan(x)) return x;";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xC({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:s}=i,o=a,u=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&null!=n){const t=o.texData.get(s.dataId),e=n(t.values,u);return o.makeTensorInfo(s.shape,u,e)}const c=Object(h["hf"])().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=e;let l;return l=c?new GI(s.shape,e):new NI(s.shape,t),o.runWebGLProgram(l,[s],u)}}function OC({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:s,backend:o})=>{const{a:u,b:c}=s,l=o;if(r&&"complex64"===u.dtype){const e=l.texData.get(u.dataId),n=l.texData.get(c.dataId),[r,i]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,r]=e,i={dataId:n.dataId,dtype:n.dtype,shape:u.shape},a={dataId:r.dataId,dtype:r.dtype,shape:c.shape},s=new aC(t,u.shape,c.shape);return l.runWebGLProgram(s,[i,a],Object(h["Hi"])(n.dtype,r.dtype))}),a=lC({inputs:{real:r,imag:i},backend:l});return l.disposeIntermediateTensorInfo(r),l.disposeIntermediateTensorInfo(i),a}const d=a||Object(h["Hi"])(u.dtype,c.dtype);if(("string"===u.dtype||"string"===c.dtype||l.shouldExecuteOnCPU([u,c]))&&null!=i){const t=l.texData.get(u.dataId).values,e=l.texData.get(c.dataId).values,n="string"===u.dtype?h["de"].fromUint8ToStringArray(t):t,r="string"===u.dtype?h["de"].fromUint8ToStringArray(e):e,[a,s]=i(u.shape,c.shape,n,r,d),o=l.makeTensorInfo(s,d),p=l.texData.get(o.dataId);return p.values=a,o}const p=Object(h["hf"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=e;let f;return f=p?new oC(e,u.shape,c.shape,n):new aC(t,u.shape,c.shape),l.runWebGLProgram(f,[u,c],d)}}function SC(t,e=!1){if("linear"===t)return e?BI:DI;if("relu"===t)return e?VI:FI;if("elu"===t)return e?zI:RI;if("relu6"===t)return e?UI:PI;if("prelu"===t)return e?bC:gC;if("leakyrelu"===t)return e?pC:hC;if("sigmoid"===t)return e?WI:LI;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kC{constructor(t,e,n,r=!1,i=!1,a=!1,s=null,o=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=qT(this.outputShape.length);const c=r?t[1]:t[2],l=Math.ceil(c/2),d=r?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(m=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:u?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,g="result = activation(result);");const b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let y="rc.x",v="rc.x";t[0]<e[0]?y=`imod(rc.x, ${t[0]})`:e[0]<t[0]&&(v=`imod(rc.x, ${e[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${y};\n        int batchB = ${v};\n        for (int i = 0; i < ${l}; i++) {\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${b}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TC={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class _C{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=h["de"].assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${t}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IC="return a * b;";function CC(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=h["de"].upcastType(r.dtype,i.dtype);if("complex64"===r.dtype){const t=n.texData.get(r.dataId),e=n.texData.get(i.dataId),a=new _C(TC.REAL,r.shape,i.shape),s=new _C(TC.IMAG,r.shape,i.shape),o=[{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:i.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:i.shape}],u=n.runWebGLProgram(a,o,"float32"),c=n.runWebGLProgram(s,o,"float32"),l=lC({inputs:{real:u,imag:c},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}if(n.shouldExecuteOnCPU([r,i])){const t=n.texData.get(r.dataId),e=n.texData.get(i.dataId),[s,o]=H_(r.shape,i.shape,t.values,e.values,a),u=n.makeTensorInfo(o,a),c=n.texData.get(u.dataId);return c.values=s,u}let s;return s=Object(h["hf"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oC(IC,r.shape,i.shape):new aC(IC,r.shape,i.shape),n.runWebGLProgram(s,[r,i],a)}const AC={kernelName:h["ic"],backendName:"webgl",kernelFunc:CC};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EC(t,e,n){const r=[Ok(t.shape),...Sk(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[Ok(e),...Sk(e)],s=new OI(a,r),o=!0,u=[r],c=n.runWebGLProgram(s,[i],t.dtype,u,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NC(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,s=n,o=h["Ji"].sizeFromShape(i.shape),u=h["Ji"].inferFromImplicitShape(a,o),c=h["Ji"].sizeFromShape(u);h["Ji"].assert(o===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const l=s.texData.get(i.dataId);return!l.isPacked||Ik(i.shape,u)||null!==l.texture&&Ik(l.shape,u)?(s.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype}):EC(i,u,s)}const jC={kernelName:h["Lc"],backendName:"webgl",kernelFunc:NC};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DC{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:a}=t;this.outputShape=[r,a];const s=4*Math.floor(n/4),o=n%4;let u="sumValue += dot(values, ones);";if(null!=e){const t=1/e;u=`sumValue += dot(values * ${h["Ji"].isInt(t)?t.toPrecision(2):t}, ones);`}let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===o}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${u}\n        } else if (${2===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${u}\n        } else if (${3===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $C{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:a}=t;this.outputShape=[r,a];let s="0.0",o="";"prod"===e?s="1.0":"min"===e?(s="1.0 / 1e-20",o="min"):"max"===e&&(s="-1.0 / 1e-20",o="max");let u=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");const c=4*Math.floor(n/4),l=n%4;let d=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===e} || ${"max"===e}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,h="vec4";"all"===e?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===e&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${s});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===l}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${u});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RC(t){const e=[];while(0===e.length||1!==e[e.length-1].outSize){const n=e.length?e[e.length-1].outSize:t[1],r=h["de"].computeOptimalWindowSize(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function FC(t,e,n,r){const i=RC(t.shape);let a=t;for(let s=0;s<i.length;s++){const{inSize:o,windowSize:u,outSize:c}=i[s];let l,d;l="mean"===n?0===s?new DC({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:c},o):new DC({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:c}):new $C({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:c},n),d=a,a=r.runWebGLProgram(l,[a],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return a}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PC{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let a=0;a<n.length;a++)n[a]=t[e[a]];this.outputShape=n,this.rank=n.length;const r=MT(this.rank),i=MC(e);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}function MC(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LC{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let c=0;c<n.length;c++)n[c]=t[e[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=MT(this.rank),i=yI("rc",this.rank),a=new Array(this.rank);for(let c=0;c<e.length;c++)a[e[c]]=i[c];const s=`vec2(${a.slice(-2).join()})`,o=`++${i[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${s})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${u};\n      if(${o}) {\n        result[1] = ${u};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${u};\n        if(${o}) {\n          result[3] = ${u};\n        }\n      }\n      setOutput(result);\n    }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(t,e,n){const r=Object(h["hf"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LC(t.shape,e):new PC(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zC(t,e,n,r){const i=e,a=t.shape.length,s=h["Ji"].parseAxisParam(i,t.shape);let o=s;const u=h["de"].getAxesPermutation(o,a),c=null!=u;let l=t;c&&(l=BC(t,u,r),o=h["de"].getInnerMostAxes(o.length,a)),h["de"].assertAxesAreInnerMostDims("sum",o,a);const[d,p]=h["de"].computeOutAndReduceShapes(l.shape,o);let f=d;n&&(f=h["de"].expandShapeToKeepDim(d,s));const m=h["Ji"].sizeFromShape(p),g=h["Ji"].sizeFromShape(t.shape),b=g/m,y=NC({inputs:{x:l},attrs:{shape:[b,m]},backend:r}),v=Object(h["ji"])(t.dtype),w=FC(y,v,"sum",r),x=NC({inputs:{x:w},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(w),c&&r.disposeIntermediateTensorInfo(l),x}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VC(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r;return zC(i,a,s,n)}const UC={kernelName:h["wd"],backendName:"webgl",kernelFunc:VC};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WC(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:a}=r,s=n,o=i.shape.length,u=new Array(o);for(let l=0;l<u.length;l++)u[l]=i.shape[a[l]];let c;if(s.shouldExecuteOnCPU([i])){const t=s.texData.get(i.dataId),e=t.values,n=gI(e,i.shape,i.dtype,a,u);c=s.makeTensorInfo(u,i.dtype);const r=s.texData.get(c.dataId);r.values=n}else c=BC(i,a,s);return c}const GC={kernelName:h["Ed"],backendName:"webgl",kernelFunc:WC},HC=1e3;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qC({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:u=null}){const c=t.shape.length,l=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[l-1]:e.shape[l-2],f=n?t.shape[c-1]:t.shape[c-2],m=r?e.shape[l-2]:e.shape[l-1],g=t.shape.slice(0,-2),b=e.shape.slice(0,-2),y=h["Ji"].sizeFromShape(g),v=h["Ji"].sizeFromShape(b),w=h["oe"].assertAndGetBroadcastShape(t.shape.slice(0,-2),e.shape.slice(0,-2)),x=w.concat([f,m]);h["Ji"].assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const O=n?[y,d,f]:[y,f,d],S=r?[v,m,p]:[v,p,m],k=NC({inputs:{x:t},backend:i,attrs:{shape:O}}),T=NC({inputs:{x:e},backend:i,attrs:{shape:S}}),_=[k,T],I=Math.max(y,v),C=n?k.shape[1]:k.shape[2],A=null!=a,E=null!=s,N="leakyrelu"===u,j=null!=u?SC(u,!0):null,D=A||E||N||null!=j;let $;if((1===f||1===m)&&C>HC&&!1===D){let t=k,e=T;n&&(t=WC({inputs:{x:k},backend:i,attrs:{perm:[0,2,1]}}),_.push(t)),r&&(e=WC({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),_.push(e));const a=1!==m,s=1===m;let o=t;a&&(o=NC({inputs:{x:t},backend:i,attrs:{shape:[I,C,1]}}),_.push(o));const u=1===m?2:1;let c=e;s&&(c=NC({inputs:{x:e},backend:i,attrs:{shape:[I,1,C]}}),_.push(c));const l=CC({inputs:{a:o,b:c},backend:i});$=VC({inputs:{x:l},backend:i,attrs:{axis:u,keepDims:!0}}),_.push(l)}else{const u=Object(h["Hi"])(t.dtype,e.dtype),c=new kC(O,S,[I,f,m],n,r,A,j,E,N),l=[k,T];if(null!=a&&l.push(a),E&&l.push(s),N){const t=i.makeTensorInfo([],"float32",h["Ji"].createScalarValue(o,"float32"));l.push(t),_.push(t)}$=i.runWebGLProgram(c,l,u)}const R=NC({inputs:{x:$},backend:i,attrs:{shape:x}});_.push($);for(const h of _)i.disposeIntermediateTensorInfo(h);return R}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JC(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:s,preluActivationWeights:o}=e,{transposeA:u,transposeB:c,activation:l,leakyreluAlpha:d}=r;return qC({a:i,b:a,transposeA:u,transposeB:c,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:d,activation:l})}const KC={kernelName:h["Ld"],backendName:"webgl",kernelFunc:JC},XC="return abs(x);";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YC(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const t=n.texData.get(r.dataId),e=rI(t.values);return n.makeTensorInfo(r.shape,r.dtype,e)}let i;return i=Object(h["hf"])().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new GI(r.shape,XC):new NI(r.shape,XC),n.runWebGLProgram(i,[r],r.dtype)}const ZC={kernelName:h["a"],backendName:"webgl",kernelFunc:YC},QC=jI+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",tA=xC({opSnippet:QC}),eA={kernelName:h["b"],backendName:"webgl",kernelFunc:tA},nA=jI+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",rA=xC({opSnippet:nA}),iA={kernelName:h["c"],backendName:"webgl",kernelFunc:rA},aA="return a + b;",sA=OC({opSnippet:aA,packedOpSnippet:aA,supportsComplex:!0,cpuKernelImpl:T_}),oA={kernelName:h["h"],backendName:"webgl",kernelFunc:sA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class uA{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`float v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cA{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`vec4 v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lA(t){const{inputs:e,backend:n}=t,r=e;if(1===r.length)return uC({inputs:{x:r[0]},backend:n});if(r.length>Object(h["hf"])().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(r.length/2),e=lA({inputs:r.slice(0,t),backend:n}),i=lA({inputs:r.slice(t),backend:n});return lA({inputs:[e,i],backend:n})}const i=r.map(t=>t.dtype).reduce((t,e)=>Object(h["Hi"])(t,e)),a=r.map(t=>t.shape),s=Object(h["hf"])().getBool("WEBGL_PACK"),o=s?new cA(r[0].shape,a):new uA(r[0].shape,a);return n.runWebGLProgram(o,r,i)}const dA={kernelName:h["i"],backendName:"webgl",kernelFunc:lA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hA(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r,o=i.shape.length,u=h["Ji"].parseAxisParam(a,i.shape);let c=u;const l=h["de"].getAxesPermutation(c,o);let d=i;null!=l&&(d=WC({inputs:{x:i},backend:n,attrs:{perm:l}}),c=h["de"].getInnerMostAxes(c.length,o)),h["de"].assertAxesAreInnerMostDims("all",c,o);const[p,f]=h["de"].computeOutAndReduceShapes(d.shape,c),m=h["Ji"].sizeFromShape(f),g=NC({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),b=FC(g,g.dtype,"all",n);let y;if(s){const t=h["de"].expandShapeToKeepDim(p,u);y=NC({inputs:{x:b},backend:n,attrs:{shape:t}})}else y=NC({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),null!=l&&n.disposeIntermediateTensorInfo(d),y}const pA={kernelName:h["j"],backendName:"webgl",kernelFunc:hA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fA(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r,o=i.shape.length,u=h["Ji"].parseAxisParam(a,i.shape);let c=u;const l=h["de"].getAxesPermutation(c,o);let d=i;null!=l&&(d=WC({inputs:{x:i},backend:n,attrs:{perm:l}}),c=h["de"].getInnerMostAxes(c.length,o)),h["de"].assertAxesAreInnerMostDims("any",c,o);const[p,f]=h["de"].computeOutAndReduceShapes(d.shape,c),m=h["Ji"].sizeFromShape(f),g=NC({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),b=FC(g,g.dtype,"any",n);let y;if(s){const t=h["de"].expandShapeToKeepDim(p,u);y=NC({inputs:{x:b},backend:n,attrs:{shape:t}})}else y=NC({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),null!=l&&n.disposeIntermediateTensorInfo(d),y}const mA={kernelName:h["k"],backendName:"webgl",kernelFunc:fA};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gA{constructor(t,e,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:a}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const s="max"===e?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${o};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${s} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bA{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,h["Ji"].assert(t.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const i=t[t.length-1],a=Math.ceil(i/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const s=this.outputShape,o=s.length,u=MT(o),c=vI("coords",o);let l,d;if(1===a){d=o+1;const t=MT(d);l=`\n        ${t} sourceLocR = ${t}(${c.join()}, 0);\n        ++${c[o-1]};\n        ${t} sourceLocG = ${t}(${c.join()}, 0);\n        ++${c[o-2]};\n        ${t} sourceLocA = ${t}(${c.join()}, 0);\n        --${c[o-1]};\n        ${t} sourceLocB = ${t}(${c.join()}, 0);\n        --${c[o-2]};`}else d=o,l=`\n        ${u} sourceLocR = coords;\n        ++${c[o-1]};\n        ${u} sourceLocG = coords;\n        ++${c[o-2]};\n        ${u} sourceLocA = coords;\n        --${c[o-1]};\n        ${u} sourceLocB = coords;\n        --${c[o-2]};`;const p=["x","y","z","w","u","v"].slice(0,d),f="."+p[d-1],m=p.map(t=>"int "+t),g=vI("sourceLocR",d-1).concat("inIdx.r"),b=vI("sourceLocG",d-1).concat("inIdx.g"),y=vI("sourceLocB",d-1).concat("inIdx.b"),v=vI("sourceLocA",d-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,O=`vec4(\n            getAChannel(${g.join()}),\n            hasNextCol ? getAChannel(${b.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,S=r?"":`\n      float getBestIndicesAChannel(${m.join()}) {\n        return getChannel(getBestIndicesA(${p.join()}),\n                                          vec2(${p.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${m.join()}) {\n        return getChannel(getA(${p.join()}),\n                               vec2(${p.slice(-2).join()}));\n      }\n      ${S}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${c[o-1]} < ${s[o-1]-1};\n        bool hasNextRow = ${c[o-2]} < ${s[o-2]-1};\n        ${l}\n        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},\n          sourceLocB${f}, sourceLocA${f}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${O};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${O};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yA(t,e,n,r=null){let i=e.shape[0],a=e.shape[1];null!=r&&(i=r.shape[0],a=r.shape[1]);const s=h["de"].computeOptimalWindowSize(a),o={windowSize:s,inSize:a,batchSize:i,outSize:Math.ceil(a/s)},u=new gA(o,n,null==r),c=[e];null!=r&&c.push(r);const l=t.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;const d=yA(t,e,n,l);return t.disposeIntermediateTensorInfo(l),d}function vA(t,e,n,r=null){const i=null!=r?r.shape:e.shape,a=i[i.length-1],s=h["de"].computeOptimalWindowSize(a),o=new bA(i,s,n,null==r),u=null==r?[e]:[e,r],c=t.runWebGLProgram(o,u,"int32");if(c.shape.length===e.shape.length){const r=vA(t,e,n,c);return t.disposeIntermediateTensorInfo(c),r}return c}function wA(t,e,n,r){const i=[n];if(h["de"].assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Object(h["hf"])().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const n=[],a=t.texData.get(e.dataId),s=null!==a&&a.isPacked;let o=e;s&&(o=t.unpackTensor(e),n.push(o));const[u,c]=h["de"].computeOutAndReduceShapes(o.shape,i),l=h["Ji"].sizeFromShape(c),d=NC({inputs:{x:o},backend:t,attrs:{shape:[-1,l]}});n.push(d);const p=yA(t,d,r);n.push(p);const f=NC({inputs:{x:p},backend:t,attrs:{shape:u}});return n.forEach(e=>t.disposeIntermediateTensorInfo(e)),f}return vA(t,e,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xA(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let s=h["Ji"].parseAxisParam(a,i.shape);const o=h["de"].getAxesPermutation(s,i.shape.length);let u=i;const c=[];null!=o&&(u=WC({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(u),s=h["de"].getInnerMostAxes(s.length,u.shape.length)),h["de"].assertAxesAreInnerMostDims("argMax",[s[0]],u.shape.length);const l=wA(n,u,s[0],"max");return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),l}const OA={kernelName:h["l"],backendName:"webgl",kernelFunc:xA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SA(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let s=h["Ji"].parseAxisParam(a,i.shape);const o=h["de"].getAxesPermutation(s,i.shape.length);let u=i;const c=[];null!=o&&(u=WC({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(u),s=h["de"].getInnerMostAxes(s.length,u.shape.length)),h["de"].assertAxesAreInnerMostDims("argMin",[s[0]],u.shape.length);const l=wA(n,u,s[0],"min");return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),l}const kA={kernelName:h["m"],backendName:"webgl",kernelFunc:SA},TA=jI+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",_A=xC({opSnippet:TA}),IA={kernelName:h["n"],backendName:"webgl",kernelFunc:_A},CA=jI+"return log(x + sqrt(x * x + 1.0));",AA=xC({opSnippet:CA}),EA={kernelName:h["o"],backendName:"webgl",kernelFunc:AA},NA=jI+"\n  return atan(x);\n",jA=xC({opSnippet:NA}),DA={kernelName:h["p"],backendName:"webgl",kernelFunc:jA},$A=iC+"\n  return atan(a, b);\n",RA="\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+sC+"\n  return result;\n",FA=OC({opSnippet:$A,packedOpSnippet:RA}),PA={kernelName:h["q"],backendName:"webgl",kernelFunc:FA},MA=jI+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",LA=xC({opSnippet:MA}),BA={kernelName:h["r"],backendName:"webgl",kernelFunc:LA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class zA{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,s=t.strideHeight,o=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const f="avg"===e,m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,g=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(f||(b="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${s}, ${o});\n        const ivec2 pads = ivec2(${h}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${c}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${e} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?m:g:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const y="max";let v=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(v="avgValue / max(count, 1.0)");const w=4*Math.floor(a/4),x=a%4,O=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${y}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${o});\n      const ivec2 pads = ivec2(${h}, ${p});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${u}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${w}; wC += 4) {\n            int xC = xCCorner + wC * ${c};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              getValue(batch, xR, xC + 3 * ${c}, d)\n            );\n\n            ${O}\n          }\n\n          int xC = xCCorner + ${w};\n          if (${1===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${O}\n          } else if (${2===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${O}\n          } else if (${3===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              initializationValue\n            );\n\n            ${O}\n          }\n        }\n        setOutput(${v});\n      }\n    `}}class VA{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,s=t.strideDepth,o=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const y="avg"===e;let v="0.0";if(y||(v="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${s}, ${o}, ${u});\n        const ivec3 pads = ivec3(${m}, ${g}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${h};\n              wD += ${c}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${d}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${e} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const w="max";let x=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(x="avgValue / max(count, 1.0)");const O=4*Math.floor(a/4),S=a%4,k=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${w}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${s}, ${o}, ${u});\n      const ivec3 pads = ivec3(${m}, ${g}, ${b});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${h};\n            wD += ${c}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${O}; wC += 4) {\n              int xC = xCCorner + wC * ${d};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\n              );\n\n              ${k}\n            }\n\n            int xC = xCCorner + ${O};\n            if (${1===S}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${2===S}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${k}\n            } else if (${3===S}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                initializationValue\n              );\n\n              ${k}\n            }\n          }\n        }\n        setOutput(${x});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UA(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Bk(i,"avgPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:u}=r,c=1;h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const l=h["de"].computePool2DInfo(i.shape,a,s,c,o,u);if(1===l.filterWidth&&1===l.filterHeight&&h["Ji"].arraysEqual(l.inShape,l.outShape))return uC({inputs:{x:i},backend:n});const d=new zA(l,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const WA={kernelName:h["s"],backendName:"webgl",kernelFunc:UA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GA(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:s,pad:o,dimRoundingMode:u,dataFormat:c}=r,l=[1,1,1],d=h["de"].computePool3DInfo(i.shape,a,s,l,o,u,c),p=new VA(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}const HA={kernelName:h["t"],backendName:"webgl",kernelFunc:GA};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qA{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,o=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=o-1-t.padInfo.top,l=u-1-t.padInfo.left,d=1/(e*n);this.userCode=`\n      const ivec2 pads = ivec2(${c}, ${l});\n      const float avgMultiplier = float(${d});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n            wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${u};\n            wC+= ${s}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class JA{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,s=t.strideWidth,o=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=l-1-t.padInfo.front,f=d-1-t.padInfo.top,m=h-1-t.padInfo.left,g=1/(e*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${p}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${o}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${d};\n              wR += ${u}) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${h};\n                wC += ${c}) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KA(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,s=a,{filterSize:o,strides:u,pad:c,dimRoundingMode:l}=r,d=[1,1,1],p=h["de"].computePool3DInfo(s.shape,o,u,d,c,l),f=new JA(p);return n.runWebGLProgram(f,[i],s.dtype)}const XA={kernelName:h["u"],backendName:"webgl",kernelFunc:KA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YA(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,s=a;Bk([i,a],"avgPoolGrad");const{filterSize:o,strides:u,pad:c}=r,l=h["de"].computePool2DInfo(s.shape,o,u,1,c),d=new qA(l);return n.runWebGLProgram(d,[i],s.dtype)}const ZA={kernelName:h["v"],backendName:"webgl",kernelFunc:YA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QA(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:s,transposeB:o}=r;return qC({a:i,b:a,transposeA:s,transposeB:o,backend:n})}const tE={kernelName:h["w"],backendName:"webgl",kernelFunc:QA};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eE{constructor(t,e,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],h["de"].assertAndGetBroadcastShape(t,e),h["de"].assertAndGetBroadcastShape(t,n);let s="0.0";null!=r&&(h["de"].assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";null!=i&&(h["de"].assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${s};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nE{constructor(t,e,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],h["de"].assertAndGetBroadcastShape(t,e),h["de"].assertAndGetBroadcastShape(t,n);let s="vec4(0.0)";null!=r&&(h["de"].assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=i&&(h["de"].assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${s};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rE=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:a,offset:s,scale:o}=t;h["Ji"].assert(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),h["Ji"].assert(null==s||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),h["Ji"].assert(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;null==u&&(u=.001);const c=[r,i,a];let l=null;null!=s&&(l=s.shape,c.push(s));let d=null;null!=o&&(d=o.shape,c.push(o));const p=Object(h["hf"])().getBool("WEBGL_PACK_NORMALIZATION")?new nE(r.shape,i.shape,a.shape,l,d,u):new eE(r.shape,i.shape,a.shape,l,d,u),f=e.runWebGLProgram(p,c,c[0].dtype);return f},iE={kernelName:h["sb"],backendName:"webgl",kernelFunc:rE};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class aE{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=MT(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=oE(this.rank);let r;const i=t.map((t,e)=>`sourceLoc.${sE[e]} = start[${e}] + coords.${sE[e]};`);r=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${i.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const sE=["x","y","z","w","u","v"];function oE(t){if(1===t)return"sourceLoc";if(t<=6)return sE.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uE{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const e=MT(this.rank),n=vI("coords",this.rank),r=vI("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,s=`\n      result.x = ${a};\n      if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${t[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${e}(${t.map((t,e)=>`start[${e}]`).join()});`:t.map((t,e)=>`${r[e]} = ${n[e]} + start[${e}];`).join("\n");this.userCode=`\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${s}\n        ${o}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cE(t,e,n,r){const i=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),s=r.texData.get(a.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=t.dtype;let o=h["Rh"].computeFlatOffset(e,h["Ji"].computeStrides(t.shape));i.slice&&(o+=i.slice.flatOffset),s.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||t.dataId};const u=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,u+1),a}function lE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:s}=r,[o,u]=h["Rh"].parseSliceParams(i,a,s);if(h["Rh"].assertParamsValid(i,o,u),0===h["Ji"].sizeFromShape(u))return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const t=n.texData.get(i.dataId),e=iI(t.values,o,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,e)}const{isPacked:c}=n.texData.get(i.dataId),l=h["Rh"].isSliceContinous(i.shape,o,u);if(c||!l){const t=Object(h["hf"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uE(u):new aE(u),e=[o];return n.runWebGLProgram(t,[i],i.dtype,e)}return n.uploadToGPU(i.dataId),cE(i,o,u,n)}const dE={kernelName:h["dd"],backendName:"webgl",kernelFunc:lE},hE=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:s}=r;h["Ji"].assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((t,e)=>t*e),u=h["de"].getReshaped(i.shape,a,o),c=h["de"].getPermuted(u.length,a.length),l=h["de"].getReshapedPermuted(i.shape,a,o),d=h["de"].getSliceBeginCoords(s,a.length),p=h["de"].getSliceSize(l,s,a.length),f=[],m=NC({inputs:{x:i},backend:n,attrs:{shape:u}}),g=WC({inputs:{x:m},backend:n,attrs:{perm:c}}),b=NC({inputs:{x:g},backend:n,attrs:{shape:l}}),y=lE({inputs:{x:b},backend:n,attrs:{begin:d,size:p}});return f.push(m),f.push(g),f.push(b),f.forEach(t=>n.disposeIntermediateTensorInfo(t)),y},pE={kernelName:h["x"],backendName:"webgl",kernelFunc:hE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:s}=r,o=n.readSync(i.dataId),u=n.readSync(a.dataId),c=__(o,u,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,c)}const mE={kernelName:h["y"],backendName:"webgl",kernelFunc:fE};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gE(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.readSync(r.dataId),s=n.readSync(i.dataId),o=h["de"].assertAndGetBroadcastShape(Array.from(a),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const bE={kernelName:h["z"],backendName:"webgl",kernelFunc:gE},yE="return float(a != b);",vE=OC({opSnippet:yE,cpuKernelImpl:J_,dtype:"bool"}),wE={kernelName:h["nc"],backendName:"webgl",kernelFunc:vE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xE(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return uC({inputs:{x:i.complexTensorInfos.real},backend:n})}const OE={kernelName:h["Fc"],backendName:"webgl",kernelFunc:xE},SE="return float(int(x));";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kE(t,e){const n=new NI(t.shape,SE),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if("complex64"===a){if("complex64"===i.dtype)return uC({inputs:{x:i},backend:n});const t=h["Ri"](i.shape),e=TE({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=lC({inputs:{real:e,imag:t},backend:n});return t.dispose(),n.disposeIntermediateTensorInfo(e),r}if("complex64"===i.dtype){const t=xE({inputs:{input:i},backend:n}),e=TE({inputs:{x:t},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(t),e}if(!h["Ji"].hasEncodingLoss(i.dtype,a)){const t=uC({inputs:{x:i},backend:n});return{dataId:t.dataId,shape:t.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){const t=n.texData.get(i.dataId).values,[e,r,s]=C_(t,i.shape,i.dtype,a);return n.makeTensorInfo(e,r,s)}if("int32"===a)return kE(i,n);if("bool"===a){const t=n.makeTensorInfo([],"bool",h["Ji"].getTypedArrayFromDType("bool",1)),e={a:i,b:t},r=vE({inputs:e,backend:n});return n.disposeIntermediateTensorInfo(t),r}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const _E={kernelName:h["B"],backendName:"webgl",kernelFunc:TE},IE="return ceil(x);",CE=xC({opSnippet:IE,packedOpSnippet:IE,cpuKernelImpl:A_}),AE={kernelName:h["C"],backendName:"webgl",kernelFunc:CE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class EE{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NE{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:a,clipValueMax:s}=r;let o;o=Object(h["hf"])().getBool("WEBGL_PACK_CLIP")?new NE(i.shape):new EE(i.shape);const u=[[a],[s]];return n.runWebGLProgram(o,[i],i.dtype,u)}const DE={kernelName:h["D"],backendName:"webgl",kernelFunc:jE};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $E{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RE(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function FE(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),a=new $E(r.shape),s=[RE(r,i.complexTensorInfos.real),RE(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,s,s[0].dtype)}const PE={kernelName:h["F"],backendName:"webgl",kernelFunc:FE};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ME{constructor(t){this.outputShape=[],this.outputShape=h["de"].computeOutShape(t,1),this.variableNames=t.map((t,e)=>"T"+e);const e=new Array(t.length-1);e[0]=t[0][1];for(let a=1;a<e.length;a++)e[a]=e[a-1]+t[a][1];const n=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<e.length;a++){const t=e[a-1];n.push(`else if (yC < ${e[a]}) setOutput(getT${a}(yR, yC-${t}));`)}const r=e.length,i=e[e.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LE{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=h["de"].computeOutShape(t,e);const n=this.outputShape,r=n.length,i=MT(r),a=vI("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((t,e)=>"T"+e);const o=new Array(t.length-1);o[0]=t[0][e];for(let h=1;h<o.length;h++)o[h]=o[h-1]+t[h][e];const u=s[e],c=s.slice(-2),l=s.join();let d=`if (${u} < ${o[0]}) {\n        return getChannel(\n            getT0(${l}), vec2(${c.join()}));\n        }`;for(let h=1;h<o.length;h++){const t=o[h-1];d+=`\n        if (${u} < ${o[h]}  && ${u} >= ${o[h-1]}) {\n          return getChannel(\n            getT${h}(${BE(s,u,t)}),\n            vec2(${BE(c,u,t)}));\n        }`}const p=o.length,f=o[o.length-1];d+=`\n        return getChannel(\n          getT${p}(${BE(s,u,f)}),\n          vec2(${BE(c,u,f)}));`,this.userCode=`\n      float getValue(${s.map(t=>"int "+t)}) {\n        ${d}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${n[r-2]} &&\n            ${a[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function BE(t,e,n){const r=t.indexOf(e),i=t.map((t,e)=>e===r?`${t} - ${n}`:t);return i.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zE(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return uC({inputs:{x:i.complexTensorInfos.imag},backend:n})}const VE={kernelName:h["Bb"],backendName:"webgl",kernelFunc:zE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UE(t,e,n){const r=t[0].dtype;if("complex64"===r){const r=t.map(t=>xE({inputs:{input:t},backend:n})),i=t.map(t=>zE({inputs:{input:t},backend:n})),a=UE(r,e,n),s=UE(i,e,n),o=lC({inputs:{real:a,imag:s},backend:n});return r.forEach(t=>n.disposeIntermediateTensorInfo(t)),i.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}let i=n.shouldExecuteOnCPU(t);if("string"===r&&(i=!0),i){const i=t.map(t=>{const r=h["Ji"].sizeFromShape(t.shape.slice(e)),i=[-1,r];return NC({inputs:{x:t},backend:n,attrs:{shape:i}})}),a=i.map(t=>({vals:n.readSync(t.dataId),shape:t.shape})),s=h["de"].computeOutShape(i.map(t=>t.shape),1),o=1===i[0].shape[0],u=E_(a,s,r,o),c=h["de"].computeOutShape(t.map(t=>t.shape),e),l=n.makeTensorInfo(c,r,u);return i.forEach(t=>n.disposeIntermediateTensorInfo(t)),l}const a=t.filter(t=>h["Ji"].sizeFromShape(t.shape)>0),s=Object(h["hf"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const e=s?new NI(t[0].shape,MI):new GI(t[0].shape,MI);return n.runWebGLProgram(e,t,r)}const o=Object(h["hf"])().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const t=[];for(let i=0;i<a.length;i+=o){const r=a.slice(i,i+o);t.push(UE(r,e,n))}const r=UE(t,e,n);for(const e of t)n.disposeIntermediateTensorInfo(e);return r}if(s){const t=new LE(a.map(t=>t.shape),e);return n.runWebGLProgram(t,a,r)}const{tensors2D:u,outShape:c}=WE(a,e,n),l=new ME(u.map(t=>t.shape)),d=n.runWebGLProgram(l,u,r);u.forEach(t=>n.disposeIntermediateTensorInfo(t));const p=NC({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function WE(t,e,n){const r=h["de"].computeOutShape(t.map(t=>t.shape),e),i=t.map(t=>NC({inputs:{x:t},attrs:{shape:[-1,h["Ji"].sizeFromShape(t.shape.slice(e))]},backend:n}));return{tensors2D:i,outShape:r}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GE(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=h["Ji"].parseAxisParam(i,e[0].shape)[0],s=e.map(t=>t.shape);h["de"].assertParamsConsistent(s,a);const o=h["de"].computeOutShape(e.map(t=>t.shape),a);if(0===h["Ji"].sizeFromShape(o))return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(t=>h["Ji"].sizeFromShape(t.shape)>0);return 1===u.length?uC({inputs:{x:u[0]},backend:n}):UE(u,a,n)}const HE={kernelName:h["G"],backendName:"webgl",kernelFunc:GE};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qE{constructor(t,e=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const a=t.padInfo.top,s=t.padInfo.left,o=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,b=m?2:3,y=m?3:1;let v="",w="";n&&(v=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const x=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${o}, ${u});\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${y}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${b}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${l};\n\n            if (xC < 0 || xC >= ${t.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${w}\n        setOutput(result);\n      }\n    `}}class JE{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,a=t.strideHeight,s=t.strideWidth,o=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${a}, ${s});\n      const ivec3 pads = ivec3(${e}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d}; wR++) {\n            int xR = xRCorner + wR * ${u};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h}; wC++) {\n              int xC = xCCorner + wC * ${c};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KE{constructor(t,e=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qT(this.outputShape.length);const a=t.padInfo.left,s=t.strideWidth,o=t.dilationWidth,u=t.filterHeight,c=t.filterWidth,l=c;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let h=0;h<c;h++)d+=`\n           vec4 xTexelC${2*h};\n           int xTexelC${2*h}Ready;\n           vec4 xTexelC${2*h+1};\n           int xTexelC${2*h+1}Ready;\n           vec4 xC${h};`;d+=`\n     for (int r = 0; r < ${u}; r++) {\n      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {\n       `;for(let h=0;h<c;h++)d+=`\n           xTexelC${2*h} = vec4(0.0);\n           xTexelC${2*h}Ready = 0;\n           xTexelC${2*h+1} = vec4(0.0);\n           xTexelC${2*h+1}Ready = 0;\n           xC${h} = vec4(0.0);`;d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let g=0;g<(l+1)/2;g++){const e=2*g;if(d+=`\n           xC = xCCorner + ${e*o};\n           `,1===s){if(e<c&&(a%2===1?(d+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                   xTexelC${e} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${e}.zw = vec2(0.0);\n                   }\n                   xTexelC${e}Ready = 1;\n                 }\n               `,d+=1===o&&e>0?`\n                 xC${e} = vec4(xTexelC${e-2}.zw, xTexelC${e}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${e} = vec4(previous.zw, xTexelC${e}.xy);\n                   } else {\n                     xC${e} = vec4(0.0, 0.0, xTexelC${e}.xy);\n                   }\n                   `):d+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                   xTexelC${e} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${e}.zw = vec2(0.0);\n                   }\n                   xTexelC${e}Ready = 1;\n                 }\n\n                 xC${e} = xTexelC${e};\n                 `,e+1<c)){const t=a%2===0?h["Ji"].nearestLargerEven(o):o;o%2===0&&a%2===1||o%2!==0&&a%2!==1?(d+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${t};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                     xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${e+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${e+1}Ready = 1;\n                   }\n                   `,d+=o>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${e+1} = vec4(previous.zw, xTexelC${e+1}.xy);\n                     } else {\n                      xC${e+1} = vec4(0.0, 0.0, xTexelC${e+1}.xy);\n                     }\n                     `:`\n                     xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.xy);\n                     `):d+=1===t?`\n                     xC${e+1} = xTexelC${e};\n                     `:`\n                     xCOffset = xC + ${t};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                       xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${e+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${e+1}Ready = 1;\n                     }\n\n                     xC${e+1} = xTexelC${e+1};\n                     `}}else e<c&&(a%2===1?(d+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                   xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${e}.zw = vec2(0.0);\n                   }\n                   xTexelC${e}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${e+1}Ready == 0) {\n                   xTexelC${e+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${e+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${e+1}Ready = 1;\n                 }\n\n                 xC${e} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n               `,e+1<c&&(d+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${e+1} = vec4(xTexelC${e+1}.xy, final.xy);\n                 `)):(d+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                   xTexelC${e} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${e}.zw = vec2(0.0);\n                   }\n                   xTexelC${e}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                   xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${e+1}.zw = vec2(0.);\n                   }\n                   xTexelC${e+1}Ready = 1;\n                 }\n\n                 xC${e} = vec4(\n                   xTexelC${e}.xy, xTexelC${e+1}.xy);\n               `,e+1<c&&(d+=`\n                   xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n                 `)));e<c&&(d+=`\n             wTexel = getW(r, ${e}, d1, d2);\n             dotProd += xC${e}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${t.inChannels}) {\n               dotProd += xC${e}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,e+1<c&&(d+=`\n               wTexel = getW(r, ${e+1}, d1, d2);\n               dotProd += xC${e+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${t.inChannels}) {\n                 dotProd += xC${e+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let p="",f="";n&&(p=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:i?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,f="result = activation(result);");const m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${p}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${d}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${m}\n         ${f}\n         setOutput(result);\n       }\n     `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XE{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=qT(this.outputShape.length);const{dataFormat:n}=e,r=Vk(),i="channelsLast"===n,a=i?1:2,s=i?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let t=0;t<=1;t++)u+=`\n          blockIndex = rc.z + ${t};\n          pos = rc.y + ${c};\n\n          ${o}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${s}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*c+t}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*c+t}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${u}\n\n        ${r.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YE(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&1===n&&t[0]>1?[t[0],1]:null}function ZE({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){const u=t.shape,c=r.texData.get(t.dataId),l=n.inChannels,d=u[0]*u[1]*u[2],p=n.outChannels,f="channelsLast"===n.dataFormat,m=!1,g=!1;let b;const y=[];if(null!=a){const t=YE(a.shape,f);null!=t&&(a=NC({inputs:{x:a},backend:r,attrs:{shape:t}}),y.push(a))}if(null!=i){const t=YE(i.shape,f);null!=t&&(i=NC({inputs:{x:i},backend:r,attrs:{shape:t}}),y.push(i))}const v=(1===d||1===p)&&l>HC,w=!v&&c.isPacked&&f&&null!=c.texture&&u[2]%2!==0&&h["Ji"].arraysEqual(c.shape.slice(-3),u.slice(-3));if(w){const l=u[0]*u[1]*(u[2]+1),d={dataId:t.dataId,shape:[1,l,n.inChannels],dtype:t.dtype},p=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,h["Ji"].assert(Ik(c.shape,d.shape),()=>`packed reshape ${c.shape} to ${d.shape} isn't free`);const f=NC({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(f);const v=qC({a:d,b:f,backend:r,transposeA:m,transposeB:g,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s}),w=r.texData.get(v.dataId);h["Ji"].assert(w.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=p,w.shape=n.outShape,b=uC({inputs:{x:v},backend:r}),b.shape=n.outShape,y.push(v)}else{const u=n.outHeight*n.outWidth,c=NC({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,u,n.inChannels]:[n.batchSize,n.inChannels,u]}}),l=NC({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),d=qC({a:f?c:l,b:f?l:c,transposeA:!f,transposeB:g,backend:r,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s});b=NC({inputs:{x:d},backend:r,attrs:{shape:n.outShape}}),y.push(c),y.push(l),y.push(d)}for(const h of y)r.disposeIntermediateTensorInfo(h);return b}function QE({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){const{filterWidth:u,filterHeight:c,inChannels:l,outWidth:d,outHeight:p,dataFormat:f}=n,m="channelsLast"===f,g=u*c*l,b=p*d,y=[n.batchSize,g,b],v=!0,w=!1,x=[];if(null!=a){const t=YE(a.shape,m);null!=t&&(a=NC({inputs:{x:a},backend:r,attrs:{shape:t}}),x.push(a))}if(null!=i){const t=YE(i.shape,m);null!=t&&(i=NC({inputs:{x:i},backend:r,attrs:{shape:t}}),x.push(i))}const O=NC({inputs:{x:e},backend:r,attrs:{shape:[1,g,h["Ji"].sizeFromShape(e.shape)/g]}});x.push(O);const S=new XE(y,n),k=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(S,[t],"float32",k),_=NC({inputs:{x:T},backend:r,attrs:{shape:y}});x.push(T),x.push(_);const I=null!=i,C=null!=a,A="leakyrelu"===o,E=o?SC(o,!0):null,N=new kC(m?_.shape:O.shape,m?O.shape:_.shape,m?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],v,w,I,E,C,A),j=m?[_,O]:[O,_];if(i&&j.push(i),C&&j.push(a),A){const t=r.makeTensorInfo([],"float32",h["Ji"].createScalarValue(s,"float32"));j.push(t),x.push(t)}const D=r.runWebGLProgram(N,j,"float32"),$=NC({inputs:{x:D},backend:r,attrs:{shape:n.outShape}});x.push(D);for(const h of x)r.disposeIntermediateTensorInfo(h);return $}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dataFormat:u,dilations:c,dimRoundingMode:l}=r,d=h["de"].convertConv2DDataFormat(u),p=h["de"].computeConv2DInfo(i.shape,a.shape,s,c,o,l,!1,d);let f;if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===d&&Object(h["hf"])().getBool("WEBGL_EXP_CONV")){const t=new KE(p),e=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(t,[i,a],"float32",e)}else if(Object(h["hf"])().getBool("WEBGL_CONV_IM2COL"))f=QE({x:i,filter:a,convInfo:p,backend:n});else{const t=new qE(p);f=n.runWebGLProgram(t,[i,a],"float32")}else f=ZE({x:i,filter:a,convInfo:p,backend:n});const m=NC({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),m}const eN={kernelName:h["H"],backendName:"webgl",kernelFunc:tN};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nN{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a="channelsLast"===t.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${e} - ${r};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              if (${a}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class rN{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a="channelsLast"===t.dataFormat,s=e-1-t.padInfo.top,o=n-1-t.padInfo.left,u=a?1:2,c=a?2:3,l=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class iN{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,a=t.padInfo.top,s=t.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yF = 0; yF < ${t.outDepth}; yF++) {\n            int xF = wF + yF * ${e} - ${i};\n\n            if (xF < 0 || xF >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${t.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${a};\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${t.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${s};\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class aN{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,s=t.strideWidth,o=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${o}, ${u}, ${c});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:c,filterShape:l}=r,d=h["de"].convertConv2DDataFormat(u),p=h["de"].computeConv2DInfo(i.shape,l,s,1,o,c,!1,d),f=new nN(p);return n.runWebGLProgram(f,[i,a],"float32")}const oN={kernelName:h["I"],backendName:"webgl",kernelFunc:sN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uN(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:s,strides:o,pad:u,dataFormat:c,dimRoundingMode:l}=r,d=h["de"].convertConv2DDataFormat(c),p=h["de"].computeConv2DInfo(s,a.shape,o,1,u,l,!1,d),f=new rN(p);return n.runWebGLProgram(f,[i,a],"float32")}const cN={kernelName:h["J"],backendName:"webgl",kernelFunc:uN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dilations:u}=r,c=h["de"].computeConv3DInfo(i.shape,a.shape,s,u,o),l=new JE(c);return n.runWebGLProgram(l,[i,a],"float32")}const dN={kernelName:h["K"],backendName:"webgl",kernelFunc:lN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:s,pad:o,filterShape:u}=r,c=h["de"].computeConv3DInfo(i.shape,u,s,1,o),l=new iN(c);return n.runWebGLProgram(l,[i,a],"float32")}const pN={kernelName:h["L"],backendName:"webgl",kernelFunc:hN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fN(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:s,strides:o,inputShape:u}=r,c=h["de"].computeConv3DInfo(u,a.shape,o,1,s),l=new aN(c);return n.runWebGLProgram(l,[i,a],"float32")}const mN={kernelName:h["M"],backendName:"webgl",kernelFunc:fN},gN=wC+"\n  return cos(x);\n",bN=xC({opSnippet:gN}),yN={kernelName:h["N"],backendName:"webgl",kernelFunc:bN},vN="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",wN=xC({opSnippet:vN}),xN={kernelName:h["O"],backendName:"webgl",kernelFunc:wN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ON{constructor(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,s,o,u]=t,[c]=e,[l,d]=n;this.outputShape=[c,l,d,u];const h="bilinear"===r?1:0,[p,f]=[s-1+".0",o-1+".0"],[m,g,b]=l>1?[""+(s-1)/(l-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+p],[y,v,w]=d>1?[""+(o-1)/(d-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+f];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${v};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${h} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SN=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:s}=e,{cropSize:o,method:u,extrapolationValue:c}=r,l=new ON(i.shape,a.shape,o,u,c);return n.runWebGLProgram(l,[i,a,s],"float32")},kN={kernelName:h["P"],backendName:"webgl",kernelFunc:SN};var TN;(function(t){t["Prod"]="*",t["Sum"]="+"})(TN||(TN={}));class _N{constructor(t,e,n,r){this.op=t,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===TN.Prod?"1.0":"0.0",s=n?a:`getX(${IN(i,"coords",this.op)})`,o=this.outputShape[this.outputShape.length-1];let u="",c="";n?(u=r?"end != "+(o-1):"end != 0",c=r?"end + 1":"end - 1"):(u=r?"end + pow2 < "+o:"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${MT(i)} coords = getOutputCoords();\n        int end = ${CN(i,"coords",this.op)};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${u}) {\n          int idx = ${c};\n          ${CN(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${IN(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function IN(t,e,n){if(1===t)return""+e;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function CN(t,e,n){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AN(t,e,n,r,i,a){const s=e.shape.length,o=h["de"].getAxesPermutation([r],s);let u=e;null!=o&&(u=WC({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=h["de"].getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=`+r);const l=u.shape[c];let d=uC({inputs:{x:u},backend:n});for(let h=0;h<=Math.ceil(Math.log2(l))-1;h++){const e=new _N(t,u.shape,!1,a),r=[[h]],i=d;d=n.runWebGLProgram(e,[d],d.dtype,r),n.disposeIntermediateTensorInfo(i)}if(i){const e=new _N(t,u.shape,i,a),r=d;d=n.runWebGLProgram(e,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=o){const t=h["de"].getUndoAxesPermutation(o),e=WC({inputs:{x:d},backend:n,attrs:{perm:t}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),e}return d}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:s,reverse:o}=r;return AN(TN.Prod,i,n,a,s,o)}const NN={kernelName:h["Q"],backendName:"webgl",kernelFunc:EN};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:s,reverse:o}=r;return AN(TN.Sum,i,n,a,s,o)}const DN={kernelName:h["R"],backendName:"webgl",kernelFunc:jN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:s,binaryOutput:o}=r;if(1===i.shape.length){const t=n.readSync(i.dataId),e=n.readSync(a.dataId),r=__(t,e,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,r)}if(2===i.shape.length){const t=n.bufferSync(i),e=n.bufferSync(a),r=I_(t,e,s,o);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+i.shape.length+".")}const RN={kernelName:h["T"],backendName:"webgl",kernelFunc:$N};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FN{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:s}=r,o=i.shape[0],u="NHWC"===s?i.shape[1]:i.shape[2],c="NHWC"===s?i.shape[2]:i.shape[3],l="NHWC"===s?i.shape[3]:i.shape[1],d=u*a,h=c*a,p=l/(a*a),f="NHWC"===s?[o,d,h,p]:[o,p,d,h],m=new FN(f,a,s);return n.runWebGLProgram(m,[i],i.dtype)}const MN={kernelName:h["U"],backendName:"webgl",kernelFunc:PN};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LN{constructor(t,e=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qT(this.outputShape.length);const a=t.filterHeight,s=t.filterWidth,o=t.outChannels/t.inChannels;let u="",c="";n&&(u=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,c="result = activation(result);");const l=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${u}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${s}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${l}\n        ${c}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BN{constructor(t,e=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qT(this.outputShape.length);const a=t.outChannels/t.inChannels,s=t.padInfo.left,o=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,d=l;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let h=0;h<l;h++)p+=`\n          vec4 xTexelC${2*h};\n          int xTexelC${2*h}Ready;\n          vec4 xTexelC${2*h+1};\n          int xTexelC${2*h+1}Ready;\n          vec4 xC${h};`;p+=`\n    for (int r = 0; r < ${c}; r++) {\n      `;for(let h=0;h<l;h++)p+=`\n          xTexelC${2*h} = vec4(0.0);\n          xTexelC${2*h}Ready = 0;\n          xTexelC${2*h+1} = vec4(0.0);\n          xTexelC${2*h+1}Ready = 0;\n          xC${h} = vec4(0.0);`;p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let b=0;b<(d+1)/2;b++){const t=2*b;if(p+=`\n          xC = xCCorner + ${t*u};\n          `,1===o){if(t<l&&(s%2===1?(p+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,p+=1===u&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):p+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<l)){const e=s%2===0?h["Ji"].nearestLargerEven(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(p+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,p+=u>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                    } else {\n                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                    }\n                    `:`\n                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                    `):p+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<l&&(s%2===1?(p+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<l&&(p+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(p+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<l&&(p+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<l&&(p+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<l&&(p+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}p+="\n    }\n  ",p+="\n      }\n    ";let f="",m="";n&&(f=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,m="result = activation(result);");const g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${f}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${p}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${g}\n        ${m}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dilations:u,dimRoundingMode:c}=r;let l=u;null==l&&(l=[1,1]),h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(s,l),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const d=h["de"].computeConv2DInfo(i.shape,a.shape,s,l,o,c,!0);let p;p=Object(h["hf"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new BN(d):new LN(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,a],"float32",f)}const VN={kernelName:h["V"],backendName:"webgl",kernelFunc:zN};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UN{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${a} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${e} - ${r};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class WN{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,s=n-1-t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${o}; dm++) {\n              int d2 = d1 * ${o} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:c,filterShape:l}=r,d=h["de"].computeConv2DInfo(i.shape,l,s,o,u,c,!0),p=new UN(d);return n.runWebGLProgram(p,[i,a],"float32")}const HN={kernelName:h["W"],backendName:"webgl",kernelFunc:GN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qN(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:c,inputShape:l}=r,d=h["de"].computeConv2DInfo(l,a.shape,s,o,u,c,!0),p=new WN(d);return n.runWebGLProgram(p,[i,a],"float32")}const JN={kernelName:h["X"],backendName:"webgl",kernelFunc:qN};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KN{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XN(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],a=h["Ji"].sizeFromShape(r.shape),s=NC({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new KN(a),u=n.runWebGLProgram(o,[s],s.dtype),c=NC({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}const YN={kernelName:h["Y"],backendName:"webgl",kernelFunc:XN};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZN{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:e,inWidth:n,padInfo:r,strideHeight:i,strideWidth:a,filterHeight:s,filterWidth:o,dilationHeight:u,dilationWidth:c}=t,{top:l,left:d}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${a});\n      const ivec2 pads = ivec2(${l}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${s}; h++) {\n          int hIn = hBeg + h * ${u};\n\n          if (hIn >= 0 && hIn < ${e}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${c};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:s,pad:o,dilations:u}=r,c=h["de"].computeDilation2DInfo(i.shape,a.shape,s,o,"NHWC",u);let l;const d=new ZN(c);l=n.runWebGLProgram(d,[i,a],"float32");const p=NC({inputs:{x:l},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(l),p}const tj={kernelName:h["Z"],backendName:"webgl",kernelFunc:QN};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ej(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:s,summedDims:o,idDims:u}=h["de"].decodeEinsumEquation(i,a.length);h["de"].checkEinsumDimSizes(s.length,u,a);const{path:c,steps:l}=h["de"].getEinsumComputePath(o,u),d=l.length;let p=null,f=s.length;const m=[];for(let g=0;g<d;++g){for(const t of l[g]){const{permutationIndices:e,expandDims:r}=h["de"].getEinsumPermutation(f,u[t]);let i;h["de"].isIdentityPermutation(e)?i=a[t]:(i=WC({inputs:{x:a[t]},backend:n,attrs:{perm:e}}),m.push(i));const s=i.shape.slice();for(let t=0;t<r.length;++t)s.splice(r[t],0,1);h["Ji"].arraysEqual(i.shape,s)||(i=NC({inputs:{x:i},backend:n,attrs:{shape:s}}),m.push(i)),null===p?p=i:(p=CC({inputs:{a:i,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=VC({inputs:{x:p},backend:n,attrs:{axis:c[g]-(s.length-f),keepDims:!1}}),m.push(p)),f--)}for(const h of m)h!==p&&n.disposeIntermediateTensorInfo(h);return p}const nj={kernelName:h["db"],backendName:"webgl",kernelFunc:ej},rj="return (x >= 0.0) ? x : (exp(x) - 1.0);",ij="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",aj=xC({opSnippet:rj,packedOpSnippet:ij}),sj={kernelName:h["eb"],backendName:"webgl",kernelFunc:aj},oj="return (b >= 1.0) ? a : a * (b + 1.0);",uj="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",cj=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,a=Object(h["hf"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new oC(uj,r.shape,i.shape):new aC(oj,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},lj={kernelName:h["fb"],backendName:"webgl",kernelFunc:cj},dj="\n  return vec4(equal(a, b));\n",hj="return float(a == b);",pj=OC({opSnippet:hj,packedOpSnippet:dj,dtype:"bool",cpuKernelImpl:N_}),fj={kernelName:h["hb"],backendName:"webgl",kernelFunc:pj},mj=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${h["de"].ERF_P};\n  float a1 = ${h["de"].ERF_A1};\n  float a2 = ${h["de"].ERF_A2};\n  float a3 = ${h["de"].ERF_A3};\n  float a4 = ${h["de"].ERF_A4};\n  float a5 = ${h["de"].ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,gj=xC({opSnippet:mj}),bj={kernelName:h["ib"],backendName:"webgl",kernelFunc:gj},yj=wC+"\n  return exp(x);\n",vj="\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",wj=xC({opSnippet:yj,packedOpSnippet:vj,cpuKernelImpl:j_,dtype:"float32"}),xj={kernelName:h["jb"],backendName:"webgl",kernelFunc:wj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Oj(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:a}=e,s=a.shape.length,o=a.shape.slice();let u=i;return i<0&&(h["Ji"].assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+i+1),o.splice(u,0,1),NC({inputs:{x:a},backend:r,attrs:{shape:o}})}const Sj={kernelName:h["kb"],backendName:"webgl",kernelFunc:Oj},kj="return exp(x) - 1.0;",Tj=xC({opSnippet:kj,packedOpSnippet:kj,cpuKernelImpl:D_}),_j={kernelName:h["lb"],backendName:"webgl",kernelFunc:Tj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ij{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";let s;if("real"===t)s="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);s="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${s}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cj(t,e,n){const r=n.texData.get(t.dataId),i=h["Ji"].sizeFromShape(t.shape),a=t.shape[t.shape.length-1],s=i/a,o=NC({inputs:{x:t},backend:n,attrs:{shape:[s,a]}}),u=o.shape,c=new Ij("real",u,e),l=new Ij("imag",u,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],p=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(l,d,"float32"),m=lC({inputs:{real:p,imag:f},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f);const g=NC({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),g}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(t){const{inputs:e,backend:n}=t,{input:r}=e;return Cj(r,!1,n)}const Ej={kernelName:h["mb"],backendName:"webgl",kernelFunc:Aj};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nj{constructor(t,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jj(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||h["Ji"].inferDtype(i),"string"===a){const t=h["Ji"].getArrayFromDType(a,h["Ji"].sizeFromShape(r));return t.fill(i),e.makeTensorInfo(r,a,t)}{const t=new Nj(r,i),n=[[i]];return e.runWebGLProgram(t,[],a,n)}}const Dj={kernelName:h["nb"],backendName:"webgl",kernelFunc:jj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $j{constructor(t){this.variableNames=["Image"],this.outputShape=[];const e=t[2];this.outputShape=t,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rj={kernelName:h["ob"],backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new $j(n.shape),a=r.runWebGLProgram(i,[n],n.dtype);return a}},Fj="return floor(x);",Pj=xC({opSnippet:Fj,packedOpSnippet:Fj,cpuKernelImpl:$_}),Mj={kernelName:h["pb"],backendName:"webgl",kernelFunc:Pj},Lj="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",Bj="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",zj=OC({opSnippet:Lj,packedOpSnippet:Bj,dtype:"int32"}),Vj={kernelName:h["qb"],backendName:"webgl",kernelFunc:zj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Uj{constructor(t){this.variableNames=["A"];const e=Vk(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wj{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=Vk(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gj={kernelName:h["rb"],backendName:"webgl",kernelFunc:Jj};let Hj,qj=Object(h["hf"])().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Jj(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:a}=r,s="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,o="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[u,c]=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=[c,u],d=[c,u,a];if(o||s){const t=Object(h["hf"])().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Hj&&t===qj||(qj=t,Hj=document.createElement("canvas").getContext("2d",{willReadFrequently:qj})),Hj.canvas.width=u,Hj.canvas.height=c,Hj.drawImage(i,0,0,u,c),i=Hj.canvas}const p=n.makeTensorInfo(l,"int32");n.texData.get(p.dataId).usage=MS.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const f=Object(h["hf"])().getBool("WEBGL_PACK")?new Wj(d):new Uj(d),m=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),m}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kj(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:s,preluActivationWeights:o}=e,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:m}=r,g=h["de"].convertConv2DDataFormat(l),b=h["de"].computeConv2DInfo(i.shape,a.shape,u,d,c,p,!1,g);let y;const v=[],w=null!=s,x=null!=o,O="leakyrelu"===f,S=()=>{const t=[i,a],e=(t,e)=>{if("NCHW"===e&&1===t.shape.length&&1!==t.shape[0]){const e=NC({inputs:{x:t},backend:n,attrs:{shape:[t.shape[0],1,1]}});return v.push(e),e}return t};if(w&&t.push(e(s,l)),x&&t.push(e(o,l)),O){const e=n.makeTensorInfo([],"float32",h["Ji"].createScalarValue(m,"float32"));t.push(e),v.push(e)}return t};if(1!==b.filterHeight||1!==b.filterWidth||1!==b.dilationHeight||1!==b.dilationWidth||1!==b.strideHeight||1!==b.strideWidth||"SAME"!==b.padInfo.type&&"VALID"!==b.padInfo.type)if(b.strideWidth<=2&&"channelsLast"===g&&Object(h["hf"])().getBool("WEBGL_EXP_CONV")){const t=f?SC(f,!0):null,e=new KE(b,w,t,x,O),r=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],i=S();y=n.runWebGLProgram(e,i,"float32",r)}else if(Object(h["hf"])().getBool("WEBGL_CONV_IM2COL"))y=QE({x:i,filter:a,convInfo:b,backend:n,bias:s,activation:f,preluActivationWeights:o,leakyreluAlpha:m});else{const t=f?SC(f,!1):null,e=new qE(b,w,t,x,O),r=S();y=n.runWebGLProgram(e,r,"float32")}else y=ZE({x:i,filter:a,convInfo:b,backend:n,bias:s,activation:f,preluActivationWeights:o,leakyreluAlpha:m});const k=NC({inputs:{x:y},backend:n,attrs:{shape:b.outShape}});return v.push(y),v.forEach(t=>n.disposeIntermediateTensorInfo(t)),k}const Xj={kernelName:h["tb"],backendName:"webgl",kernelFunc:Kj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yj(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:s,preluActivationWeights:o}=e,{strides:u,pad:c,dilations:l,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=[];let g=l;null==g&&(g=[1,1]),h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(u,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`);const b=h["de"].computeConv2DInfo(i.shape,a.shape,u,g,c,d,!0),y=Object(h["hf"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,v=p?SC(p,y):null,w=[i,a],x=null!=s,O=null!=o,S="leakyrelu"===p;if(x&&w.push(s),O&&w.push(o),S){const t=n.makeTensorInfo([],"float32",h["Ji"].createScalarValue(f,"float32"));w.push(t),m.push(t)}let k;k=y?new BN(b,x,v,O,S):new LN(b,x,v,O,S);const T=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],_=n.runWebGLProgram(k,w,"float32",T);return m.forEach(t=>n.disposeIntermediateTensorInfo(t)),_}const Zj={kernelName:h["ub"],backendName:"webgl",kernelFunc:Yj};class Qj{constructor(t,e,n,r){this.sliceDim=t,this.strides=e,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=MT(n.length);let a="\n    int index;";for(let s=0;s<this.sliceDim;s++)a+=`\n          index = round(getIndices(coords[0], ${s}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};\n          flattenIndex += index * ${this.strides[s]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${a}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tD(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=i.shape,s=a[a.length-1],o=h["Ji"].sizeFromShape(r.shape),[u,c,l,d]=h["de"].prepareAndValidate(r,i),p=NC({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),f=NC({inputs:{x:r},backend:n,attrs:{shape:[h["Ji"].sizeFromShape(r.shape)/l,l]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const t=n.readSync(i.dataId),e=n.bufferSync(r),a=R_(t,e,r.dtype,c,s,l,d,r.shape,o);return n.makeTensorInfo(u,r.dtype,a.values)}const m=new Qj(s,d,[c,l],r.shape),g=n.runWebGLProgram(m,[f,p],f.dtype),b=NC({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),b}const eD={kernelName:h["vb"],backendName:"webgl",kernelFunc:tD};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nD{constructor(t,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const n=MT(this.rank),r=rD(t,2);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function rD(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)2===i?r.push("index"):r.push(""+n[i]);return r.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iD(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:s,batchDims:o}=r,u=h["Ji"].parseAxisParam(s,i.shape)[0];if(Object(h["hf"])().get("DEBUG")){const t=n.readSync(a.dataId),e=i.shape[u];for(let n=0;n<t.length;++n){const r=t[n];h["Ji"].assert(r<=e-1&&r>=0,()=>`GatherV2: the index value ${r} is not in [0, ${e-1}]`)}}const c=h["de"].segment_util.collectGatherOpShapeInfo(i,a,u,o),l=h["Ji"].sizeFromShape(a.shape),d=[],p=NC({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=NC({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});d.push(p),d.push(f);const m=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,a])||"string"===i.dtype){const t=n.bufferSync(f),e=n.bufferSync(p),r=F_(e,t,m);return d.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const g=new nD(p.shape,m),b=n.runWebGLProgram(g,[p,f],p.dtype);d.push(b);const y=NC({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach(t=>n.disposeIntermediateTensorInfo(t)),y}const aD={kernelName:h["wb"],backendName:"webgl",kernelFunc:iD},sD="return float(a > b);",oD="\n  return vec4(greaterThan(a, b));\n",uD=OC({opSnippet:sD,packedOpSnippet:oD,cpuKernelImpl:P_,dtype:"bool"}),cD={kernelName:h["xb"],backendName:"webgl",kernelFunc:uD},lD="return float(a >= b);",dD="\n  return vec4(greaterThanEqual(a, b));\n",hD=OC({opSnippet:lD,packedOpSnippet:dD,dtype:"bool",cpuKernelImpl:M_}),pD={kernelName:h["yb"],backendName:"webgl",kernelFunc:hD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fD(t){const{inputs:e,backend:n}=t,{input:r}=e;return Cj(r,!0,n)}const mD={kernelName:h["zb"],backendName:"webgl",kernelFunc:fD},gD="return float(!isnan(x) && !isinf(x));",bD=xC({opSnippet:gD,dtype:"bool"}),yD={kernelName:h["Cb"],backendName:"webgl",kernelFunc:bD},vD="return float(isinf(x));",wD=xC({opSnippet:vD,dtype:"bool"}),xD={kernelName:h["Db"],backendName:"webgl",kernelFunc:wD},OD="return float(isnan(x));",SD=xC({opSnippet:OD,dtype:"bool"}),kD={kernelName:h["Eb"],backendName:"webgl",kernelFunc:SD},TD="return float(a < b);",_D="\n  return vec4(lessThan(a, b));\n",ID=OC({opSnippet:TD,packedOpSnippet:_D,cpuKernelImpl:L_,dtype:"bool"}),CD={kernelName:h["Jb"],backendName:"webgl",kernelFunc:ID},AD="return float(a <= b);",ED="\n  return vec4(lessThanEqual(a, b));\n",ND=OC({opSnippet:AD,packedOpSnippet:ED,cpuKernelImpl:B_,dtype:"bool"}),jD={kernelName:h["Kb"],backendName:"webgl",kernelFunc:ND};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function DD(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,s=z_(r,i,a);return e.makeTensorInfo([s.length],"float32",s)}const $D={kernelName:h["Lb"],backendName:"webgl",kernelFunc:DD},RD=wC+"\n  return x < 0.0 ? 0./0. : log(x);\n",FD="\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",PD=xC({opSnippet:RD,packedOpSnippet:FD,cpuKernelImpl:V_}),MD={kernelName:h["Mb"],backendName:"webgl",kernelFunc:PD},LD=wC+"\n  return log(1.0 + x);\n",BD=xC({opSnippet:LD}),zD={kernelName:h["Nb"],backendName:"webgl",kernelFunc:BD},VD="return float(a >= 1.0 && b >= 1.0);",UD="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",WD=OC({opSnippet:VD,packedOpSnippet:UD,dtype:"bool"}),GD={kernelName:h["Pb"],backendName:"webgl",kernelFunc:WD},HD="return float(!(x >= 1.0));",qD=xC({opSnippet:HD}),JD={kernelName:h["Qb"],backendName:"webgl",kernelFunc:qD},KD="return float(a >= 1.0 || b >= 1.0);",XD="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",YD=OC({opSnippet:KD,packedOpSnippet:XD,dtype:"bool"}),ZD={kernelName:h["Rb"],backendName:"webgl",kernelFunc:YD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class QD{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];const a=e,s=t[3]-1;let o;this.outputShape=t;const u=`float(${n}) + float(${r}) * sum`;o=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${s}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t${constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=e,s=t[3]-1;let o;this.outputShape=t;const u=`float(${n}) + float(${r}) * sum`;o=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e$=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:s,alpha:o,beta:u}=r,c=Object(h["hf"])().getBool("WEBGL_PACK_NORMALIZATION")?new t$(i.shape,a,s,o,u):new QD(i.shape,a,s,o,u);return n.runWebGLProgram(c,[i],i.dtype)},n$={kernelName:h["Gb"],backendName:"webgl",kernelFunc:e$};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class r${constructor(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i$=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:s}=e,{depthRadius:o,bias:u,alpha:c,beta:l}=r,d=new r$(i.shape,o,u,c,l);return n.runWebGLProgram(d,[i,a,s],i.dtype)},a$={kernelName:h["Hb"],backendName:"webgl",kernelFunc:i$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s$(t,e,n,r){const i=h["Ji"].sizeFromShape(e),a=h["Ji"].sizeFromShape(t.shape),s=a/i,o=NC({inputs:{x:t},attrs:{shape:[s,i]},backend:r}),u=FC(o,t.dtype,"max",r),c=NC({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o$(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:s}=r,o=i.shape.length,u=h["Ji"].parseAxisParam(a,i.shape);let c=u;const l=h["de"].getAxesPermutation(c,o),d=null!=l,p=n.shouldExecuteOnCPU([i]);let f=i;if(d){if(p){const t=n.texData.get(f.dataId),e=t.values,r=new Array(o);for(let n=0;n<r.length;n++)r[n]=i.shape[l[n]];const a=gI(e,i.shape,i.dtype,l,r);f=n.makeTensorInfo(r,i.dtype);const s=n.texData.get(f.dataId);s.values=a}else f=BC(i,l,n);c=h["de"].getInnerMostAxes(c.length,o)}h["de"].assertAxesAreInnerMostDims("max",c,o);const[m,g]=h["de"].computeOutAndReduceShapes(f.shape,c);let b,y=m;if(s&&(y=h["de"].expandShapeToKeepDim(m,u)),p){const t=n.texData.get(f.dataId),e=t.values,r=U_(e,h["Ji"].sizeFromShape(g),y,i.dtype);b=n.makeTensorInfo(y,i.dtype);const a=n.texData.get(b.dataId);a.values=r}else b=s$(f,g,y,n);return d&&n.disposeIntermediateTensorInfo(f),b}const u$={kernelName:h["Ub"],backendName:"webgl",kernelFunc:o$},c$=iC+"\n  return max(a, b);\n",l$="\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+sC+"\n  return result;\n",d$=OC({opSnippet:c$,packedOpSnippet:l$,cpuKernelImpl:W_}),h$={kernelName:h["ac"],backendName:"webgl",kernelFunc:d$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p$(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Bk(i,"maxPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:u}=r,c=1;h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const l=h["de"].computePool2DInfo(i.shape,a,s,c,o,u);if(1===l.filterWidth&&1===l.filterHeight&&h["Ji"].arraysEqual(l.inShape,l.outShape))return uC({inputs:{x:i},backend:n});const d=new zA(l,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const f$={kernelName:h["Vb"],backendName:"webgl",kernelFunc:p$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:s,pad:o,dataFormat:u,dimRoundingMode:c}=r,l=[1,1,1],d=h["de"].computePool3DInfo(i.shape,a,s,l,o,c,u),p=new VA(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}const g$={kernelName:h["Wb"],backendName:"webgl",kernelFunc:m$};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b${constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,a=t.effectiveFilterWidth,s=i-1-t.padInfo.top,o=a-1-t.padInfo.left,u=i*a-1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class y${constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,s=t.dilationWidth,o=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=o-1-t.padInfo.front,d=u-1-t.padInfo.top,h=c-1-t.padInfo.left,p=o*u*c-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${d}, ${h});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${o};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${e}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${u};\n              wR += ${a}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${c};\n                wC += ${s}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${p} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${u} * ${c} +\n                  wR * ${c} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,s=a,{filterSize:o,strides:u,pad:c,dimRoundingMode:l}=r,d=[1,1,1],p=h["de"].computePool3DInfo(s.shape,o,u,d,c,l),f=new VA(p,"max",!0),m=n.runWebGLProgram(f,[s],s.dtype),g=new y$(p),b=n.runWebGLProgram(g,[i,m],s.dtype);return n.disposeIntermediateTensorInfo(m),b}const w$={kernelName:h["Xb"],backendName:"webgl",kernelFunc:v$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:s}=e,o=a;Bk([a,s],"maxPoolGrad");const{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,p=h["de"].computePool2DInfo(o.shape,u,c,1,l,d),f=!0,m=new zA(p,"max",f),g=n.runWebGLProgram(m,[o],o.dtype),b=new b$(p),y=n.runWebGLProgram(b,[i,g],o.dtype);return n.disposeIntermediateTensorInfo(g),y}const O$={kernelName:h["Yb"],backendName:"webgl",kernelFunc:x$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$(t,e,n,r){let i=new zA(n,"max",!1);const a=r.runWebGLProgram(i,[t],"float32");i=new zA(n,"max",!0,!0,e);const s=r.runWebGLProgram(i,[t],"float32");return[a,s]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k$={kernelName:h["Zb"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=e,u=n;h["Ji"].assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];h["Ji"].assert(h["de"].eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const l=h["de"].computePool2DInfo(r.shape,i,a,c,s),[d,p]=S$(r,o,l,u);return[d,p]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$(t,e,n,r){const i=h["Ji"].sizeFromShape(e),a=h["Ji"].sizeFromShape(t.shape),s=a/i,o=NC({inputs:{x:t},attrs:{shape:[s,i]},backend:r}),u=FC(o,"float32","mean",r),c=NC({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$={kernelName:h["bc"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:a}=e,s=n,o=r.shape.length,u=h["Ji"].parseAxisParam(a,r.shape);let c=u;const l=h["de"].getAxesPermutation(c,o),d=null!=l,p=s.shouldExecuteOnCPU([r]),f=[];let m=r;if(d){if(p){const t=s.texData.get(m.dataId),e=t.values,n=new Array(o);for(let s=0;s<n.length;s++)n[s]=r.shape[l[s]];const i=gI(e,r.shape,r.dtype,l,n);m=s.makeTensorInfo(n,r.dtype);const a=s.texData.get(m.dataId);a.values=i}else m=BC(r,l,s);f.push(m),c=h["de"].getInnerMostAxes(c.length,o)}h["de"].assertAxesAreInnerMostDims("sum",c,o);const[g,b]=h["de"].computeOutAndReduceShapes(m.shape,c);let y=g;i&&(y=h["de"].expandShapeToKeepDim(g,u));const v=T$(m,b,y,s);for(const h of f)s.disposeIntermediateTensorInfo(h);return v}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r,o=i.shape.length,u=h["Ji"].parseAxisParam(a,i.shape);let c=u;const l=h["de"].getAxesPermutation(c,o);let d=i;null!=l&&(d=WC({inputs:{x:i},backend:n,attrs:{perm:l}}),c=h["de"].getInnerMostAxes(c.length,i.shape.length)),h["de"].assertAxesAreInnerMostDims("min",c,o);const[p,f]=h["de"].computeOutAndReduceShapes(d.shape,c),m=h["Ji"].sizeFromShape(f),g=NC({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),b=FC(g,g.dtype,"min",n);let y;if(s){const t=h["de"].expandShapeToKeepDim(p,u);y=NC({inputs:{x:b},backend:n,attrs:{shape:t}})}else y=NC({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),null!=l&&n.disposeIntermediateTensorInfo(d),y}const C$={kernelName:h["cc"],backendName:"webgl",kernelFunc:I$},A$=iC+"\n  return min(a, b);\n",E$="\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+sC+"\n  return result;\n",N$=OC({opSnippet:A$,packedOpSnippet:E$,cpuKernelImpl:G_}),j$={kernelName:h["dc"],backendName:"webgl",kernelFunc:N$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class D${constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=MT(r),a=e.map(t=>t[0]).join(","),s=e.map((e,n)=>e[0]+t[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${u};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${a};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${u};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${u};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $${constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=MT(r),a=e.map(t=>t[0]).join(","),s=e.map((e,n)=>e[0]+t[n]).join(","),o=vI("rc",r),u=vI("source",r),c=`${o[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${u.slice(-2).join()})`,d="reflect"===n?0:1;let h="";if(1===r){const t=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${d};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${d};\n        }\n        source -= start;\n      `;h=`\n        ${i} rc = outputLoc;\n        ${t}\n        result[0] = getChannel(getX(${u.join()}), ${l});\n        ${o[r-1]} += 1;\n        if(${c}) {\n          ${t}\n          result[1] = getChannel(getX(${u.join()}), ${l});\n        }\n      `}else{const t=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${d}) +\n                gte * ((end - 1) * 2 - source + ${d});\n        source -= start;\n      `;h=`\n        ${i} rc = outputLoc;\n        ${t}\n        result[0] = getChannel(getX(${u.join()}), ${l});\n        ${o[r-1]} += 1;\n        if(${c}) {\n          ${t}\n          result[1] = getChannel(getX(${u.join()}), ${l});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${t}\n          result[2] = getChannel(getX(${u.join()}), ${l});\n          ${o[r-1]} += 1;\n          if(${c}) {\n            ${t}\n            result[3] = getChannel(getX(${u.join()}), ${l});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R$=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:a}=n,s=Object(h["hf"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $$(r.shape,i,a):new D$(r.shape,i,a),o=e.runWebGLProgram(s,[r],r.dtype);return o},F$={kernelName:h["ec"],backendName:"webgl",kernelFunc:R$},P$="if (b == 0.0) return NAN;\n  return mod(a, b);",M$="\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+sC+"\n  return result;\n",L$=OC({opSnippet:P$,packedOpSnippet:M$}),B$={kernelName:h["fc"],backendName:"webgl",kernelFunc:L$};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class z${constructor(t,e,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V$="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",U$="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",W$=OC({opSnippet:V$,packedOpSnippet:U$,checkOutOfBounds:!0}),G$={kernelName:h["Gc"],backendName:"webgl",kernelFunc:W$},H$="return a - b;",q$=OC({opSnippet:H$,packedOpSnippet:H$,supportsComplex:!0,cpuKernelImpl:pI}),J$={kernelName:h["vd"],backendName:"webgl",kernelFunc:q$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function K$(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,s=h["Ji"].parseAxisParam([a],i.shape),o=o$({inputs:{x:i},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),u=h["de"].expandShapeToKeepDim(o.shape,s),c=NC({inputs:{x:o},backend:n,attrs:{shape:u}}),l=q$({inputs:{a:i,b:c},backend:n}),d=wj({inputs:{x:l},backend:n}),p=VC({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),f=NC({inputs:{x:p},backend:n,attrs:{shape:u}}),m=W$({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}const X$={kernelName:h["ed"],backendName:"webgl",kernelFunc:K$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:s,normalized:o}=r,u=o?i:K$({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new z$(c,l,a),h=[[s]],p=n.runWebGLProgram(d,[u],"int32",h);return o||n.disposeIntermediateTensorInfo(u),p}const Z$={kernelName:h["hc"],backendName:"webgl",kernelFunc:Y$},Q$=jI+"\n  return -x;\n",tR="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eR(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const t=n.texData.get(r.dataId),[e,i]=q_(t.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,e)}let i;return i=Object(h["hf"])().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new GI(r.shape,tR):new NI(r.shape,Q$),n.runWebGLProgram(i,[r],r.dtype)}const nR={kernelName:h["jc"],backendName:"webgl",kernelFunc:eR},rR=h["Rf"].nonMaxSuppressionV3Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iR(t){h["de"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=r,c=n.readSync(i.dataId),l=n.readSync(a.dataId),{selectedIndices:d}=rR(c,l,s,o,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const aR={kernelName:h["kc"],backendName:"webgl",kernelFunc:iR},sR=h["Rf"].nonMaxSuppressionV4Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oR(t){h["de"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:c}=r,l=n.readSync(i.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:f}=sR(l,d,s,o,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const uR={kernelName:h["lc"],backendName:"webgl",kernelFunc:oR},cR=h["Rf"].nonMaxSuppressionV5Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lR(t){h["de"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:c}=r,l=n.readSync(i.dataId),d=n.readSync(a.dataId),p=s,f=o,m=u,g=c,{selectedIndices:b,selectedScores:y}=cR(l,d,p,f,m,g);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const dR={kernelName:h["mc"],backendName:"webgl",kernelFunc:lR};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hR{constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pR=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:s,onValue:o,offValue:u}=r,c=h["Ji"].sizeFromShape(i.shape),l=new hR(c,s,o,u),d=NC({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(l,[d],a);n.disposeIntermediateTensorInfo(d);const f=[...i.shape,s],m=NC({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),m},fR={kernelName:h["pc"],backendName:"webgl",kernelFunc:pR};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mR(t){const{inputs:e,backend:n}=t,{x:r}=e;if("complex64"===r.dtype){const t=xE({inputs:{input:r},backend:n}),e=mR({inputs:{x:t},backend:n}),i=zE({inputs:{input:r},backend:n}),a=mR({inputs:{x:i},backend:n}),s=lC({inputs:{real:e,imag:a},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),s}return jj({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const gR={kernelName:h["Kd"],backendName:"webgl",kernelFunc:mR};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bR(t){const{inputs:e,backend:n}=t,{x:r}=e;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=xE({inputs:{input:r},backend:n}),e=bR({inputs:{x:t},backend:n}),i=zE({inputs:{input:r},backend:n}),a=mR({inputs:{x:i},backend:n}),s=lC({inputs:{real:e,imag:a},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),s}return jj({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const yR={kernelName:h["qc"],backendName:"webgl",kernelFunc:bR};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vR(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(1===e.length)return Oj({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,s=e[0].dtype;e.forEach(t=>{h["Ji"].assertShapesMatch(a,t.shape,"All tensors passed to stack must have matching shapes"),h["Ji"].assert(s===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(t=>{const e=Oj({inputs:{input:t},backend:n,attrs:{dim:i}});return o.push(e),e}),c=GE({inputs:u,backend:n,attrs:{axis:i}});return o.forEach(t=>n.disposeIntermediateTensorInfo(t)),c}const wR={kernelName:h["tc"],backendName:"webgl",kernelFunc:vR};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xR{constructor(t,e,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=MT(r),a=e.map(t=>t[0]).join(","),s=e.map((e,n)=>e[0]+t[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OR{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=MT(r),a=e.map(t=>t[0]).join(","),s=e.map((e,n)=>e[0]+t[n]).join(","),o=vI("rc",r),u=vI("source",r),c=`${o[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${u.slice(-2).join()})`,d=[i+" rc = outputLoc;",`${o[r-1]} += 1;\n       if(${c}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${c}) {`],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${d[f]}\n        if (${h}) {\n          result[${f}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${u.join()}), ${l});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SR=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:s}=r;if(0===h["Ji"].sizeFromShape(i.shape)){const t=a.map((t,e)=>t[0]+i.shape[e]+t[1]);return jj({backend:n,attrs:{shape:t,value:s,dtype:i.dtype}})}const o=Object(h["hf"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OR(i.shape,a,s):new xR(i.shape,a,s),u=[[s]];return n.runWebGLProgram(o,[i],i.dtype,u)},kR={kernelName:h["uc"],backendName:"webgl",kernelFunc:SR},TR="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",_R="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+sC+"\n  return result;\n",IR=OC({opSnippet:TR,packedOpSnippet:_R}),CR={kernelName:h["wc"],backendName:"webgl",kernelFunc:IR};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function AR(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:s}=r,o=i.shape.length,u=[],c=h["Ji"].parseAxisParam(a,i.shape);let l=c;const d=h["de"].getAxesPermutation(l,o);let p,f=i;if(null!=d&&(f=WC({inputs:{x:i},backend:n,attrs:{perm:d}}),l=h["de"].getInnerMostAxes(l.length,o),u.push(f)),h["de"].assertAxesAreInnerMostDims("prod",l,o),n.shouldExecuteOnCPU([f])){const t=n.texData.get(f.dataId).values,{outVals:e,outShape:r,outDtype:i}=K_(f.shape,f.dtype,t,l);p=n.makeTensorInfo(r,i,e)}else{const[t,e]=h["de"].computeOutAndReduceShapes(f.shape,l),r=h["Ji"].sizeFromShape(e),a=NC({inputs:{x:f},backend:n,attrs:{shape:[-1,r]}}),s=Object(h["ji"])(i.dtype),o=FC(a,s,"prod",n);p=NC({inputs:{x:o},backend:n,attrs:{shape:t}}),u.push(a),u.push(o)}if(s){u.push(p);const t=h["de"].expandShapeToKeepDim(p.shape,c);p=NC({inputs:{x:p},backend:n,attrs:{shape:t}})}return u.forEach(t=>n.disposeIntermediateTensorInfo(t)),p}const ER={kernelName:h["yc"],backendName:"webgl",kernelFunc:AR};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NR(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=e,{outputRaggedRank:o}=r,u=i.map(t=>n.readSync(t.dataId)),c=i.map(t=>t.shape),l=n.readSync(a.dataId),d=n.readSync(s.dataId),[h,p,f]=X_(u,c,l,a.shape,a.dtype,d,s.shape,o),m=h.map(t=>n.makeTensorInfo([t.length],"int32",t)),g=n.makeTensorInfo(f,a.dtype,p);return m.concat([g])}const jR={kernelName:h["Ac"],backendName:"webgl",kernelFunc:NR};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DR(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),u=n.readSync(a.dataId),[c,l]=Y_(s,r.shape,r.dtype,o,i.shape,u,a.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([l.length],r.dtype,l);return[d,h]}const $R={kernelName:h["Bc"],backendName:"webgl",kernelFunc:DR};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RR(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,c=n.readSync(i.dataId),l=n.readSync(a.dataId),d=n.readSync(s.dataId),h=o.map(t=>n.readSync(t.dataId)),p=o.map(t=>t.shape),[f,m]=Z_(c,i.shape,l,a.shape,a.dtype,d,s.shape,h,p,u);return n.makeTensorInfo(f,a.dtype,m)}const FR={kernelName:h["Cc"],backendName:"webgl",kernelFunc:RR},PR=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:a,dtype:s}=n,o=Q_(r,i,a,s);return e.makeTensorInfo([o.length],s,o)},MR={kernelName:h["Dc"],backendName:"webgl",kernelFunc:PR},LR="return 1.0 / x;",BR=xC({opSnippet:LR}),zR={kernelName:h["Hc"],backendName:"webgl",kernelFunc:BR},VR=jI+"\n  return (x < 0.0) ? 0.0 : x;\n",UR="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",WR=xC({opSnippet:VR,packedOpSnippet:UR}),GR={kernelName:h["Jc"],backendName:"webgl",kernelFunc:WR},HR=jI+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",qR="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",JR=xC({opSnippet:HR,packedOpSnippet:qR}),KR={kernelName:h["Kc"],backendName:"webgl",kernelFunc:JR};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class XR{constructor(t,e,n,r,i){this.variableNames=["A"],this.outputShape=[];const[a,s,o,u]=t;this.outputShape=[a,e,n,u];const c=[r&&e>1?s-1:s,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];let d;d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/l[0]},\n          ${c[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YR{constructor(t,e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,s,o,u]=t;this.outputShape=[a,e,n,u];const c=[r&&e>1?s-1:s,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];let d;d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/l[0]},\n          ${c[1]/l[1]},\n          ${c[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${u-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZR(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:s,size:o}=r,[u,c]=o,l=Object(h["hf"])().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new YR(i.shape,u,c,a,s):new XR(i.shape,u,c,a,s);return n.runWebGLProgram(l,[i],"float32")}const QR={kernelName:h["Mc"],backendName:"webgl",kernelFunc:ZR};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tF{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,r,i]=e,[,a,s]=t,o=[n&&a>1?r-1:r,n&&s>1?i-1:i],u=[n&&a>1?a-1:a,n&&s>1?s-1:s],c=o[0]/u[0],l=o[1]/u[1],d=1/c,h=1/l,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${h});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eF(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:s}=r,o=new tF(a.shape,i.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}const nF={kernelName:h["Nc"],backendName:"webgl",kernelFunc:eF};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rF{constructor(t,e,n,r,i){this.variableNames=["A"],this.outputShape=[];const[a,s,o,u]=t;this.outputShape=[a,e,n,u];const c=[r&&e>1?s-1:s,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/l[0]},\n          ${c[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iF{constructor(t,e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,s,o,u]=t;this.outputShape=[a,e,n,u];const c=[r&&e>1?s-1:s,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/l[0]},\n          ${c[1]/l[1]},\n          ${c[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${u-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aF(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:s,size:o}=r,[u,c]=o,l=Object(h["hf"])().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new iF(i.shape,u,c,a,s):new rF(i.shape,u,c,a,s);return n.runWebGLProgram(l,[i],i.dtype)}const sF={kernelName:h["Oc"],backendName:"webgl",kernelFunc:aF};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oF{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,r,i]=e,[,a,s]=t,o=[n&&a>1?r-1:r,n&&s>1?i-1:i],u=[n&&a>1?a-1:a,n&&s>1?s-1:s],c=o[0]/u[0],l=o[1]/u[1],d=1/c,h=1/l,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${h});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${u[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${u[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uF(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:s}=r,o=new oF(a.shape,i.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}const cF={kernelName:h["Pc"],backendName:"webgl",kernelFunc:uF};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lF{constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=t,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${t[0]} - coord - 1));\n        }\n      `);const r=n=>-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - coords[${n}] - 1`:`coords[${n}]`,i=t.map((t,e)=>r(e)).join(","),a=MT(n);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dF{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=t;const r=vI("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,s=MT(n);function o(t){return d(t)}function u(t){return t[n-1]="("+t[n-1]+" + 1)",d(t)}function c(t){return t[n-2]="("+t[n-2]+" + 1)",d(t)}function l(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",d(t)}function d(e){const n=t.map((t,n)=>h(n,e)),r=n.join(","),i=n.slice(-2).join(",");return`getChannel(getX(${r}), vec2(${i}))`}function h(n,r){return-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - ${r[n]} - 1`:""+r[n]}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${t[0]} - rc - 1),\n            ${t[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),\n                ${t[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${s} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${o(r.slice())};\n          if(${i}){\n            result.g = ${u(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${c(r.slice())};\n            if(${i}) {\n              result.a = ${l(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hF(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r,s=i.shape.length,o=h["Ji"].parseAxisParam(a,i.shape);if(0===s)return uC({inputs:{x:i},backend:n});const u=Object(h["hf"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dF(i.shape,o):new lF(i.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}const pF={kernelName:h["Qc"],backendName:"webgl",kernelFunc:hF};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fF{constructor(t,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=t[1],r=t[2];this.outputShape=t;let i="";i="number"===typeof e?`float outputValue = ${e.toFixed(2)};`:`\n        vec3 fill = vec3(${e.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mF={kernelName:h["Rc"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:s}=e,o=n,u=new fF(r.shape,a),[c,l]=h["de"].getImageCenter(s,r.shape[1],r.shape[2]),d=[[c,l,Math.sin(i),Math.cos(i)]],p=o.runWebGLProgram(u,[r],r.dtype,d);return p}},gF="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",bF=xC({opSnippet:gF}),yF={kernelName:h["Sc"],backendName:"webgl",kernelFunc:bF},vF="return inversesqrt(x);",wF=xC({opSnippet:vF,cpuKernelImpl:tI}),xF={kernelName:h["Tc"],backendName:"webgl",kernelFunc:wF};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class OF{constructor(t,e,n,r,i,a,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const o=MT(i.length),u=MT(a.length);let c="";1===n?c="i":2===n&&(c="i, j");const l=`getIndices(${c})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h=`getUpdates(${d})`,p=e>1?"strides[j]":"strides";this.userCode=`\n        ${o} strides = ${o}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(${l});\n              flattenedIndex += index * ${p};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${h};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SF(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:s}=r,{sliceRank:o,numUpdates:u,sliceSize:c,strides:l,outputSize:d}=h["de"].calculateShapes(a,i,s),p=[d/c,c];if(0===d)return n.makeTensorInfo(s,i.dtype);const f=NC({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),m=NC({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),b=new OF(u,o,f.shape.length,m.shape.length,l,p),y=n.runWebGLProgram(b,[m,f,g],m.dtype),v=NC({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}const kF={kernelName:h["Vc"],backendName:"webgl",kernelFunc:SF};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TF{constructor(t,e,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,n];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,s=2===Object(h["hf"])().getNumber("WEBGL_VERSION")?i:a,o="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${s}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${o} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _F(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:s}=r,o=new TF(i.shape[0],i.shape[1],a.shape[1],s),u=[[i.shape[1]]];return n.runWebGLProgram(o,[i,a],"int32",u)}const IF={kernelName:h["Wc"],backendName:"webgl",kernelFunc:_F};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CF{constructor(t,e,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[];for(let r=0;r<e.length;r++)s.push(""+n[r]),r<t&&a.push(""+n[r]);r=a.join(),i=s.join()}const a=MT(n);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AF(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e,s=new CF(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(s,[r,i,a],Object(h["Hi"])(i.dtype,a.dtype))}const EF={kernelName:h["Xc"],backendName:"webgl",kernelFunc:AF},NF=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${h["de"].SELU_SCALEALPHA};\n  float scale = ${h["de"].SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,jF=xC({opSnippet:NF}),DF={kernelName:h["Yc"],backendName:"webgl",kernelFunc:jF},$F=wC+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",RF="\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",FF=xC({opSnippet:$F,packedOpSnippet:RF,cpuKernelImpl:nI}),PF={kernelName:h["Zc"],backendName:"webgl",kernelFunc:FF},MF="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",LF=xC({opSnippet:MF}),BF={kernelName:h["ad"],backendName:"webgl",kernelFunc:LF},zF=wC+"\n  return sin(x);\n",VF=xC({opSnippet:zF}),UF={kernelName:h["bd"],backendName:"webgl",kernelFunc:VF},WF="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",GF=xC({opSnippet:WF}),HF={kernelName:h["cd"],backendName:"webgl",kernelFunc:GF},qF="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",JF=xC({opSnippet:qF}),KF={kernelName:h["fd"],backendName:"webgl",kernelFunc:JF},XF=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:s}=r;h["Ji"].assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((t,e)=>t*e),u=[[0,0]];u.push(...s);for(let h=1+a.length;h<i.shape.length;++h)u.push([0,0]);const c=[],l=SR({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),d=h["de"].getReshaped(l.shape,a,o,!1),p=h["de"].getPermuted(d.length,a.length,!1),f=h["de"].getReshapedPermuted(l.shape,a,o,!1),m=NC({inputs:{x:l},backend:n,attrs:{shape:d}}),g=WC({inputs:{x:m},backend:n,attrs:{perm:p}}),b=NC({inputs:{x:g},backend:n,attrs:{shape:f}});return c.push(l),c.push(m),c.push(g),c.forEach(t=>n.disposeIntermediateTensorInfo(t)),b},YF={kernelName:h["gd"],backendName:"webgl",kernelFunc:XF};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ZF(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:s}=e;if(1!==a.shape.length)throw new Error("Dense shape must be a vector, saw:\n         "+a.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         "+r.shape);if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n         "+i.shape);if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+s.shape);const o=n.readSync(r.dataId),u=n.readSync(i.dataId),c=n.readSync(a.dataId),l=n.readSync(s.dataId)[0],[d,h,p,f,m]=aI(o,r.shape,r.dtype,u,i.dtype,c,l);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(t=>Number(t)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const QF={kernelName:h["hd"],backendName:"webgl",kernelFunc:ZF};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tP(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape "+r.shape);if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape "+i.shape);if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape "+a.shape);const s=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),u=Array.from(n.readSync(a.dataId)),[c,l,d]=sI(o,r.shape,r.dtype,s,u);return[n.makeTensorInfo(l,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const eP={kernelName:h["id"],backendName:"webgl",kernelFunc:tP};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nP(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n              "+i.shape);if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n              "+a.shape);const s=n.readSync(r.dataId),o=n.readSync(i.dataId),u=n.readSync(a.dataId),[c,l]=oI(s,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(l,r.dtype,c)}const rP={kernelName:h["jd"],backendName:"webgl",kernelFunc:nP};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iP(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n             "+i.shape);if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n             "+a.shape);const s=n.readSync(r.dataId),o=n.readSync(i.dataId),u=n.readSync(a.dataId),[c,l]=oI(s,r.shape,r.dtype,o,u);return n.makeTensorInfo(l,r.dtype,c)}const aP={kernelName:h["kd"],backendName:"webgl",kernelFunc:iP};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sP(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:p}=h["de"].calculateShapes(a,i,o),f=!1;if("string"===a.dtype){const t=n.bufferSync(i),e=n.bufferSync(a),r=h["Ji"].decodeString(n.readSync(s.dataId)[0]),m=eI(t,e,o,p,l,c,u,d,r,f);return n.makeTensorInfo(o,m.dtype,m.values)}const m=new OF(c,u,i.shape.length,a.shape.length,d,[p,1],f),g=n.runWebGLProgram(m,[a,i,s],a.dtype),b=NC({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(g),b}const oP={kernelName:h["ld"],backendName:"webgl",kernelFunc:sP};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uP(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:s}=r,o=h["Ji"].parseAxisParam(s,i.shape)[0],u=h["de"].prepareSplitSize(i,a,o),c=i.shape.length,l=new Array(c).fill(0),d=i.shape.slice();return u.map(t=>{const e=[...d];e[o]=t;const r=lE({inputs:{x:i},backend:n,attrs:{begin:l,size:e}});return l[o]+=t,r})}const cP={kernelName:h["md"],backendName:"webgl",kernelFunc:uP},lP="return sqrt(x);",dP=xC({opSnippet:lP,packedOpSnippet:lP,cpuKernelImpl:uI}),hP={kernelName:h["nd"],backendName:"webgl",kernelFunc:dP},pP="return x * x;",fP=xC({opSnippet:pP}),mP={kernelName:h["od"],backendName:"webgl",kernelFunc:fP},gP="return (a - b) * (a - b);",bP=OC({opSnippet:gP,packedOpSnippet:gP}),yP={kernelName:h["pd"],backendName:"webgl",kernelFunc:bP};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vP({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=jI+`\n    return x > 0.0 ? 1.0 : float(${e.alpha});\n  `,a=new NI(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const wP={kernelName:h["qd"],backendName:"webgl",kernelFunc:vP};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xP{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=MT(n.length),a=MT(n.length);let s="";if(1===r)s="coords * strides + begin";else{let t=0;s=n.map((e,r)=>(t++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${t-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${e});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OP(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:s,strides:o,beginMask:u,endMask:c,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:b,isSimpleSlice:y,begin:v,end:w,strides:x}=h["Rh"].sliceInfo(i.shape,a,s,o,u,c,l,d,p);let O;if(g)O=NC({inputs:{x:i},backend:n,attrs:{shape:m}});else if(b||y){h["Ji"].assert(i.shape.length>=1,()=>"Input must have rank at least 1, got: "+i.shape.length);const t=h["Rh"].computeOutShape(v,w,x),e=lE({inputs:{x:i},backend:n,attrs:{begin:v,size:t}});O=NC({inputs:{x:e},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(e)}else{const t=n.shouldExecuteOnCPU([i]);if(t){const t=n.readSync(i.dataId),e=Object(h["qe"])(i.shape,i.dtype,t),r=cI(f,e,x,v);O=n.makeTensorInfo(m,i.dtype,r.values)}else{const t=new xP(v,x,f);O=n.runWebGLProgram(t,[i],i.dtype)}}const S=NC({inputs:{x:O},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(O),S}const SP={kernelName:h["rd"],backendName:"webgl",kernelFunc:OP};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kP(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:u,preserveShortSequences:c}=r,{data:l,dataSplits:d}=e,h=n.readSync(l.dataId),p=n.readSync(d.dataId),[f,m]=lI(h,p,i,a,s,o,u,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}const TP={kernelName:h["sd"],backendName:"webgl",kernelFunc:kP};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _P(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:s}=e;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: "+a.shape);if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+s.shape);const o=n.readSync(a.dataId),u=n.readSync(s.dataId)[0],[c,l,d]=dI(o,u,i),h=l.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const IP={kernelName:h["td"],backendName:"webgl",kernelFunc:_P};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CP(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(a.dataId),o=hI(s,i);return n.makeTensorInfo(a.shape,"int32",o)}const AP={kernelName:h["ud"],backendName:"webgl",kernelFunc:CP},EP="return tan(x);",NP=xC({opSnippet:EP}),jP={kernelName:h["xd"],backendName:"webgl",kernelFunc:NP},DP="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",$P=xC({opSnippet:DP}),RP={kernelName:h["yd"],backendName:"webgl",kernelFunc:$P};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class FP{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let a=0;a<n.length;a++)n[a]=t[a]*e[a];this.outputShape=n,this.rank=n.length;const r=MT(this.rank),i=PP(t);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function PP(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MP(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;if("string"===i.dtype||i.shape.length>5){const t=n.readSync(i.dataId),e="string"===i.dtype?t.map(t=>h["Ji"].decodeString(t)):t,r=Object(h["qe"])(i.shape,i.dtype,e),s=fI(r,a);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const s=new FP(i.shape,a),o=n.runWebGLProgram(s,[i],i.dtype);return o}const LP={kernelName:h["Bd"],backendName:"webgl",kernelFunc:MP};class BP{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class zP{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VP(t,e){null!==e&&t.disposeIntermediateTensorInfo(e)}function UP(t){let e=1;while(e<t)e*=2;return e}function WP(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:s}=r,o=Object(h["hf"])().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Object(h["hf"])().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([i])||l<o||a>u){const t=n.readSync(i.dataId),[e,r]=mI(t,c,i.dtype,a,s);return[n.makeTensorInfo(e.shape,e.dtype,e.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[i,jj({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),p=null!==d&&d.isPacked,f=p?n.unpackTensor(i):i,m=h["Ji"].sizeFromShape(c),g=m/l,b=NC({inputs:{x:f},attrs:{shape:[g,l]},backend:n});p&&VP(n,f);const y=UP(a),v=UP(l);let w=null;const x=()=>null===w?[b,b]:[b,w],O=(t,e,r)=>{const i=x(),a=new BP(r),s=null===w?1:0,o=[[l],[s],[Number.NEGATIVE_INFINITY],[t],[e]],u=w;w=n.runWebGLProgram(a,i,"int32",o),VP(n,u)};for(let h=1;h<y;h*=2){const t=2*h;for(let e=h;e>=1;e/=2)O(t,e,[g,v])}for(let h=v;h>y;h/=2){const t=x(),e=new zP([g,h/2]),r=null===w?1:0,i=[[l],[r],[y]],a=w;w=n.runWebGLProgram(e,t,"int32",i),VP(n,a);const s=y/2,o=2*s;for(let n=s;n>=1;n/=2)O(o,n,w.shape)}let S=w;w=lE({inputs:{x:w},backend:n,attrs:{begin:0,size:[g,a]}}),VP(n,S);let k=iD({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});VP(n,b);const T=c.slice(0,-1);T.push(a),S=w,w=NC({inputs:{x:w},attrs:{shape:T},backend:n}),VP(n,S);const _=k;return k=NC({inputs:{x:k},attrs:{shape:T},backend:n}),VP(n,_),[k,w]}const GP={kernelName:h["Cd"],backendName:"webgl",kernelFunc:WP};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HP{constructor(t,e,n,r,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const s="nearest"===n?1:2;let o;switch(r){case"constant":o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4;break;default:o=1;break}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${o} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${e}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${e}));\n                float mapY = mapCoord(inY, float(${t}));\n\n                if (${s} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qP(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:a}=e,{interpolation:s,fillMode:o,fillValue:u,outputShape:c}=r,[l,d,h,p]=i.shape,[f,m]=null!=c?c:[d,h],g=[l,f,m,p],b=new HP(d,h,s,o,u,g);return n.runWebGLProgram(b,[i,a],"float32")}const JP={kernelName:h["Dd"],backendName:"webgl",kernelFunc:qP};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KP(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;Bk(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(a.dataId),{outputValues:o,outputShape:u,indices:c}=bI(s,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const XP={kernelName:h["Fd"],backendName:"webgl",kernelFunc:KP};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YP(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const s=i,o=s.shape.length,u=i.shape[a],c=new Array(o-1);let l=0;for(let m=0;m<o;m++)m!==a&&(c[l++]=s.shape[m]);const d=[],h=new Array(o).fill(0),p=s.shape.slice();p[a]=1;const f=new Array(u);for(let m=0;m<f.length;m++){h[a]=m;const t=lE({inputs:{x:s},backend:n,attrs:{begin:h,size:p}}),e=NC({inputs:{x:t},backend:n,attrs:{shape:c}});f[m]=e,d.push(t)}return d.forEach(t=>n.disposeIntermediateTensorInfo(t)),f}const ZP={kernelName:h["Gd"],backendName:"webgl",kernelFunc:YP};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QP{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,s=a*Math.ceil(i/n);this.outputShape=[r,s];const o="0.0",u="sumValue",c=4*Math.floor(n/4),l=n%4,d="\n        sumValue += dot(values, segFilter);\n    ";let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${d}\n        }\n        setOutput(${u});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tM(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:s}=r,o=i.shape.length,u=[];let c=0;const l=h["de"].getAxesPermutation([c],o);let d=i;null!=l&&(d=WC({inputs:{x:i},backend:n,attrs:{perm:l}}),u.push(d),c=h["de"].getInnerMostAxes(1,o)[0]);const p=h["de"].segment_util.computeOutShape(d.shape,c,s),f=h["Ji"].sizeFromShape([d.shape[c]]),m=NC({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});u.push(m);const g=Object(h["ji"])(i.dtype),b=(t,e,r,i,a)=>{const s=t.shape[0],o=t.shape[1],c=h["de"].segment_util.segOpComputeOptimalWindowSize(o,a),l={windowSize:c,inSize:o,batchSize:s,numSegments:a},d=new QP(l,e),p=n.compileAndRun(d,[t,r],i);if(u.push(p),p.shape[1]===a)return p;const f=PR({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),m=MP({inputs:{x:f},backend:n,attrs:{reps:[o/c]}});u.push(f),u.push(m);const g=b(p,e,m,i,a);return g},y=b(m,"unsortedSegmentSum",a,g,s),v=NC({inputs:{x:y},backend:n,attrs:{shape:p}});let w=v;if(null!=l){u.push(v);const t=h["de"].getUndoAxesPermutation(l);w=WC({inputs:{x:w},backend:n,attrs:{perm:t}})}return u.forEach(t=>n.disposeIntermediateTensorInfo(t)),w}const eM={kernelName:h["Hd"],backendName:"webgl",kernelFunc:tM},nM=[KC,ZC,eA,iA,oA,dA,pA,mA,OA,kA,IA,EA,DA,PA,BA,WA,HA,XA,ZA,tE,iE,pE,mE,bE,_E,AE,DE,dC,PE,HE,eN,oN,cN,dN,pN,mN,yN,xN,kN,NN,DN,RN,MN,VN,HN,JN,YN,tj,nj,sj,lj,fj,bj,xj,Sj,_j,Ej,Dj,Rj,Mj,Vj,Gj,Xj,Zj,eD,aD,cD,pD,cC,mD,VE,yD,xD,kD,mC,CD,jD,$D,MD,zD,GD,JD,ZD,n$,a$,u$,h$,f$,g$,w$,O$,k$,_$,C$,j$,F$,B$,Z$,AC,nR,aR,uR,dR,wE,fR,yR,wR,kR,CR,vC,ER,jR,$R,FR,MR,OE,G$,zR,GR,KR,jC,QR,nF,sF,cF,pF,mF,yF,xF,kF,IF,EF,DF,PF,BF,UF,HF,dE,X$,KF,YF,QF,eP,rP,aP,oP,cP,hP,mP,yP,wP,SP,TP,IP,AP,J$,UC,jP,RP,LP,GP,JP,GC,XP,ZP,eM,gR];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const aM of nM)Object(h["kh"])(aM);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/** @license See the LICENSE file. */const rM="4.2.0",iM={"tfjs-core":h["Oi"],"tfjs-backend-cpu":fm,"tfjs-backend-webgl":rC,"tfjs-data":lm,"tfjs-layers":Tu,"tfjs-converter":Nf,tfjs:rM};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},cee4:function(t,e,n){"use strict";var r=n("c532"),i=n("1d2b"),a=n("e467");function s(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function o(t,e){this._pairs=[],t&&Object(a["a"])(t,this,e)}const u=o.prototype;u.append=function(t,e){this._pairs.push([t,e])},u.toString=function(t){const e=t?function(e){return t.call(this,e,s)}:s;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var c=o;function l(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function d(t,e,n){if(!e)return t;const i=n&&n.encode||l,a=n&&n.serialize;let s;if(s=a?a(e,n):r["a"].isURLSearchParams(e)?e.toString():new c(e,n).toString(i),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}class h{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){r["a"].forEach(this.handlers,(function(e){null!==e&&t(e)}))}}var p=h,f=n("7917"),m={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},g="undefined"!==typeof URLSearchParams?URLSearchParams:c,b="undefined"!==typeof FormData?FormData:null,y="undefined"!==typeof Blob?Blob:null;const v=(()=>{let t;return("undefined"===typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!==typeof window&&"undefined"!==typeof document)})(),w=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)();var x={isBrowser:!0,classes:{URLSearchParams:g,FormData:b,Blob:y},isStandardBrowserEnv:v,isStandardBrowserWebWorkerEnv:w,protocols:["http","https","file","blob","url","data"]};function O(t,e){return Object(a["a"])(t,new x.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,i){return x.isNode&&r["a"].isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function S(t){return r["a"].matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}function k(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function T(t){function e(t,n,i,a){let s=t[a++];const o=Number.isFinite(+s),u=a>=t.length;if(s=!s&&r["a"].isArray(i)?i.length:s,u)return r["a"].hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&r["a"].isObject(i[s])||(i[s]=[]);const c=e(t,n,i[s],a);return c&&r["a"].isArray(i[s])&&(i[s]=k(i[s])),!o}if(r["a"].isFormData(t)&&r["a"].isFunction(t.entries)){const n={};return r["a"].forEachEntry(t,(t,r)=>{e(S(t),r,n,0)}),n}return null}var _=T;const I={"Content-Type":void 0};function C(t,e,n){if(r["a"].isString(t))try{return(e||JSON.parse)(t),r["a"].trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}const A={transitional:m,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,s=r["a"].isObject(t);s&&r["a"].isHTMLForm(t)&&(t=new FormData(t));const o=r["a"].isFormData(t);if(o)return i&&i?JSON.stringify(_(t)):t;if(r["a"].isArrayBuffer(t)||r["a"].isBuffer(t)||r["a"].isStream(t)||r["a"].isFile(t)||r["a"].isBlob(t))return t;if(r["a"].isArrayBufferView(t))return t.buffer;if(r["a"].isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return O(t,this.formSerializer).toString();if((u=r["a"].isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Object(a["a"])(u?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||i?(e.setContentType("application/json",!1),C(t)):t}],transformResponse:[function(t){const e=this.transitional||A.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(t&&r["a"].isString(t)&&(n&&!this.responseType||i)){const n=e&&e.silentJSONParsing,r=!n&&i;try{return JSON.parse(t)}catch(a){if(r){if("SyntaxError"===a.name)throw f["a"].from(a,f["a"].ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:x.classes.FormData,Blob:x.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r["a"].forEach(["delete","get","head"],(function(t){A.headers[t]={}})),r["a"].forEach(["post","put","patch"],(function(t){A.headers[t]=r["a"].merge(I)}));var E=A;const N=r["a"].toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var j=t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&N[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e};const D=Symbol("internals");function $(t){return t&&String(t).trim().toLowerCase()}function R(t){return!1===t||null==t?t:r["a"].isArray(t)?t.map(R):String(t)}function F(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;while(r=n.exec(t))e[r[1]]=r[2];return e}function P(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function M(t,e,n,i,a){return r["a"].isFunction(i)?i.call(this,e,n):(a&&(e=n),r["a"].isString(e)?r["a"].isString(i)?-1!==e.indexOf(i):r["a"].isRegExp(i)?i.test(e):void 0:void 0)}function L(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function B(t,e){const n=r["a"].toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})})}class z{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function a(t,e,n){const a=$(e);if(!a)throw new Error("header name must be a non-empty string");const s=r["a"].findKey(i,a);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||e]=R(t))}const s=(t,e)=>r["a"].forEach(t,(t,n)=>a(t,n,e));return r["a"].isPlainObject(t)||t instanceof this.constructor?s(t,e):r["a"].isString(t)&&(t=t.trim())&&!P(t)?s(j(t),e):null!=t&&a(e,t,n),this}get(t,e){if(t=$(t),t){const n=r["a"].findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return F(t);if(r["a"].isFunction(e))return e.call(this,t,n);if(r["a"].isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=$(t),t){const n=r["a"].findKey(this,t);return!(!n||void 0===this[n]||e&&!M(this,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function a(t){if(t=$(t),t){const a=r["a"].findKey(n,t);!a||e&&!M(n,n[a],a,e)||(delete n[a],i=!0)}}return r["a"].isArray(t)?t.forEach(a):a(t),i}clear(t){const e=Object.keys(this);let n=e.length,r=!1;while(n--){const i=e[n];t&&!M(this,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return r["a"].forEach(this,(i,a)=>{const s=r["a"].findKey(n,a);if(s)return e[s]=R(i),void delete e[a];const o=t?L(a):String(a).trim();o!==a&&delete e[a],e[o]=R(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return r["a"].forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&r["a"].isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(t=>n.set(t)),n}static accessor(t){const e=this[D]=this[D]={accessors:{}},n=e.accessors,i=this.prototype;function a(t){const e=$(t);n[e]||(B(i,t),n[e]=!0)}return r["a"].isArray(t)?t.forEach(a):a(t),this}}z.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),r["a"].freezeMethods(z.prototype),r["a"].freezeMethods(z);var V=z;function U(t,e){const n=this||E,i=e||n,a=V.from(i.headers);let s=i.data;return r["a"].forEach(t,(function(t){s=t.call(n,s,a.normalize(),e?e.status:void 0)})),a.normalize(),s}function W(t){return!(!t||!t.__CANCEL__)}function G(t,e,n){f["a"].call(this,null==t?"canceled":t,f["a"].ERR_CANCELED,e,n),this.name="CanceledError"}r["a"].inherits(G,f["a"],{__CANCEL__:!0});var H=G,q=n("4581");function J(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new f["a"]("Request failed with status code "+n.status,[f["a"].ERR_BAD_REQUEST,f["a"].ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}var K=x.isStandardBrowserEnv?function(){return{write:function(t,e,n,i,a,s){const o=[];o.push(t+"="+encodeURIComponent(e)),r["a"].isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r["a"].isString(i)&&o.push("path="+i),r["a"].isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function X(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Y(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Z(t,e){return t&&!X(e)?Y(t,e):e}var Q=x.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function i(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(t){const e=r["a"].isString(t)?i(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return function(){return!0}}();function tt(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function et(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,a=0,s=0;return e=void 0!==e?e:1e3,function(o){const u=Date.now(),c=r[s];i||(i=u),n[a]=o,r[a]=u;let l=s,d=0;while(l!==a)d+=n[l++],l%=t;if(a=(a+1)%t,a===s&&(s=(s+1)%t),u-i<e)return;const h=c&&u-c;return h?Math.round(1e3*d/h):void 0}}var nt=et;function rt(t,e){let n=0;const r=nt(50,250);return i=>{const a=i.loaded,s=i.lengthComputable?i.total:void 0,o=a-n,u=r(o),c=a<=s;n=a;const l={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:u||void 0,estimated:u&&s&&c?(s-a)/u:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const it="undefined"!==typeof XMLHttpRequest;var at=it&&function(t){return new Promise((function(e,n){let i=t.data;const a=V.from(t.headers).normalize(),s=t.responseType;let o;function u(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}r["a"].isFormData(i)&&(x.isStandardBrowserEnv||x.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(e+":"+n))}const l=Z(t.baseURL,t.url);function h(){if(!c)return;const r=V.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),i=s&&"text"!==s&&"json"!==s?c.response:c.responseText,a={data:i,status:c.status,statusText:c.statusText,headers:r,config:t,request:c};J((function(t){e(t),u()}),(function(t){n(t),u()}),a),c=null}if(c.open(t.method.toUpperCase(),d(l,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new f["a"]("Request aborted",f["a"].ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new f["a"]("Network Error",f["a"].ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||m;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new f["a"](e,r.clarifyTimeoutError?f["a"].ETIMEDOUT:f["a"].ECONNABORTED,t,c)),c=null},x.isStandardBrowserEnv){const e=(t.withCredentials||Q(l))&&t.xsrfCookieName&&K.read(t.xsrfCookieName);e&&a.set(t.xsrfHeaderName,e)}void 0===i&&a.setContentType(null),"setRequestHeader"in c&&r["a"].forEach(a.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),r["a"].isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&"json"!==s&&(c.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&c.addEventListener("progress",rt(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",rt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=e=>{c&&(n(!e||e.type?new H(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const p=tt(l);p&&-1===x.protocols.indexOf(p)?n(new f["a"]("Unsupported protocol "+p+":",f["a"].ERR_BAD_REQUEST,t)):c.send(i||null)}))};const st={http:q["a"],xhr:at};r["a"].forEach(st,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});var ot={getAdapter:t=>{t=r["a"].isArray(t)?t:[t];const{length:e}=t;let n,i;for(let a=0;a<e;a++)if(n=t[a],i=r["a"].isString(n)?st[n.toLowerCase()]:n)break;if(!i){if(!1===i)throw new f["a"](`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(r["a"].hasOwnProp(st,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!r["a"].isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:st};function ut(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new H(null,t)}function ct(t){ut(t),t.headers=V.from(t.headers),t.data=U.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);const e=ot.getAdapter(t.adapter||E.adapter);return e(t).then((function(e){return ut(t),e.data=U.call(t,t.transformResponse,e),e.headers=V.from(e.headers),e}),(function(e){return W(e)||(ut(t),e&&e.response&&(e.response.data=U.call(t,t.transformResponse,e.response),e.response.headers=V.from(e.response.headers))),Promise.reject(e)}))}const lt=t=>t instanceof V?t.toJSON():t;function dt(t,e){e=e||{};const n={};function i(t,e,n){return r["a"].isPlainObject(t)&&r["a"].isPlainObject(e)?r["a"].merge.call({caseless:n},t,e):r["a"].isPlainObject(e)?r["a"].merge({},e):r["a"].isArray(e)?e.slice():e}function a(t,e,n){return r["a"].isUndefined(e)?r["a"].isUndefined(t)?void 0:i(void 0,t,n):i(t,e,n)}function s(t,e){if(!r["a"].isUndefined(e))return i(void 0,e)}function o(t,e){return r["a"].isUndefined(e)?r["a"].isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function u(n,r,a){return a in e?i(n,r):a in t?i(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(t,e)=>a(lt(t),lt(e),!0)};return r["a"].forEach(Object.keys(t).concat(Object.keys(e)),(function(i){const s=c[i]||a,o=s(t[i],e[i],i);r["a"].isUndefined(o)&&s!==u||(n[i]=o)})),n}const ht="1.3.4",pt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pt[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const ft={};function mt(t,e,n){if("object"!==typeof t)throw new f["a"]("options must be an object",f["a"].ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;while(i-- >0){const a=r[i],s=e[a];if(s){const e=t[a],n=void 0===e||s(e,a,t);if(!0!==n)throw new f["a"]("option "+a+" must be "+n,f["a"].ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new f["a"]("Unknown option "+a,f["a"].ERR_BAD_OPTION)}}pt.transitional=function(t,e,n){function r(t,e){return"[Axios v"+ht+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,a)=>{if(!1===t)throw new f["a"](r(i," has been removed"+(e?" in "+e:"")),f["a"].ERR_DEPRECATED);return e&&!ft[i]&&(ft[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,a)}};var gt={assertOptions:mt,validators:pt};const bt=gt.validators;class yt{constructor(t){this.defaults=t,this.interceptors={request:new p,response:new p}}request(t,e){"string"===typeof t?(e=e||{},e.url=t):e=t||{},e=dt(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:a}=e;let s;void 0!==n&&gt.assertOptions(n,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),void 0!==i&&gt.assertOptions(i,{encode:bt.function,serialize:bt.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase(),s=a&&r["a"].merge(a.common,a[e.method]),s&&r["a"].forEach(["delete","get","head","post","put","patch","common"],t=>{delete a[t]}),e.headers=V.concat(s,a);const o=[];let u=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(u=u&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let d,h=0;if(!u){const t=[ct.bind(this),void 0];t.unshift.apply(t,o),t.push.apply(t,c),d=t.length,l=Promise.resolve(e);while(h<d)l=l.then(t[h++],t[h++]);return l}d=o.length;let p=e;h=0;while(h<d){const t=o[h++],e=o[h++];try{p=t(p)}catch(f){e.call(this,f);break}}try{l=ct.call(this,p)}catch(f){return Promise.reject(f)}h=0,d=c.length;while(h<d)l=l.then(c[h++],c[h++]);return l}getUri(t){t=dt(this.defaults,t);const e=Z(t.baseURL,t.url);return d(e,t.params,t.paramsSerializer)}}r["a"].forEach(["delete","get","head","options"],(function(t){yt.prototype[t]=function(e,n){return this.request(dt(n||{},{method:t,url:e,data:(n||{}).data}))}})),r["a"].forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(dt(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}yt.prototype[t]=e(),yt.prototype[t+"Form"]=e(!0)}));var vt=yt;class wt{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;while(e-- >0)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const r=new Promise(t=>{n.subscribe(t),e=t}).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new H(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new wt((function(e){t=e}));return{token:e,cancel:t}}}var xt=wt;function Ot(t){return function(e){return t.apply(null,e)}}function St(t){return r["a"].isObject(t)&&!0===t.isAxiosError}const kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kt).forEach(([t,e])=>{kt[e]=t});var Tt=kt;function _t(t){const e=new vt(t),n=Object(i["a"])(vt.prototype.request,e);return r["a"].extend(n,vt.prototype,e,{allOwnKeys:!0}),r["a"].extend(n,e,null,{allOwnKeys:!0}),n.create=function(e){return _t(dt(t,e))},n}const It=_t(E);It.Axios=vt,It.CanceledError=H,It.CancelToken=xt,It.isCancel=W,It.VERSION=ht,It.toFormData=a["a"],It.AxiosError=f["a"],It.Cancel=It.CanceledError,It.all=function(t){return Promise.all(t)},It.spread=Ot,It.isAxiosError=St,It.mergeConfig=dt,It.AxiosHeaders=V,It.formToJSON=t=>_(r["a"].isHTMLForm(t)?new FormData(t):t),It.HttpStatusCode=Tt,It.default=It;e["a"]=It},cef0:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","greater","string_or_numeric"),u=Object(s["a"])(e,"b","greater","string_or_numeric");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u};return r["a"].runKernel(i["qb"],c)}const l=Object(u["b"])({greater_:c})},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("da84"),i=n("1626"),a=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?a(r[t]):r[t]&&r[t][e]}},d08e:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e){const n=Object(a["a"])(t,"x","reverse"),s={x:n},o={dims:e};return r["a"].runKernel(i["Bc"],s,o)}const u=Object(s["b"])({reverse_:o})},d0ca:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("6ae2"),i=n("c04e"),a=n("9117"),s=n("c77c"),o=n("46b8"),u=n("a5aa"),c=n("163a"),l=n("93b2"),d=n("b2d6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class h extends d["a"]{constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}static get className(){return"Adagrad"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const d=r["a"].registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:e+"/accumulator",variable:Object(i["t"])(()=>Object(o["a"])(d.shape,this.initialAccumulatorValue).variable(t))}}const h=Array.isArray(t)?t[n].tensor:t[e];if(null==h)return;const p=this.accumulatedGrads[n].variable;Object(i["t"])(()=>{const t=Object(a["a"])(p,Object(l["a"])(h));p.assign(t);const e=Object(a["a"])(Object(u["a"])(Object(s["a"])(h,Object(c["a"])(Object(a["a"])(t,r["a"].backend.epsilon()))),-this.learningRate),d);d.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Object(i["d"])(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e["learningRate"],e["initialAccumulatorValue"])}}},d1a8:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","atanh"),n={x:e};return r["a"].runKernel(i["n"],n)}const u=Object(s["b"])({atanh_:o})},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);e.f=a?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d1f4:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("a3f7"),i=n("6ad5"),a=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e){const n=Object(r["a"])(t,"x","squeeze","string_or_numeric");return Object(s["a"])(n,Object(i["P"])(n.shape,e).newShape)}const u=Object(a["b"])({squeeze_:o})},d25f:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("a3f7"),i=n("526f"),a=n("e333"),s=n("ef00"),o=n("f183"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){const n=Object(r["a"])(t,"a","logicalXor","bool"),u=Object(r["a"])(e,"b","logicalXor","bool");return Object(i["assertAndGetBroadcastShape"])(n.shape,u.shape),Object(a["a"])(Object(o["a"])(t,e),Object(s["a"])(Object(a["a"])(t,e)))}const l=Object(u["b"])({logicalXor_:c})},d2bb:function(t,e,n){var r=n("7282"),i=n("825a"),a=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,r){return i(n),a(r),e?t(n,r):n.__proto__=r,n}}():void 0)},d303:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={};function i(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};r[t]=n}function a(t){return r[t]}function s(t){delete r[t]}},d30a:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","tan","float32"),n={x:e};return r["a"].runKernel(i["hd"],n)}const u=Object(s["b"])({tan_:o})},d369:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","floor","float32"),n={x:e};return r["a"].runKernel(i["ib"],n)}const u=Object(s["b"])({floor_:o})},d4de:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","notEqual","string_or_numeric"),u=Object(s["a"])(e,"b","notEqual","string_or_numeric");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u};return r["a"].runKernel(i["ec"],c)}const l=Object(u["b"])({notEqual_:c})},d54d:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(a["b"])(t,"tensors","stack","string_or_numeric");s["b"](n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&s["b"](e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const o=n,u={axis:e};return r["a"].runKernel(i["hc"],o,u)}const c=Object(o["b"])({stack_:u})},d556:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},d565:function(t,e,n){"use strict";n.r(e),n.d(e,"TEST_EPSILON_FLOAT16",(function(){return u})),n.d(e,"expectArraysClose",(function(){return c})),n.d(e,"testEpsilon",(function(){return l})),n.d(e,"expectPromiseToFail",(function(){return h})),n.d(e,"expectArraysEqual",(function(){return p})),n.d(e,"expectNumbersClose",(function(){return f})),n.d(e,"expectValuesInRange",(function(){return g})),n.d(e,"expectArrayBuffersEqual",(function(){return b})),n.d(e,"encodeStrings",(function(){return y})),n.d(e,"createVideoElement",(function(){return v})),n.d(e,"play",(function(){return w}));var r=n("6ae2"),i=n("a3f7"),a=n("eb7e"),s=n("6ad5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=.001,u=.1;function c(t,e,n){return null==n&&(n=l()),d(t,e,(t,e)=>m(t,e,n))}function l(){return 32===r["a"].backend.floatPrecision()?o:u}function d(t,e,n){let r=!0;if((Object(a["isTypedArray"])(t)||Object(a["isTypedArray"])(e))&&(r=!1),Object(a["isTypedArray"])(t)&&Object(a["isTypedArray"])(e)&&(r=!0),r){const n=t.constructor.name,r=e.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: `+r)}if(Array.isArray(t)&&Array.isArray(e)){const n=Object(i["c"])(t),r=Object(i["c"])(e);if(!Object(s["a"])(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const o=Object(a["isTypedArray"])(t)?t:Object(a["flatten"])(t),u=Object(a["isTypedArray"])(e)?e:Object(a["flatten"])(e);if(o.length!==u.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${u.length}.\nActual:   ${o}.\nExpected: ${u}.`);for(let i=0;i<u.length;++i){const t=o[i],e=u[i];if(!n(t,e))throw new Error(`Arrays differ: actual[${i}] = ${t}, expected[${i}] = ${e}.\nActual:   ${o}.\nExpected: ${u}.`)}"undefined"!==typeof expect&&expect().nothing()}function h(t,e){t().then(()=>e.fail(),()=>e()),"undefined"!==typeof expect&&expect().nothing()}function p(t,e){const n="string"===typeof e||"number"===typeof e||"boolean"===typeof e?[e]:e;return Object(s["z"])(t)||Object(s["z"])(t[0])||Object(s["z"])(e)||Object(s["z"])(e[0])?d(t,n,(t,e)=>t==e):d(t,e,(t,e)=>m(t,e,0))}function f(t,e,n){if(null==n&&(n=l()),!m(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);"undefined"!==typeof expect&&expect().nothing()}function m(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function g(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function b(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let i=0;i<r.length;i++)if(n[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${n[i]} instead`)}function y(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?y(n):t[e]=Object(a["encodeString"])(n)}return t}function v(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(t=>{e.addEventListener("loadeddata",n=>t(e)),e.load()})}async function w(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}},d7b0:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"input","real"),n={input:e};return r["a"].runKernel(i["rc"],n)}const u=Object(s["b"])({real_:o})},d9b5:function(t,e,n){var r=n("d066"),i=n("1626"),a=n("3a9b"),s=n("fdbf"),o=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&a(e.prototype,o(t))}},d9e2:function(t,e,n){var r=n("23e7"),i=n("da84"),a=n("2ba4"),s=n("e5cb"),o="WebAssembly",u=i[o],c=7!==Error("e",{cause:7}).cause,l=function(t,e){var n={};n[t]=s(t,e,c),r({global:!0,constructor:!0,arity:1,forced:c},n)},d=function(t,e){if(u&&u[t]){var n={};n[t]=s(o+"."+t,e,c),r({target:o,stat:!0,constructor:!0,arity:1,forced:c},n)}};l("Error",(function(t){return function(e){return a(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return a(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return a(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return a(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return a(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return a(t,this,arguments)}})),l("URIError",(function(t){return function(e){return a(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return a(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return a(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return a(t,this,arguments)}}))},da5a:function(t,e){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function r(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function i(t){return!0===(t&&t["__isLong__"])}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var a={},s={};function o(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=s[t],r)?r:(n=c(t,(0|t)<0?-1:0,!0),i&&(s[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=a[t],r)?r:(n=c(t,t<0?-1:0,!1),i&&(a[t]=n),n))}function u(t,e){if(isNaN(t))return e?w:v;if(e){if(t<0)return w;if(t>=g)return T}else{if(t<=-b)return _;if(t+1>=b)return k}return t<0?u(-t,e).neg():c(t%m|0,t/m|0,e)}function c(t,e,n){return new r(t,e,n)}r.fromInt=o,r.fromNumber=u,r.fromBits=c;var l=Math.pow;function d(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return v;if("number"===typeof e?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(t.substring(1),e,n).neg();for(var i=u(l(n,8)),a=v,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+o),n);if(o<8){var h=u(l(n,o));a=a.mul(h).add(u(c))}else a=a.mul(i),a=a.add(u(c))}return a.unsigned=e,a}function h(t,e){return"number"===typeof t?u(t,e):"string"===typeof t?d(t,e):c(t.low,t.high,"boolean"===typeof e?e:t.unsigned)}r.fromString=d,r.fromValue=h;var p=65536,f=1<<24,m=p*p,g=m*m,b=g/2,y=o(f),v=o(0);r.ZERO=v;var w=o(0,!0);r.UZERO=w;var x=o(1);r.ONE=x;var O=o(1,!0);r.UONE=O;var S=o(-1);r.NEG_ONE=S;var k=c(-1,2147483647,!1);r.MAX_VALUE=k;var T=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=T;var _=c(0,-2147483648,!1);r.MIN_VALUE=_;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},I.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var e=u(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}var i=u(l(t,6),this.unsigned),a=this,s="";while(1){var o=a.div(i),c=a.sub(o.mul(i)).toInt()>>>0,d=c.toString(t);if(a=o,a.isZero())return d+s;while(d.length<6)d="0"+d;s=""+d+s}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0;e--)if(0!=(t&1<<e))break;return 0!=this.high?e+33:e+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1===(1&this.low)},I.isEven=function(){return 0===(1&this.low)},I.equals=function(t){return i(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},I.eq=I.equals,I.notEquals=function(t){return!this.eq(t)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(t){return this.comp(t)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(t){return this.comp(t)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(t){return this.comp(t)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(t){return this.comp(t)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(t){if(i(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(x)},I.neg=I.negate,I.add=function(t){i(t)||(t=h(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,s=t.high>>>16,o=65535&t.high,u=t.low>>>16,l=65535&t.low,d=0,p=0,f=0,m=0;return m+=a+l,f+=m>>>16,m&=65535,f+=r+u,p+=f>>>16,f&=65535,p+=n+o,d+=p>>>16,p&=65535,d+=e+s,d&=65535,c(f<<16|m,d<<16|p,this.unsigned)},I.subtract=function(t){return i(t)||(t=h(t)),this.add(t.neg())},I.sub=I.subtract,I.multiply=function(t){if(this.isZero())return v;if(i(t)||(t=h(t)),n){var e=n.mul(this.low,this.high,t.low,t.high);return c(e,n.get_high(),this.unsigned)}if(t.isZero())return v;if(this.eq(_))return t.isOdd()?_:v;if(t.eq(_))return this.isOdd()?_:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(y)&&t.lt(y))return u(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=65535&this.high,s=this.low>>>16,o=65535&this.low,l=t.high>>>16,d=65535&t.high,p=t.low>>>16,f=65535&t.low,m=0,g=0,b=0,w=0;return w+=o*f,b+=w>>>16,w&=65535,b+=s*f,g+=b>>>16,b&=65535,b+=o*p,g+=b>>>16,b&=65535,g+=a*f,m+=g>>>16,g&=65535,g+=s*p,m+=g>>>16,g&=65535,g+=o*d,m+=g>>>16,g&=65535,m+=r*f+a*p+s*d+o*l,m&=65535,c(b<<16|w,m<<16|g,this.unsigned)},I.mul=I.multiply,I.divide=function(t){if(i(t)||(t=h(t)),t.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&-2147483648===this.high&&-1===t.low&&-1===t.high)return this;var e=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,t.low,t.high);return c(e,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w:v;var r,a,s;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return w;if(t.gt(this.shru(1)))return O;s=w}else{if(this.eq(_)){if(t.eq(x)||t.eq(S))return _;if(t.eq(_))return x;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(v)?t.isNegative()?x:S:(a=this.sub(t.mul(r)),s=r.add(a.div(t)),s)}if(t.eq(_))return this.unsigned?w:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=v}a=this;while(a.gte(t)){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));var d=Math.ceil(Math.log(r)/Math.LN2),p=d<=48?1:l(2,d-48),f=u(r),m=f.mul(t);while(m.isNegative()||m.gt(a))r-=p,f=u(r,this.unsigned),m=f.mul(t);f.isZero()&&(f=x),s=s.add(f),a=a.sub(m)}return s},I.div=I.divide,I.modulo=function(t){if(i(t)||(t=h(t)),n){var e=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,t.low,t.high);return c(e,n.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(t){return i(t)||(t=h(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},I.or=function(t){return i(t)||(t=h(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},I.xor=function(t){return i(t)||(t=h(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},I.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(t){return i(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),t&=63,0===t)return this;var e=this.high;if(t<32){var n=this.low;return c(n>>>t|e<<32-t,e>>>t,this.unsigned)}return c(32===t?e:e>>>t-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},I.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},r.fromBytes=function(t,e,n){return n?r.fromBytesLE(t,e):r.fromBytesBE(t,e)},r.fromBytesLE=function(t,e){return new r(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},r.fromBytesBE=function(t,e){return new r(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dae8:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(a["a"])(t,"x","expandDims","string_or_numeric");s["b"](e<=n.rank,()=>"Axis must be <= rank of the tensor");const o={input:n},u={dim:e};return r["a"].runKernel(i["db"],o,u)}const c=Object(o["b"])({expandDims_:u})},db49:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0){const n=Object(a["a"])(t,"x","argMin"),s={x:n},o={axis:e};return r["a"].runKernel(i["i"],s,o)}const u=Object(s["b"])({argMin_:o})},dbf3:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},dc14:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var r=n("fa11"),i=n("c388"),a=n("4cfc");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class s extends i["a"]{decodeUTF8(){return new o(this)}}class o extends a["a"]{constructor(t){super(),this.upstream=t,this.impl=new u(t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class u extends i["b"]{constructor(t){if(super(),this.upstream=t,Object(r["hf"])().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:t}=n(5);this.decoder=new t("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){const e=await this.upstream.next();let n,i;return!e.done&&(n=e.value,i=Object(r["hf"])().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(t.from(n.buffer)),this.outputQueue.push(i),!0)}}}).call(this,n("b639").Buffer)},dc4a:function(t,e,n){var r=n("59ed"),i=n("7234");t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},dc59:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","asinh"),n={x:e};return r["a"].runKernel(i["k"],n)}const u=Object(s["b"])({asinh_:o})},dd7e:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l="NHWC",d=[1,1],h){const p=Object(a["a"])(t,"x","conv2d","float32"),f=Object(a["a"])(e,"filter","conv2d","float32");let m=p,g=!1;3===p.rank&&(g=!0,m=Object(c["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]])),s["b"](4===m.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`),s["b"](4===f.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+f.rank+"."),o["a"]("conv2d",u,h);const b="NHWC"===l?m.shape[3]:m.shape[1];s["b"](b===f.shape[2],()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${f.shape[2]}.`),s["b"](o["i"](n,d),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`),s["b"](o["j"](d),()=>"Error in conv2D: Dilated rates should be larger than 0."),s["b"](o["j"](n),()=>"Error in conv2D: Strides should be larger than 0.");const y={x:m,filter:f},v={strides:n,pad:u,dataFormat:l,dilations:d,dimRoundingMode:h},w=r["a"].runKernel(i["D"],y,v);return g?Object(c["a"])(w,[w.shape[1],w.shape[2],w.shape[3]]):w}const d=Object(u["b"])({conv2d_:l})},de1a:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("6ae2"),i=n("c04e"),a=n("9117"),s=n("c77c"),o=n("a5aa"),u=n("c9f1"),c=n("015f"),l=n("163a"),d=n("93b2"),h=n("a009"),p=n("a09b"),f=n("b2d6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class m extends f["a"]{constructor(t,e,n,a=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Object(i["t"])(()=>{this.accBeta1=Object(c["a"])(e).variable(),this.accBeta2=Object(c["a"])(n).variable()}),null==a&&(this.epsilon=r["a"].backend.epsilon())}static get className(){return"Adam"}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Object(i["t"])(()=>{const n=Object(h["a"])(1,this.accBeta1),u=Object(h["a"])(1,this.accBeta2);e.forEach((e,c)=>{const h=r["a"].registeredVariables[e],f=!1;null==this.accumulatedFirstMoment[c]&&(this.accumulatedFirstMoment[c]={originalName:e+"/m",variable:Object(i["t"])(()=>Object(p["a"])(h).variable(f))}),null==this.accumulatedSecondMoment[c]&&(this.accumulatedSecondMoment[c]={originalName:e+"/v",variable:Object(i["t"])(()=>Object(p["a"])(h).variable(f))});const m=Array.isArray(t)?t[c].tensor:t[e];if(null==m)return;const g=this.accumulatedFirstMoment[c].variable,b=this.accumulatedSecondMoment[c].variable,y=Object(a["a"])(Object(o["a"])(g,this.beta1),Object(o["a"])(m,1-this.beta1)),v=Object(a["a"])(Object(o["a"])(b,this.beta2),Object(o["a"])(Object(d["a"])(m),1-this.beta2)),w=Object(s["a"])(y,n),x=Object(s["a"])(v,u);g.assign(y),b.assign(v);const O=Object(a["a"])(Object(o["a"])(Object(s["a"])(w,Object(a["a"])(Object(l["a"])(x),this.epsilon)),-this.learningRate),h);h.assign(O)}),this.accBeta1.assign(Object(o["a"])(this.accBeta1,this.beta1)),this.accBeta2.assign(Object(o["a"])(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(i["d"])(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&Object(i["d"])(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),Object(i["t"])(()=>{this.accBeta1.assign(Object(u["a"])(this.beta1,this.iterations_+1)),this.accBeta2.assign(Object(u["a"])(this.beta2,this.iterations_+1))});const e=t.length/2,n=!1;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e["learningRate"],e["beta1"],e["beta2"],e["epsilon"])}}},de1a6:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n,s,o=0,u=0,c=0,l=0,d=0){const h=Object(a["a"])(t,"x","stridedSlice","string_or_numeric"),p={x:h},f={begin:e,end:n,strides:s,beginMask:o,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:d};return r["a"].runKernel(i["bd"],p,f)}const u=Object(s["b"])({stridedSlice_:o})},deb3:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"x","cast");if(!s["A"](e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const o={x:n},u={dtype:e};return r["a"].runKernel(i["x"],o,u)}const c=Object(o["b"])({cast_:u})},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var s=a>=0?arguments[a]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),s="/"===a(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),s=Math.min(i.length,a.length),o=s,u=0;u<s;u++)if(i[u]!==a[u]){o=u;break}var c=[];for(u=o;u<i.length;u++)c.push("..");return c=c.concat(a.slice(o)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,a=0,s=t.length-1;s>=0;--s){var o=t.charCodeAt(s);if(47!==o)-1===r&&(i=!1,r=s+1),46===o?-1===e?e=s:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},df81:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=null,n=!1){const s=Object(a["a"])(t,"x","all","bool"),o={x:s},u={axis:e,keepDims:n};return r["a"].runKernel(i["f"],o,u)}const u=Object(s["b"])({all_:o})},e053:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("deb3"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=null,n=!1){let o=Object(a["a"])(t,"x","sum");"bool"===o.dtype&&(o=Object(s["a"])(o,"int32"));const u={x:o},c={axis:e,keepDims:n};return r["a"].runKernel(i["gd"],u,c)}const c=Object(o["b"])({sum_:u})},e101:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("6ad5"),o=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e=5,n=1,o=1,c=.5){const l=Object(a["a"])(t,"x","localResponseNormalization");s["b"](4===l.rank||3===l.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`),s["b"](s["v"](e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let d=l,h=!1;3===l.rank&&(h=!0,d=Object(u["a"])(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const p={x:d},f={depthRadius:e,bias:n,alpha:o,beta:c},m=r["a"].runKernel(i["yb"],p,f);return h?Object(u["a"])(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const l=Object(o["b"])({localResponseNormalization_:c})},e1fd:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(s["a"])(t,"a","less","string_or_numeric"),u=Object(s["a"])(e,"b","less","string_or_numeric");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(o["assertAndGetBroadcastShape"])(n.shape,u.shape);const c={a:n,b:u};return r["a"].runKernel(i["Bb"],c)}const l=Object(u["b"])({less_:c})},e22c:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n=1,s=0,o="int32"){if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);const u=Object(a["a"])(t,"indices","oneHot","int32"),c={indices:u},l={dtype:o,depth:e,onValue:n,offValue:s};return r["a"].runKernel(i["fc"],c,l)}const u=Object(s["b"])({oneHot_:o})},e330:function(t,e,n){var r=n("40d5"),i=Function.prototype,a=i.call,s=r&&i.bind.bind(a,a);t.exports=r?s:function(t){return function(){return a.apply(t,arguments)}}},e333:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("526f"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"a","logicalAnd","bool"),o=Object(a["a"])(e,"b","logicalAnd","bool");Object(s["assertAndGetBroadcastShape"])(n.shape,o.shape);const u={a:n,b:o};return r["a"].runKernel(i["Hb"],u)}const c=Object(o["b"])({logicalAnd_:u})},e391:function(t,e,n){var r=n("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e467:function(t,e,n){"use strict";(function(t){var r=n("c532"),i=n("7917"),a=n("4581");function s(t){return r["a"].isPlainObject(t)||r["a"].isArray(t)}function o(t){return r["a"].endsWith(t,"[]")?t.slice(0,-2):t}function u(t,e,n){return t?t.concat(e).map((function(t,e){return t=o(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}function c(t){return r["a"].isArray(t)&&!t.some(s)}const l=r["a"].toFlatObject(r["a"],{},null,(function(t){return/^is[A-Z]/.test(t)}));function d(e,n,d){if(!r["a"].isObject(e))throw new TypeError("target must be an object");n=n||new(a["a"]||FormData),d=r["a"].toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!r["a"].isUndefined(e[t])}));const h=d.metaTokens,p=d.visitor||v,f=d.dots,m=d.indexes,g=d.Blob||"undefined"!==typeof Blob&&Blob,b=g&&r["a"].isSpecCompliantForm(n);if(!r["a"].isFunction(p))throw new TypeError("visitor must be a function");function y(e){if(null===e)return"";if(r["a"].isDate(e))return e.toISOString();if(!b&&r["a"].isBlob(e))throw new i["a"]("Blob is not supported. Use a Buffer instead.");return r["a"].isArrayBuffer(e)||r["a"].isTypedArray(e)?b&&"function"===typeof Blob?new Blob([e]):t.from(e):e}function v(t,e,i){let a=t;if(t&&!i&&"object"===typeof t)if(r["a"].endsWith(e,"{}"))e=h?e:e.slice(0,-2),t=JSON.stringify(t);else if(r["a"].isArray(t)&&c(t)||(r["a"].isFileList(t)||r["a"].endsWith(e,"[]"))&&(a=r["a"].toArray(t)))return e=o(e),a.forEach((function(t,i){!r["a"].isUndefined(t)&&null!==t&&n.append(!0===m?u([e],i,f):null===m?e:e+"[]",y(t))})),!1;return!!s(t)||(n.append(u(i,e,f),y(t)),!1)}const w=[],x=Object.assign(l,{defaultVisitor:v,convertValue:y,isVisitable:s});function O(t,e){if(!r["a"].isUndefined(t)){if(-1!==w.indexOf(t))throw Error("Circular reference detected in "+e.join("."));w.push(t),r["a"].forEach(t,(function(t,i){const a=!(r["a"].isUndefined(t)||null===t)&&p.call(n,t,r["a"].isString(i)?i.trim():i,e,x);!0===a&&O(t,e?e.concat(i):[i])})),w.pop()}}if(!r["a"].isObject(e))throw new TypeError("data must be an object");return O(e),n}e["a"]=d}).call(this,n("b639").Buffer)},e4da:function(t,e,n){"use strict";n.r(e),n.d(e,"registerBackend",(function(){return a})),n.d(e,"env",(function(){return u})),n.d(e,"InferenceSession",(function(){return b})),n.d(e,"Tensor",(function(){return m}));const r={},i=[],a=(t,e,n)=>{if(!e||"function"!==typeof e.init||"function"!==typeof e.createSessionHandler)throw new TypeError("not a valid backend");{const a=r[t];if(void 0===a)r[t]={backend:e,priority:n};else{if(a.priority>n)return;if(a.priority===n&&a.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){const e=i.indexOf(t);-1!==e&&i.splice(e,1);for(let a=0;a<i.length;a++)if(r[i[a]].priority<=n)return void i.splice(a,0,t);i.push(t)}}},s=async t=>{const e=0===t.length?i:t,n=[];for(const i of e){const t=r[i];if(t){if(t.initialized)return t.backend;if(t.aborted)continue;const e=!!t.initPromise;try{return e||(t.initPromise=t.backend.init()),await t.initPromise,t.initialized=!0,t.backend}catch(a){e||n.push({name:i,err:a}),t.aborted=!0}finally{delete t.initPromise}}}throw new Error("no available backend found. ERR: "+n.map(t=>`[${t.name}] ${t.err}`).join(", "))};class o{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(t){if(void 0!==t){if("string"!==typeof t||-1===["verbose","info","warning","error","fatal"].indexOf(t))throw new Error("Unsupported logging level: "+t);this.logLevelInternal=t}}get logLevel(){return this.logLevelInternal}}const u=new o,c="undefined"!==typeof BigInt64Array&&"function"===typeof BigInt64Array.from,l="undefined"!==typeof BigUint64Array&&"function"===typeof BigUint64Array.from,d=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),h=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);c&&(d.set("int64",BigInt64Array),h.set(BigInt64Array,"int64")),l&&(d.set("uint64",BigUint64Array),h.set(BigUint64Array,"uint64"));const p=t=>{let e=1;for(let n=0;n<t.length;n++){const r=t[n];if("number"!==typeof r||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);e*=r}return e};class f{constructor(t,e,n){let r,i,a;if("string"===typeof t)if(r=t,a=n,"string"===t){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");i=e}else{const n=d.get(t);if(void 0===n)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e))i=n.from(e);else{if(!(e instanceof n))throw new TypeError(`A ${r} tensor's data must be type of ${n}`);i=e}}else if(a=e,Array.isArray(t)){if(0===t.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const e=typeof t[0];if("string"===e)r="string",i=t;else{if("boolean"!==e)throw new TypeError(`Invalid element type of data array: ${e}.`);r="bool",i=Uint8Array.from(t)}}else{const e=h.get(t.constructor);if(void 0===e)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=e,i=t}if(void 0===a)a=[i.length];else if(!Array.isArray(a))throw new TypeError("A tensor's dims must be a number array");const s=p(a);if(s!==i.length)throw new Error(`Tensor's size(${s}) does not match data length(${i.length}).`);this.dims=a,this.type=r,this.data=i,this.size=s}static bufferToTensor(t,e){if(void 0===t)throw new Error("Image buffer must be defined");if(void 0===e.height||void 0===e.width)throw new Error("Image height and width must be defined");const{height:n,width:r}=e,i=e.norm;let a,s;a=void 0===i||void 0===i.mean?255:i.mean,s=void 0===i||void 0===i.bias?0:i.bias;const o=void 0!==e.bitmapFormat?e.bitmapFormat:"RGBA",u=void 0!==e.tensorFormat&&void 0!==e.tensorFormat?e.tensorFormat:"RGB",c=n*r,l="RGBA"===u?new Float32Array(4*c):new Float32Array(3*c);let d=4,h=0,p=1,m=2,g=3,b=0,y=c,v=2*c,w=-1;"RGB"===o&&(d=3,h=0,p=1,m=2,g=-1),"RGBA"===u?w=3*c:"RBG"===u?(b=0,v=c,y=2*c):"BGR"===u&&(v=0,y=c,b=2*c);for(let f=0;f<c;f++,h+=d,m+=d,p+=d,g+=d)l[b++]=(t[h]+s)/a,l[y++]=(t[p]+s)/a,l[v++]=(t[m]+s)/a,-1!==w&&-1!==g&&(l[w++]=(t[g]+s)/a);const x=new f("float32",l,"RGBA"===u?[1,4,n,r]:[1,3,n,r]);return x}static async fromImage(t,e){const n="undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement,r="undefined"!==typeof ImageData&&t instanceof ImageData,i="undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap,a="undefined"!==typeof String&&(t instanceof String||"string"===typeof t);let s,o={};if(n){const n=document.createElement("canvas"),r=n.getContext("2d");if(null==r)throw new Error("Can not access image data");{let i=t.naturalHeight,a=t.naturalWidth;if(void 0!==e&&void 0!==e.resizedHeight&&void 0!==e.resizedWidth&&(i=e.resizedHeight,a=e.resizedWidth),void 0!==e){if(o=e,void 0!==e.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(o.tensorFormat="RGBA",void 0!==e.height&&e.height!==i)throw new Error("Image input config height doesn't match HTMLImageElement height");if(o.height=i,void 0!==e.width&&e.width!==a)throw new Error("Image input config width doesn't match HTMLImageElement width");o.width=a}else o.tensorFormat="RGBA",o.height=i,o.width=a;n.width=a,n.height=i,r.drawImage(t,0,0,a,i),s=r.getImageData(0,0,a,i).data}}else{if(!r){if(i){if(void 0===e)throw new Error("Please provide image config with format for Imagebitmap");if(void 0!==e.bitmapFormat)throw new Error("Image input config format must be defined for ImageBitmap");const n=document.createElement("canvas").getContext("2d");if(null!=n){const r=t.height,i=t.width;if(n.drawImage(t,0,0,i,r),s=n.getImageData(0,0,i,r).data,void 0!==e){if(void 0!==e.height&&e.height!==r)throw new Error("Image input config height doesn't match ImageBitmap height");if(o.height=r,void 0!==e.width&&e.width!==i)throw new Error("Image input config width doesn't match ImageBitmap width");o.width=i}else o.height=r,o.width=i;return f.bufferToTensor(s,o)}throw new Error("Can not access image data")}if(a)return new Promise((n,r)=>{const i=document.createElement("canvas"),a=i.getContext("2d");if(!t||!a)return r();const s=new Image;s.crossOrigin="Anonymous",s.src=t,s.onload=()=>{i.width=s.width,i.height=s.height,a.drawImage(s,0,0,i.width,i.height);const t=a.getImageData(0,0,i.width,i.height);if(void 0!==e){if(void 0!==e.height&&e.height!==i.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(o.height=i.height,void 0!==e.width&&e.width!==i.width)throw new Error("Image input config width doesn't match ImageBitmap width");o.width=i.width}else o.height=i.height,o.width=i.width;n(f.bufferToTensor(t.data,o))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{const n="RGBA";let r,i;if(void 0!==e&&void 0!==e.resizedWidth&&void 0!==e.resizedHeight?(r=e.resizedHeight,i=e.resizedWidth):(r=t.height,i=t.width),void 0!==e){if(o=e,void 0!==e.bitmapFormat&&e.bitmapFormat!==n)throw new Error("Image input config format must be RGBA for ImageData");o.bitmapFormat="RGBA"}else o.bitmapFormat="RGBA";if(o.height=r,o.width=i,void 0!==e){const e=document.createElement("canvas");e.width=i,e.height=r;const n=e.getContext("2d");if(null==n)throw new Error("Can not access image data");n.putImageData(t,0,0),s=n.getImageData(0,0,i,r).data}else s=t.data}}if(void 0!==s)return f.bufferToTensor(s,o);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(t){var e,n;const r=document.createElement("canvas").getContext("2d");let i;if(null==r)throw new Error("Can not access image data");{const a=this.dims[3],s=this.dims[2],o=this.dims[1],u=void 0!==t&&void 0!==t.format?t.format:"RGB",c=void 0!==t&&void 0!==(null===(e=t.norm)||void 0===e?void 0:e.mean)?t.norm.mean:255,l=void 0!==t&&void 0!==(null===(n=t.norm)||void 0===n?void 0:n.bias)?t.norm.bias:0,d=s*a;if(void 0!==t){if(void 0!==t.height&&t.height!==s)throw new Error("Image output config height doesn't match tensor height");if(void 0!==t.width&&t.width!==a)throw new Error("Image output config width doesn't match tensor width");if(void 0!==t.format&&4===o&&"RGBA"!==t.format||3===o&&"RGB"!==t.format&&"BGR"!==t.format)throw new Error("Tensor format doesn't match input tensor dims")}const h=4;let p=0,f=1,m=2,g=3,b=0,y=d,v=2*d,w=-1;"RGBA"===u?(b=0,y=d,v=2*d,w=3*d):"RGB"===u?(b=0,y=d,v=2*d):"RBG"===u&&(b=0,v=d,y=2*d),i=r.createImageData(a,s);for(let t=0;t<s*a;p+=h,f+=h,m+=h,g+=h,t++)i.data[p]=(this.data[b++]-l)*c,i.data[f]=(this.data[y++]-l)*c,i.data[m]=(this.data[v++]-l)*c,i.data[g]=-1===w?255:(this.data[w++]-l)*c}return i}reshape(t){return new f(this.type,this.data,t)}}const m=f;class g{constructor(t){this.handler=t}async run(t,e,n){const r={};let i={};if("object"!==typeof t||null===t||t instanceof m||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if("object"===typeof e){if(null===e)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof m)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(0===e.length)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(const t of e){if("string"!==typeof t)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(t))throw new RangeError(`'fetches' contains invalid output name: ${t}.`);r[t]=null}if("object"===typeof n&&null!==n)i=n;else if("undefined"!==typeof n)throw new TypeError("'options' must be an object.")}else{let t=!1;const s=Object.getOwnPropertyNames(e);for(const n of this.outputNames)if(-1!==s.indexOf(n)){const i=e[n];(null===i||i instanceof m)&&(t=!0,a=!1,r[n]=i)}if(t){if("object"===typeof n&&null!==n)i=n;else if("undefined"!==typeof n)throw new TypeError("'options' must be an object.")}else i=e}}else if("undefined"!==typeof e)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const u of this.inputNames)if("undefined"===typeof t[u])throw new Error(`input '${u}' is missing in 'feeds'.`);if(a)for(const u of this.outputNames)r[u]=null;const s=await this.handler.run(t,r,i),o={};for(const u in s)Object.hasOwnProperty.call(s,u)&&(o[u]=new m(s[u].type,s[u].data,s[u].dims));return o}static async create(t,e,n,r){let i,a={};if("string"===typeof t){if(i=t,"object"===typeof e&&null!==e)a=e;else if("undefined"!==typeof e)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(i=t,"object"===typeof e&&null!==e)a=e;else if("undefined"!==typeof e)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const s=t;let o=0,u=t.byteLength;if("object"===typeof e&&null!==e)a=e;else if("number"===typeof e){if(o=e,!Number.isSafeInteger(o))throw new RangeError("'byteOffset' must be an integer.");if(o<0||o>=s.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${s.byteLength}).`);if(u=t.byteLength-o,"number"===typeof n){if(u=n,!Number.isSafeInteger(u))throw new RangeError("'byteLength' must be an integer.");if(u<=0||o+u>s.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${s.byteLength-o}].`);if("object"===typeof r&&null!==r)a=r;else if("undefined"!==typeof r)throw new TypeError("'options' must be an object.")}else if("undefined"!==typeof n)throw new TypeError("'byteLength' must be a number.")}else if("undefined"!==typeof e)throw new TypeError("'options' must be an object.");i=new Uint8Array(s,o,u)}}const o=a.executionProviders||[],u=o.map(t=>"string"===typeof t?t:t.name),c=await s(u),l=await c.createSessionHandler(i,a);return new g(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const b=g},e5cb:function(t,e,n){"use strict";var r=n("d066"),i=n("1a2d"),a=n("9112"),s=n("3a9b"),o=n("d2bb"),u=n("e893"),c=n("aeb0"),l=n("7156"),d=n("e391"),h=n("ab36"),p=n("6f19"),f=n("83ab"),m=n("c430");t.exports=function(t,e,n,g){var b="stackTraceLimit",y=g?2:1,v=t.split("."),w=v[v.length-1],x=r.apply(null,v);if(x){var O=x.prototype;if(!m&&i(O,"cause")&&delete O.cause,!n)return x;var S=r("Error"),k=e((function(t,e){var n=d(g?e:t,void 0),r=g?new x(t):new x;return void 0!==n&&a(r,"message",n),p(r,k,r.stack,2),this&&s(O,this)&&l(r,this,k),arguments.length>y&&h(r,arguments[y]),r}));if(k.prototype=O,"Error"!==w?o?o(k,S):u(k,S,{name:!0}):f&&b in x&&(c(k,x,b),c(k,x,"prepareStackTrace")),u(k,x),!m)try{O.name!==w&&a(O,"name",w),O.constructor=k}catch(T){}return k}}},e893:function(t,e,n){var r=n("1a2d"),i=n("56ef"),a=n("06cf"),s=n("9bf2");t.exports=function(t,e,n){for(var o=i(e),u=s.f,c=a.f,l=0;l<o.length;l++){var d=o[l];r(t,d)||n&&r(n,d)||u(t,d,c(e,d))}}},e89f:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0){const n=Object(a["a"])(t,"x","argMax"),s={x:n},o={axis:e};return r["a"].runKernel(i["h"],s,o)}const u=Object(s["b"])({argMax_:o})},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},eaf4:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("a3f7"),i=n("6ad5"),a=n("9748"),s=n("3b28"),o=n("b818"),u=n("9fe6"),c=n("54ef"),l=n("35c9"),d=n("7580");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function h(t,e,n,c,h,m,g){null==h&&(h=[1,1]),null==m&&(m=1),0===c&&(c="valid");const b=Object(r["a"])(t,"x","maxPool");let y=b,v=!1;3===b.rank&&(v=!0,y=Object(l["a"])(b,[1,b.shape[0],b.shape[1],b.shape[2]])),i["b"](o["i"](m,h),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${m} and dilations '${h}'`);const w=o["f"](y.shape,e,m,h,c),x=[w.dilationHeight,w.dilationWidth];let O;O="same"===c?f([w.filterHeight,w.filterWidth],x):[[0,0],[0,0]];const S=1===x[0]&&1===x[1],[k,T]=p([w.inHeight,w.inWidth],x,O),_=S?c:"valid",I=S?y:Object(d["a"])(y,x,k),C="avg"===n?()=>Object(a["a"])(I,e,m,_,g):()=>Object(u["a"])(I,e,m,_,g),A=C(),E=S?A:Object(s["a"])(A,x,T);return v?Object(l["a"])(E,[E.shape[1],E.shape[2],E.shape[3]]):E}function p(t,e,n){const r=n.map(t=>t[0]),i=n.map(t=>t[1]),a=t.concat(r,i),s=e.map((t,e)=>(t-a[e]%t)%t),o=i.map((t,e)=>t+s[e]),u=e.map((t,e)=>[r[e],o[e]]),c=e.map((t,e)=>[0,s[e]]);return[u,c]}function f(t,e){const n=t.map((t,n)=>t+(t-1)*(e[n]-1)),r=n.map(t=>t-1),i=r.map(t=>Math.floor(t/2)),a=r.map((t,e)=>t-i[e]);return r.map((t,e)=>[i[e],a[e]])}const m=Object(c["b"])({pool_:h})},eb7e:function(t,e,n){"use strict";n.r(e),n.d(e,"shuffle",(function(){return i["L"]})),n.d(e,"shuffleCombo",(function(){return i["M"]})),n.d(e,"clamp",(function(){return i["i"]})),n.d(e,"nearestLargerEven",(function(){return i["G"]})),n.d(e,"swap",(function(){return i["R"]})),n.d(e,"sum",(function(){return i["Q"]})),n.d(e,"randUniform",(function(){return i["I"]})),n.d(e,"distSquared",(function(){return i["m"]})),n.d(e,"assert",(function(){return i["b"]})),n.d(e,"assertShapesMatch",(function(){return i["e"]})),n.d(e,"assertNonNull",(function(){return i["d"]})),n.d(e,"sizeFromShape",(function(){return i["N"]})),n.d(e,"isScalarShape",(function(){return i["y"]})),n.d(e,"arraysEqual",(function(){return i["a"]})),n.d(e,"isInt",(function(){return i["v"]})),n.d(e,"tanh",(function(){return i["S"]})),n.d(e,"sizeToSquarishShape",(function(){return i["O"]})),n.d(e,"createShuffledIndices",(function(){return i["l"]})),n.d(e,"rightPad",(function(){return i["K"]})),n.d(e,"repeatedTry",(function(){return i["J"]})),n.d(e,"inferFromImplicitShape",(function(){return i["s"]})),n.d(e,"parseAxisParam",(function(){return i["H"]})),n.d(e,"squeezeShape",(function(){return i["P"]})),n.d(e,"getTypedArrayFromDType",(function(){return i["o"]})),n.d(e,"getArrayFromDType",(function(){return i["n"]})),n.d(e,"checkConversionForErrors",(function(){return i["h"]})),n.d(e,"isValidDtype",(function(){return i["A"]})),n.d(e,"hasEncodingLoss",(function(){return i["p"]})),n.d(e,"bytesPerElement",(function(){return i["g"]})),n.d(e,"bytesFromStringArray",(function(){return i["f"]})),n.d(e,"isString",(function(){return i["z"]})),n.d(e,"isBoolean",(function(){return i["t"]})),n.d(e,"isNumber",(function(){return i["w"]})),n.d(e,"inferDtype",(function(){return i["r"]})),n.d(e,"isFunction",(function(){return i["u"]})),n.d(e,"nearestDivisor",(function(){return i["F"]})),n.d(e,"computeStrides",(function(){return i["j"]})),n.d(e,"toNestedArray",(function(){return i["T"]})),n.d(e,"convertBackendValuesAndArrayBuffer",(function(){return i["k"]})),n.d(e,"makeOnesTypedArray",(function(){return i["C"]})),n.d(e,"makeZerosTypedArray",(function(){return i["E"]})),n.d(e,"makeZerosNestedTypedArray",(function(){return i["D"]})),n.d(e,"assertNonNegativeIntegerDimensions",(function(){return i["c"]})),n.d(e,"locToIndex",(function(){return i["B"]})),n.d(e,"indexToLoc",(function(){return i["q"]})),n.d(e,"isPromise",(function(){return i["x"]})),n.d(e,"hexToLong",(function(){return u})),n.d(e,"fingerPrint64",(function(){return S})),n.d(e,"createScalarValue",(function(){return k})),n.d(e,"toTypedArray",(function(){return _})),n.d(e,"now",(function(){return I})),n.d(e,"fetch",(function(){return C})),n.d(e,"encodeString",(function(){return A})),n.d(e,"decodeString",(function(){return E})),n.d(e,"isTypedArray",(function(){return N})),n.d(e,"flatten",(function(){return j}));var r=n("b333"),i=n("6ad5"),a=n("da5a"),s=n.n(a);
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=s.a||a;function u(t){return o.fromString(t,!0,16)}const c=u("c3a5c85c97cb3127"),l=u("b492b66fbe98f273"),d=u("9ae16a3b2f90404f");function h(t){return t.xor(t.shru(47))}function p(t,e,n){const r=t.slice(e,e+n);return o.fromBytes(Array.from(r),!0,!0)}function f(t,e){return p(t,e,8)}function m(t,e){return p(t,e,4)}function g(t,e){return 0===e?t:t.shru(e).or(t.shl(64-e))}function b(t,e,n=u("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function y(t,e,n,r,i,a){i=i.add(t),a=g(a.add(i).add(r),21);const s=i;return i=i.add(e),i=i.add(n),a=a.add(g(i,44)),[i.add(r),a.add(s)]}function v(t,e,n,r){return y(f(t,e),f(t,e+8),f(t,e+16),f(t,e+24),n,r)}function w(t,e=t.length){if(e>=8){const n=d.add(2*e),r=f(t,0).add(d),i=f(t,e-8),a=g(i,37).mul(n).add(r),s=g(r,25).add(i).mul(n);return b(a,s,n)}if(e>=4){const n=d.add(2*e),r=m(t,0);return b(r.shl(3).add(e),m(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],a=n+(r<<8),s=e+(i<<2);return h(d.mul(a).xor(c.mul(s))).mul(d)}return d}function x(t,e=t.length){const n=d.add(2*e),r=f(t,0).mul(l),i=f(t,8),a=f(t,e-8).mul(n),s=f(t,e-16).mul(d);return b(g(r.add(i),43).add(g(a,30)).add(s),r.add(g(i.add(d),18)).add(a),n)}function O(t,e=t.length){const n=d.add(2*e),r=f(t,0).mul(d),i=f(t,8),a=f(t,e-8).mul(n),s=f(t,e-16).mul(d),o=g(r.add(i),43).add(g(a,30)).add(s),u=b(o,r.add(g(i.add(d),18)).add(a),n),c=f(t,16).mul(n),l=f(t,24),h=o.add(f(t,e-32)).mul(n),p=u.add(f(t,e-24)).mul(n);return b(g(c.add(l),43).add(g(h,30)).add(p),c.add(g(l.add(r),18)).add(h),n)}function S(t,e=t.length){const n=o.fromNumber(81,!0);if(e<=32)return e<=16?w(t,e):x(t,e);if(e<=64)return O(t,e);let r=n,i=n.mul(l).add(113),a=h(i.mul(d).add(113)).mul(d),s=[o.UZERO,o.UZERO],u=[o.UZERO,o.UZERO];r=r.mul(d).add(f(t,0));let p=0;const m=64*(e-1>>6),y=m+(e-1&63)-63;do{r=g(r.add(i).add(s[0]).add(f(t,p+8)),37).mul(l),i=g(i.add(s[1]).add(f(t,p+48)),42).mul(l),r=r.xor(u[1]),i=i.add(s[0]).add(f(t,p+40)),a=g(a.add(u[0]),33).mul(l),s=v(t,p,s[1].mul(l),r.add(u[0])),u=v(t,p+32,a.add(u[1]),i.add(f(t,p+16))),[a,r]=[r,a],p+=64}while(p!==m);const S=l.add(a.and(255).shl(1));return p=y,u[0]=u[0].add(e-1&63),s[0]=s[0].add(u[0]),u[0]=u[0].add(s[0]),r=g(r.add(i).add(s[0]).add(f(t,p+8)),37).mul(S),i=g(i.add(s[1]).add(f(t,p+48)),42).mul(S),r=r.xor(u[1].mul(9)),i=i.add(s[0].mul(9).add(f(t,p+40))),a=g(a.add(u[0]),33).mul(S),s=v(t,p,s[1].mul(S),r.add(u[0])),u=v(t,p+32,a.add(u[1]),i.add(f(t,p+16))),[a,r]=[r,a],b(b(s[0],u[0],S).add(h(i).mul(c)).add(a),b(s[1],u[1],S).add(r),S)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k(t,e){return"string"===e?A(t):_([t],e)}function T(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}function _(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=j(t)),Object(r["c"])().getBool("DEBUG")&&i["h"](t,e),T(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error("Unknown data type "+e)}function I(){return Object(r["c"])().platform.now()}function C(t,e){return Object(r["c"])().platform.fetch(t,e)}function A(t,e="utf-8"){return e=e||"utf-8",Object(r["c"])().platform.encode(t,e)}function E(t,e="utf-8"){return e=e||"utf-8",Object(r["c"])().platform.decode(t,e)}function N(t){return Object(r["c"])().platform.isTypedArray(t)}function j(t,e=[],n=!1){if(null==e&&(e=[]),"boolean"===typeof t||"number"===typeof t||"string"===typeof t||i["x"](t)||null==t||N(t)&&n)e.push(t);else if(Array.isArray(t)||N(t))for(let r=0;r<t.length;++r)j(t[r],e,n);else{let r=-1;for(const e of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(e)&&(r=Math.max(r,Number(e)));for(let i=0;i<=r;i++)j(t[i],e,n)}return e}},ef00:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","logicalNot","bool"),n={x:e};return r["a"].runKernel(i["Ib"],n)}const u=Object(s["b"])({logicalNot_:o})},ef0f:function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return x}));n("29a8");var r=n("b333"),i=n("6ad5"),a=n("350f"),s=n("931f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o="/",u="tensorflowjs_models",c="info",l="model_topology",d="weight_specs",h="weight_data",p="model_metadata";function f(t){return{info:[u,t,c].join(o),topology:[u,t,l].join(o),weightSpecs:[u,t,d].join(o),weightData:[u,t,h].join(o),modelMetadata:[u,t,p].join(o)}}function m(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function g(t){const e=t.split(o);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(o)}function b(t){return t.startsWith(y.URL_SCHEME)?t.slice(y.URL_SCHEME.length):t}class y{constructor(t){if(!Object(r["c"])().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=f(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=Object(a["i"])(t);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(a["a"])(t.weightData));const e={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(e)),{modelArtifactsInfo:i}}catch(e){throw m(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(e.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(e.trainingConfig=t.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=Object(a["b"])(s),e}}y.URL_SCHEME="localstorage://";const v=t=>Object(r["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(y.URL_SCHEME)?w(t.slice(y.URL_SCHEME.length)):null;function w(t){return new y(t)}s["a"].registerSaveRouter(v),s["a"].registerLoadRouter(v);class x{constructor(){Object(i["b"])(Object(r["c"])().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Object(i["b"])("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=u+o,n=o+c;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(e)&&i.endsWith(n)){const e=g(i);t[e]=JSON.parse(this.LS.getItem(i))}}return t}async removeModel(t){t=b(t);const e=f(t);if(null==this.LS.getItem(e.info))throw new Error(`Cannot find model at path '${t}'`);const n=JSON.parse(this.LS.getItem(e.info));return m(e),n}}},eff7:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","cos","float32"),n={x:e};return r["a"].runKernel(i["J"],n)}const u=Object(s["b"])({cos_:o})},f011:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},f0a9:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","clone","string_or_numeric"),n={x:e};return r["a"].runKernel(i["tb"],n)}const u=Object(s["b"])({clone_:o})},f0e5:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),s=n("a3f7"),o=n("526f"),u=n("deb3"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(s["a"])(t,"a","minimum"),c=Object(s["a"])(e,"b","minimum");[n,c]=Object(a["makeTypesMatch"])(n,c),"bool"===n.dtype&&(n=Object(u["a"])(n,"int32"),c=Object(u["a"])(c,"int32")),Object(o["assertAndGetBroadcastShape"])(n.shape,c.shape);const l={a:n,b:c};return r["a"].runKernel(i["Vb"],l)}const d=Object(c["b"])({minimum_:l})},f183:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("526f"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"a","logicalOr","bool"),o=Object(a["a"])(e,"b","logicalOr","bool");Object(s["assertAndGetBroadcastShape"])(n.shape,o.shape);const u={a:n,b:o};return r["a"].runKernel(i["Jb"],u)}const c=Object(o["b"])({logicalOr_:u})},f1d4:function(module,exports,__webpack_require__){(function(process){
/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/
!function(t,e){module.exports=e(__webpack_require__("e4da"))}(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(t,e,n)=>{var r,i=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=$&&H(j.buffer),R}function i(){return j.buffer!=$&&H(j.buffer),F}function a(){return j.buffer!=$&&H(j.buffer),P}function s(){return j.buffer!=$&&H(j.buffer),M}function o(){return j.buffer!=$&&H(j.buffer),L}var u,c,l;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,l=e}));var d,h,p,f,m,g,b=Object.assign({},u),y="./this.program",v=(t,e)=>{throw e},w="object"==typeof window,x="function"==typeof importScripts,O="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,S=u.ENVIRONMENT_IS_PTHREAD||!1,k="";function T(t){return u.locateFile?u.locateFile(t,k):k+t}if(O){let e;k=x?n(908).dirname(k)+"/":"//",g=()=>{m||(f=n(1384),m=n(908))},d=function(t,e){return g(),t=m.normalize(t),f.readFileSync(t,e?void 0:"utf8")},p=t=>((t=d(t,!0)).buffer||(t=new Uint8Array(t)),t),h=(t,e,n)=>{g(),t=m.normalize(t),f.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),v=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||E("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(9925)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}n.g.Worker=e.Worker}else(w||x)&&(x?k=self.location.href:"undefined"!=typeof document&&document.currentScript&&(k=document.currentScript.src),r&&(k=r),k=0!==k.indexOf("blob:")?k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):"",O||(d=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},x&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),h=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));O&&"undefined"==typeof performance&&(n.g.performance=n(6953).performance);var _=console.log.bind(console),I=console.warn.bind(console);O&&(g(),_=t=>f.writeSync(1,t+"\n"),I=t=>f.writeSync(2,t+"\n"));var C,A=u.print||_,E=u.printErr||I;Object.assign(u,b),b=null,u.thisProgram&&(y=u.thisProgram),u.quit&&(v=u.quit),u.wasmBinary&&(C=u.wasmBinary);var N=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,D,$,R,F,P,M,L,B=!1,z="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function V(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&z)return z.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var i=t[e++];if(128&i){var a=63&t[e++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|a);else{var s=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|a<<6|s:(7&i)<<18|a<<12|s<<6|63&t[e++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r}function U(t,e){return(t>>>=0)?V(i(),t,e):""}function W(t,e,n,r){if(!(0<r))return 0;var i=n>>>=0;r=n+r-1;for(var a=0;a<t.length;++a){var s=t.charCodeAt(a);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),127>=s){if(n>=r)break;e[n++>>>0]=s}else{if(2047>=s){if(n+1>=r)break;e[n++>>>0]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;e[n++>>>0]=224|s>>12}else{if(n+3>=r)break;e[n++>>>0]=240|s>>18,e[n++>>>0]=128|s>>12&63}e[n++>>>0]=128|s>>6&63}e[n++>>>0]=128|63&s}}return e[n>>>0]=0,n-i}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function H(t){$=t,u.HEAP8=R=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=P=new Int32Array(t),u.HEAPU8=F=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=M=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=L=new Float64Array(t)}S&&($=u.buffer);var q=u.INITIAL_MEMORY||16777216;if(S)j=u.wasmMemory,$=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:q/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw E("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),O&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&($=j.buffer),q=$.byteLength,H($);var J,K=[],X=[],Y=[],Z=[];function Q(){return N||!1}function tt(){var t=u.preRun.shift();K.unshift(t)}var et,nt=0,rt=null,it=null;function at(t){throw S?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),E(t="Aborted("+t+")"),B=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),l(t),t}function st(){return et.startsWith("data:application/octet-stream;base64,")}function ot(){var t=et;try{if(t==et&&C)return new Uint8Array(C);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}et="ort-wasm-threaded.wasm",st()||(et=T(et));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function lt(t){(t=ft.Vb[t])||at(),ft.mc(t)}function dt(t){var e=ft.Cc();if(!e)return 6;ft.ac.push(e),ft.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ht(t){if(S)return Jt(1,1,t);Q()||(ft.oc(),u.onExit&&u.onExit(t),B=!0),v(t,new ct(t))}function pt(t,e){if(!e&&S)throw bt(t),"unwind";Q()||S||(ye(),mt(Y),be(0),ie[1].length&&ae(1,10),ie[2].length&&ae(2,10),ft.oc()),ht(t)}var ft={Yb:[],ac:[],qc:[],Vb:{},fc:function(){S&&ft.Ec()},Pc:function(){},Ec:function(){ft.receiveObjectTransfer=ft.Gc,ft.threadInitTLS=ft.pc,ft.setExitStatus=ft.nc,N=!1},nc:function(){},oc:function(){for(var t of Object.values(ft.Vb))ft.mc(t);for(t of ft.Yb)t.terminate();ft.Yb=[]},mc:function(t){var e=t.Ub;delete ft.Vb[e],ft.Yb.push(t),ft.ac.splice(ft.ac.indexOf(t),1),t.Ub=0,Se(e)},Gc:function(){},pc:function(){ft.qc.forEach(t=>t())},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ft.Bc=t.Ub),n.targetThread&&n.targetThread!=fe()){var i=ft.Vb[n.Qc];i?i.postMessage(n,n.transferList):E('Internal error! Worker sent a message "'+r+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?Vt(n.queue):"spawnThread"===r?dt(n):"cleanupThread"===r?lt(n.thread):"killThread"===r?(n=n.thread,r=ft.Vb[n],delete ft.Vb[n],r.terminate(),Se(n),ft.ac.splice(ft.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ft.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?A("Thread "+n.threadId+": "+n.text):"printErr"===r?E("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&E("worker sent an unknown command "+r);ft.Bc=void 0},t.onerror=t=>{throw E("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},O&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:j,wasmModule:D})},yc:function(){var t=T("ort-wasm-threaded.worker.js");ft.Yb.push(new Worker(t))},Cc:function(){return 0==ft.Yb.length&&(ft.yc(),ft.Fc(ft.Yb[0])),ft.Yb.pop()}};function mt(t){for(;0<t.length;)t.shift()(u)}function gt(t){var e=Ie();return t=t(),Ce(e),t}function bt(t){if(S)return Jt(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||v(1,t)}}u.PThread=ft,u.establishStackSpace=function(){var t=fe(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],_e(e,e-t),Ce(e)};var yt=[];function vt(t){var e=yt[t];return e||(t>=yt.length&&(yt.length=t+1),yt[t]=e=J.get(t)),e}u.invokeEntryPoint=function(t,e){t=vt(t)(e),Q()?ft.nc(t):ke(t)};var wt,xt,Ot=[],St=0,kt=0;function Tt(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){s()[this.Sb+4>>2>>>0]=t},this.bc=function(){return s()[this.Sb+4>>2>>>0]},this.wc=function(t){s()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return s()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){s()[this.Sb+16>>2>>>0]=t},this.tc=function(){return s()[this.Sb+16>>2>>>0]},this.vc=function(){if(Ne(this.bc()))return s()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function _t(t){return ge(new Tt(t).Sb)}function It(t,e,n,r){return S?Jt(3,1,t,e,n,r):Ct(t,e,n,r)}function Ct(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return E("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[];return S&&0===i.length?It(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:i},S?(t.Oc="spawnThread",postMessage(t,i),0):dt(t))}function At(t,e,n){return S?Jt(4,1,t,e,n):0}function Et(t,e){if(S)return Jt(5,1,t,e)}function Nt(t,e){if(S)return Jt(6,1,t,e)}function jt(t,e,n){if(S)return Jt(7,1,t,e,n)}function Dt(t,e,n){return S?Jt(8,1,t,e,n):0}function $t(t,e){if(S)return Jt(9,1,t,e)}function Rt(t,e,n){if(S)return Jt(10,1,t,e,n)}function Ft(t,e,n,r){if(S)return Jt(11,1,t,e,n,r)}function Pt(t,e,n,r){if(S)return Jt(12,1,t,e,n,r)}function Mt(t,e,n,r){if(S)return Jt(13,1,t,e,n,r)}function Lt(t){if(S)return Jt(14,1,t)}function Bt(t,e){if(S)return Jt(15,1,t,e)}function zt(t,e,n){if(S)return Jt(16,1,t,e,n)}function Vt(t){Atomics.store(a(),t>>2,1),fe()&&Oe(t),Atomics.compareExchange(a(),t>>2,1,0)}function Ut(t){return s()[t>>>2]+4294967296*a()[t+4>>>2]}function Wt(t,e,n,r,i,a){return S?Jt(17,1,t,e,n,r,i,a):-52}function Gt(t,e,n,r,i,a){if(S)return Jt(18,1,t,e,n,r,i,a)}function Ht(t){var n=G(t)+1,r=me(n);return r&&W(t,e(),r,n),r}function qt(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}if(S)return Jt(19,1,t,e,n);var i=(new Date).getFullYear(),o=new Date(i,0,1),u=new Date(i,6,1);i=o.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(i!=c),t=r(o),e=r(u),t=Ht(t),e=Ht(e),c<i?(s()[n>>2>>>0]=t,s()[n+4>>2>>>0]=e):(s()[n>>2>>>0]=e,s()[n+4>>2>>>0]=t)}function Jt(t,e){var n=arguments.length-2,r=arguments;return gt(()=>{for(var i=Ae(8*n),a=i>>3,s=0;s<n;s++){var u=r[2+s];o()[a+s>>>0]=u}return xe(t,n,i,e)})}u.executeNotifiedProxyingQueue=Vt,xt=O?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:S?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var Kt,Xt=[],Yt={};function Zt(){if(!Kt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(t in Yt)void 0===Yt[t]?delete e[t]:e[t]=Yt[t];var n=[];for(t in e)n.push(t+"="+e[t]);Kt=n}return Kt}function Qt(t,n){if(S)return Jt(20,1,t,n);var r=0;return Zt().forEach((function(i,a){var o=n+r;for(a=s()[t+4*a>>2>>>0]=o,o=0;o<i.length;++o)e()[a++>>0>>>0]=i.charCodeAt(o);e()[a>>0>>>0]=0,r+=i.length+1})),0}function te(t,e){if(S)return Jt(21,1,t,e);var n=Zt();s()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),s()[e>>2>>>0]=r,0}function ee(t){return S?Jt(22,1,t):52}function ne(t,e,n,r){return S?Jt(23,1,t,e,n,r):52}function re(t,e,n,r,i){return S?Jt(24,1,t,e,n,r,i):70}var ie=[null,[],[]];function ae(t,e){var n=ie[t];0===e||10===e?((1===t?A:E)(V(n,0)),n.length=0):n.push(e)}function se(t,e,n,r){if(S)return Jt(25,1,t,e,n,r);for(var a=0,o=0;o<n;o++){var u=s()[e>>2>>>0],c=s()[e+4>>2>>>0];e+=8;for(var l=0;l<c;l++)ae(t,i()[u+l>>>0]);a+=c}return s()[r>>2>>>0]=a,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],le=[31,28,31,30,31,30,31,31,30,31,30,31];function de(t,n,r,i){function s(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function o(t,e){return s(t,e,"0")}function u(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function c(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:le)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=c(new Date(t.getFullYear(),0,4)),n=c(n),0>=u(e,t)?0>=u(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var d=a()[i+40>>2>>>0];for(var h in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:d?U(d):""},r=U(r),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(h,"g"),d[h]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(h in d={"%a":function(t){return p[t.Tb].substring(0,3)},"%A":function(t){return p[t.Tb]},"%b":function(t){return f[t.ec].substring(0,3)},"%B":function(t){return f[t.ec]},"%C":function(t){return o((t.Xb+1900)/100|0,2)},"%d":function(t){return o(t.jc,2)},"%e":function(t){return s(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return o(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),o(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:le)[n++]);return o(t.jc+e,3)},"%m":function(t){return o(t.ec+1,2)},"%M":function(t){return o(t.Kc,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return o(t.Lc,2)},"%t":function(){return"\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return o(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return o(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return o(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),d)r.includes(h)&&(r=r.replace(new RegExp(h,"g"),d[h](i)));return h=function(t){var e=Array(G(t)+1);return W(t,e,0,e.length),e}(r=r.replace(/\0\0/g,"%")),h.length>n?0:(function(t,n){e().set(t,n>>>0)}(h,t),h.length-1)}ft.fc();var he=[null,ht,bt,It,At,Et,Nt,jt,Dt,$t,Rt,Ft,Pt,Mt,Lt,Bt,zt,Wt,Gt,qt,Qt,te,ee,ne,re,se],pe={b:function(t){return me(t+24)+24},n:function(t){return(t=new Tt(t)).uc()||(t.hc(!0),St--),t.ic(!1),Ot.push(t),t.sc(),t.vc()},ma:function(t){throw E("Unexpected exception thrown, this is not properly supported - aborting"),B=!0,t},x:function(){Te(0);var t=Ot.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&vt(e)(t.Zb),_t(t.Zb)}kt=0},e:function(){var t=kt;if(!t)return oe=0;var e=new Tt(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===n)break;if(Ee(a,n,e.Sb+16))return oe=a,t}return oe=n,t},l:function(){var t=kt;if(!t)return oe=0;var e=new Tt(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===n)break;if(Ee(a,n,e.Sb+16))return oe=a,t}return oe=n,t},h:function(){var t=kt;if(!t)return oe=0;var e=new Tt(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===n)break;if(Ee(a,n,e.Sb+16))return oe=a,t}return oe=n,t},t:_t,M:function(){var t=Ot.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(Ot.push(t),t.ic(!0),t.hc(!1),St++),kt=e,e},c:function(t,e,n){throw new Tt(t).fc(e,n),kt=t,St++,t},pa:function(){return St},Fa:function(t){ve(t,!x,1,!w),ft.pc()},T:function(t){S?postMessage({cmd:"cleanupThread",thread:t}):lt(t)},xa:Ct,j:function(t){throw kt||(kt=t),t},H:At,Ma:Et,ua:Nt,wa:jt,oa:Dt,Ka:$t,Ca:Rt,Ja:Ft,V:Pt,va:Mt,sa:Lt,La:Bt,ta:zt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout(()=>Vt(r));else if(S)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ft.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Ut(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Ut(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),s=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=i.getTimezoneOffset(),u=Math.min(o,s);return 0>n?a()[t+32>>2>>>0]=Number(s!=o&&u==r):0<n!=(u==r)&&(s=Math.max(o,s),e.setTime(e.getTime()+6e4*((0<n?u:s)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Wt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,qt(e,n,r))},y:function(){at("")},U:function(){if(!O&&!x){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";wt||(wt={}),wt[t]||(wt[t]=1,O&&(t="warning: "+t),E(t))}},ra:function(){return 4294901760},B:xt,Ia:function(t,e,n){i().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return O?n(3993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:he[t]).apply(null,Xt)},qa:function(t){var e=i().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{j.grow(a-$.byteLength+65535>>>16),H(j.buffer);var s=1;break t}catch(t){}s=void 0}if(s)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:te,J:pt,I:ee,S:ne,ga:re,R:se,d:function(){return oe},na:function t(r,i){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(O)try{var e=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var a=0;a<i;a++)e()[r+a>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ie();try{return vt(t)(e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},ja:function(t,e,n){var r=Ie();try{return vt(t)(e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},K:function(t){var e=Ie();try{return vt(t)()}catch(t){if(Ce(e),t!==t+0)throw t;Te(1,0)}},f:function(t,e){var n=Ie();try{return vt(t)(e)}catch(t){if(Ce(n),t!==t+0)throw t;Te(1,0)}},P:function(t,e,n){var r=Ie();try{return vt(t)(e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},Q:function(t,e,n){var r=Ie();try{return vt(t)(e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},k:function(t,e,n){var r=Ie();try{return vt(t)(e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},p:function(t,e,n,r){var i=Ie();try{return vt(t)(e,n,r)}catch(t){if(Ce(i),t!==t+0)throw t;Te(1,0)}},q:function(t,e,n,r,i){var a=Ie();try{return vt(t)(e,n,r,i)}catch(t){if(Ce(a),t!==t+0)throw t;Te(1,0)}},N:function(t,e,n,r,i,a){var s=Ie();try{return vt(t)(e,n,r,i,a)}catch(t){if(Ce(s),t!==t+0)throw t;Te(1,0)}},s:function(t,e,n,r,i,a){var s=Ie();try{return vt(t)(e,n,r,i,a)}catch(t){if(Ce(s),t!==t+0)throw t;Te(1,0)}},w:function(t,e,n,r,i,a,s){var o=Ie();try{return vt(t)(e,n,r,i,a,s)}catch(t){if(Ce(o),t!==t+0)throw t;Te(1,0)}},L:function(t,e,n,r,i,a,s,o){var u=Ie();try{return vt(t)(e,n,r,i,a,s,o)}catch(t){if(Ce(u),t!==t+0)throw t;Te(1,0)}},E:function(t,e,n,r,i,a,s,o,u,c,l,d){var h=Ie();try{return vt(t)(e,n,r,i,a,s,o,u,c,l,d)}catch(t){if(Ce(h),t!==t+0)throw t;Te(1,0)}},aa:function(t,e,n,r,i,a,s,o){var u=Ie();try{return Be(t,e,n,r,i,a,s,o)}catch(t){if(Ce(u),t!==t+0)throw t;Te(1,0)}},_:function(t,e,n,r,i,a,s){var o=Ie();try{return De(t,e,n,r,i,a,s)}catch(t){if(Ce(o),t!==t+0)throw t;Te(1,0)}},Z:function(t,e,n,r,i){var a=Ie();try{return ze(t,e,n,r,i)}catch(t){if(Ce(a),t!==t+0)throw t;Te(1,0)}},ca:function(t,e,n,r){var i=Ie();try{return Me(t,e,n,r)}catch(t){if(Ce(i),t!==t+0)throw t;Te(1,0)}},$:function(t){var e=Ie();try{return je(t)}catch(t){if(Ce(e),t!==t+0)throw t;Te(1,0)}},ba:function(t,e){var n=Ie();try{return Le(t,e)}catch(t){if(Ce(n),t!==t+0)throw t;Te(1,0)}},Y:function(t,e,n){var r=Ie();try{return $e(t,e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},g:function(t){var e=Ie();try{vt(t)()}catch(t){if(Ce(e),t!==t+0)throw t;Te(1,0)}},r:function(t,e){var n=Ie();try{vt(t)(e)}catch(t){if(Ce(n),t!==t+0)throw t;Te(1,0)}},i:function(t,e,n){var r=Ie();try{vt(t)(e,n)}catch(t){if(Ce(r),t!==t+0)throw t;Te(1,0)}},ha:function(t,e,n,r){var i=Ie();try{vt(t)(e,n,r)}catch(t){if(Ce(i),t!==t+0)throw t;Te(1,0)}},m:function(t,e,n,r){var i=Ie();try{vt(t)(e,n,r)}catch(t){if(Ce(i),t!==t+0)throw t;Te(1,0)}},v:function(t,e,n,r,i){var a=Ie();try{vt(t)(e,n,r,i)}catch(t){if(Ce(a),t!==t+0)throw t;Te(1,0)}},u:function(t,e,n,r,i,a){var s=Ie();try{vt(t)(e,n,r,i,a)}catch(t){if(Ce(s),t!==t+0)throw t;Te(1,0)}},O:function(t,e,n,r,i,a,s){var o=Ie();try{vt(t)(e,n,r,i,a,s)}catch(t){if(Ce(o),t!==t+0)throw t;Te(1,0)}},A:function(t,e,n,r,i,a,s,o){var u=Ie();try{vt(t)(e,n,r,i,a,s,o)}catch(t){if(Ce(u),t!==t+0)throw t;Te(1,0)}},ka:function(t,e,n,r,i,a,s,o,u){var c=Ie();try{vt(t)(e,n,r,i,a,s,o,u)}catch(t){if(Ce(c),t!==t+0)throw t;Te(1,0)}},C:function(t,e,n,r,i,a,s,o,u,c,l){var d=Ie();try{vt(t)(e,n,r,i,a,s,o,u,c,l)}catch(t){if(Ce(d),t!==t+0)throw t;Te(1,0)}},D:function(t,e,n,r,i,a,s,o,u,c,l,d,h,p,f,m){var g=Ie();try{vt(t)(e,n,r,i,a,s,o,u,c,l,d,h,p,f,m)}catch(t){if(Ce(g),t!==t+0)throw t;Te(1,0)}},fa:function(t,e,n,r,i,a,s,o){var u=Ie();try{Re(t,e,n,r,i,a,s,o)}catch(t){if(Ce(u),t!==t+0)throw t;Te(1,0)}},da:function(t,e,n,r,i,a,s,o,u,c,l,d){var h=Ie();try{Pe(t,e,n,r,i,a,s,o,u,c,l,d)}catch(t){if(Ce(h),t!==t+0)throw t;Te(1,0)}},ea:function(t,e,n,r,i,a){var s=Ie();try{Fe(t,e,n,r,i,a)}catch(t){if(Ce(s),t!==t+0)throw t;Te(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:de,z:function(t,e,n,r){return de(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ft.qc.push(u.asm.sb),J=u.asm.ub,X.unshift(u.asm.Va),D=e,S||(nt--,u.monitorRunDependencies&&u.monitorRunDependencies(nt),0==nt&&(null!==rt&&(clearInterval(rt),rt=null),it&&(t=it,it=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!C&&(w||x)){if("function"==typeof fetch&&!et.startsWith("file://"))return fetch(et,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+et+"'";return t.arrayBuffer()})).catch((function(){return ot()}));if(h)return new Promise((function(t,e){h(et,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){E("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(S||(nt++,u.monitorRunDependencies&&u.monitorRunDependencies(nt)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return E("Module.instantiateWasm callback failed with error: "+t),!1}(C||"function"!=typeof WebAssembly.instantiateStreaming||st()||et.startsWith("file://")||O||"function"!=typeof fetch?n(e):fetch(et,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return E("wasm streaming compile failed: "+t),E("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(l)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var fe=u._pthread_self=function(){return(fe=u._pthread_self=u.asm.ob).apply(null,arguments)},me=u._malloc=function(){return(me=u._malloc=u.asm.pb).apply(null,arguments)},ge=u._free=function(){return(ge=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var ye=u.___funcs_on_exit=function(){return(ye=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ve=u.__emscripten_thread_init=function(){return(ve=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var we,xe=u._emscripten_run_in_main_runtime_thread_js=function(){return(xe=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},Oe=u.__emscripten_proxy_execute_task_queue=function(){return(Oe=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Se=u.__emscripten_thread_free_data=function(){return(Se=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},ke=u.__emscripten_thread_exit=function(){return(ke=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Te=u._setThrew=function(){return(Te=u._setThrew=u.asm.Bb).apply(null,arguments)},_e=u._emscripten_stack_set_limits=function(){return(_e=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ie=u.stackSave=function(){return(Ie=u.stackSave=u.asm.Db).apply(null,arguments)},Ce=u.stackRestore=function(){return(Ce=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ae=u.stackAlloc=function(){return(Ae=u.stackAlloc=u.asm.Fb).apply(null,arguments)},Ee=u.___cxa_can_catch=function(){return(Ee=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Ne=u.___cxa_is_pointer_type=function(){return(Ne=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},De=u.dynCall_iiiiij=function(){return(De=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},$e=u.dynCall_jii=function(){return($e=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Re=u.dynCall_viiiiij=function(){return(Re=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Fe=u.dynCall_vjji=function(){return(Fe=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Pe=u.dynCall_viiijjjii=function(){return(Pe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Me=u.dynCall_iij=function(){return(Me=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},Le=u.dynCall_ji=function(){return(Le=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},Be=u.dynCall_iiiiiij=function(){return(Be=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},ze=u.dynCall_iiij=function(){return(ze=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function Ve(){function t(){if(!we&&(we=!0,u.calledRun=!0,!B)&&(S||mt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!S)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}mt(Z)}}if(!(0<nt))if(S)c(u),S||mt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)tt();mt(K),0<nt||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=U,u.stringToUTF8=function(t,e,n){return W(t,i(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ie,u.stackRestore=Ce,u.stackAlloc=Ae,u.ExitStatus=ct,u.PThread=ft,it=function t(){we||Ve(),we||(it=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Ve(),t.ready});t.exports=i},932:(t,e,n)=>{var r,i=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,i,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){i=t,a=e}));var s,o,u,c,l,d,h=Object.assign({},e),p="./this.program",f=(t,e)=>{throw e},m="object"==typeof window,g="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";b?(y=g?n(908).dirname(y)+"/":"//",d=()=>{l||(c=n(1384),l=n(908))},s=function(t,e){return d(),t=l.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=s(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{d(),t=l.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Y))throw t})),process.on("unhandledRejection",(function(t){throw t})),f=(t,e)=>{if(O||0<z)throw process.exitCode=t,e;e instanceof Y||x("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),r&&(y=r),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},g&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var v,w=e.print||console.log.bind(console),x=e.printErr||console.warn.bind(console);Object.assign(e,h),h=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(f=e.quit),e.wasmBinary&&(v=e.wasmBinary);var O=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&q("no native wasm support detected");var S,k,T,_,I,C,A=!1,E="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function N(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&E)return E.decode(t.subarray(e,n));for(r="";e<n;){var i=t[e++];if(128&i){var a=63&t[e++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|a);else{var s=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|a<<6|s:(7&i)<<18|a<<12|s<<6|63&t[e++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r}function j(t,e){return(t>>>=0)?N(_,t,e):""}function D(t,e,n,r){if(!(0<r))return 0;var i=n>>>=0;r=n+r-1;for(var a=0;a<t.length;++a){var s=t.charCodeAt(a);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),127>=s){if(n>=r)break;e[n++>>>0]=s}else{if(2047>=s){if(n+1>=r)break;e[n++>>>0]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;e[n++>>>0]=224|s>>12}else{if(n+3>=r)break;e[n++>>>0]=240|s>>18,e[n++>>>0]=128|s>>12&63}e[n++>>>0]=128|s>>6&63}e[n++>>>0]=128|63&s}}return e[n>>>0]=0,n-i}function $(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function R(){var t=S.buffer;k=t,e.HEAP8=T=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=I=new Int32Array(t),e.HEAPU8=_=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=C=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var F,P=[],M=[],L=[],B=[],z=0;function V(){var t=e.preRun.shift();P.unshift(t)}var U,W=0,G=null,H=null;function q(t){throw e.onAbort&&e.onAbort(t),x(t="Aborted("+t+")"),A=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function J(){return U.startsWith("data:application/octet-stream;base64,")}if(U="ort-wasm.wasm",!J()){var K=U;U=e.locateFile?e.locateFile(K,y):y+K}function X(){var t=U;try{if(t==U&&v)return new Uint8Array(v);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){q(t)}}function Y(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],tt=0,et=0;function nt(t){this.Db=t,this.zb=t-24,this.Ub=function(t){C[this.zb+4>>2>>>0]=t},this.Eb=function(){return C[this.zb+4>>2>>>0]},this.Sb=function(t){C[this.zb+8>>2>>>0]=t},this.Wb=function(){return C[this.zb+8>>2>>>0]},this.Tb=function(){I[this.zb>>2>>>0]=0},this.Ib=function(t){T[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=T[this.zb+12>>0>>>0]},this.Jb=function(t){T[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=T[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){I[this.zb>>2>>>0]+=1},this.Xb=function(){var t=I[this.zb>>2>>>0];return I[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){C[this.zb+16>>2>>>0]=t},this.Ob=function(){return C[this.zb+16>>2>>>0]},this.Qb=function(){if(Ct(this.Eb()))return C[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function rt(t){return wt(new nt(t).zb)}var it=[];function at(t){var e=it[t];return e||(t>=it.length&&(it.length=t+1),it[t]=e=F.get(t)),e}function st(t){var e=$(t)+1,n=vt(e);return n&&D(t,T,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,lt=[null,[],[]];function dt(t,e){var n=lt[t];0===e||10===e?((1===t?w:x)(N(n,0)),n.length=0):n.push(e)}var ht=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ft=[31,29,31,30,31,30,31,31,30,31,30,31],mt=[31,28,31,30,31,30,31,31,30,31,30,31];function gt(t,e,n,r){function i(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function a(t,e){return i(t,e,"0")}function s(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function o(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function u(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ft:mt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=o(new Date(t.getFullYear(),0,4)),n=o(n),0>=s(e,t)?0>=s(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=I[r+40>>2>>>0];for(var l in r={$b:I[r>>2>>>0],Zb:I[r+4>>2>>>0],Gb:I[r+8>>2>>>0],Kb:I[r+12>>2>>>0],Hb:I[r+16>>2>>>0],Cb:I[r+20>>2>>>0],Ab:I[r+24>>2>>>0],Bb:I[r+28>>2>>>0],bc:I[r+32>>2>>>0],Yb:I[r+36>>2>>>0],ac:c?j(c):""},n=j(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(t){return d[t.Ab].substring(0,3)},"%A":function(t){return d[t.Ab]},"%b":function(t){return h[t.Hb].substring(0,3)},"%B":function(t){return h[t.Hb]},"%C":function(t){return a((t.Cb+1900)/100|0,2)},"%d":function(t){return a(t.Kb,2)},"%e":function(t){return i(t.Kb,2," ")},"%g":function(t){return u(t).toString().substring(2)},"%G":function(t){return u(t)},"%H":function(t){return a(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),a(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ft:mt)[n++]);return a(t.Kb+e,3)},"%m":function(t){return a(t.Hb+1,2)},"%M":function(t){return a(t.Zb,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return a(t.$b,2)},"%t":function(){return"\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return a(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return a(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return a(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(t){var e=Array($(t)+1);return D(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),l.length>e?0:(T.set(l,t>>>0),l.length-1)}var bt={a:function(t){return vt(t+24)+24},m:function(t){return(t=new nt(t)).Pb()||(t.Ib(!0),tt--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),A=!0,t},w:function(){St(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),rt(t.Db)}et=0},d:function(){var t=et;if(!t)return ht=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return ht=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===n)break;if(It(a,n,e.zb+16))return ht=a,t}return ht=n,t},k:function(){var t=et;if(!t)return ht=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return ht=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===n)break;if(It(a,n,e.zb+16))return ht=a,t}return ht=n,t},g:function(){var t=et;if(!t)return ht=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return ht=0,t;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===n)break;if(It(a,n,e.zb+16))return ht=a,t}return ht=n,t},s:rt,L:function(){var t=Q.pop();t||q("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),tt++),et=e,e},b:function(t,e,n){throw new nt(t).Rb(e,n),et=t,tt++,t},la:function(){return tt},i:function(t){throw et||(et=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){q("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){q("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(C[t>>>2]+4294967296*I[t+4>>>2])),I[e>>2>>>0]=t.getUTCSeconds(),I[e+4>>2>>>0]=t.getUTCMinutes(),I[e+8>>2>>>0]=t.getUTCHours(),I[e+12>>2>>>0]=t.getUTCDate(),I[e+16>>2>>>0]=t.getUTCMonth(),I[e+20>>2>>>0]=t.getUTCFullYear()-1900,I[e+24>>2>>>0]=t.getUTCDay(),I[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(C[t>>>2]+4294967296*I[t+4>>>2])),I[e>>2>>>0]=t.getSeconds(),I[e+4>>2>>>0]=t.getMinutes(),I[e+8>>2>>>0]=t.getHours(),I[e+12>>2>>>0]=t.getDate(),I[e+16>>2>>>0]=t.getMonth(),I[e+20>>2>>>0]=t.getFullYear()-1900,I[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);I[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,I[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),I[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(I[t+20>>2>>>0]+1900,I[t+16>>2>>>0],I[t+12>>2>>>0],I[t+8>>2>>>0],I[t+4>>2>>>0],I[t>>2>>>0],0),n=I[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),6,1).getTimezoneOffset(),s=i.getTimezoneOffset(),o=Math.min(s,a);return 0>n?I[t+32>>2>>>0]=Number(a!=s&&o==r):0<n!=(o==r)&&(a=Math.max(s,a),e.setTime(e.getTime()+6e4*((0<n?o:a)-r))),I[t+24>>2>>>0]=e.getDay(),I[t+28>>2>>>0]=(e.getTime()-i.getTime())/864e5|0,I[t>>2>>>0]=e.getSeconds(),I[t+4>>2>>>0]=e.getMinutes(),I[t+8>>2>>>0]=e.getHours(),I[t+12>>2>>>0]=e.getDate(),I[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var i=(new Date).getFullYear(),a=new Date(i,0,1),s=new Date(i,6,1);i=a.getTimezoneOffset();var o=s.getTimezoneOffset();I[t>>2>>>0]=60*Math.max(i,o),I[e>>2>>>0]=Number(i!=o),t=r(a),e=r(s),t=st(t),e=st(e),o<i?(C[n>>2>>>0]=t,C[n+4>>2>>>0]=e):(C[n>>2>>>0]=e,C[n+4>>2>>>0]=t)}(e,n,r))},B:function(){q("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){_.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=_.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var i=Math;r=Math.max(t,r),i=i.min.call(i,4294901760,r+(65536-r%65536)%65536);t:{try{S.grow(i-k.byteLength+65535>>>16),R();var a=1;break t}catch(t){}a=void 0}if(a)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,i){var a=e+n;for(i=C[t+4*i>>2>>>0]=a,a=0;a<r.length;++a)T[i++>>0>>>0]=r.charCodeAt(a);T[i>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();C[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),C[e>>2>>>0]=r,0},ba:function(t){O||0<z||(Ot(),Z(L),xt(0),lt[1].length&&dt(1,10),lt[2].length&&dt(2,10)),O||0<z||(e.onExit&&e.onExit(t),A=!0),f(t,new Y(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var i=0,a=0;a<n;a++){var s=C[e>>2>>>0],o=C[e+4>>2>>>0];e+=8;for(var u=0;u<o;u++)dt(t,_[s+u>>>0]);i+=o}return C[r>>2>>>0]=i,0},c:function(){return ht},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>q("randomDevice")}());for(var i=0;i<r;i++)T[e+i>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=kt();try{return at(t)(e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},fa:function(t,e,n){var r=kt();try{return at(t)(e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},J:function(t){var e=kt();try{return at(t)()}catch(t){if(Tt(e),t!==t+0)throw t;St(1,0)}},e:function(t,e){var n=kt();try{return at(t)(e)}catch(t){if(Tt(n),t!==t+0)throw t;St(1,0)}},N:function(t,e,n){var r=kt();try{return at(t)(e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},O:function(t,e,n){var r=kt();try{return at(t)(e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},j:function(t,e,n){var r=kt();try{return at(t)(e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},o:function(t,e,n,r){var i=kt();try{return at(t)(e,n,r)}catch(t){if(Tt(i),t!==t+0)throw t;St(1,0)}},p:function(t,e,n,r,i){var a=kt();try{return at(t)(e,n,r,i)}catch(t){if(Tt(a),t!==t+0)throw t;St(1,0)}},M:function(t,e,n,r,i,a){var s=kt();try{return at(t)(e,n,r,i,a)}catch(t){if(Tt(s),t!==t+0)throw t;St(1,0)}},r:function(t,e,n,r,i,a){var s=kt();try{return at(t)(e,n,r,i,a)}catch(t){if(Tt(s),t!==t+0)throw t;St(1,0)}},v:function(t,e,n,r,i,a,s){var o=kt();try{return at(t)(e,n,r,i,a,s)}catch(t){if(Tt(o),t!==t+0)throw t;St(1,0)}},K:function(t,e,n,r,i,a,s,o){var u=kt();try{return at(t)(e,n,r,i,a,s,o)}catch(t){if(Tt(u),t!==t+0)throw t;St(1,0)}},D:function(t,e,n,r,i,a,s,o,u,c,l,d){var h=kt();try{return at(t)(e,n,r,i,a,s,o,u,c,l,d)}catch(t){if(Tt(h),t!==t+0)throw t;St(1,0)}},X:function(t,e,n,r,i,a,s,o){var u=kt();try{return Pt(t,e,n,r,i,a,s,o)}catch(t){if(Tt(u),t!==t+0)throw t;St(1,0)}},V:function(t,e,n,r,i,a,s){var o=kt();try{return Et(t,e,n,r,i,a,s)}catch(t){if(Tt(o),t!==t+0)throw t;St(1,0)}},U:function(t,e,n,r,i){var a=kt();try{return Mt(t,e,n,r,i)}catch(t){if(Tt(a),t!==t+0)throw t;St(1,0)}},Z:function(t,e,n,r){var i=kt();try{return Rt(t,e,n,r)}catch(t){if(Tt(i),t!==t+0)throw t;St(1,0)}},W:function(t){var e=kt();try{return At(t)}catch(t){if(Tt(e),t!==t+0)throw t;St(1,0)}},Y:function(t,e){var n=kt();try{return Ft(t,e)}catch(t){if(Tt(n),t!==t+0)throw t;St(1,0)}},T:function(t,e,n){var r=kt();try{return Nt(t,e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},f:function(t){var e=kt();try{at(t)()}catch(t){if(Tt(e),t!==t+0)throw t;St(1,0)}},q:function(t,e){var n=kt();try{at(t)(e)}catch(t){if(Tt(n),t!==t+0)throw t;St(1,0)}},h:function(t,e,n){var r=kt();try{at(t)(e,n)}catch(t){if(Tt(r),t!==t+0)throw t;St(1,0)}},da:function(t,e,n,r){var i=kt();try{at(t)(e,n,r)}catch(t){if(Tt(i),t!==t+0)throw t;St(1,0)}},l:function(t,e,n,r){var i=kt();try{at(t)(e,n,r)}catch(t){if(Tt(i),t!==t+0)throw t;St(1,0)}},t:function(t,e,n,r,i){var a=kt();try{at(t)(e,n,r,i)}catch(t){if(Tt(a),t!==t+0)throw t;St(1,0)}},u:function(t,e,n,r,i,a){var s=kt();try{at(t)(e,n,r,i,a)}catch(t){if(Tt(s),t!==t+0)throw t;St(1,0)}},x:function(t,e,n,r,i,a,s){var o=kt();try{at(t)(e,n,r,i,a,s)}catch(t){if(Tt(o),t!==t+0)throw t;St(1,0)}},z:function(t,e,n,r,i,a,s,o){var u=kt();try{at(t)(e,n,r,i,a,s,o)}catch(t){if(Tt(u),t!==t+0)throw t;St(1,0)}},ga:function(t,e,n,r,i,a,s,o,u){var c=kt();try{at(t)(e,n,r,i,a,s,o,u)}catch(t){if(Tt(c),t!==t+0)throw t;St(1,0)}},A:function(t,e,n,r,i,a,s,o,u,c,l){var d=kt();try{at(t)(e,n,r,i,a,s,o,u,c,l)}catch(t){if(Tt(d),t!==t+0)throw t;St(1,0)}},C:function(t,e,n,r,i,a,s,o,u,c,l,d,h,p,f,m){var g=kt();try{at(t)(e,n,r,i,a,s,o,u,c,l,d,h,p,f,m)}catch(t){if(Tt(g),t!==t+0)throw t;St(1,0)}},aa:function(t,e,n,r,i,a,s,o){var u=kt();try{jt(t,e,n,r,i,a,s,o)}catch(t){if(Tt(u),t!==t+0)throw t;St(1,0)}},_:function(t,e,n,r,i,a,s,o,u,c,l,d){var h=kt();try{$t(t,e,n,r,i,a,s,o,u,c,l,d)}catch(t){if(Tt(h),t!==t+0)throw t;St(1,0)}},$:function(t,e,n,r,i,a){var s=kt();try{Dt(t,e,n,r,i,a)}catch(t){if(Tt(s),t!==t+0)throw t;St(1,0)}},n:function(t){return t},F:function(t){ht=t},ha:gt,y:function(t,e,n,r){return gt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,S=e.asm.Ka,R(),F=e.asm.ib,M.unshift(e.asm.La),W--,e.monitorRunDependencies&&e.monitorRunDependencies(W),0==W&&(null!==G&&(clearInterval(G),G=null),H&&(t=H,H=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!v&&(m||g)){if("function"==typeof fetch&&!U.startsWith("file://"))return fetch(U,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+U+"'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(U,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),q(t)}))}var i={a:bt};if(W++,e.monitorRunDependencies&&e.monitorRunDependencies(W),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||J()||U.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(U,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var yt,vt=e._malloc=function(){return(vt=e._malloc=e.asm.eb).apply(null,arguments)},wt=e._free=function(){return(wt=e._free=e.asm.fb).apply(null,arguments)},xt=e._fflush=function(){return(xt=e._fflush=e.asm.gb).apply(null,arguments)},Ot=e.___funcs_on_exit=function(){return(Ot=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},St=e._setThrew=function(){return(St=e._setThrew=e.asm.jb).apply(null,arguments)},kt=e.stackSave=function(){return(kt=e.stackSave=e.asm.kb).apply(null,arguments)},Tt=e.stackRestore=function(){return(Tt=e.stackRestore=e.asm.lb).apply(null,arguments)},_t=e.stackAlloc=function(){return(_t=e.stackAlloc=e.asm.mb).apply(null,arguments)},It=e.___cxa_can_catch=function(){return(It=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Ct=e.___cxa_is_pointer_type=function(){return(Ct=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},At=e.dynCall_j=function(){return(At=e.dynCall_j=e.asm.pb).apply(null,arguments)},Et=e.dynCall_iiiiij=function(){return(Et=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Nt=e.dynCall_jii=function(){return(Nt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},Dt=e.dynCall_vjji=function(){return(Dt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},$t=e.dynCall_viiijjjii=function(){return($t=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Rt=e.dynCall_iij=function(){return(Rt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ft=e.dynCall_ji=function(){return(Ft=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Pt=e.dynCall_iiiiiij=function(){return(Pt=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},Mt=e.dynCall_iiij=function(){return(Mt=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Lt(){function t(){if(!yt&&(yt=!0,e.calledRun=!0,!A)){if(Z(M),i(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();B.unshift(t)}Z(B)}}if(!(0<W)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)V();Z(P),0<W||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return D(t,_,e,n)},e.lengthBytesUTF8=$,e.stackSave=kt,e.stackRestore=Tt,e.stackAlloc=_t,H=function t(){yt||Lt(),yt||(H=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Lt(),t.ready});t.exports=i},4537:t=>{"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,i=2,a=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(t){if(a)if(a=!1,t)s(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(t){a&&(a=!1,s(t))}}))}},7419:(t,e)=>{"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),i=new Array(123),a=0;a<64;)i[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(t,e,n){for(var i,a=null,s=[],o=0,u=0;e<n;){var c=t[e++];switch(u){case 0:s[o++]=r[c>>2],i=(3&c)<<4,u=1;break;case 1:s[o++]=r[i|c>>4],i=(15&c)<<2,u=2;break;case 2:s[o++]=r[i|c>>6],s[o++]=r[63&c],u=0}o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0)}return u&&(s[o++]=r[i],s[o++]=61,1===u&&(s[o++]=61)),a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var s="invalid encoding";n.decode=function(t,e,n){for(var r,a=n,o=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&o>1)break;if(void 0===(c=i[c]))throw Error(s);switch(o){case 0:r=c,o=1;break;case 1:e[n++]=r<<2|(48&c)>>4,r=c,o=2;break;case 2:e[n++]=(15&r)<<4|(60&c)>>2,r=c,o=3;break;case 3:e[n++]=(3&r)<<6|c,o=0}}if(1===o)throw Error(s);return n-a},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},945:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function a(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function o(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:a,t.writeFloatBE=r?a:i,t.readFloatLE=r?s:o,t.readFloatBE=r?o:s}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var a=Math.floor(Math.log(e)/Math.LN2);t((i<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,n,r)}}function s(t,e,n){var r=t(e,n),i=2*(r>>31)+1,a=r>>>23&255,s=8388607&r;return 255===a?s?NaN:i*(1/0):0===a?1401298464324817e-60*i*s:i*Math.pow(2,a-150)*(s+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,r),t.readFloatLE=s.bind(null,i),t.readFloatBE=s.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function a(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function o(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:a,t.writeDoubleBE=r?a:i,t.readDoubleLE=r?s:o,t.readDoubleBE=r?o:s}():function(){function e(t,e,n,r,i,a){var s=r<0?1:0;if(s&&(r=-r),0===r)t(0,i,a+e),t(1/r>0?0:2147483648,i,a+n);else if(isNaN(r))t(0,i,a+e),t(2146959360,i,a+n);else if(r>17976931348623157e292)t(0,i,a+e),t((s<<31|2146435072)>>>0,i,a+n);else{var o;if(r<22250738585072014e-324)t((o=r/5e-324)>>>0,i,a+e),t((s<<31|o/4294967296)>>>0,i,a+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(o=r*Math.pow(2,-u))>>>0,i,a+e),t((s<<31|u+1023<<20|1048576*o&1048575)>>>0,i,a+n)}}}function s(t,e,n,r,i){var a=t(r,i+e),s=t(r,i+n),o=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+a;return 2047===u?c?NaN:o*(1/0):0===u?5e-324*o*c:o*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=s.bind(null,i,0,4),t.readDoubleBE=s.bind(null,a,4,0)}(),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function r(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:t=>{"use strict";t.exports=function(t,e,n){var r=n||8192,i=r>>>1,a=null,s=r;return function(n){if(n<1||n>i)return t(n);s+n>r&&(a=t(r),s=0);var o=e.call(a,s,s+=n);return 7&s&&(s=1+(7|s)),o}}},4997:(t,e)=>{"use strict";var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,i=null,a=[],s=0;e<n;)(r=t[e++])<128?a[s++]=r:r>191&&r<224?a[s++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[s++]=55296+(r>>10),a[s++]=56320+(1023&r)):a[s++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))},n.write=function(t,e,n){for(var r,i,a=n,s=0;s<t.length;++s)(r=t.charCodeAt(s))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=t.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-a}},3442:(t,e)=>{"use strict";e.__esModule=!0;var n=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=n},3720:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},a={};function s(t,e){var n,r,s;return e?(s=0<=(t>>>=0)&&t<256)&&(r=a[t])?r:(n=u(t,(0|t)<0?-1:0,!0),s&&(a[t]=n),n):(s=-128<=(t|=0)&&t<128)&&(r=i[t])?r:(n=u(t,t<0?-1:0,!1),s&&(i[t]=n),n)}function o(t,e){if(isNaN(t))return e?b:g;if(e){if(t<0)return b;if(t>=p)return O}else{if(t<=-f)return S;if(t+1>=f)return x}return t<0?o(-t,e).neg():u(t%h|0,t/h|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=s,n.fromNumber=o,n.fromBits=u;var c=Math.pow;function l(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(t.substring(1),e,n).neg();for(var i=o(c(n,8)),a=g,s=0;s<t.length;s+=8){var u=Math.min(8,t.length-s),d=parseInt(t.substring(s,s+u),n);if(u<8){var h=o(c(n,u));a=a.mul(h).add(o(d))}else a=(a=a.mul(i)).add(o(d))}return a.unsigned=e,a}function d(t,e){return"number"==typeof t?o(t,e):"string"==typeof t?l(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=s(1<<24),g=s(0);n.ZERO=g;var b=s(0,!0);n.UZERO=b;var y=s(1);n.ONE=y;var v=s(1,!0);n.UONE=v;var w=s(-1);n.NEG_ONE=w;var x=u(-1,2147483647,!1);n.MAX_VALUE=x;var O=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=O;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var k=n.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=o(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=o(c(t,6),this.unsigned),a=this,s="";;){var u=a.div(i),l=(a.sub(u.mul(i)).toInt()>>>0).toString(t);if((a=u).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(t){return r(t)||(t=d(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},k.eq=k.equals,k.notEquals=function(t){return!this.eq(t)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(t){return this.comp(t)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(t){return this.comp(t)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(t){return this.comp(t)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(t){return this.comp(t)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(t){if(r(t)||(t=d(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},k.neg=k.negate,k.add=function(t){r(t)||(t=d(t));var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,s=t.high>>>16,o=65535&t.high,c=t.low>>>16,l=0,h=0,p=0,f=0;return p+=(f+=a+(65535&t.low))>>>16,h+=(p+=i+c)>>>16,l+=(h+=n+o)>>>16,l+=e+s,u((p&=65535)<<16|(f&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(t){return r(t)||(t=d(t)),this.add(t.neg())},k.sub=k.subtract,k.multiply=function(t){if(this.isZero())return g;if(r(t)||(t=d(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(S))return t.isOdd()?S:g;if(t.eq(S))return this.isOdd()?S:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return o(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,a=this.low>>>16,s=65535&this.low,c=t.high>>>16,l=65535&t.high,h=t.low>>>16,p=65535&t.low,f=0,b=0,y=0,v=0;return y+=(v+=s*p)>>>16,b+=(y+=a*p)>>>16,y&=65535,b+=(y+=s*h)>>>16,f+=(b+=i*p)>>>16,b&=65535,f+=(b+=a*h)>>>16,b&=65535,f+=(b+=s*l)>>>16,f+=n*p+i*h+a*l+s*c,u((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(b&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(t){if(r(t)||(t=d(t)),t.isZero())throw Error("division by zero");var n,i,a;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return v;a=b}else{if(this.eq(S))return t.eq(y)||t.eq(w)?S:t.eq(S)?y:(n=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?y:w:(i=this.sub(t.mul(n)),a=n.add(i.div(t)));if(t.eq(S))return this.unsigned?b:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=g}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),l=s<=48?1:c(2,s-48),h=o(n),p=h.mul(t);p.isNegative()||p.gt(i);)p=(h=o(n-=l,this.unsigned)).mul(t);h.isZero()&&(h=y),a=a.add(h),i=i.sub(p)}return a},k.div=k.divide,k.modulo=function(t){return r(t)||(t=d(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return u(~this.low,~this.high,this.unsigned)},k.and=function(t){return r(t)||(t=d(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},k.or=function(t){return r(t)||(t=d(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},k.xor=function(t){return r(t)||(t=d(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},k.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},k.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},k.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},1446:(t,e,n)=>{"use strict";var r,i,a,s=n(2100),o=s.Reader,u=s.Writer,c=s.util,l=s.roots.default||(s.roots.default={});l.onnx=((a={}).Version=(r={},(i=Object.create(r))[r[0]="_START_VERSION"]=0,i[r[1]="IR_VERSION_2017_10_10"]=1,i[r[2]="IR_VERSION_2017_10_30"]=2,i[r[3]="IR_VERSION_2017_11_3"]=3,i[r[4]="IR_VERSION_2019_1_22"]=4,i[r[5]="IR_VERSION"]=5,i),a.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.s=c.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=c.emptyArray,t.prototype.ints=c.emptyArray,t.prototype.strings=c.emptyArray,t.prototype.tensors=c.emptyArray,t.prototype.graphs=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.f&&t.hasOwnProperty("f")&&e.uint32(21).float(t.f),null!=t.i&&t.hasOwnProperty("i")&&e.uint32(24).int64(t.i),null!=t.s&&t.hasOwnProperty("s")&&e.uint32(34).bytes(t.s),null!=t.t&&t.hasOwnProperty("t")&&l.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&t.hasOwnProperty("g")&&l.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)l.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)l.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(106).string(t.docString),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&e.uint32(170).string(t.refAttrName),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.AttributeProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 21:r.refAttrName=t.string();break;case 13:r.docString=t.string();break;case 20:r.type=t.int32();break;case 2:r.f=t.float();break;case 3:r.i=t.int64();break;case 4:r.s=t.bytes();break;case 5:r.t=l.onnx.TensorProto.decode(t,t.uint32());break;case 6:r.g=l.onnx.GraphProto.decode(t,t.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.floats.push(t.float());else r.floats.push(t.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.ints.push(t.int64());else r.ints.push(t.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(t.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(l.onnx.GraphProto.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!c.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(c.isInteger(t.i)||t.i&&c.isInteger(t.i.low)&&c.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||c.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=l.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=l.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(c.isInteger(t.ints[e])||t.ints[e]&&c.isInteger(t.ints[e].low)&&c.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||c.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=l.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e){var n;if(n=l.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.AttributeProto)return t;var e=new l.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(c.Long?(e.i=c.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?c.base64.decode(t.s,e.s=c.newBuffer(c.base64.length(t.s)),0):t.s.length&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=l.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=l.onnx.GraphProto.fromObject(t.g)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)c.Long?(e.ints[n]=c.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new c.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?c.base64.decode(t.strings[n],e.strings[n]=c.newBuffer(c.base64.length(t.strings[n])),0):t.strings[n].length&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=l.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=l.onnx.GraphProto.fromObject(t.graphs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),e.defaults){if(n.name="",n.f=0,c.Long){var r=new c.Long(0,0,!1);n.i=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=c.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=e.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?c.Long.prototype.toString.call(t.i):e.longs===Number?new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?c.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=l.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=l.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var i=0;i<t.floats.length;++i)n.floats[i]=e.json&&!isFinite(t.floats[i])?String(t.floats[i]):t.floats[i]}if(t.ints&&t.ints.length)for(n.ints=[],i=0;i<t.ints.length;++i)"number"==typeof t.ints[i]?n.ints[i]=e.longs===String?String(t.ints[i]):t.ints[i]:n.ints[i]=e.longs===String?c.Long.prototype.toString.call(t.ints[i]):e.longs===Number?new c.LongBits(t.ints[i].low>>>0,t.ints[i].high>>>0).toNumber():t.ints[i];if(t.strings&&t.strings.length)for(n.strings=[],i=0;i<t.strings.length;++i)n.strings[i]=e.bytes===String?c.base64.encode(t.strings[i],0,t.strings[i].length):e.bytes===Array?Array.prototype.slice.call(t.strings[i]):t.strings[i];if(t.tensors&&t.tensors.length)for(n.tensors=[],i=0;i<t.tensors.length;++i)n.tensors[i]=l.onnx.TensorProto.toObject(t.tensors[i],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],i=0;i<t.graphs.length;++i)n.graphs[i]=l.onnx.GraphProto.toObject(t.graphs[i],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?l.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e}(),t}(),a.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.type&&t.hasOwnProperty("type")&&l.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ValueInfoProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 2:r.type=l.onnx.TypeProto.decode(t,t.uint32());break;case 3:r.docString=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=l.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.ValueInfoProto)return t;var e=new l.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=l.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=l.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=c.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(26).string(t.name),null!=t.opType&&t.hasOwnProperty("opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)l.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.NodeProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 3:r.name=t.string();break;case 4:r.opType=t.string();break;case 7:r.domain=t.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(l.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:r.docString=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!c.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!c.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!c.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=l.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.NodeProto)return t;var e=new l.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=l.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=l.onnx.AttributeProto.toObject(t.attribute[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=c.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.irVersion&&t.hasOwnProperty("irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&l.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)l.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ModelProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.irVersion=t.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:r.producerName=t.string();break;case 3:r.producerVersion=t.string();break;case 4:r.domain=t.string();break;case 5:r.modelVersion=t.int64();break;case 6:r.docString=t.string();break;case 7:r.graph=l.onnx.GraphProto.decode(t,t.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(c.isInteger(t.irVersion)||t.irVersion&&c.isInteger(t.irVersion.low)&&c.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=l.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!c.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!c.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(c.isInteger(t.modelVersion)||t.modelVersion&&c.isInteger(t.modelVersion.low)&&c.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=l.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.ModelProto)return t;var e=new l.onnx.ModelProto;if(null!=t.irVersion&&(c.Long?(e.irVersion=c.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(c.Long?(e.modelVersion=c.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=l.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=l.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[]),e.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.irVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",c.Long?(r=new c.Long(0,0,!1),n.modelVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?c.Long.prototype.toString.call(t.irVersion):e.longs===Number?new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?c.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=l.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var i=0;i<t.opsetImport.length;++i)n.opsetImport[i]=l.onnx.OperatorSetIdProto.toObject(t.opsetImport[i],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],i=0;i<t.metadataProps.length;++i)n.metadataProps[i]=l.onnx.StringStringEntryProto.toObject(t.metadataProps[i],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.key&&t.hasOwnProperty("key")&&e.uint32(10).string(t.key),null!=t.value&&t.hasOwnProperty("value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.StringStringEntryProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.key=t.string();break;case 2:r.value=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!c.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!c.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.StringStringEntryProto)return t;var e=new l.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)l.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorAnnotation;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.tensorName=t.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!c.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=l.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorAnnotation)return t;var e=new l.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=l.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=l.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=c.emptyArray,t.prototype.name="",t.prototype.initializer=c.emptyArray,t.prototype.docString="",t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.valueInfo=c.emptyArray,t.prototype.quantizationAnnotation=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)l.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)l.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)l.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)l.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)l.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)l.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.GraphProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(t,t.uint32()));break;case 2:r.name=t.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 10:r.docString=t.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=l.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=l.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=l.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.GraphProto)return t;var e=new l.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=l.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=l.onnx.TensorProto.fromObject(t.initializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=l.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=l.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=l.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=l.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var r=0;r<t.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(t.node[r],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],r=0;r<t.initializer.length;++r)n.initializer[r]=l.onnx.TensorProto.toObject(t.initializer[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],r=0;r<t.input.length;++r)n.input[r]=l.onnx.ValueInfoProto.toObject(t.input[r],e);if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=l.onnx.ValueInfoProto.toObject(t.output[r],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],r=0;r<t.valueInfo.length;++r)n.valueInfo[r]=l.onnx.ValueInfoProto.toObject(t.valueInfo[r],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<t.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=l.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=c.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=c.emptyArray,t.prototype.int32Data=c.emptyArray,t.prototype.stringData=c.emptyArray,t.prototype.int64Data=c.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=c.newBuffer([]),t.prototype.externalData=c.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=c.emptyArray,t.prototype.uint64Data=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&l.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(66).string(t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)l.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.dims.push(t.int64());else r.dims.push(t.int64());break;case 2:r.dataType=t.int32();break;case 3:r.segment=l.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.floatData.push(t.float());else r.floatData.push(t.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.int32Data.push(t.int32());else r.int32Data.push(t.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(t.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.int64Data.push(t.int64());else r.int64Data.push(t.int64());break;case 8:r.name=t.string();break;case 12:r.docString=t.string();break;case 9:r.rawData=t.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:r.dataLocation=t.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.doubleData.push(t.double());else r.doubleData.push(t.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.uint64Data.push(t.uint64());else r.uint64Data.push(t.uint64());break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(c.isInteger(t.dims[e])||t.dims[e]&&c.isInteger(t.dims[e].low)&&c.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!c.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=l.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!c.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||c.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(c.isInteger(t.int64Data[e])||t.int64Data[e]&&c.isInteger(t.int64Data[e].low)&&c.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||c.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(c.isInteger(t.uint64Data[e])||t.uint64Data[e]&&c.isInteger(t.uint64Data[e].low)&&c.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto)return t;var e=new l.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)c.Long?(e.dims[n]=c.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new c.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=l.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?c.base64.decode(t.stringData[n],e.stringData[n]=c.newBuffer(c.base64.length(t.stringData[n])),0):t.stringData[n].length&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)c.Long?(e.int64Data[n]=c.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new c.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?c.base64.decode(t.rawData,e.rawData=c.newBuffer(c.base64.length(t.rawData)),0):t.rawData.length&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=l.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)c.Long?(e.uint64Data[n]=c.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new c.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=c.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?c.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new c.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=l.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],r=0;r<t.floatData.length;++r)n.floatData[r]=e.json&&!isFinite(t.floatData[r])?String(t.floatData[r]):t.floatData[r];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],r=0;r<t.int32Data.length;++r)n.int32Data[r]=t.int32Data[r];if(t.stringData&&t.stringData.length)for(n.stringData=[],r=0;r<t.stringData.length;++r)n.stringData[r]=e.bytes===String?c.base64.encode(t.stringData[r],0,t.stringData[r].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[r]):t.stringData[r];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],r=0;r<t.int64Data.length;++r)"number"==typeof t.int64Data[r]?n.int64Data[r]=e.longs===String?String(t.int64Data[r]):t.int64Data[r]:n.int64Data[r]=e.longs===String?c.Long.prototype.toString.call(t.int64Data[r]):e.longs===Number?new c.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber():t.int64Data[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?c.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],r=0;r<t.doubleData.length;++r)n.doubleData[r]=e.json&&!isFinite(t.doubleData[r])?String(t.doubleData[r]):t.doubleData[r];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],r=0;r<t.uint64Data.length;++r)"number"==typeof t.uint64Data[r]?n.uint64Data[r]=e.longs===String?String(t.uint64Data[r]):t.uint64Data[r]:n.uint64Data[r]=e.longs===String?c.Long.prototype.toString.call(t.uint64Data[r]):e.longs===Number?new c.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0):t.uint64Data[r];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],r=0;r<t.externalData.length;++r)n.externalData[r]=l.onnx.StringStringEntryProto.toObject(t.externalData[r],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?l.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.end=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.begin&&t.hasOwnProperty("begin")&&e.uint32(8).int64(t.begin),null!=t.end&&t.hasOwnProperty("end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto.Segment;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.begin=t.int64();break;case 2:r.end=t.int64();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(c.isInteger(t.begin)||t.begin&&c.isInteger(t.begin.low)&&c.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(c.isInteger(t.end)||t.end&&c.isInteger(t.end.low)&&c.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto.Segment)return t;var e=new l.onnx.TensorProto.Segment;return null!=t.begin&&(c.Long?(e.begin=c.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(c.Long?(e.end=c.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.begin=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.begin=e.longs===String?"0":0;c.Long?(r=new c.Long(0,0,!1),n.end=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?c.Long.prototype.toString.call(t.begin):e.longs===Number?new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?c.Long.prototype.toString.call(t.end):e.longs===Number?new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),a.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)l.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto;t.pos<n;){var i=t.uint32();i>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(l.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&i)}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=l.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto)return t;var e=new l.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=l.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var r=0;r<t.dim.length;++r)n.dim[r]=l.onnx.TensorShapeProto.Dimension.toObject(t.dim[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["dimValue","dimParam"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto.Dimension;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.dimValue=t.int64();break;case 2:r.dimParam=t.string();break;case 3:r.denotation=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(c.isInteger(t.dimValue)||t.dimValue&&c.isInteger(t.dimValue.low)&&c.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!c.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto.Dimension)return t;var e=new l.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(c.Long?(e.dimValue=c.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?c.Long.prototype.toString.call(t.dimValue):e.longs===Number?new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),t}(),a.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["tensorType"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&l.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(50).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.tensorType=l.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:r.denotation=t.string();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){var e=l.onnx.TypeProto.Tensor.verify(t.tensorType);if(e)return"tensorType."+e}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto)return t;var e=new l.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=l.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=l.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.elemType&&t.hasOwnProperty("elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&l.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Tensor;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!c.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=l.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Tensor)return t;var e=new l.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=l.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),t}(),a.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(10).string(t.domain),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.OperatorSetIdProto;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.domain=t.string();break;case 2:r.version=t.int64();break;default:t.skipType(7&i)}}return r},t.decodeDelimited=function(t){return t instanceof o||(t=new o(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(c.isInteger(t.version)||t.version&&c.isInteger(t.version.low)&&c.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.OperatorSetIdProto)return t;var e=new l.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(c.Long?(e.version=c.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",c.Long){var r=new c.Long(0,0,!1);n.version=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?c.Long.prototype.toString.call(t.version):e.longs===Number?new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},t}(),a),t.exports=l},2100:(t,e,n)=>{"use strict";t.exports=n(9482)},9482:(t,e,n)=>{"use strict";var r=e;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=i,i()},1408:(t,e,n)=>{"use strict";t.exports=u;var r,i=n(9693),a=i.LongBits,s=i.utf8;function o(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},d=function(){return i.Buffer?function(t){return(u.create=function(t){return i.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l};function h(){var t=new a(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw o(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw o(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new a(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=d(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw o(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},u.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw o(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){r=t,u.create=d(),r._configure();var e=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},593:(t,e,n)=>{"use strict";t.exports=a;var r=n(1408);(a.prototype=Object.create(r.prototype)).constructor=a;var i=n(9693);function a(t){r.call(this,t)}a._configure=function(){i.Buffer&&(a.prototype._slice=i.Buffer.prototype.slice)},a.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},a._configure()},5054:t=>{"use strict";t.exports={}},5994:(t,e,n)=>{"use strict";e.Service=n(7948)},7948:(t,e,n)=>{"use strict";t.exports=i;var r=n(9693);function i(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,a,s){if(!a)throw TypeError("request must be specified");var o=this;if(!s)return r.asPromise(t,o,e,n,i,a);if(o.rpcImpl)try{return o.rpcImpl(e,n[o.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(t,n){if(t)return o.emit("error",t,e),s(t);if(null!==n){if(!(n instanceof i))try{n=i[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return o.emit("error",t,e),s(t)}return o.emit("data",n,e),s(null,n)}o.end(!0)}))}catch(t){return o.emit("error",t,e),void setTimeout((function(){s(t)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(t,e,n)=>{"use strict";t.exports=i;var r=n(9693);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var a=i.zero=new i(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return a;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"==typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):a},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var o=String.prototype.charCodeAt;i.fromHash=function(t){return t===s?a:new i((o.call(t,0)|o.call(t,1)<<8|o.call(t,2)<<16|o.call(t,3)<<24)>>>0,(o.call(t,4)|o.call(t,5)<<8|o.call(t,6)<<16|o.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},9693:function(t,e,n){"use strict";var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function a(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=a,r.ProtocolError=a("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:(t,e,n)=>{"use strict";t.exports=d;var r,i=n(9693),a=i.LongBits,s=i.base64,o=i.utf8;function u(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function d(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(t,e,n){e[n]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function g(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}d.create=h(),d.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(t,e,n){return this.tail=this.tail.next=new u(t,e,n),this.len+=e,this},f.prototype=Object.create(u.prototype),f.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},d.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},d.prototype.int32=function(t){return t<0?this._push(m,10,a.fromNumber(t)):this.uint32(t)},d.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},d.prototype.uint64=function(t){var e=a.from(t);return this._push(m,e.length(),e)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(t){var e=a.from(t).zzEncode();return this._push(m,e.length(),e)},d.prototype.bool=function(t){return this._push(p,1,t?1:0)},d.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(t){var e=a.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},d.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var b=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};d.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(i.isString(t)){var n=d.alloc(e=s.length(t));s.decode(t,n,0),t=n}return this.uint32(e)._push(b,e,t)},d.prototype.string=function(t){var e=o.length(t);return e?this.uint32(e)._push(o.write,e,t):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},d.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},d._configure=function(t){r=t,d.create=h(),r._configure()}},3155:(t,e,n)=>{"use strict";t.exports=a;var r=n(1173);(a.prototype=Object.create(r.prototype)).constructor=a;var i=n(9693);function a(){r.call(this)}function s(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}a._configure=function(){a.alloc=i._Buffer_allocUnsafe,a.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},a.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(a.writeBytesBuffer,e,t),this},a.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},a._configure()},7714:(t,e,n)=>{"use strict";e.R=void 0;const r=n(6919),i=n(7448);e.R=new class{async init(){}async createSessionHandler(t,e){const n=new r.Session(e);return await n.loadModel(t),new i.OnnxjsSessionHandler(n)}}},4200:(t,e,n)=>{"use strict";e.c8=e.rX=void 0;const r=n(1670),i=n(5381),a=n(2157),s=n(2306);e.rX=()=>{if(("number"!=typeof r.env.wasm.initTimeout||r.env.wasm.initTimeout<0)&&(r.env.wasm.initTimeout=0),"boolean"!=typeof r.env.wasm.simd&&(r.env.wasm.simd=!0),"boolean"!=typeof r.env.wasm.proxy&&(r.env.wasm.proxy=!1),"number"!=typeof r.env.wasm.numThreads||!Number.isInteger(r.env.wasm.numThreads)||r.env.wasm.numThreads<=0){const t="undefined"==typeof navigator?(0,i.cpus)().length:navigator.hardwareConcurrency;r.env.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,a.initWasm)()}async createSessionHandler(t,e){const n=new s.OnnxruntimeWebAssemblySessionHandler;return await n.loadModel(t,e),Promise.resolve(n)}}},6018:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(1670),e);const a=n(1670);{const t=n(7714).R;(0,a.registerBackend)("webgl",t,-10)}{const t=n(4200).c8;(0,a.registerBackend)("cpu",t,10),(0,a.registerBackend)("wasm",t,10),(0,a.registerBackend)("xnnpack",t,9)}},246:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class n{constructor(t){Object.assign(this,t)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(t=>""+this[t]).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=t=>new n(t)},7778:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const r=n(1446),i=n(9395),a=n(9162),s=n(2517);var o=i.onnxruntime.experimental.fbs;class u{constructor(t){if(this._attributes=new Map,null!=t){for(const e of t)e instanceof r.onnx.AttributeProto?this._attributes.set(e.name,[u.getValue(e),u.getType(e)]):e instanceof o.Attribute&&this._attributes.set(e.name(),[u.getValue(e),u.getType(e)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,e,n){this._attributes.set(t,[n,e])}delete(t){this._attributes.delete(t)}getFloat(t,e){return this.get(t,"float",e)}getInt(t,e){return this.get(t,"int",e)}getString(t,e){return this.get(t,"string",e)}getTensor(t,e){return this.get(t,"tensor",e)}getFloats(t,e){return this.get(t,"floats",e)}getInts(t,e){return this.get(t,"ints",e)}getStrings(t,e){return this.get(t,"strings",e)}getTensors(t,e){return this.get(t,"tensors",e)}get(t,e,n){const r=this._attributes.get(t);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: "+t)}if(r[1]!==e)throw new Error(`type mismatch: expected ${e} but got ${r[1]}`);return r[0]}static getType(t){const e=t instanceof r.onnx.AttributeProto?t.type:t.type();switch(e){case r.onnx.AttributeProto.AttributeType.FLOAT:return"float";case r.onnx.AttributeProto.AttributeType.INT:return"int";case r.onnx.AttributeProto.AttributeType.STRING:return"string";case r.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case r.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case r.onnx.AttributeProto.AttributeType.INTS:return"ints";case r.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case r.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: "+r.onnx.AttributeProto.AttributeType[e])}}static getValue(t){const e=t instanceof r.onnx.AttributeProto?t.type:t.type();if(e===r.onnx.AttributeProto.AttributeType.GRAPH||e===r.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const n=this.getValueNoCheck(t);if(e===r.onnx.AttributeProto.AttributeType.INT&&s.LongUtil.isLong(n))return s.LongUtil.longToNumber(n);if(e===r.onnx.AttributeProto.AttributeType.INTS){const t=n,e=new Array(t.length);for(let n=0;n<t.length;n++){const r=t[n];e[n]=s.LongUtil.longToNumber(r)}return e}if(e===r.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof r.onnx.AttributeProto?a.Tensor.fromProto(n):a.Tensor.fromOrtTensor(n);if(e===r.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof r.onnx.AttributeProto)return n.map(t=>a.Tensor.fromProto(t));if(t instanceof o.Attribute)return n.map(t=>a.Tensor.fromOrtTensor(t))}if(e===r.onnx.AttributeProto.AttributeType.STRING&&t instanceof r.onnx.AttributeProto){const t=n;return(0,s.decodeUtf8String)(t)}return e===r.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof r.onnx.AttributeProto?n.map(s.decodeUtf8String):n}static getValueNoCheck(t){return t instanceof r.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case r.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case r.onnx.AttributeProto.AttributeType.INT:return t.i;case r.onnx.AttributeProto.AttributeType.STRING:return t.s;case r.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case r.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case r.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case r.onnx.AttributeProto.AttributeType.INTS:return t.ints;case r.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case r.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case r.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error("unsupported attribute type: "+r.onnx.AttributeProto.AttributeType[t.type])}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case o.AttributeType.FLOAT:return t.f();case o.AttributeType.INT:return t.i();case o.AttributeType.STRING:return t.s();case o.AttributeType.TENSOR:return t.t();case o.AttributeType.GRAPH:return t.g();case o.AttributeType.FLOATS:return t.floatsArray();case o.AttributeType.INTS:{const e=[];for(let n=0;n<t.intsLength();n++)e.push(t.ints(n));return e}case o.AttributeType.STRINGS:{const e=[];for(let n=0;n<t.stringsLength();n++)e.push(t.strings(n));return e}case o.AttributeType.TENSORS:{const e=[];for(let n=0;n<t.tensorsLength();n++)e.push(t.tensors(n));return e}default:throw new Error("unsupported attribute type: "+o.AttributeType[t.type()])}}}e.Attribute=u},7091:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const r=n(5038),i=new Map;async function a(t){const n=e.backend;if(void 0!==n[t]&&function(t){const e=t;return"initialize"in e&&"function"==typeof e.initialize&&"createSessionHandler"in e&&"function"==typeof e.createSessionHandler&&"dispose"in e&&"function"==typeof e.dispose}(n[t])){const e=n[t];let r=e.initialize();if("object"==typeof r&&"then"in r&&(r=await r),r)return i.set(t,e),e}}e.backend={webgl:new r.WebGLBackend},e.resolveBackend=async function t(e){if(!e)return t(["webgl"]);{const t="string"==typeof e?[e]:e;for(const e of t){const t=i.get(e);if(t)return t;const n=await a(e);if(n)return n}}throw new Error("no available backend to use")}},5038:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const r=n(1670),i=n(6231),a=n(6416),s=n(7305);e.WebGLBackend=class{get contextId(){return r.env.webgl.contextId}set contextId(t){r.env.webgl.contextId=t}get matmulMaxBatchSize(){return r.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){r.env.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return r.env.webgl.textureCacheMode}set textureCacheMode(t){r.env.webgl.textureCacheMode=t}get pack(){return r.env.webgl.pack}set pack(t){r.env.webgl.pack=t}get async(){return r.env.webgl.async}set async(t){r.env.webgl.async=t}initialize(){try{return this.glContext=(0,s.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),i.Logger.setWithEnv(r.env),i.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return i.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. "+t),!1}}createSessionHandler(t){return new a.WebGLSessionHandler(this,t)}dispose(){this.glContext.dispose()}}},5107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const r=n(2517),i=n(8520),a=n(5060),s=n(7859),o=n(9390);class u extends i.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new i.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new i.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){const t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){const e=t.unpackedShape,n=[t.width,t.height],r={},s="getOutputCoords";switch(e.length){case 0:r[s]=this.getOutputScalarCoords();break;case 1:r[s]=this.getOutputPacked1DCoords(e,n);break;case 2:r[s]=this.getOutputPacked2DCoords(e,n);break;case 3:r[s]=this.getOutputPacked3DCoords(e,n);break;default:r[s]=this.getOutputPackedNDCoords(e,n)}const o=`\n      void setOutput(vec4 val) {\n        ${(0,a.getGlsl)(this.context.glContext.version).output} = val;\n      }\n    `;return r.floatTextureSetRGBA=new i.GlslLibRoutine(o),r}getUnpackedOutputSamplingSnippet(t){const e=t.unpackedShape,n=[t.width,t.height],r={},s="getOutputCoords";switch(e.length){case 0:r[s]=this.getOutputScalarCoords();break;case 1:r[s]=this.getOutputUnpacked1DCoords(e,n);break;case 2:r[s]=this.getOutputUnpacked2DCoords(e,n);break;case 3:r[s]=this.getOutputUnpacked3DCoords(e,n);break;case 4:r[s]=this.getOutputUnpacked4DCoords(e,n);break;case 5:r[s]=this.getOutputUnpacked5DCoords(e,n);break;case 6:r[s]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error("Unsupported output dimensionality: "+e.length)}const o=`\n        void setOutput(float val) {\n          ${(0,a.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);\n        }\n    `;return r.floatTextureSetR=new i.GlslLibRoutine(o),r}getOutputScalarCoords(){return new i.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(t,e){const n=e;let r="";return 1===n[0]?(r=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ${n[1]}.0);\n          }\n        `,new i.GlslLibRoutine(r)):1===n[1]?(r=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ${n[0]}.0);\n          }\n        `,new i.GlslLibRoutine(r)):(r=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(${n[0]}, ${n[1]}));\n          return 2 * (resTexRC.y * ${n[0]} + resTexRC.x);\n        }\n      `,new i.GlslLibRoutine(r))}getOutputPacked2DCoords(t,e){let n="";if(r.ArrayUtil.arraysEqual(t,e))return n=`\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));\n        }\n      `,new i.GlslLibRoutine(n);const a=e,s=Math.ceil(t[1]/2);return n=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${a[0]}, ${a[1]}));\n\n          int index = resTexRC.y * ${a[0]} + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${s}) * 2;\n          int c = 2 * (index / ${s});\n\n          return ivec2(r, c);\n        }\n      `,new i.GlslLibRoutine(n)}getOutputPacked3DCoords(t,e){const n=[e[0],e[1]],r=Math.ceil(t[2]/2),a=r*Math.ceil(t[1]/2),s=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${n[0]}, ${n[1]}));\n          int index = resTexRC.y * ${n[0]} + resTexRC.x;\n\n          int b = index / ${a};\n          index -= b * ${a};\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${r}) * 2;\n          int c = 2 * (index / ${r});\n\n          return ivec3(b, r, c);\n        }\n      `;return new i.GlslLibRoutine(s)}getOutputPackedNDCoords(t,e){const n=[e[0],e[1]],r=Math.ceil(t[t.length-1]/2),a=r*Math.ceil(t[t.length-2]/2);let s=a,o="",u="b, r, c";for(let i=2;i<t.length-1;i++)s*=t[t.length-i-1],o=`\n      int b${i} = index / ${s};\n      index -= b${i} * ${s};\n    `+o,u=`b${i}, `+u;const c=`\n      ivec${t.length} getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.y * ${n[0]} + resTexRC.x;\n\n        ${o}\n\n        int b = index / ${a};\n        index -= b * ${a};\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ${r}) * 2;\n        int c = 2 * (index / ${r});\n\n        return ivec${t.length}(${u});\n      }\n    `;return new i.GlslLibRoutine(c)}getOutputUnpacked1DCoords(t,e){const n=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          return resTexRC.y * ${e[0]} + resTexRC.x;\n        }\n      `;return new i.GlslLibRoutine(n)}getOutputUnpacked2DCoords(t,e){const n=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          int r = index / ${t[1]};\n          int c = index - r * ${t[1]};\n          return ivec2(r, c);\n        }\n      `;return new i.GlslLibRoutine(n)}getOutputUnpacked3DCoords(t,e){let n="";const r=t.length;let a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let i=r-3;i>=0;--i)a[i]=a[i+1]*t[i+1];const s=["r","c","d"],o=a.map((t,e)=>`int ${s[e]} = index / ${t}; ${e===a.length-1?`int ${s[e+1]} = index - ${s[e]} * ${t}`:`index -= ${s[e]} * ${t}`};`).join("");return n=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          ${o}\n          return ivec3(r, c, d);\n        }\n      `,new i.GlslLibRoutine(n)}getOutputUnpacked4DCoords(t,e){let n="";const r=t.length;let a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let i=r-3;i>=0;--i)a[i]=a[i+1]*t[i+1];const s=["r","c","d","d2"],o=a.map((t,e)=>`int ${s[e]} = index / ${t}; ${e===a.length-1?`int ${s[e+1]} = index - ${s[e]} * ${t}`:`index -= ${s[e]} * ${t}`};`).join("");return n=`\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          ${o}\n          return ivec4(r, c, d, d2);\n        }\n      `,new i.GlslLibRoutine(n)}getOutputUnpacked5DCoords(t,e){let n="";const r=t.length;let a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let i=r-3;i>=0;--i)a[i]=a[i+1]*t[i+1];const s=["r","c","d","d2","d3"],o=a.map((t,e)=>`int ${s[e]} = index / ${t}; ${e===a.length-1?`int ${s[e+1]} = index - ${s[e]} * ${t}`:`index -= ${s[e]} * ${t}`};`).join("");return n=`\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          ${o}\n          return ivec5(r, c, d, d2, d3);\n        }\n      `,new i.GlslLibRoutine(n)}getOutputUnpacked6DCoords(t,e){let n="";const r=t.length;let a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let i=r-3;i>=0;--i)a[i]=a[i+1]*t[i+1];const s=["r","c","d","d2","d3","d4"],o=a.map((t,e)=>`int ${s[e]} = index / ${t}; ${e===a.length-1?`int ${s[e+1]} = index - ${s[e]} * ${t}`:`index -= ${s[e]} * ${t}`};`).join("");return n=`\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(${e[0]}, ${e[1]}));\n         int index = resTexRC.y * ${e[0]} + resTexRC.x;\n         ${o}\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     `,new i.GlslLibRoutine(n)}getCommonUtilFuncs(){const t={};let e="uvFromFlat";t[e]=new i.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),e="packedUVfrom1D",t[e]=new i.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="packedUVfrom2D",t[e]=new i.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="packedUVfrom3D",t[e]=new i.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="sampleTexture";const n=(0,a.getGlsl)(this.context.glContext.version);return t[e]=new i.GlslLibRoutine(`\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ${n.texture2D}(textureSampler, uv).r;\n        }`),t}getInputsSamplingSnippets(){const t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((n,r)=>{const i=this.context.inputTextureLayouts[r],a=(0,o.generateShaderFuncNameFromInputSamplerName)(n);i.isPacked?t[a]=this.getPackedSamplerFromInput(a,n,i):t[a]=this.getUnpackedSamplerFromInput(a,n,i);const s=(0,o.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(n);i.unpackedShape.length<=e.unpackedShape.length&&(i.isPacked?t[s]=this.getPackedSamplerAtOutputCoords(s,i,e,n):t[s]=this.getUnpackedSamplerAtOutputCoords(s,i,e,n))}),t}getPackedSamplerAtOutputCoords(t,e,n,a){const s=e.unpackedShape,u=n.unpackedShape,c=a,l=(0,o.generateShaderFuncNameFromInputSamplerName)(c),d=s.length,h=u.length,p=r.BroadcastUtil.getBroadcastDims(s,u),f=(0,o.getCoordsDataType)(h),m=h-d;let g;const b=(0,o.getGlChannels)();g=0===d?"":h<2&&p.length>=1?"coords = 0;":p.map(t=>`coords.${b[t+m]} = 0;`).join("\n");let y="";y=h<2&&d>0?"coords":s.map((t,e)=>"coords."+b[e+m]).join(", ");let v="return outputValue;";const w=1===r.ShapeUtil.size(s),x=1===r.ShapeUtil.size(u);if(1!==d||w||x){if(w&&!x)v=1===h?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(p.length){const t=d-2,e=d-1;p.indexOf(t)>-1&&p.indexOf(e)>-1?v="return vec4(outputValue.x);":p.indexOf(t)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":p.indexOf(e)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";const O=`\n      vec4 ${t}() {\n        ${f} coords = getOutputCoords();\n        \n        int lastDim = coords.${b[h-1]};\n        coords.${b[h-1]} = coords.${b[h-2]};\n        coords.${b[h-2]} = lastDim;\n      \n        ${g}\n        vec4 outputValue = ${l}(${y});\n        ${v}\n      }\n    `;return new i.GlslLibRoutine(O,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,n,a){const s=[n.width,n.height],u=[e.width,e.height],c=e.unpackedShape.length,l=n.unpackedShape.length,d=e.unpackedShape,h=n.unpackedShape,p=(0,o.generateShaderFuncNameFromInputSamplerName)(a);if(c===l&&r.ArrayUtil.arraysEqual(u,s)){const e=`\n          float ${t}() {\n            return sampleTexture(${a}, TexCoords);\n          }\n        `;return new i.GlslLibRoutine(e,["coordinates.sampleTexture"])}const f=(0,o.getCoordsDataType)(l),m=r.BroadcastUtil.getBroadcastDims(d,h),g=l-c;let b;const y=(0,o.getGlChannels)();b=0===c?"":l<2&&m.length>=1?"coords = 0;":m.map(t=>`coords.${y[t+g]} = 0;`).join("\n");let v="";v=l<2&&c>0?"coords":e.unpackedShape.map((t,e)=>"coords."+y[e+g]).join(", ");const w=`\n        float ${t}() {\n          ${f} coords = getOutputCoords();\n          ${b}\n          return ${p}(${v});\n        }\n      `;return new i.GlslLibRoutine(w,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}}getUnpackedSamplerFromInput(t,e,n){const r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error(`Unsupported dimension ${r.length}-D`)}}getPackedSamplerScalar(t,e){const n=`\n          vec4 ${t}() {\n            return ${(0,a.getGlsl)(this.context.glContext.version).texture2D}(${e}, halfCR);\n          }\n        `;return new i.GlslLibRoutine(n)}getPackedSampler1D(t,e,n){const r=[n.width,n.height],s=[r[1],r[0]],o=(0,a.getGlsl)(this.context.glContext.version),u=`vec4 ${t}(int index) {\n      vec2 uv = packedUVfrom1D(\n      ${s[0]}, ${s[1]}, index);\n      return ${o.texture2D}(${e}, uv);\n    }`;return new i.GlslLibRoutine(u,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,n){const s=n.unpackedShape,o=[n.width,n.height],u=(0,a.getGlsl)(this.context.glContext.version),c=o[0],l=o[1];if(null!=o&&r.ArrayUtil.arraysEqual(s,o)){const n=`vec4 ${t}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${c}.0);\n        return ${u.texture2D}(${e}, uv);\n      }`;return new i.GlslLibRoutine(n)}const d=o,h=Math.ceil(s[1]/2),p=`vec4 ${t}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${d[1]}, ${d[0]}, ${h}, row, col);\n      return ${u.texture2D}(${e}, uv);\n    }`;return new i.GlslLibRoutine(p,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,n){const r=n.unpackedShape,s=[n.width,n.height],u=[s[0],s[1]],c=(0,a.getGlsl)(this.context.glContext.version);if(1===r[0]){const a=r.slice(1),s=[1,2],u=(0,o.squeezeInputShape)(r,a),c=["b","row","col"],l=JSON.parse(JSON.stringify(n));l.unpackedShape=u;const d=this.getPackedSamplerFromInput(t,e,l),h=`${d.routineBody}\n      vec4 ${t}(int b, int row, int col) {\n        return ${t}(${(0,o.getSqueezedParams)(c,s)});\n      } `;return new i.GlslLibRoutine(h,d.dependencies)}const l=u[0],d=u[1],h=Math.ceil(r[2]/2),p=`vec4 ${t}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${d}, ${l}, ${h*Math.ceil(r[1]/2)}, ${h}, b, row, col);\n      return ${c.texture2D}(${e}, uv);}`;return new i.GlslLibRoutine(p,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,n){const r=n.unpackedShape,s=r.length,o=[n.width,n.height],u=(0,a.getGlsl)(this.context.glContext.version),c=[o[0],o[1]],l=c[1],d=c[0],h=Math.ceil(r[s-1]/2);let p=h*Math.ceil(r[s-2]/2),f="int b, int row, int col",m=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let i=2;i<s-1;i++)f=`int b${i}, `+f,p*=r[s-i-1],m=`b${i} * ${p} + `+m;const g=`vec4 ${t}(${f}) {\n      int index = ${m};\n      int texR = index / ${d};\n      int texC = index - texR * ${d};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${l});\n      return ${u.texture2D}(${e}, uv);\n    }`;return new i.GlslLibRoutine(g)}getUnpackedSamplerScalar(t,e,n){const[r,a]=[n.width,n.height];if(1===r&&1===a){const n=`\n          float ${t}() {\n            return sampleTexture(${e}, halfCR);\n          }\n        `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}const s=`\n        float ${t}() {\n          int offset_${e} = coordsToOffset(TexCoords, ${r}, ${a});\n          vec2 uv = uvFromFlat(${r}, ${a}, offset_${e});\n          return sampleTexture(${e}, uv);\n        }\n      `;return new i.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,n){const r=n.width,a=n.height;if(1===a&&1===r){const n=`\n        float ${t}(int index) {\n          return sampleTexture(${e}, halfCR);\n        }\n      `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}if(1===a){const n=`\n          float ${t}(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ${r}.0, 0.5);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}if(1===r){const n=`\n          float ${t}(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${a}.0);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}const s=`\n        float ${t}(int index) {\n          vec2 uv = uvFromFlat(${r}, ${a}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new i.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,n){const a=n.unpackedShape,u=[n.height,n.width];if(null!=u&&r.ArrayUtil.arraysEqual(a,u)){const n=`\n          float ${t}(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(${u[1]}.0, ${u[0]}.0);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture"])}const{newShape:c,keptDims:l}=(0,s.squeezeShape)(a),d=c;if(d.length<a.length){const r=(0,o.squeezeInputShape)(a,d),s=JSON.parse(JSON.stringify(n));s.unpackedShape=r;const u=["col","row"],c=`\n          ${this.getUnpackedSamplerFromInput(t,e,s).routineBody}\n          float ${t}(int row, int col) {\n            return ${t}(${(0,o.getSqueezedParams)(u,l)});\n          }\n        `;return new i.GlslLibRoutine(c,["coordinates.sampleTexture"])}const h=u[1],p=u[0];if(1===p){const n=`\n          float ${t}(int row, int col) {\n            int offset_${e} = coordsToOffset(TexCoords, ${h}, ${p});\n            float index = dot(vec3(row, col, offset_${e}), vec3(${a[1]}, 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ${h}.0);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===h){const n=`\n          float ${t}(int row, int col) {\n            int offset_${e} = coordsToOffset(TexCoords, ${h}, ${p});\n            float index = dot(vec3(row, col, offset_${e}), vec3(${a[1]}, 1, 1));\n            vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new i.GlslLibRoutine(n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const f=`\n        float ${t}(int row, int col) {\n          int index = col * ${a[1]} + row;\n          vec2 uv = uvFromFlat(${h}, ${p}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new i.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,n){const r=n.unpackedShape,a=r[1]*r[2],u=r[2],{newShape:c,keptDims:l}=(0,s.squeezeShape)(r),d=c;if(d.length<r.length){const a=(0,o.squeezeInputShape)(r,d),s=["batch","col","row"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=a;const c=this.getUnpackedSamplerFromInput(t,e,u),h=l.reverse(),p=`\n          ${c.routineBody}\n          float ${t}(int batch, int row, int col) {\n            return ${t}(${(0,o.getSqueezedParams)(s,h)});\n          }\n        `;return new i.GlslLibRoutine(p,c.dependencies)}const h=`\n          float ${t}(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ${a} + col * ${u} + row;\n            vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n            return sampleTexture(${e}, uv);\n          }\n      `;return new i.GlslLibRoutine(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,n){const r=n.unpackedShape,a=r[3],s=r[2]*a,o=`\n        float ${t}(int row, int col, int depth, int depth2) {\n          int index = row * ${r[1]*s} + col * ${s} +\n              depth2 * ${a} + depth;\n          vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new i.GlslLibRoutine(o,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,n){const r=n.unpackedShape,a=r[4],u=r[3]*a,c=r[2]*u,l=r[1]*c,{newShape:d,keptDims:h}=(0,s.squeezeShape)(r);if(d.length<r.length){const a=(0,o.squeezeInputShape)(r,d),s=["row","col","depth","depth2","depth3"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=a;const c=`\n          ${this.getUnpackedSamplerFromInput(t,e,u).routineBody}\n          float ${t}(int row, int col, int depth, int depth2, int depth3) {\n            return ${t}(${(0,o.getSqueezedParams)(s,h)});\n          }\n        `;return new i.GlslLibRoutine(c,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const p=`\n        float ${t}(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ${l} + col * ${c} + depth * ${u} +\n          depth3 * ${a} + depth2;\n          vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new i.GlslLibRoutine(p,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,n){const r=n.unpackedShape,a=r[5],u=r[4]*a,c=r[3]*u,l=r[2]*c,d=r[1]*l,{newShape:h,keptDims:p}=(0,s.squeezeShape)(r);if(h.length<r.length){const a=(0,o.squeezeInputShape)(r,h),s=["row","col","depth","depth2","depth3","depth4"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=a;const c=`\n            ${this.getUnpackedSamplerFromInput(t,e,u).routineBody}\n            float ${t}(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ${t}(${(0,o.getSqueezedParams)(s,p)});\n            }\n          `;return new i.GlslLibRoutine(c,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const f=`\n          float ${t}(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ${d} + col * ${l} + depth * ${c} +\n            depth2 * ${u} + depth3 * ${a} + depth4;\n            vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new i.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,r=t.width,a=t.height,s=[];for(let i=0;i<e-1;++i)s.push(`\n        c[${i}] = offset / ${n[i]};`),s.push(`\n        offset -= c[${i}] * ${n[i]};`);s.push(`\n        c[${e-1}] = offset;`);const o=`\n      void toVec(vec2 texCoords, out int c[${e}]) {\n        int offset = coordsToOffset(texCoords, ${r}, ${a});\n        ${s.join("")}\n      }\n      void toVec(int offset, out int c[${e}]) {\n        ${s.join("")}\n      }\n    `;return{toVec:new i.GlslLibRoutine(o,["coordinates.coordsToOffset"])}}valueFrom(){const t={};return this.context.programInfo.inputNames.forEach((e,n)=>{const r=this.context.inputTextureLayouts[n],a=(r.unpackedShape.length>0?r.unpackedShape:r.shape).length;let s="_"+e;t[s]=new i.GlslLibRoutine(this.getValueFromSingle(e,a,r.width,r.height,!1),["shapeUtils.indicesToOffset"+s,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),s+="_T",t[s]=new i.GlslLibRoutine(this.getValueFromSingle(e,a,r.width,r.height,!0),["shapeUtils.indicesToOffset"+s,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,n,r,i){let s="_"+t;return i&&(s+="_T"),`\n        float ${s}(int m[${e}]) {\n          int offset = indicesToOffset${s}(m);\n          vec2 coords = offsetToCoords(offset, ${n}, ${r});\n          float value = getColorAsFloat(${(0,a.getGlsl)(this.context.glContext.version).texture2D}(${t}, coords));\n          return value;\n        }\n        `}getPackedValueFrom(t,e,n,r,i){let s=`_${t}_Pack`;return i&&(s+="_T"),`\n        vec4 ${s}(int m[${e}]) {\n          int offset = indicesToOffset_${t}(m);\n          vec2 coords = offsetToCoords(offset, ${n}, ${r});\n          return ${(0,a.getGlsl)(this.context.glContext.version).texture2D}(${t}, coords);\n        }\n        `}}e.CoordsGlslLib=u},8520:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional",e.GlslContext=class{constructor(t,e,n,r){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=r}},e.GlslLib=class{constructor(t){this.context=t}},e.GlslLibRoutine=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},e.GlslLibRoutineNode=class{constructor(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(t){if(!t||0===t.length)return[];if(1===t.length)return t;const e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r}static createOrderedNodes(t,e,n,r){for(let i=0;i<t.length;++i)this.dfsTraverse(t[i],e,n,r)}static dfsTraverse(t,e,n,r){if(!t||n.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);const i=t.dependencies;if(i&&i.length>0)for(let a=0;a<i.length;++a)this.dfsTraverse(i[a],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}}},7341:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const r=n(8520);class i extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new r.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new r.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){const t=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new r.GlslLibRoutine(`\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ${t}\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        `)}}decodeUint8(){const t=i.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new r.GlslLibRoutine(`\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ${t}\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        `)}}static isLittleEndian(){const t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=i},9894:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const r=n(8520),i=n(5060);class a extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const t=(0,i.getGlsl)(this.context.glContext.version);return{setFragColor:new r.GlslLibRoutine(`\n        void setFragColor(float value) {\n            ${t.output} = encode(value);\n        }\n        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new r.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}e.FragColorGlslLib=a},2848:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){const e={};let r;for(;null!==(r=n.exec(t));){const t=r[3].split(",").map(t=>{const e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null}).filter(t=>null!==t);e[r[2]]={params:t,body:r[4]}}for(const n in e){const i="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",n),a=new RegExp(i,"gm");for(;null!==(r=a.exec(t));){const i=r[1],a=r[2],s=r[3].split(","),o=i?`${i} ${a};`:"";let u=e[n].body,c="";e[n].params.forEach((t,e)=>{t&&(c+=`${t.type} ${t.name} = ${s[e]};\n`)}),u=`${c}\n ${u}`,u=u.replace("return",a+" = ");const l=`\n      ${o}\n      {\n        ${u}\n      }\n      `;t=t.replace(r[0],l)}}return t.replace(n,"")}},8879:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const r=n(8520),i=n(2848),a=n(5483),s=n(5060);e.GlslPreprocessor=class{constructor(t,e,n,i){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new r.GlslContext(t,e,n,i),Object.keys(a.glslRegistry).forEach(t=>{const e=new a.glslRegistry[t](this.context);this.libs[t]=e});const s=this.glslLibRoutineDependencyGraph;for(const a in this.libs){const t=this.libs[a].getFunctions();for(const e in t){const n=a+"."+e;let i;s[n]?(i=s[n],i.routineBody=t[e].routineBody):(i=new r.GlslLibRoutineNode(n,t[e].routineBody),s[n]=i);const o=t[e].dependencies;if(o)for(let t=0;t<o.length;++t)if(s[o[t]])i.addDependency(s[o[t]]);else{const e=new r.GlslLibRoutineNode(o[t]);s[o[t]]=e,i.addDependency(e)}}}}preprocess(){const t=this.context.programInfo;let e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}\n      ${(0,s.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=(0,i.replaceInlines)(e),`${(0,s.getFragShaderPreamble)(this.context.glContext.version)}\n    ${this.getUniforms(t.inputNames,t.variables)}\n    ${this.getImports(e)}\n    ${e}`}getImports(t){const e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";let n="";for(let r=0;r<e.length;++r){if(!e[r].routineBody)throw new Error("Missing body for the Glsl Library routine: "+e[r].name);n+=e[r].routineBody+"\n"}return n}selectGlslLibRoutinesToBeIncluded(t){const e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(n=>{const r=n.split(".")[1];-1!==t.indexOf(r)&&e.push(this.glslLibRoutineDependencyGraph[n])}),r.TopologicalSortGlslRoutines.returnOrderedNodes(e)}getUniforms(t,e){const n=[];if(t)for(const r of t)n.push(`uniform sampler2D ${r};`);if(e)for(const r of e)n.push(`uniform ${r.type} ${r.name}${r.arrayLength?`[${r.arrayLength}]`:""};`);return n.join("\n")}}},5483:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const r=n(5107),i=n(7341),a=n(9894),s=n(2655),o=n(3891);e.glslRegistry={encoding:i.EncodingGlslLib,fragcolor:a.FragColorGlslLib,vec:o.VecGlslLib,shapeUtils:s.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},2655:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const r=n(8520);class i extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach((n,i)=>{const a=this.context.inputTextureLayouts[i].unpackedShape;if(a.length<=t){const i=a.length,s=t-i,o="bcastIndices_"+n;let u="";for(let t=0;t<i;++t)u+=`\n          realIndices[${t}] = int( mod(float(bcastedIndices[${s+t}]), ${a[t]}.0) );\n          `;const c=`\n        void ${o} (int bcastedIndices[${t}], out int realIndices[${i}]) {\n          ${u}\n        }\n        `;e[o]=new r.GlslLibRoutine(c)}}),e}bcastMatmulIndex(){const t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach((n,i)=>{const a=this.context.inputTextureLayouts[i].shape;if(!(a.length<2||a.length>t)){const i=a.length,s=t-i,o="bcastMatmulIndices_"+n;let u="";for(let t=0;t<i-2;++t)u+=`\n          realIndices[${t}] = int( mod(float(bcastedIndices[${s+t}]), ${a[t]}.0) );\n          `;const c=`\n        void ${o}(int bcastedIndices[${t}], out int realIndices[${i}]) {\n          ${u}\n          realIndices[${i-1}] = bcastedIndices[${t-1}];\n          realIndices[${i-2}] = bcastedIndices[${t-2}];\n        }\n        `;e[o]=new r.GlslLibRoutine(c)}}),e}indicesToOffset(){const t={};return this.context.programInfo.inputNames.forEach((e,n)=>{const a=this.context.inputTextureLayouts[n].shape,s=this.context.inputTextureLayouts[n].strides,o=a.length;let u="indicesToOffset_"+e;t[u]=new r.GlslLibRoutine(i.indexToOffsetSingle(u,o,s)),u=`indicesToOffset_${e}_T`,t[u]=new r.GlslLibRoutine(i.indexToOffsetSingle(u,o,s.slice().reverse()))}),t}static indexToOffsetSingle(t,e,n){let r="";for(let i=e-1;i>=0;--i)r+=`\n        offset += indices[${i}] * ${n[i]};\n        `;return`\n      int ${t}(int indices[${e}]) {\n        int offset = 0;\n        ${r}\n        return offset;\n      }\n      `}offsetToIndices(){const t={};return this.context.programInfo.inputNames.forEach((e,n)=>{const a=this.context.inputTextureLayouts[n].shape,s=this.context.inputTextureLayouts[n].strides,o=a.length;let u="offsetToIndices_"+e;t[u]=new r.GlslLibRoutine(i.offsetToIndicesSingle(u,o,s)),u=`offsetToIndices_${e}_T`,t[u]=new r.GlslLibRoutine(i.offsetToIndicesSingle(u,o,s.slice().reverse()))}),t}static offsetToIndicesSingle(t,e,n){const r=[];for(let i=0;i<e-1;++i)r.push(`\n      indices[${i}] = offset / ${n[i]};`),r.push(`\n        offset -= indices[${i}] * ${n[i]};`);return r.push(`\n      indices[${e-1}] = offset;`),`\n      void ${t}(int offset, out int indices[${e}]) {\n        ${r.join("")}\n      }\n      `}incrementIndices(){const t={};return this.context.programInfo.inputNames.forEach((e,n)=>{const i=this.context.inputTextureLayouts[n].shape,a=i.length,s="incrementIndices_"+e;let o="";for(let t=0;t<a;++t)o+=`\n        shape[${t}] = ${i[t]};`;const u=`\n        void ${s}(int axis, out int indices[${a}]) {\n          int shape[${a}];\n          ${o};\n          for(int i = ${a} -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        `;t[s]=new r.GlslLibRoutine(u)}),t}}e.ShapeUtilsGlslLib=i},5060:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function i(t){return 1===t?n:r}e.getGlsl=i,e.getVertexShaderSource=function(t){const e=i(t);return`${e.version}\n      precision highp float;\n      ${e.attribute} vec3 position;\n      ${e.attribute} vec2 textureCoord;\n\n      ${e.varyingVertex} vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }`},e.getFragShaderPreamble=function(t){const e=i(t);return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFrag} vec2 TexCoords;\n    ${e.outputDeclaration}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    `},e.getDefaultFragShaderMain=function(t,e){return`\n  void main() {\n    int indices[${e}];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ${i(t).output} = result;\n  }\n  `}},3891:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const r=n(8520);class i extends r.GlslLib{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(const i in e){const a=i+"Vec";let s="";for(let n=0;n<t;++n)s+=`\n          dest[${n}] ${e[i]} src[${n}];\n          `;const o=`\n        void ${a}(int src[${t}], out int dest[${t}]) {\n          ${s}\n        }\n        `;n[a]=new r.GlslLibRoutine(o)}return n}copyVec(){const t=this.context.outputTextureLayout.shape.length;let e="";for(let r=0;r<t;++r)e+=`\n        dest[${r}] = src[${r}];\n        `;const n=`\n      void copyVec(int src[${t}], out int dest[${t}]) {\n        ${e}\n      }\n      `;return{copyVec:new r.GlslLibRoutine(n)}}setVecItem(){const t=this.context.outputTextureLayout.shape.length;let e=`\n        if(index < 0)\n            index =${t} + index;\n        if (index == 0)\n            m[0] = value;\n        `;for(let r=1;r<t-1;++r)e+=`\n        else if (index == ${r})\n            m[${r}] = value;\n            `;e+=`\n        else\n            m[${t-1}] = value;\n        `;const n=`\n      void setVecItem(out int m[${t}], int index, int value) {\n        ${e}\n      }\n        `;return{setVecItem:new r.GlslLibRoutine(n)}}getVecItem(){const t=this.context.outputTextureLayout.shape.length;let e=`\n        if(index < 0)\n            index = ${t} + index;\n        if (index == 0)\n            return m[0];\n      `;for(let r=1;r<t-1;++r)e+=`\n        else if (index == ${r})\n            return m[${r}];\n      `;e+=`\n        else\n            return m[${t-1}];\n        `;const n=`\n      int getVecItem(int m[${t}], int index) {\n        ${e}\n      }\n    `;return{getVecItem:new r.GlslLibRoutine(n)}}}e.VecGlslLib=i},8316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const r=n(6231),i=n(9162),a=n(2517),s=n(2403),o=n(7019),u=n(8710),c=n(5611),l=n(4057),d=n(2039);e.WebGLInferenceHandler=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return(0,l.calculateTextureWidthAndHeight)(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");const n=[];for(let u=0;u<t.inputNames.length;++u)n[u]=this.getOrCreateTextureData(e[u],t.inputTypes[u]);const r=((t,e)=>{const n=e.map(t=>`${t.unpackedShape.join(",")};${t.width}x${t.height}`).join("_");let r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+=":"+n,r})(t,n);let i=this.session.programManager.getArtifact(r);const a=i?i.programInfo:"function"==typeof t.get?t.get():t,s=(0,l.createTextureLayoutFromTextureType)(this.session.layoutStrategy,a.output.dims,a.output.textureType),o=this.createTextureData(s,a.output.type);return i||(i=this.session.programManager.build(a,n,o),this.session.programManager.setArtifact(r,i)),this.runProgram(i,n,o),o}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,n){for(let r=0;r<e.length;++r)if(!!e[r].isPacked!=(t.programInfo.inputTypes[r]===d.TextureType.packed))throw new Error(`input[${r}] property packed inconsistent`);if(!!n.isPacked!=(t.programInfo.output.textureType===d.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)}getOrCreateTextureData(t,e){let n=this.getTextureData(t.dataId,e===d.TextureType.packed);if(!n&&(n=this.getTextureData(t.dataId,e!==d.TextureType.packed),n))return e===d.TextureType.packed?this.pack(n):this.unpack(n);if(!n){const r=(0,l.createTextureLayoutFromTextureType)(this.session.layoutStrategy,t.dims,e);if(e===d.TextureType.packedLastDimension){const n=1,r=4,i=t.dims;if(4===i.length){const a=[i[0],Math.ceil(i[1]*i[2]*i[3]/r)],s=(0,l.createTextureLayoutFromTextureType)(this.session.layoutStrategy,a,e);let o=t.numberData;if(i[1]*i[2]*i[3]%r!=0){const e=i[0],a=i[1]*i[2]*i[3],s=Math.ceil(a*n/r)*r;o=new Float32Array(e*s);for(let r=0;r<e;++r){const e=r*a,i=r*s+r%n*a;o.set(t.numberData.subarray(e,e+a),i)}}return this.createTextureData(s,t.type,o,t,1)}}if(e===d.TextureType.packed){const e=(0,l.createTextureLayoutFromShape)(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),r=this.createTextureData(e,t.type,t.numberData,t,1);n=this.pack(r)}else n=this.createTextureData(r,t.type,t.numberData,t,1)}return n}createTextureDataFromLayoutBindTensor(t,e,n,r){return this.createTextureData(t,e,n,r,1)}createTextureData(t,e,n,i,a){r.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);const s=this.session.textureManager.createTextureFromLayout(e,t,n,a);return this.createTextureDataFromTexture(t,e,s,i)}reshapeUnpacked(t,e){const n=this.getOrCreateTextureData(t,d.TextureType.unpacked),r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:a.ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}reshapePacked(t,e){const n=this.getOrCreateTextureData(t,d.TextureType.packed);if((0,o.isReshapeCheap)(t.dims,e)){const r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:a.ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}const r=(0,o.processDims3D)(t.dims),i=(0,o.processDims3D)(e),s=this.reshapePacked(t,r),u=this.run((0,o.createPackedReshape3DProgramInfoLoader)(this,s,i),[s]);return this.reshapePacked(u,e)}cast(t,e){const n=this.getOrCreateTextureData(t,d.TextureType.unpacked);return this.createTextureDataFromTexture(n,e,n.texture).tensor}createTextureDataFromTexture(t,e,n,r,a){const s=Object.assign(Object.assign({},t),{tensor:r||new i.Tensor(t.unpackedShape,e,t=>this.readTexture(s),async t=>this.readTextureAsync(s),void 0,a),texture:n});return this.setTextureData(s.tensor.dataId,s,t.isPacked),s}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,u.encodeAsUint8)(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,u.encodeAsUint8)(this,t))}pack(t){return this.executeProgram((0,s.createPackProgramInfoLoader)(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram((0,c.createUnpackProgramInfoLoader)(this,t.tensor),[t.tensor])}}},1640:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const s=n(2898),o=a(n(7839)),u=n(4196),c=n(2069),l=n(8138),d=n(9663),h=n(5193),p=n(7992),f=n(1253),m=n(4776),g=n(6572),b=n(3346),y=n(5623),v=n(2870),w=n(2143),x=n(4939),O=n(718),S=n(2268),k=n(8117),T=n(2278),_=n(5524),I=n(5975),C=n(3933),A=n(6558),E=n(5723),N=n(3738),j=a(n(4909)),D=n(8428),$=n(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",j.abs],["Acos","","7+",j.acos],["Add","","7+",o.add],["And","","7+",o.and],["Asin","","7+",j.asin],["Atan","","7+",j.atan],["AveragePool","","7+",w.averagePool,w.parseAveragePoolAttributes],["BatchNormalization","","7+",s.batchNormalization,s.parseBatchNormalizationAttributes],["Cast","","6+",u.cast,u.parseCastAttributes],["Ceil","","6+",j.ceil],["Clip","","6-10",j.clip,j.parseClipAttributes],["Clip","","11+",j.clipV11],["Concat","","4+",c.concat,c.parseConcatAttributes],["Conv","","1+",l.conv,l.parseConvAttributes],["ConvTranspose","","1+",d.convTranspose,d.parseConvTransposeAttributes],["Cos","","7+",j.cos],["Div","","7+",o.div],["Dropout","","7+",j.identity],["DepthToSpace","","1+",h.depthToSpace,h.parseDepthToSpaceAttributes],["Equal","","7+",o.equal],["Elu","","6+",j.elu,j.parseEluAttributes],["Exp","","6+",j.exp],["Flatten","","1+",p.flatten,p.parseFlattenAttributes],["Floor","","6+",j.floor],["FusedConv","com.microsoft","1+",l.conv,l.parseConvAttributes],["Gather","","1+",f.gather,f.parseGatherAttributes],["Gemm","","7-10",m.gemm,m.parseGemmAttributesV7],["Gemm","","11+",m.gemm,m.parseGemmAttributesV11],["GlobalAveragePool","","1+",w.globalAveragePool,w.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",w.globalMaxPool],["Greater","","7+",o.greater],["Identity","","1+",j.identity],["ImageScaler","","1+",g.imageScaler,g.parseImageScalerAttributes],["InstanceNormalization","","6+",b.instanceNormalization,b.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",j.leakyRelu,j.parseLeakyReluAttributes],["Less","","7+",o.less],["Log","","6+",j.log],["MatMul","","1+",y.matMul,y.parseMatMulAttributes],["MaxPool","","1+",w.maxPool,w.parseMaxPoolAttributes],["Mul","","7+",o.mul],["Neg","","6+",j.neg],["Not","","1+",j.not],["Or","","7+",o.or],["Pad","","2-10",v.padV2,v.parsePadAttributesV2],["Pad","","11+",v.padV11,v.parsePadAttributesV11],["Pow","","7+",o.pow],["PRelu","","7+",o.pRelu],["ReduceLogSum","","1+",x.reduceLogSum,x.parseReduceAttributes],["ReduceMax","","1+",x.reduceMax,x.parseReduceAttributes],["ReduceMean","","1+",x.reduceMean,x.parseReduceAttributes],["ReduceMin","","1+",x.reduceMin,x.parseReduceAttributes],["ReduceProd","","1+",x.reduceProd,x.parseReduceAttributes],["ReduceSum","","1-12",x.reduceSum,x.parseReduceAttributes],["ReduceSumSquare","","1+",x.reduceLogSumSquare,x.parseReduceAttributes],["Relu","","6+",j.relu],["Reshape","","5+",O.reshape],["Resize","","10",S.resize,S.parseResizeAttributesV10],["Resize","","11+",S.resize,S.parseResizeAttributesV11],["Shape","","1+",k.shape],["Sigmoid","","6+",j.sigmoid],["Sin","","7+",j.sin],["Slice","","10+",T.sliceV10],["Slice","","1-9",T.slice,T.parseSliceAttributes],["Softmax","","1-12",_.softmax,_.parseSoftmaxAttributes],["Softmax","","13+",_.softmaxV13,_.parseSoftmaxAttributesV13],["Split","","2-12",I.split,I.parseSplitAttributes],["Sqrt","","6+",j.sqrt],["Squeeze","","1-12",C.squeeze,C.parseSqueezeAttributes],["Squeeze","","13+",C.squeezeV13],["Sub","","7+",o.sub],["Sum","","6+",A.sum],["Tan","","7+",j.tan],["Tanh","","6+",j.tanh],["Tile","","6+",E.tile],["Transpose","","1+",N.transpose,N.parseTransposeAttributes],["Upsample","","7-8",$.upsample,$.parseUpsampleAttributesV7],["Upsample","","9",$.upsample,$.parseUpsampleAttributesV9],["Unsqueeze","","1-12",D.unsqueeze,D.parseUnsqueezeAttributes],["Unsqueeze","","13+",D.unsqueezeV13],["Xor","","7+",o.xor]]},2898:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const r=n(246),i=n(5060),a=n(2039),s={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]};e.batchNormalization=(t,e,n)=>(u(e),[t.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>o(t,e,n)}),e)]),e.parseBatchNormalizationAttributes=t=>{const e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),i=t.attributes.getInt("spatial",1);return(0,r.createAttributeWithCacheKey)({epsilon:e,momentum:n,spatial:i})};const o=(t,e,n)=>{const r=(0,i.getGlsl)(t.session.backend.glContext.version),o=e[0].dims.length,[u,c]=t.calculateTextureWidthAndHeight(e[1].dims,a.TextureType.unpacked),l=`\n  float process(int[${o}] indices) {\n    vec2 position = offsetToCoords(indices[1], ${u}, ${c});\n    float scale = getColorAsFloat(${r.texture2D}(Scale, position));\n    float mean = getColorAsFloat(${r.texture2D}(Mean, position));\n    float variance = getColorAsFloat(${r.texture2D}(Variance, position));\n    float b = getColorAsFloat(${r.texture2D}(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${n.epsilon})) ) + b;\n  }`;return Object.assign(Object.assign({},s),{output:{dims:e[0].dims,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:l})},u=t=>{if(!t||5!==t.length)throw new Error("BatchNormalization requires 5 inputs.");const e=t[0],n=t[1],r=t[2],i=t[3],a=t[4];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==i.dims.length||1!==a.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==a.type&&"float64"!==a.type)throw new Error("invalid input tensor types.")}},7839:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const r=n(2517),i=n(8520),a=n(5060),s=n(2039);function o(){const t="add_";return{body:`\n  float ${t}(float a, float b) {\n    return a + b;\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function u(){const t="div_";return{body:`\n  float ${t}(float a, float b) {\n    return a / b;\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function c(){const t="mul_";return{body:`\n  float ${t}(float a, float b) {\n    return a * b;\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function l(){const t="sub_";return{body:`\n  float ${t}(float a, float b) {\n    return a - b;\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function d(){const t="equal_";return{body:`\n  float ${t}(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function h(){const t="greater_";return{body:`\n  float ${t}(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function p(){const t="less_";return{body:`\n  float ${t}(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function f(){const t="and_";return{body:`\n  float ${t}(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function m(){const t="or_";return{body:`\n  float ${t}(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function g(){const t="xor_";return{body:`\n  float ${t}(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}function b(){return function(t){const e=t+"_";return{body:`\n  float ${e}(float a, float b) {\n    return ${t}(a, b);\n  }\n  vec4 ${e}(vec4 v1, vec4 v2) {\n    return ${t}(v1, v2);\n  }\n  `,name:e,type:i.FunctionType.ValueBased}}("pow")}function y(){const t="prelu_";return{body:`\n  float ${t}(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  `,name:t,type:i.FunctionType.ValueBased}}e.glslAdd=o,e.glslDiv=u,e.glslMul=c,e.glslSub=l,e.glslEqual=d,e.glslGreater=h,e.glslLess=p,e.glslAnd=f,e.glslOr=m,e.glslXor=g,e.glslPow=b,e.glslPRelu=y;const v=(t,e,n,r=e[0].type,i)=>{const a=t.session.pack?s.TextureType.packed:s.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:i,get:()=>w(t,e,n,r)}},w=(t,e,n,i=e[0].type)=>{const o=t.session.pack?s.TextureType.packed:s.TextureType.unpacked,u=!r.ShapeUtil.areEqual(e[0].dims,e[1].dims);let c=e[0].dims;const l=t.session.pack;if(u){const s=r.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!s)throw new Error("Can't perform binary op on the given tensors");c=s;const u=c.length,d=0!==e[0].dims.length?e[0].dims.length:1,h=0!==e[1].dims.length?e[1].dims.length:1,p=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",f=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",m=(0,a.getGlsl)(t.session.backend.glContext.version),g=l?`\n      ${n.body}\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ${n.name}(a, b);\n        ${m.output} = result;\n      }`:`\n      ${n.body}\n      float process(int indices[${u}]) {\n        int aindices[${d}];\n        int bindices[${h}];\n        ${p}\n        ${f}\n        return ${n.name}(_A(aindices), _B(bindices));\n      }`;return{name:n.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:c,type:i,textureType:o},shaderSource:g,hasMain:l}}const d=(0,a.getGlsl)(t.session.backend.glContext.version),h=`\n    ${n.body}\n    void main() {\n      vec4 v1 = ${d.texture2D}(A, TexCoords);\n      vec4 v2 = ${d.texture2D}(B, TexCoords);\n      vec4 result = ${n.name}(v1, v2);\n      ${d.output} = result;\n    }\n    `;return{name:n.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:e[0].dims,type:i,textureType:o},shaderSource:h,hasMain:!0}};e.add=(t,e)=>[t.run(v(t,e,o()),e)],e.and=(t,e)=>[t.run(v(t,e,f(),"bool"),e)],e.div=(t,e)=>[t.run(v(t,e,u()),e)],e.equal=(t,e)=>[t.run(v(t,e,d(),"bool"),e)],e.greater=(t,e)=>[t.run(v(t,e,h(),"bool"),e)],e.less=(t,e)=>[t.run(v(t,e,p(),"bool"),e)],e.mul=(t,e)=>[t.run(v(t,e,c()),e)],e.or=(t,e)=>[t.run(v(t,e,m(),"bool"),e)],e.pow=(t,e)=>[t.run(v(t,e,b()),e)],e.pRelu=(t,e)=>[t.run(v(t,e,y()),e)],e.sub=(t,e)=>[t.run(v(t,e,l()),e)],e.xor=(t,e)=>[t.run(v(t,e,g(),"bool"),e)]},4196:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const r=n(2517);e.cast=(t,e,n)=>(i(e),[t.cast(e[0],n)]),e.parseCastAttributes=t=>r.ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to"));const i=t=>{if(!t||1!==t.length)throw new Error("Cast requires 1 input.");if("string"===t[0].type)throw new Error("Invalid input type.")}},1163:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const r=n(5060),i=n(2039),a=n(9390),s=n(2827);e.createPackedConcatProgramInfoLoader=(t,e,n)=>{const u=(c=e.length,l=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},(t,e)=>"X"+e),inputTypes:Array(c).fill(i.TextureType.packed),cacheHint:l});var c,l;return Object.assign(Object.assign({},u),{get:()=>((t,e,n,u)=>{const c=n[0].dims.slice();if(u>=c.length||u<-1*c.length)throw new Error("axis specified for concat doesn't match input dimensionality");u<0&&(u=c.length+u);const l=c.slice(0);for(let r=1;r<n.length;r++){const t=n[r].dims.slice();for(let e=0;e<c.length;e++)if(e===u)l[u]+=t[e];else if(c[e]!==t[e])throw new Error("non concat dimensions must match")}const d=l.length,h=(0,s.getChannels)("coords",d),p=(0,a.getCoordsDataType)(d),f=(0,s.unpackFromChannel)(),m=n.map(t=>t.dims),g=(0,a.getGlChannels)(d),b=new Array(m.length-1);b[0]=m[0][u];for(let r=1;r<b.length;r++)b[r]=b[r-1]+m[r][u];const y=g[u],v=g.slice(-2),w=g.join();let x=`if (${y} < ${b[0]}) {\n        return getChannel(\n            getX0(${w}), vec2(${v.join()}));\n        }`;for(let r=1;r<b.length;r++){const t=b[r-1];x+=`\n            if (${y} < ${b[r]}  && ${y} >= ${b[r-1]}) {\n              return getChannel(\n                getX${r}(${o(g,y,t)}),\n                vec2(${o(v,y,t)}));\n            }`}const O=b.length,S=b[b.length-1];x+=`\n            return getChannel(\n              getX${O}(${o(g,y,S)}),\n              vec2(${o(v,y,S)}));`;const k=(0,r.getGlsl)(t.session.backend.glContext.version),T=`\n          ${f}\n          float getValue(${g.map(t=>"int "+t)}) {\n            ${x}\n          }\n\n          void main() {\n            ${p} coords = getOutputCoords();\n            int lastDim = coords.${g[d-1]};\n            coords.${g[d-1]} = coords.${g[d-2]};\n            coords.${g[d-2]} = lastDim;\n\n            vec4 result = vec4(getValue(${h}), 0., 0., 0.);\n\n            ${h[d-1]} = ${h[d-1]} + 1;\n            if (${h[d-1]} < ${l[d-1]}) {\n              result.g = getValue(${h});\n            }\n\n            ${h[d-2]} = ${h[d-2]} + 1;\n            if (${h[d-2]} < ${l[d-2]}) {\n              result.a = getValue(${h});\n            }\n\n            ${h[d-1]} = ${h[d-1]} - 1;\n            if (${h[d-2]} < ${l[d-2]} &&\n                ${h[d-1]} < ${l[d-1]}) {\n              result.b = getValue(${h});\n            }\n            ${k.output} = result;\n          }\n        `;return Object.assign(Object.assign({},e),{output:{dims:l,type:n[0].type,textureType:i.TextureType.packed},shaderSource:T,hasMain:!0})})(t,u,e,n.axis)})};const o=(t,e,n)=>{const r=t.indexOf(e);return t.map((t,e)=>e===r?`${t} - ${n}`:t).join()}},2069:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const r=n(246),i=n(2039),a=n(1163);e.concat=(t,e,n)=>(d(e),t.session.pack&&e[0].dims.length>1?[t.run((0,a.createPackedConcatProgramInfoLoader)(t,e,n),e)]:[t.run(s(t,e,n),e)]);const s=(t,e,n)=>{const r=(a=e.length,s=n.cacheKey,{name:"Concat",inputNames:Array.from({length:a},(t,e)=>"X"+e),inputTypes:Array(a).fill(i.TextureType.unpacked),cacheHint:s});var a,s;return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const a=n[0].dims.slice();if(r>=a.length||r<-1*a.length)throw new Error("axis specified for concat doesn't match input dimensionality");r<0&&(r=a.length+r);const s=a.slice(0);for(let i=1;i<n.length;i++){const t=n[i].dims.slice();for(let e=0;e<a.length;e++)if(e===r)s[r]+=t[e];else if(a[e]!==t[e])throw new Error("non concat dimensions must match")}const d=s.length,h=new Array(n.length);let p=0;for(let i=0;i<h.length;++i)p+=n[i].dims[r],h[i]=p;let f="";f=n.length<5?o(h):u(h);const m=`\n        ${c(n.length,d)}\n        ${l(h)}\n        ${f}\n        float process(int indices[${d}]) {\n          int textureIndex = getTextureWhereDataResides (indices[${r}]);\n\n          if(textureIndex != 0) {\n            indices[${r}] = indices[${r}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }`;return Object.assign(Object.assign({},e),{output:{dims:s,type:n[0].type,textureType:i.TextureType.unpacked},shaderSource:m})})(0,r,e,n.axis)})},o=t=>`int getTextureWhereDataResides(int index) {\n      ${t.map((t,e)=>`if(index<${t}) {return ${e};}\n`).join("")}\n    }`,u=t=>o(t),c=(t,e)=>{const n=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let r=0;r<t;++r)0===r?n.push(`\tif (textureIndex == ${r}) { return _X${r}(indices); }`):r===t-1?n.push(`\telse { return _X${r}(indices); }`):n.push(`\telse if (textureIndex == ${r}) { return _X${r}(indices); }`);return n.push("\t}"),n.join("\n")},l=t=>{const e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let n=0;n<t.length;++n)0===n?e.push(`\tif (index == ${n}) { return ${t[n]}; }`):n===t.length-1?e.push(`\telse { return ${t[n]}; }`):e.push(`\telse if (index == ${n}) { return ${t[n]}; }`);return e.push("\t}"),e.join("\n")};e.parseConcatAttributes=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis")});const d=t=>{if(!t||t.length<1)throw new Error("too few inputs");const e=t[0].type,n=t[0].dims.length;if("string"===e)throw new Error("string tensor is not supported yet");for(const r of t){if(r.type!==e)throw new Error("input tensors should be one type");if(r.dims.length!==n)throw new Error("input tensors should have the same shape")}}},4770:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const r=n(6231),i=n(5060),a=n(2039),s=n(8138),o=n(2823);e.createUnpackedGroupedConvProgramInfoLoader=(t,e,n)=>{const u=(c=e.length>2,l=n.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:l});var c,l;return Object.assign(Object.assign({},u),{get:()=>((t,e,n,u)=>{const c=e.length>2?"value += getBias(output_channel);":"",l=e[0].dims.slice(),d=e[1].dims.slice(),h=d[0]/u.group;r.Logger.verbose("GroupedConv",`autpPad:${u.autoPad}, dilations:${u.dilations}, group:${u.group}, kernelShape:${u.kernelShape}, pads:${u.pads}, strides:${u.strides}`);const p=(0,s.calculateOutputShape)(l,d,u.dilations,u.pads,u.strides),f=(0,i.getGlsl)(t.session.backend.glContext.version),{activationFunction:m,applyActivation:g}=(0,o.getActivationSnippet)(u),b=`\n  const ivec2 strides = ivec2(${u.strides[0]}, ${u.strides[1]});\n  const ivec2 pads = ivec2(${u.pads[0]}, ${u.pads[1]});\n  ${m}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ${h};\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ${d[1]}; wInChannel++) {\n      int input_channel = group_id * ${d[1]} + wInChannel;\n      for (int wHeight = 0; wHeight < ${d[2]}; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ${u.dilations[0]};\n\n        if (xHeight < 0 || xHeight >= ${l[2]}) {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ${d[3]}; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ${u.dilations[1]};\n          if (xWidth < 0 || xWidth >= ${l[3]}) {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${c}\n    ${g}\n    ${f.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},n),{output:{dims:p,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:b,hasMain:!0})})(t,e,u,n)})}},1386:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const r=n(8138),i=n(8555),a=n(708);e.conv2DPackedPointwise=(t,e,n)=>{const i=e[0].dims,s=e[1].dims,o=(0,r.calculateOutputShape)(i,s,n.dilations,n.pads,n.strides),u=t.reshapePacked(e[0],[i[1],i[2]*i[3]]),c=t.reshapePacked(e[1],[s[0],s[1]]),l=e.length>2?[c,u,e[2]]:[c,u],d=t.run((0,a.createPackedMatmulProgramInfoLoader)(t,l,n),l);return t.reshapePacked(d,o)},e.conv2DPacked=(t,e,n)=>{const s=e[0].dims,o=e[1].dims,u=(0,r.calculateOutputShape)(s,o,n.dilations,n.pads,n.strides),c=t.run((0,i.createPackedIm2ColProgramInfoLoader)(t,e[0],e[1],u,n),[e[0]]),l=t.reshapePacked(e[1],[o[0],o[1]*o[2]*o[3]]),d=3===e.length?[l,c,e[2]]:[l,c],h=t.run((0,a.createPackedMatmulProgramInfoLoader)(t,d,n),d);return t.reshapePacked(h,u)}},9663:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const r=n(246),i=n(5060),a=n(2039),s=n(2823),o=(t,e,n,r,i,a)=>(t-1)*e+n+(r-1)*i+1-a,u=(t,e,n,r,i)=>{const a=Math.floor(t/2);"SAME_UPPER"===e?(n[r]=a,n[i]=t-a):"SAME_LOWER"===e&&(n[r]=t-a,n[i]=a)};e.convTranspose=(t,e,n)=>(h(e,n),c(t,e,n));const c=(t,e,n)=>{const r=d(n,e);return[l(t,e,r)]},l=(t,e,n)=>t.run(((t,e,n)=>{const r=(o=e.length>2,u=n.cacheKey,{name:"ConvTranspose",inputNames:o?["X","W","B"]:["X","W"],inputTypes:o?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:u});var o,u;return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const o=e.length>2?"getB(output_channel)":"0.0",u=e[0].dims,c=e[1].dims,l=c[1],d=c[0]/r.group,h=[e[0].dims[0],e[1].dims[1]*r.group,...r.outputShape],p=(0,i.getGlsl)(t.session.backend.glContext.version),{activationFunction:f,applyActivation:m}=(0,s.getActivationSnippet)(r),g=`\n  const ivec2 strides = ivec2(${r.strides[0]}, ${r.strides[1]});\n  const ivec2 pads = ivec2(${r.pads[0]}, ${r.pads[1]});\n  ${f}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ${l};\n    int wOutChannel = output_channel - group_id * ${l};\n\n    float value = ${o};\n    for (int inChannelOffset = 0; inChannelOffset < ${d}; inChannelOffset++) {\n      int input_channel = group_id * ${d} + inChannelOffset;\n      for (int wWOff = 0; wWOff < ${c[2]}; wWOff++) {\n        for (int wHOff = 0; wHOff < ${c[3]}; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ${r.dilations[0]}, wHOff * ${r.dilations[1]});\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ${u[2]} &&\n            wLocIn.y >= 0 && wLocIn.y < ${u[3]}\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ${m}\n    ${p.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},n),{output:{dims:h,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:g,hasMain:!0})})(t,e,r,n)})})(t,e,n),e),d=(t,e)=>{const n=t.kernelShape.slice();if(0===t.kernelShape.length)for(let s=2;s<e[1].dims.length;++s)n.push(e[1].dims[s]);const r=t.pads.slice(),i=t.outputShape.slice();((t,e,n,r,i,a,s,c)=>{const l=t.length-2,d=0===c.length;for(let h=0;h<l;++h){const p=d?t[h+2]*a[h]:c[h],f=o(t[h+2],a[h],i[h],e[h],n[h],p);u(f,r,i,h,h+l),d&&c.push(a[h]*(t[h+2]-1)+s[h]+(e[h]-1)*n[h]+1-i[h]-i[h+l])}})(e[0].dims,n,t.dilations,t.autoPad,r,t.strides,t.outputPadding,i);const a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:r,outputShape:i,cacheKey:t.cacheKey}),a};e.parseConvTransposeAttributes=t=>{const e=t.attributes,n=(0,s.parseInternalActivationAttributes)(e),i=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),o=e.getInt("group",1),u=e.getInts("kernel_shape",[]),c=e.getInts("output_padding",[0,0]),l=e.getInts("output_shape",[]),d=e.getInts("pads",[0,0,0,0]),h=e.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:i,dilations:a,group:o,kernelShape:u,outputPadding:c,outputShape:l,pads:d,strides:h},n))};const h=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");const r=t[0].dims.length-2;if(e.dilations.length!==r)throw new Error(`dilations should be ${r}D`);if(e.strides.length!==r)throw new Error(`strides should be ${r}D`);if(e.pads.length!==2*r)throw new Error(`pads should be ${2*r}D`);if(e.outputPadding.length!==r)throw new Error(`output_padding should be ${r}D`);if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const r=n(246),i=n(2517),a=n(4770),s=n(1386),o=n(9828),u=n(2823),c=n(3248),l=n(5623);e.calculateOutputShape=(t,e,n,r,i)=>{const a=t[0],s=t.slice(2),o=s.length,u=e[0],c=e.slice(2).map((t,e)=>t+(t-1)*(n[e]-1)),l=s.map((t,e)=>t+r[e]+r[e+o]).map((t,e)=>Math.floor((t-c[e]+i[e])/i[e]));return[a,u].concat(...l)},e.conv=(t,e,n)=>(m(e,n),d(t,e,n));const d=(t,e,n)=>{const r=f(n,e),i=t.session.pack,o=1===r.kernelShape[0]&&1===r.kernelShape[1];return r.group>1?[t.run((0,a.createUnpackedGroupedConvProgramInfoLoader)(t,e,r),e)]:o&&i?[h(t,e,r)]:i&&4===e[0].dims.length&&1===e[0].dims[0]&&!o?[(0,s.conv2DPacked)(t,e,r)]:[p(t,e,r)]},h=(t,n,r)=>{const i=n[0].dims,a=n[1].dims,s=(0,e.calculateOutputShape)(i,a,r.dilations,r.pads,r.strides),o=t.reshapeUnpacked(n[0],[i[1],i[2]*i[3]]),u=t.reshapeUnpacked(n[1],[a[0],a[1]]),c=n.length>2?[u,o,n[2]]:[u,o],d=t.run((0,l.createMatmulProgramInfoLoader)(c,r),c);return t.reshapeUnpacked(d,s)},p=(t,n,r)=>{const i=n[0].dims,a=n[1].dims,s=(0,e.calculateOutputShape)(i,a,r.dilations,r.pads,r.strides),u=t.run((0,c.createIm2ColProgramInfoLoader)(t,n[0],n[1],s,r),[n[0]]),l=3===n.length?[u,n[1],n[2]]:[u,n[1]];return t.run((0,o.createDotProductProgramInfoLoader)(t,n,s,r),l)},f=(t,e)=>{const n=t.kernelShape.slice();if(0===t.kernelShape.length)for(let i=2;i<e[1].dims.length;++i)n.push(e[1].dims[i]);const r=t.pads.slice();i.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,r,t.autoPad);const a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:r,cacheKey:t.cacheKey}),a};e.parseConvAttributes=t=>{const e=t.attributes,n=(0,u.parseInternalActivationAttributes)(e),i=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),s=e.getInt("group",1),o=e.getInts("kernel_shape",[]),c=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:i,dilations:a,group:s,kernelShape:o,pads:c,strides:l},n))};const m=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");const n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(e.strides.length!==n)throw new Error(`strides should be ${n}D`);if(e.pads.length!==2*n)throw new Error(`pads should be ${2*n}D`);if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("Conv input(bias) should be float tensor")}},5193:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const r=n(3738);e.depthToSpace=(t,e,n)=>{i(e);const a=n.blocksize,s=a*a,o="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],u="DCR"===n.mode?[e[0].dims[0],a,a,e[0].dims[1]/s,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/s,a,a,e[0].dims[2],e[0].dims[3]],c=t.reshapeUnpacked(e[0],u),l={perm:o,cacheKey:""+o},[d]=(0,r.transpose)(t,[c],l),h=[e[0].dims[0],e[0].dims[1]/s,e[0].dims[2]*a,e[0].dims[3]*a];return[t.reshapeUnpacked(d,h)]},e.parseDepthToSpaceAttributes=t=>{const e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);const n=t.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error(`unrecognized mode: ${n} for DepthToSpace`);return{mode:n,blocksize:e}};const i=t=>{if(1!==t.length)throw new Error("DepthToSpace expect 1 inputs, but got "+t.length);if("string"===t[0].type||4!==t[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const r=n(2517),i=n(5060),a=n(2039),s=n(2823),o=n(3248);e.createDotProductProgramInfoLoader=(t,e,n,u)=>{const c=((t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[a.TextureType.unpacked,a.TextureType.packedLastDimension,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.packedLastDimension],cacheKey:e.activationCacheKey}))(e.length>2,u);return Object.assign(Object.assign({},c),{get:()=>((t,e,n,u,c)=>{const l=n[0].dims,d=n[1].dims,h=[d[0],Math.ceil(l[1]*d[2]*d[3]/4)],p=(0,o.calculateIm2ColDims)(l,d,u),[f,m]=t.calculateTextureWidthAndHeight(h,a.TextureType.packedLastDimension),g=r.ShapeUtil.computeStrides(p),[b,y]=t.calculateTextureWidthAndHeight(p,a.TextureType.packedLastDimension),v=u.length,w=n.length<3?"0.0":"_B(b)",x=Math.ceil(l[1]*d[2]*d[3]/4),{activationFunction:O,applyActivation:S}=(0,s.getActivationSnippet)(c),k=(0,i.getGlsl)(t.session.backend.glContext.version),T=`\n${O}\nfloat process(int indices[${v}]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ${g[0]} + im2col[1] * ${g[1]} + im2col[2] * ${g[2]};\n  int kernelOffset = indices[1] * ${h[1]};\n  float value = ${w};\n  for (int i = 0; i < ${x}; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ${b}, ${y});\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ${f}, ${m});\n    value += dot(${k.texture2D}(Im2Col, im2colCoords), ${k.texture2D}(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ${S}\n  return value;\n}`;return Object.assign(Object.assign({},e),{output:{dims:u,type:n[0].type,textureType:a.TextureType.unpacked},shaderSource:T})})(t,c,e,n,u)})}},7992:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const r=n(2517);e.flatten=(t,e,n)=>{i(e,n);const a=r.ShapeUtil.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.parseFlattenAttributes=t=>t.attributes.getInt("axis",1);const i=(t,e)=>{if(!t||1!==t.length)throw new Error("Flatten requires 1 input.");const n=t[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if("string"===t[0].type)throw new Error("string tensor is not supported.")}},2823:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const r=n(2517),i=n(4909);e.getActivationSnippet=function(t){let e;switch(t.activation){case"Relu":e=(0,i.glslRelu)();break;case"Sigmoid":e=(0,i.glslSigmoid)();break;case"Clip":e=(0,i.glslClip)(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const n=e.name;return{activationFunction:e.body,applyActivation:`value = ${n}_(value);`}},e.parseInternalActivationAttributes=t=>{const e=t.getString("activation","");if("Clip"===e){const[n,i]=t.getFloats("activation_params",[r.MIN_CLIP,r.MAX_CLIP]);return{activation:e,clipMax:i,clipMin:n,activationCacheKey:`${e}:${n},${i}`}}return{activation:e,activationCacheKey:e}}},1253:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const r=n(246),i=n(782),a=n(2517),s=n(2039);e.gather=(t,e,n)=>(c(e,n.axis),[t.run(u(t,e,n),e)]),e.parseGatherAttributes=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",0)});const o={name:"Gather",inputNames:["A","B"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},u=(t,e,n)=>{const r=Object.assign(Object.assign({},o),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const i=n[0].dims.slice(),o=n[1].dims.slice(),u=new Array(i.length+o.length-1);r=a.ShapeUtil.normalizeAxis(r,i.length);const c=[];for(let a=0;a<u.length;a++)a<r?(u[a]=i[a],c.push(`inputIdx[${a}] = outputIdx[${a}];`)):a<r+o.length?(u[a]=o[a-r],c.push(`indexDataIdx[${a-r}] = outputIdx[${a}];`)):(u[a]=i[a-o.length+1],c.push(`inputIdx[${a-o.length+1}] = outputIdx[${a}];`));const l=`\n      float process(int outputIdx[${u.length||1}]) {\n        int inputIdx[${i.length}];\n        int indexDataIdx[${o.length||1}];\n        indexDataIdx[0] = 0;\n        ${c.join("\n        ")}\n        int idx = int(_B(indexDataIdx));\n        inputIdx[${r}] = idx < 0 ? idx + ${i[r]} : idx;\n        return _A(inputIdx);\n      }`;return Object.assign(Object.assign({},e),{output:{dims:u,type:n[0].type,textureType:s.TextureType.unpacked},shaderSource:l})})(0,r,e,n.axis)})},c=(t,e)=>{if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.");const n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invaid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invaid input type.")}},4776:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const r=n(246),i=n(2517),a=n(2039);e.gemm=(t,e,n)=>(c(e,n),[t.run(o(e,n),e)]);const s=(t,e)=>{const n=0!==t.attributes.getInt("transA",0),i=0!==t.attributes.getInt("transB",0),a=t.attributes.getFloat("alpha",1),s=t.attributes.getFloat("beta",1);return(0,r.createAttributeWithCacheKey)({transA:n,transB:i,alpha:a,beta:s,isOptionalC:e})};e.parseGemmAttributesV7=t=>s(t,!1),e.parseGemmAttributesV11=t=>s(t,!0);const o=(t,e)=>{const n={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],key:e.cacheKey};return Object.assign(Object.assign({},n),{get:()=>u(n,t,e)})},u=(t,e,n)=>{const r=e[0].dims.slice(),s=e[1].dims.slice(),[o,u]=i.GemmUtil.getShapeOfGemmResult(r,n.transA,s,n.transB,3===e.length?e[2].dims:void 0),c=[o,u];if(!c)throw new Error("Can't use gemm on the given tensors");let l=r[r.length-1],d="";n.transA&&(l=r[0]),n.transA&&n.transB?d="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?d="value += _A_T(a) * _B(b);":!n.transA&&n.transB?d="value += _A(a) * _B_T(b);":n.transA||n.transB||(d="value += _A(a) * _B(b);");const h=c.length,p=`\n      float process(int indices[${h}]) {\n          int a[${h}];\n          int b[${h}];\n          ${3===e.length?`int c[${e[2].dims.length}];`:""}\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ${3===e.length?"bcastIndices_C(indices, c);":""}\n\n          float value = 0.0;\n          for (int k=0; k<${l}; ++k) {\n              a[${h-1}] = k;\n              b[${h-2}] = k;\n              ${d}\n          }\n\n          value = value * alpha;\n          ${3===e.length?"value += beta * _C(c);":""}\n          return value;\n      }`;return Object.assign(Object.assign({},t),{output:{dims:c,type:e[0].type,textureType:a.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:p})},c=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw new Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw new Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}},8555:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const r=n(5060),i=n(2039),a=n(2827);e.createPackedIm2ColProgramInfoLoader=(t,e,n,s,o)=>{const u=(c=o.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[i.TextureType.packed],cacheHint:c});var c;return Object.assign(Object.assign({},u),{get:()=>((t,e,n,s,o,u)=>{const c=n.dims,l=s.dims,d=o.length,h=[l[1]*l[2]*l[3],o[2]*o[3]],p=l[2]*l[3],f=(0,a.unpackFromChannel)(),m=(0,r.getGlsl)(t.session.backend.glContext.version);let g="";for(let r=0;r<=1;r++)for(let t=0;t<=1;t++)g+=`\n            blockIndex = rc.x + ${t};\n            pos = rc.y + ${r};\n\n            if(blockIndex < ${h[1]} && pos < ${h[0]}) {\n              offsetY = int(blockIndex / (${o[d-1]})) * ${u.strides[0]} -\n                ${u.pads[0]};\n              d0 = offsetY + ${u.dilations[0]} * (imod(pos, ${p}) / ${l[2]});\n\n              if(d0 < ${c[2]} && d0 >= 0) {\n                offsetX = imod(blockIndex, ${o[d-1]}) * ${u.strides[1]} -\n                  ${u.pads[1]};\n                d1 = offsetX + ${u.dilations[1]} * imod(imod(pos, ${p}), ${l[2]});\n\n                if(d1 < ${c[3]} && d1 >= 0) {\n\n                  ch = int(float(pos)/ ${p}.);\n                    innerDims = vec2(d0, d1);\n                    result[${2*r+t}] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          `;const b=`\n      ${f}\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ${g}\n          ${m.output} = result;\n      }\n            `;return Object.assign(Object.assign({},e),{output:{dims:h,type:n.type,textureType:i.TextureType.packed},shaderSource:b,hasMain:!0})})(t,u,e,n,s,o)})}},3248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const r=n(2039);e.createIm2ColProgramInfoLoader=(t,n,i,a,s)=>{const o=(u=s.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[r.TextureType.unpacked],cacheHint:u});var u;return Object.assign(Object.assign({},o),{get:()=>((t,n,i,a,s,o)=>{const u=i.dims,c=a.dims,l=s.length,d=(0,e.calculateIm2ColDims)(u,c,s,4),h=`\n        const int XC = ${u[1]};\n        const int XH = ${u[2]};\n        const int XW = ${u[3]};\n        const int KH = ${o.kernelShape[0]};\n        const int KW = ${o.kernelShape[1]};\n        const int dilationH = ${o.dilations[0]};\n        const int dilationW = ${o.dilations[1]};\n        const int strideH = ${o.strides[0]};\n        const int strideW = ${o.strides[1]};\n        const int padH = ${o.pads[0]};\n        const int padW = ${o.pads[1]};\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[${l}]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[${u.length}];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        `;return Object.assign(Object.assign({},n),{output:{dims:d,type:i.type,textureType:r.TextureType.packedLastDimension},shaderSource:h})})(0,o,n,i,a,s)})},e.calculateIm2ColDims=(t,e,n,r=4)=>[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]},6572:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const r=n(246),i=n(2039);e.imageScaler=(t,e,n)=>(u(e),[t.run(s(t,e,n),e)]),e.parseImageScalerAttributes=t=>{const e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return(0,r.createAttributeWithCacheKey)({scale:e,bias:n})};const a={name:"ImageScaler",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},s=(t,e,n)=>{const r=Object.assign(Object.assign({},a),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},r),{get:()=>((t,e,n,r)=>{const a=n[0].dims.slice(),s=a.length,u=`\n      ${o(r.bias.length)}\n      float process(int indices[${s}]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }`;return Object.assign(Object.assign({},e),{output:{dims:a,type:n[0].type,textureType:i.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:r.bias.length,data:r.bias},{name:"scale",type:"float",data:r.scale}],shaderSource:u})})(0,r,e,n)})},o=t=>{const e=[`float getBias(float bias[${t}], int channel) {`];for(let n=0;n<t;++n)0===n?e.push(`\tif (channel == ${n}) { return bias[${n}]; }`):n===t-1?e.push(`\telse { return bias[${n}]; }`):e.push(`\telse if (channel == ${n}) { return bias[${n}]; }`);return e.push("\t}"),e.join("\n")},u=t=>{if(!t||1!==t.length)throw new Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")}},3346:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const r=n(5060),i=n(2039);e.instanceNormalization=(t,e,n)=>{c(e);const r=t.run(s(e[0]),e);return[t.run(u(t,e[0],n,r.dims),[e[0],r,e[1],e[2]])]},e.parseInstanceNormalizationAttributes=t=>t.attributes.getFloat("epsilon",1e-5);const a={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},s=t=>Object.assign(Object.assign({},a),{get:()=>((t,e)=>{const n=e.dims.slice(),r=n[1],a=n[2]*n[3],s=[n[0],r],o=`\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<${n[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${n[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(${a});\n        temp = 0.0;\n        for(int a2=0; a2<${n[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${n[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(${a});\n\n        return v;\n      }`;return Object.assign(Object.assign({},t),{output:{dims:s,type:e.type,textureType:i.TextureType.packedLastDimension},shaderSource:o})})(a,t)}),o={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[i.TextureType.unpacked,i.TextureType.packedLastDimension,i.TextureType.unpacked,i.TextureType.unpacked]},u=(t,e,n,a)=>{const s=Object.assign(Object.assign({},o),{cacheHint:""+n});return Object.assign(Object.assign({},s),{get:()=>((t,e,n,a,s)=>{const o=(0,r.getGlsl)(t.session.backend.glContext.version),[u,c]=t.calculateTextureWidthAndHeight(s,i.TextureType.packedLastDimension),[l,d]=[u/4,c],h=`\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ${l}, ${d});\n        return ${o.texture2D}(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }`;return Object.assign(Object.assign({},e),{output:{dims:n.dims,type:n.type,textureType:i.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:a}],shaderSource:h})})(t,s,e,n,a)})},c=t=>{if(!t||3!==t.length)throw new Error("InstanceNormalization requires 3 inputs.");const e=t[0],n=t[1],r=t[2];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)throw new Error("Invalid input type.");if(4!==t[0].dims.length)throw new Error("Only support 4-D input shape.")}},708:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const r=n(2517),i=n(5060),a=n(2039),s=n(9390),o=n(2823),u=n(5623);e.createPackedMatmulProgramInfoLoader=(t,e,n)=>{const c=(l=e.length>2,d=n.activationCacheKey,{name:"MatMul (packed)",inputNames:l?["A","B","Bias"]:["A","B"],inputTypes:l?[a.TextureType.packed,a.TextureType.packed,a.TextureType.packed]:[a.TextureType.packed,a.TextureType.packed],cacheHint:d});var l,d;return Object.assign(Object.assign({},c),{get:()=>((t,e,n,c)=>{const l=n.length>2,d=l?"value += getBiasForMatmul();":"",h=n[0].dims,p=n[1].dims,f=r.BroadcastUtil.calcShape(h,p,!0),m=!r.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!f)throw new Error("Can't use matmul on the given tensors");const g=h[h.length-1],b=Math.ceil(g/2),y=h.length,v=p.length,w=(0,i.getGlsl)(t.session.backend.glContext.version),x=(0,s.getCoordsDataType)(f.length),O=f.length,S=(0,s.getGlChannels)(),{activationFunction:k,applyActivation:T}=(0,o.getActivationSnippet)(c),_=l?""+(0,u.getBiasForMatmul)(x,S,n[2].dims,f,!0):"",I=m?""+function(t,e,n,i){let a=[],s=[];const o=n[0].dims,u=n[1].dims,c=o.length,l=u.length,d=i.length,h=d-c,p=d-l;a=o.map((t,n)=>"coords."+e[n+h]),a[c-1]="i*2",a.join(", "),s=u.map((t,n)=>"coords."+e[n+p]),s[l-2]="i*2",s.join(", ");const f=r.BroadcastUtil.getBroadcastDims(o,i),m=r.BroadcastUtil.getBroadcastDims(u,i),g=f.map(t=>`coords.${e[t+h]} = 0;`).join("\n"),b=m.map(t=>`coords.${e[t+p]} = 0;`).join("\n"),y=`int lastDim = coords.${e[d-1]};\n  coords.${e[d-1]} = coords.${e[d-2]};\n  coords.${e[d-2]} = lastDim;`;return`\nvec4 getAAtOutCoordsMatmul(int i) {\n  ${t} coords = getOutputCoords();\n  ${y}\n  ${g}\n  vec4 outputValue = getA(${a});\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ${t} coords = getOutputCoords();\n  ${y}\n  ${b}\n  vec4 outputValue = getB(${s});\n  return outputValue;\n}`}(x,S,n,f):"",C=m?"getAAtOutCoordsMatmul(i)":`getA(${function(t,e){let n="";for(let r=0;r<e-2;r++)n+=`rc.${t[r]}, `;return n+=`rc.${t[e-2]}, i*2`,n}(S,y)})`,A=m?"getBAtOutCoordsMatmul(i)":`getB(${function(t,e){let n="";for(let r=0;r<e-2;r++)n+=`rc.${t[r]}, `;return n+="i*2, rc."+t[e-1],n}(S,v)})`,E=`\n            ${I}\n            ${_}\n            ${k}\n            void main() {\n              ${m?"":`${x} rc =\n          getOutputCoords(); int lastDim = rc.${S[O-1]}; rc.${S[O-1]} =\n          rc.${S[O-2]}; rc.${S[O-2]} = lastDim;\n      `}\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ${b}; i++) {\n                vec4 a = ${C};\n                vec4 b = ${A};\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ${d}\n              ${T}\n              ${w.output} = value;\n            }`;return Object.assign(Object.assign({},e),{output:{dims:f,type:n[0].type,textureType:a.TextureType.packed},shaderSource:E,hasMain:!0})})(t,c,e,n)})}},5623:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const r=n(2517),i=n(2039),a=n(9390),s=n(2823),o=n(708);function u(t,e){const n=(o=t.length>2,u=e.activationCacheKey,{name:"MatMul",inputNames:o?["A","B","Bias"]:["A","B"],inputTypes:o?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:u});var o,u;return Object.assign(Object.assign({},n),{get:()=>function(t,e,n){const o=e[0].dims,u=e[1].dims,c=r.BroadcastUtil.calcShape(o,u,!0);if(!c)throw new Error("Can't use matmul on the given tensors");const d=(0,a.getCoordsDataType)(c.length),h=(0,a.getGlChannels)(),{activationFunction:p,applyActivation:f}=(0,s.getActivationSnippet)(n),m=e.length>2,g=m?"value += getBiasForMatmul();":"",b=m?""+l(d,h,e[2].dims,c,!1):"",y=c.length,v=o.length,w=u.length,x=`\n    ${p}\n    ${b}\n    float process(int indices[${y}]) {\n        int a[${v}];\n        int b[${w}];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<${o[o.length-1]}; ++k) {\n            a[${v-1}] = k;\n            b[${w-2}] = k;\n            value += _A(a) * _B(b);\n        }\n        ${g}\n        ${f}\n        return value;\n    }`;return Object.assign(Object.assign({},t),{output:{dims:c,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:x})}(n,t,e)})}e.matMul=(t,e,n)=>(c(e),t.session.pack?[t.run((0,o.createPackedMatmulProgramInfoLoader)(t,e,n),e)]:[t.run(u(e,n),e)]),e.parseMatMulAttributes=t=>(0,s.parseInternalActivationAttributes)(t.attributes),e.createMatmulProgramInfoLoader=u;const c=t=>{if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function l(t,e,n,i,a){let s="";const o=n.length,u=i.length,c=u-o;s=u<2&&o>0?"coords":n.map((t,n)=>"coords."+e[n+c]).join(", ");const l=r.BroadcastUtil.getBroadcastDims(n,i).map(t=>`coords.${e[t+c]} = 0;`).join("\n");let d="vec4(outputValue.xx, outputValue.yy)";return 1===r.ShapeUtil.size(n)&&(d="vec4(outputValue.x)"),a?`\nvec4 getBiasForMatmul() {\n  ${t} coords = getOutputCoords();\n  ${l}\n  vec4 outputValue = getBias(${s});\n  return ${d};\n}`:`\nfloat getBiasForMatmul() {\n  ${t} coords = getOutputCoords();\n  ${l}\n  return getBias(coords.x);\n}`}e.getBiasForMatmul=l},2403:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const r=n(5060),i=n(2039),a=n(9390),s=n(2827),o={name:"pack",inputNames:["A"],inputTypes:[i.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(t,e)=>Object.assign(Object.assign({},o),{get:()=>((t,e)=>{const n=(0,r.getGlsl)(t.session.backend.glContext.version),u=e.dims,c=u.length,l=e.dims.length,d=(0,a.getCoordsDataType)(l),h=(0,s.getChannels)("rc",l),p=(f=l,m=h,g=u[u.length-2],b=u[u.length-1],0===f||1===f?"":`\n    int r = ${m[f-2]};\n    int c = ${m[f-1]};\n    int rp1 = ${m[f-2]} + 1;\n    int cp1 = ${m[f-1]} + 1;\n    bool rEdge = rp1 >= ${b};\n    bool cEdge = cp1 >= ${g};\n    `);var f,m,g,b;let y;y=0===c?[1,1]:1===c?[u[0],1]:[u[l-1],u[l-2]];const v=function(t,e,n){if(0===t)return"false";if(1===t)return"rc > "+e[0];let r="";for(let i=t-2;i<t;i++)r+=`${n[i]} >= ${e[i-t+2]}`,i<t-1&&(r+="||");return r}(l,y,h),w=function(t,e){const n=t.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`;let r="";if(n>2)for(let i=0;i<n-2;++i)r+=e[i]+",";return`getA(${r}r, c),\n          rEdge ? 0. : getA(${r}rp1, c),\n          cEdge ? 0. : getA(${r}r, cp1),\n          rEdge || cEdge ? 0. : getA(${r}rp1, cp1)`}(u,h),x=`\n        void main() {\n          ${d} rc = getOutputCoords();\n\n          if(${v}) {\n            ${n.output} = vec4(0);\n          } else {\n            ${p}\n\n            ${n.output} = vec4(${w});\n          }\n        }\n      `;return Object.assign(Object.assign({},o),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:i.TextureType.packed},shaderSource:x})})(t,e)})},2827:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const r=n(9390);function i(t,e){return(0,r.getGlChannels)(e).map(e=>`${t}.${e}`)}e.getVecChannels=i,e.getChannels=function(t,e){return 1===e?[t]:i(t,e)},e.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},2870:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const r=n(246),i=n(2517),a=n(5060),s=n(2039),o={name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.padV2=(t,e,n)=>(l(e),[t.run(Object.assign(Object.assign({},o),{cacheHint:n.cacheKey,get:()=>c(t,e[0],n)}),e)]),e.parsePadAttributesV2=t=>{const e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),i=t.attributes.getInts("pads");return(0,r.createAttributeWithCacheKey)({mode:e,value:n,pads:i})},e.padV11=(t,n,r)=>{d(n);const i=u(t,n,r);return(0,e.padV2)(t,[n[0]],i)},e.parsePadAttributesV11=t=>t.attributes.getString("mode","constant");const u=(t,e,n)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");const i=Array.from(e[1].integerData),a=e.length>=3?e[2].floatData[0]:0;return(0,r.createAttributeWithCacheKey)({mode:n,pads:i,value:a})},c=(t,e,n)=>{const r=i.ShapeUtil.padShape(e.dims.slice(),n.pads),a=r.length,o=`\n      ${h(t,e,n)}\n      float process(int[${a}] indices) {\n          return padA(indices);\n      }`;return{name:"Pad",inputNames:["A"],inputTypes:[s.TextureType.unpacked],output:{dims:r,type:e.type,textureType:s.TextureType.unpacked},shaderSource:o}},l=t=>{if(!t||1!==t.length)throw new Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},d=t=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type)throw new Error("Invalid input type.");if(t.length>=3&&"string"===t[2].type)throw new Error("Invalid input type.")},h=(t,e,n)=>{const r=(0,a.getGlsl)(t.session.backend.glContext.version),[o,u]=t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),c=i.ShapeUtil.computeStrides(e.dims);switch(n.mode){case"constant":return p(r,e.dims,c,o,u,n.pads,n.value);case"reflect":return f(r,e.dims,c,o,u,n.pads);case"edge":return m(r,e.dims,c,o,u,n.pads);default:throw new Error("Invalid mode")}},p=(t,e,n,r,i,a,s)=>{const o=e.length;let u="";for(let c=o-1;c>=0;--c)u+=`\n        k = m[${c}] - ${a[c]};\n        if (k < 0)  return constant;\n        if (k >= ${e[c]}) return constant;\n        offset += k * ${n[c]};\n        `;return`\n      float padA(int m[${o}]) {\n        const float constant = float(${s});\n        int offset = 0;\n        int k = 0;\n        ${u}\n        vec2 coords = offsetToCoords(offset, ${r}, ${i});\n        float value = getColorAsFloat(${t.texture2D}(A, coords));\n        return value;\n      }\n      `},f=(t,e,n,r,i,a)=>{const s=e.length;let o="";for(let u=s-1;u>=0;--u)o+=`\n        k = m[${u}] - ${a[u]};\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ${2*(e[u]-1)};\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ${e[u]}) { k = _2n_1 - k; }\n        }\n        offset += k * ${n[u]};\n        `;return`\n      float padA(int m[${s}]) {\n        int offset = 0;\n        int k = 0;\n        ${o}\n        vec2 coords = offsetToCoords(offset, ${r}, ${i});\n        float value = getColorAsFloat(${t.texture2D}(A, coords));\n        return value;\n      }\n      `},m=(t,e,n,r,i,a)=>{const s=e.length;let o="";for(let u=s-1;u>=0;--u)o+=`\n        k = m[${u}] - ${a[u]};\n        if (k < 0)  k = 0;\n        if (k >= ${e[u]}) k = ${e[u]-1};\n        offset += k * ${n[u]};\n      `;return`\n      float padA(int m[${s}]) {\n        int offset = 0;\n        int k = 0;\n        ${o}\n        vec2 coords = offsetToCoords(offset, ${r}, ${i});\n        float value = getColorAsFloat(${t.texture2D}(A, coords));\n        return value;\n      }\n      `}},2143:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const r=n(246),i=n(2517),a=n(2039);e.averagePool=(t,e,n)=>{d(e);const r={name:"AveragePool",inputNames:["X"],inputTypes:[a.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(Object.assign(Object.assign({},r),{get:()=>s(e,r,!1,n)}),e)]},e.parseAveragePoolAttributes=t=>{const e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),i=0!==t.attributes.getInt("count_include_pad",0),a=t.attributes.getInts("kernel_shape"),s=t.attributes.getInts("strides",[]),o=t.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,r.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:i,kernelShape:a,strides:s,pads:o})};const s=(t,e,n,r)=>{const[s,o]=u(t,r,n),c=i.ShapeUtil.size(s.kernelShape);let l="";s.countIncludePad?l+=`value /= float(${c});`:l+=`value /= float(${c} - pad);`;const d=`\n        ${h(t[0].dims,s,"value += _X(x);",l,"0.0")}\n      `;return Object.assign(Object.assign({},e),{output:{dims:o,type:t[0].type,textureType:a.TextureType.unpacked},shaderSource:d})};e.globalAveragePool=(t,e,n)=>{d(e);const r={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[a.TextureType.unpacked],cacheHint:""+n.countIncludePad};return[t.run(Object.assign(Object.assign({},r),{get:()=>s(e,r,!0,n)}),e)]},e.parseGlobalAveragePoolAttributes=t=>{const e=0!==t.attributes.getInt("count_include_pad",0);return(0,r.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},e.maxPool=(t,e,n)=>{d(e);const r={name:"MaxPool",inputNames:["X"],inputTypes:[a.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(Object.assign(Object.assign({},r),{get:()=>o(e,r,!1,n)}),e)]},e.parseMaxPoolAttributes=t=>{const e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),i=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),s=t.attributes.getInts("pads",[]),o=t.attributes.getInt("storage_order",0),u=t.attributes.getInts("dilations",[]);if(0!==o)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,r.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:i,strides:a,pads:s,storageOrder:o,dilations:u})};const o=(t,e,n,r)=>{const[i,s]=u(t,r,n),o=`\n      ${h(t[0].dims,i,"\n      value = max(_X(x), value);\n    ","","-1e5")}\n    `;return Object.assign(Object.assign({},e),{output:{dims:s,type:t[0].type,textureType:a.TextureType.unpacked},shaderSource:o})},u=(t,e,n)=>{const r=t[0].dims.slice(),a=Object.hasOwnProperty.call(e,"dilations"),s=e.kernelShape.slice(),o=e.strides.slice(),u=a?e.dilations.slice():[],c=e.pads.slice();i.PoolConvUtil.adjustPoolAttributes(n,r,s,o,u,c);const l=i.PoolConvUtil.computePoolOutputShape(n,r,o,u,s,c,e.autoPad),d=Object.assign({},e);return a?Object.assign(d,{kernelShape:s,strides:o,pads:c,dilations:u,cacheKey:e.cacheKey}):Object.assign(d,{kernelShape:s,strides:o,pads:c,cacheKey:e.cacheKey}),[d,l]},c={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},l={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[a.TextureType.unpacked]};e.globalMaxPool=(t,e)=>(d(e),[t.run(Object.assign(Object.assign({},l),{get:()=>o(e,l,!0,c)}),e)]);const d=t=>{if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},h=(t,e,n,r,a)=>{const s=t.length;if(e.kernelShape.length<=2){const i=e.kernelShape[e.kernelShape.length-1],o=e.strides[e.strides.length-1],u=e.pads[e.pads.length/2-1],c=e.pads[e.pads.length-1],l=t[s-1];let d="",h="",p="";if(d=u+c!==0?`\n          for (int i = 0; i < ${i}; i++) {\n            x[${s} - 1] = indices[${s} - 1] * ${o} - ${u} + i;\n            if (x[${s} - 1] < 0 || x[${s} - 1] >= ${l}) {\n              pad++;\n              continue;\n            }\n            ${n}\n          }`:`\n          for (int i = 0; i < ${i}; i++) {\n            x[${s} - 1] = indices[${s} - 1] * ${o} - ${u} + i;\n            ${n}\n          }`,2===e.kernelShape.length){const n=e.kernelShape[e.kernelShape.length-2],r=e.strides[e.strides.length-2],a=e.pads[e.pads.length/2-2],o=e.pads[e.pads.length-2],u=t[s-2];h=a+o!==0?`\n            for (int j = 0; j < ${n}; j++) {\n              x[${s} - 2] = indices[${s} - 2] * ${r} - ${a} + j;\n              if (x[${s} - 2] < 0 || x[${s} - 2] >= ${u}) {\n                pad+= ${i};\n                continue;\n              }\n          `:`\n            for (int j = 0; j < ${n}; j++) {\n              x[${s} - 2] = indices[${s} - 2] * ${r} - ${a} + j;\n            `,p="\n          }\n        "}return`\n        float process(int indices[${s}]) {\n          int x[${s}];\n          copyVec(indices, x);\n\n          float value = ${a};\n          int pad = 0;\n          ${h}\n          ${d}\n          ${p}\n          ${r}\n          return value;\n        }\n      `}{const o=i.ShapeUtil.size(e.kernelShape),u=i.ShapeUtil.computeStrides(e.kernelShape),c=u.length,l=e.pads.length,d=f(c),h=p(t,"inputDims"),m=p(e.pads,"pads"),g=p(u,"kernelStrides"),b=p(e.strides,"strides");let y="";return y=e.pads.reduce((t,e)=>t+e)?`\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ${n}\n          }`:`\n          }\n          ${n}\n        `,`\n        ${d}\n        float process(int indices[${s}]) {\n          int x[${s}];\n          copyVec(indices, x);\n          int offset[${c}];\n          int pads[${l}];\n          int inputDims[${s}];\n          int kernelStrides[${c}];\n          int strides[${c}];\n          ${m}\n          ${h}\n          ${b}\n          ${g}\n\n          float value = ${a};\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ${o}; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ${s} - ${c}; j < ${s}; j++) {\n              x[j] = indices[j] * strides[j - ${s} + ${c}]\n                + offset[j - ${s} + ${c}] - pads[j - 2];\n              ${y}\n          }\n          ${r}\n\n          return value;\n        }\n      `}},p=(t,e)=>{let n="";for(let r=0;r<t.length;r++)n+=`\n      ${e}[${r}] = ${t[r]};\n    `;return n},f=t=>`\n  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {\n    if (${t} == 0) {\n      return;\n    }\n    for (int i = 0; i < ${t} - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[${t} - 1] = offset;\n  }`},4939:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const r=n(246),i=n(782),a=n(2517),s=n(2039),o=(t,e,n,r,i)=>{c(e);const a={name:r,inputNames:["A"],inputTypes:[s.TextureType.unpacked]};return[t.run(Object.assign(Object.assign({},a),{cacheHint:n.cacheKey,get:()=>u(t,e,n,r,i,a)}),e)]};e.parseReduceAttributes=t=>{const e=t.attributes.getInts("axes",[]),n=1===t.attributes.getInt("keepdims",1);return(0,r.createAttributeWithCacheKey)({axes:e,keepDims:n})};const u=(t,e,n,r,i,o)=>{const u=[],c=e[0].dims.length||1,l=[],d=a.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),h=i(e,d);let p=h[1];for(let a=0;a<e[0].dims.length;a++)d.indexOf(a)>=0||0===d.length?(n.keepDims&&u.push(1),p=`\n          for(int j${a} = 0; j${a} < ${e[0].dims[a]}; j${a}++) {\n            inputIdx[${a}] = j${a};\n            ${p}\n          }`):(l.push(`inputIdx[${a}] = outputIdx[${u.length}];`),u.push(e[0].dims[a]));const f=`\n      float process(int outputIdx[${u.length||1}]) {\n        float value;                 // final result\n        int inputIdx[${c}];      // addressing input data\n        ${l.join("\n")}\n        ${h[0]}       // init ops for reduce max/min\n        ${p}\n        ${h[2]}       // final computation for reduce mean\n        return value;\n      }`;return Object.assign(Object.assign({},o),{output:{dims:u,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:f})},c=t=>{if(!t||1!==t.length)throw new Error("Reduce op requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.reduceSum=(t,e,n)=>o(t,e,n,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(t,e,n)=>o(t,e,n,"ReduceMean",(t,e)=>{let n=1;for(let r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${n}.;`]}),e.reduceMax=(t,e,n)=>o(t,e,n,"ReduceMax",(t,e)=>{const n=[];for(let r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push(`inputIdx[${r}] = 0;`);return[n.join("\n")+"\nvalue = _A(inputIdx);","value = max(value, _A(inputIdx));",""]}),e.reduceMin=(t,e,n)=>o(t,e,n,"ReduceMin",(t,e)=>{const n=[];for(let r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push(`inputIdx[${r}] = 0;`);return[n.join("\n")+"\nvalue = _A(inputIdx);","value = min(value, _A(inputIdx));",""]}),e.reduceProd=(t,e,n)=>o(t,e,n,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(t,e,n)=>o(t,e,n,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(t,e,n)=>o(t,e,n,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const r=n(2517),i=n(5060),a=n(2039),s=n(2827);e.createPackedReshape3DProgramInfoLoader=(t,e,n)=>{const o=(t=>({name:"Reshape (packed)",inputTypes:[a.TextureType.packed],inputNames:["A"],cacheHint:""+t}))(n);return Object.assign(Object.assign({},o),{get:()=>((t,e,n,o)=>{const u=e.dims,c=o;let l="";for(let r=0;r<4;r++){let t="";switch(r){case 0:t="outputCoords = rc;";break;case 1:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:t="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:t="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}l+=`\n        ${t}\n        ${r>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ${r>0?"}":""}\n      `}const d=(0,i.getGlsl)(t.session.backend.glContext.version),h=`\n      ${function(t){const e=r.ShapeUtil.computeStrides(t),n=["b","r","c"],i="index";return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${e.map((t,r)=>`int ${n[r]} = ${i} / ${t}; ${r===e.length-1?`int ${n[r+1]} = ${i} - ${n[r]} * ${t}`:`index -= ${n[r]} * ${t}`};`).join("")}\n      return ivec3(b, r, c);\n    }\n  `}(u)}\n      ${function(t){const e=r.ShapeUtil.computeStrides(t);return`\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;\n  }\n`}(c)}\n      ${(0,s.unpackFromChannel)()}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ${c[2]};\n        int cols = ${c[1]};\n\n        ${l}\n        ${d.output} = result;\n      }\n    `;return Object.assign(Object.assign({},n),{output:{dims:c,type:e.type,textureType:a.TextureType.packed},shaderSource:h,hasMain:!0})})(t,e,o,n)})},e.processDims3D=function(t){if(0===t.length)return[1,1,1];let e=1;for(let n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]},e.isReshapeCheap=function(t,e){let n=!1;return n=0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2]),n}},718:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const r=n(2517);e.reshape=(t,e)=>{const n=r.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}},2268:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const r=n(5060),i=n(2039),a=n(9390),s=n(2827),o=n(9793),u={name:"Resize",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.resize=(t,e,n)=>((0,o.validateInputs)(e,n),[t.run(Object.assign(Object.assign({},u),{cacheHint:n.cacheKey,get:()=>c(t,e,n)}),e)]),e.parseResizeAttributesV10=t=>(0,o.parseUpsampleAttributes)(t,10),e.parseResizeAttributesV11=t=>(0,o.parseUpsampleAttributes)(t,11);const c=(t,e,n)=>{const o=(0,r.getGlsl)(t.session.backend.glContext.version),[c,d]=l(e,n);if(c.every(t=>1===t)&&"tf_crop_and_resize"!==n.coordinateTransformMode)return Object.assign(Object.assign({},u),{output:{dims:d,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:`void main() {\n                    vec4 v = ${o.texture2D}(X, TexCoords);\n                    ${o.output} = v;\n                }`});const h=d.length;if(h<2)throw new Error("output dimension should be at least 2, but got "+h);const p=d[h-2],f=d[h-1],m=e[0].dims;if(h!==m.length)throw new Error(`output dimension should match input ${m.length}, but got ${h}`);const g=m[h-2],b=m[h-1],y=c[h-2],v=c[h-1];let w="";if("linear"!==n.mode)throw new Error(`resize (packed) does not support mode: '${n.mode}'`);switch(n.coordinateTransformMode){case"asymmetric":w="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":w="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":w=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ${f}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ${p}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ${f}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ${p}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                `;break;case"align_corners":w=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(${f}.0 - 1.0, ${p}.0 - 1.0, ${f}.0 - 1.0,\n                            ${p}.0 - 1.0);\n                        vec4 original = vec4(${b}.0 - 1.0, ${g}.0 - 1.0, ${b}.0 - 1.0,\n                            ${g}.0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${n.coordinateTransformMode}'`)}const x=(0,a.getCoordsDataType)(h),O=`\n            const vec2 inputWH = vec2(${g}.0, ${b}.0);\n            const vec4 scaleWHWH = vec4(float(${y}), float(${v}), float(${y}), float(${v}));\n            ${(0,s.unpackFromChannel)()}\n            ${w}\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ${x} rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ${p-1};\n                bool hasNextCol = rc.z < ${f-1};\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ${o.output} = vec4(newValue);\n            }\n        `;return Object.assign(Object.assign({},u),{output:{dims:d,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:O})},l=(t,e)=>{const n=t[0].dims;let r,i=e.scales;if(0===i.length){const a=t[e.scalesInputIdx];if(a&&0!==a.size){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");i=d(a,e.mode,e.isResize)}else{const a=t[e.sizesInputIdx];if(!a||0===a.size)throw new Error("Either scales or sizes MUST be provided as input.");r=Array.from(a.integerData),i=h(r,n,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const a=r||n.map((t,e)=>Math.floor(t*i[e]));return[i,a]},d=(t,e,n)=>{const r=Array.from(t.floatData);return(0,o.scalesValidation)(r,e,n),r},h=(t,e,n,r)=>{const i=e.length,a=new Array(i);for(let s=0,o=i;s<o;s++)if(0===e[s]){if(0!==t[s])throw new Error("Input dim is zero but required output dim is non-zero.");a[s]=1}else a[s]=t[s]/e[s];return(0,o.scalesValidation)(a,n,r),a}},8117:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const r=n(9162);e.shape=(t,e)=>(i(e),[new r.Tensor([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]);const i=t=>{if(!t||1!==t.length)throw new Error("Shape requires 1 input.")}},2278:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const r=n(246),i=n(782),a=n(2517),s=n(2039),o={name:"Slice",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.slice=(t,e,n)=>(c(e),[t.run(Object.assign(Object.assign({},o),{cacheHint:n.cacheKey,get:()=>u(t,e[0],n)}),e)]),e.parseSliceAttributes=t=>{const e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),i=t.attributes.getInts("axes",[]);return(0,r.createAttributeWithCacheKey)({starts:e,ends:n,axes:i})};const u=(t,e,n)=>{const r=0===n.axes.length?e.dims.slice(0).map((t,e)=>e):n.axes,i=a.ShapeUtil.normalizeAxes(r,e.dims.length),u=n.starts.map((t,n)=>t>e.dims[i[n]]-1?e.dims[i[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[i[n]])),c=n.ends.map((t,n)=>t>e.dims[i[n]]-1?e.dims[i[n]]:a.ShapeUtil.normalizeAxis(t,e.dims[i[n]])),l=e.dims.slice(),d=[];for(let a=0;a<i.length;a++)l[i[a]]=c[a]-u[a],u[a]>0&&d.push(`outputIdx[${i[a]}] += ${u[a]};`);const h=`\n      float process(int outputIdx[${l.length}]) {\n        ${d.join("\n      ")}\n        return _A(outputIdx);\n      }`;return Object.assign(Object.assign({},o),{output:{dims:l,type:e.type,textureType:s.TextureType.unpacked},shaderSource:h})},c=t=>{if(!t||1!==t.length)throw new Error("Slice requires 1 input.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.sliceV10=(t,e)=>{d(e);const n=l(t,e);return[t.run(Object.assign(Object.assign({},o),{cacheHint:n.cacheKey,get:()=>u(t,e[0],n)}),[e[0]])]};const l=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(t=>1!==t))throw new Error("currently non-1 steps is not supported for Slice");const n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[];return{starts:n,ends:r,axes:i,cacheKey:`${i};${n};${r}`}},d=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length)throw new Error("Invalid input type.");if("int32"!==t[2].type||1!==t[2].dims.length)throw new Error("Invalid input type.");if(t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length))throw new Error("Invalid input type.");if(t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw new Error("Invalid input type.")}},5524:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const r=n(246),i=n(2517),a=n(5060),s=n(2039),o=n(3738),u={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[s.TextureType.unpacked]},c={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},l={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};e.softmax=(t,e,n)=>{m(e);const r=e[0].dims.slice(),a=i.ShapeUtil.normalizeAxis(n.axis,r.length),s=i.ShapeUtil.sizeToDimension(r,a),o=i.ShapeUtil.sizeFromDimension(r,a);return d(t,e,n,s,o)},e.parseSoftmaxAttributes=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=t=>(0,r.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",-1)}),e.softmaxV13=(t,e,n)=>{m(e);const a=e[0].dims.slice(),s=i.ShapeUtil.normalizeAxis(n.axis,a.length),u=a.length,c=s!==u-1,l=[];let h,p=[],f=[];c&&(p=Array.from({length:u}).map((t,e)=>e),p[s]=u-1,p[u-1]=s,p.map(t=>l.push(a[t])),h=(0,r.createAttributeWithCacheKey)({perm:p}),f=(0,o.transpose)(t,e,h));const g=c?i.ShapeUtil.sizeToDimension(l,u-1):i.ShapeUtil.sizeToDimension(a,u-1),b=c?i.ShapeUtil.sizeFromDimension(l,u-1):i.ShapeUtil.sizeFromDimension(a,u-1),y=d(t,c?f:e,n,g,b);return c?(0,o.transpose)(t,y,h):y};const d=(t,e,n,r,i)=>{const a=h(t,e[0],r,i,[r]),s=t.run(Object.assign(Object.assign({},u),{cacheHint:n.cacheKey,get:()=>a}),e),o=p(t,e[0],r,i,a.output.dims,[r]),d=t.run(Object.assign(Object.assign({},c),{cacheHint:n.cacheKey,get:()=>o}),[e[0],s]),m=f(t,e[0],r,i,a.output.dims,o.output.dims);return[t.run(Object.assign(Object.assign({},l),{cacheHint:n.cacheKey,get:()=>m}),[e[0],s,d])]},h=(t,e,n,r,i)=>{const[o,c]=t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),l=i.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");const d=(0,a.getGlsl)(t.session.backend.glContext.version),h=`\n      float process(int[${l}] indices) {\n        int logical_row_start_offset = indices[0] * ${r};\n\n        float max = getColorAsFloat(${d.texture2D}(A, offsetToCoords(logical_row_start_offset, ${o},\n        ${c} )));\n        for(int i=1; i<${r}; ++i)\n        {\n          float current = getColorAsFloat(${d.texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${o}, ${c})));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }`;return Object.assign(Object.assign({},u),{output:{dims:i,type:e.type,textureType:s.TextureType.unpacked},shaderSource:h})},p=(t,e,n,r,i,o)=>{const[u,l]=t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),d=o.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==o.length)throw new Error("Dimensionality of the output should be 1");if(o[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");const h=`\n      float process(int[${d}] indices) {\n        int logical_row_start_offset = indices[0] * ${r};\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<${r}; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(${(0,a.getGlsl)(t.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${u}, ${l}))) - max);\n        }\n\n        return norm_factor;\n      }`;return Object.assign(Object.assign({},c),{output:{dims:o,type:e.type,textureType:s.TextureType.unpacked},shaderSource:h})},f=(t,e,n,r,i,a)=>{const[o,u]=t.calculateTextureWidthAndHeight(e.dims,s.TextureType.unpacked),c=e.dims.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==a.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n||a[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");const d=`\n      float process(int[${c}] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ${o}, ${u});\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ${r};\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }`;return Object.assign(Object.assign({},l),{output:{dims:e.dims,type:e.type,textureType:s.TextureType.unpacked},shaderSource:d})},m=t=>{if(!t||1!==t.length)throw new Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type")}},5975:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const r=n(246),i=n(2517),a=n(2039),s={name:"Split",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};e.split=(t,e,n)=>{c(e);const r=i.ShapeUtil.normalizeAxis(n.axis,e[0].dims.length),a=o(t,e,r,n),l=[];for(let i=0;i<a;++i)l.push(t.run(Object.assign(Object.assign({},s),{cacheHint:`${n.cacheKey};${i}`,get:()=>u(t,e[0],n,r,i)}),e));return l},e.parseSplitAttributes=t=>{const e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),i=t.outputs.length;return(0,r.createAttributeWithCacheKey)({axis:e,split:n,numOutputs:i})};const o=(t,e,n,r)=>{const[,a]=i.SplitUtil.splitShape(e[0].dims,n,r.split,r.numOutputs);return a.length},u=(t,e,n,r,o)=>{const[u,c]=i.SplitUtil.splitShape(e.dims,r,n.split,n.numOutputs),l=c[o],d=u[o],h=`\n      float process(int indices[${d.length}]) {\n        indices[${r}] += ${l};\n        return _A(indices);\n      }\n    `;return Object.assign(Object.assign({},s),{cacheHint:`${n.cacheKey}:${o}`,output:{dims:d,type:e.type,textureType:a.TextureType.unpacked},shaderSource:h})},c=t=>{if(!t||1!==t.length)throw new Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw new Error("Invalid input type.")}},3933:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const r=n(2517);e.squeeze=(t,e,n)=>{i(e);const a=r.ShapeUtil.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.squeezeV13=(t,n)=>(a(n),(0,e.squeeze)(t,[n[0]],Array.from(n[1].integerData))),e.parseSqueezeAttributes=t=>t.attributes.getInts("axes");const i=t=>{if(!t||1!==t.length)throw new Error("Squeeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},a=t=>{if(!t||2!==t.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},6558:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const r=n(5060),i=n(2039);e.sum=(t,e)=>{s(e);const n={name:"Sum",inputNames:e.map((t,e)=>"X"+e),inputTypes:new Array(e.length).fill(i.TextureType.unpacked)};return[t.run(Object.assign(Object.assign({},n),{get:()=>a(t,e,n)}),e)]};const a=(t,e,n)=>{const a=(0,r.getGlsl)(t.session.backend.glContext.version),s=e[0].dims.slice(),o=`\n      void main() {\n        vec4 result = ${e.map((t,e)=>`${a.texture2D}(X${e},TexCoords)`).join(" + ")};\n        ${a.output} = result;\n      }\n    `;return Object.assign(Object.assign({},n),{output:{dims:s,type:e[0].type,textureType:i.TextureType.unpacked},hasMain:!0,shaderSource:o})},s=t=>{if(!t||0===t.length)throw new Error("Sum requires inputs.");const e=t[0].dims.length;for(let n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(let r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])throw new Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.");for(let n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}},5723:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const r=n(782),i=n(2039);e.tile=(t,e)=>{s(e);const n={name:"Tile",inputNames:["A"],inputTypes:[i.TextureType.unpacked]};return[t.run(Object.assign(Object.assign({},n),{get:()=>a(t,e,n)}),e)]};const a=(t,e,n)=>{const r=e[0].dims.slice(),a=new Array(r.length),s=[];for(let i=0;i<r.length;i++)a[i]=r[i]*e[1].numberData[i],s.push(`inputIdx[${i}] = int(mod(float(outputIdx[${i}]), ${r[i]}.));`);const o=a.length,u=`\n      float process(int outputIdx[${o}]) {\n        int inputIdx[${o}];\n        ${s.join("\n")}\n        return _A(inputIdx);\n      }\n    `;return Object.assign(Object.assign({},n),{output:{dims:a,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:u})},s=t=>{if(!t||2!==t.length)throw new Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(-1===r.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invalid repeat type.")}},3738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const r=n(246),i=n(2517),a=n(2039),s={name:"Transpose",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};e.transpose=(t,e,n)=>(d(e),[t.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>o(t,e[0],n.perm)}),e)]),e.parseTransposeAttributes=t=>(0,r.createAttributeWithCacheKey)({perm:t.attributes.getInts("perm",[])});const o=(t,e,n)=>{const r=e.dims;n=u(r,n);const i=c(r,n),o=r.length,d=`\n      ${l("perm",n,o)}\n      float process(int indices[${o}]) {\n        int a[${o}];\n        perm(a, indices);\n        return _A(a);\n      }`;return Object.assign(Object.assign({},s),{output:{dims:i,type:e.type,textureType:a.TextureType.unpacked},shaderSource:d})},u=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),c=(t,e)=>(e=u(t,e),i.ShapeUtil.sortBasedOnPerm(t,e)),l=(t,e,n)=>{const r=[];r.push(`void ${t}(out int a[${n}], int src[${n}]) {`);for(let i=0;i<n;++i)r.push(`\ta[${e[i]}]=src[${i}];`);return r.push("\t}"),r.join("\n")},d=t=>{if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("input should be float tensor")}},8710:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const r=n(5060),i=n(2039);e.encodeAsUint8=(t,e)=>{const n=e.shape,a=(0,r.getGlsl)(t.session.backend.glContext.version),s=`\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ${a.texture2D}(X,TexCoords).r;\n      ${a.output} = encodeAsUint8(value);\n    }`,o={name:"Uint8Encode",inputTypes:[i.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:i.TextureType.downloadUint8AsFloat},shaderSource:s,hasMain:!0};return t.executeProgram(o,[e.tensor])}},4909:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const r=n(246),i=n(2517),a=n(8520),s=n(5060),o=n(2039);function u(){return A("abs")}function c(){return A("acos")}function l(){return A("asin")}function d(){return A("atan")}function h(){return A("ceil")}function p(){return A("cos")}function f(t){const e="elu";return{body:`\n  const float alpha = float(${t});\n\n  float ${e}_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ${e}_(vec4 v) {\n    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));\n  }\n  `,name:e,type:a.FunctionType.ValueBased}}function m(){return A("exp")}function g(){return A("floor")}function b(t,e){const n="clip";return{body:`\n  const float min = float(${t});\n  const float max = float(${e});\n\n  float ${n}_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ${n}_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  `,name:n,type:a.FunctionType.ValueBased}}function y(){const t="indentity";return{body:`\n  float ${t}_(float a) {\n    return a;\n  }\n  vec4 ${t}_(vec4 v) {\n    return v;\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}function v(t){const e="leakyRelu";return{body:`\n  const float alpha = float(${t});\n\n  float ${e}_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ${e}_(vec4 v) {\n    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));\n  }\n  `,name:e,type:a.FunctionType.ValueBased}}function w(){return A("log")}function x(){const t="neg";return{body:`\n  float ${t}_(float a) {\n    return -a;\n  }\n  vec4 ${t}_(vec4 v) {\n    return -v;\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}function O(){const t="not";return{body:`\n  float ${t}_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ${t}_(bool a) {\n    return !a;\n  }\n  vec4 ${t}_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ${t}_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}function S(){return A("sin")}function k(){const t="relu";return{body:`\n  float ${t}_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ${t}_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}function T(){const t="sigmoid";return{body:`\n  float ${t}_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ${t}_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}function _(){return A("sqrt")}function I(){return A("tan")}function C(){const t="tanh";return{body:`\n  float ${t}_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ${t}_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}function A(t){return{body:`\n  float ${t}_(float a) {\n    return ${t}(a);\n  }\n  vec4 ${t}_(vec4 v) {\n    return ${t}(v);\n  }\n  `,name:t,type:a.FunctionType.ValueBased}}e.glslAbs=u,e.glslAcos=c,e.glslAsin=l,e.glslAtan=d,e.glslCeil=h,e.glslCos=p,e.glslElu=f,e.glslExp=m,e.glslFloor=g,e.glslClip=b,e.glslIdentity=y,e.glslLeakyRelu=v,e.glslLog=w,e.glslNeg=x,e.glslNot=O,e.glslSin=S,e.glslRelu=k,e.glslSigmoid=T,e.glslSqrt=_,e.glslTan=I,e.glslTanh=C;const E=(t,e,n,r)=>{const i=t.session.pack?o.TextureType.packed:o.TextureType.unpacked,a={name:n.name,inputTypes:[i],inputNames:["A"],cacheHint:r};return Object.assign(Object.assign({},a),{get:()=>((t,e,n,r)=>{const i=t.session.pack?o.TextureType.packed:o.TextureType.unpacked,a=(0,s.getGlsl)(t.session.backend.glContext.version);return Object.assign(Object.assign({},e),{output:{dims:n.dims,type:n.type,textureType:i},shaderSource:`\n     ${r.body}\n     void main() {\n       vec4 v = ${a.texture2D}(A, TexCoords);\n       v = ${r.name}_(v);\n       ${a.output} = v;\n     }\n     `,hasMain:!0})})(t,a,e,n)})};e.abs=(t,e)=>[t.run(E(t,e[0],u()),e)],e.acos=(t,e)=>[t.run(E(t,e[0],c()),e)],e.asin=(t,e)=>[t.run(E(t,e[0],l()),e)],e.atan=(t,e)=>[t.run(E(t,e[0],d()),e)],e.clip=(t,e,n)=>[t.run(E(t,e[0],b(n.min,n.max),n.cacheKey),e)],e.parseClipAttributes=t=>(0,r.createAttributeWithCacheKey)({min:t.attributes.getFloat("min",i.MIN_CLIP),max:t.attributes.getFloat("max",i.MAX_CLIP)}),e.clipV11=(t,n)=>{const r=N(t,n);return(0,e.clip)(t,[n[0]],r)};const N=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const n=e.length>=3?e[1].numberData[0]:i.MIN_CLIP,a=e.length>=3?e[2].numberData[0]:i.MAX_CLIP;return(0,r.createAttributeWithCacheKey)({min:n,max:a})};e.ceil=(t,e)=>[t.run(E(t,e[0],h()),e)],e.cos=(t,e)=>[t.run(E(t,e[0],p()),e)],e.elu=(t,e,n)=>[t.run(E(t,e[0],f(n.alpha),n.cacheKey),e)],e.parseEluAttributes=t=>(0,r.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",1)}),e.exp=(t,e)=>[t.run(E(t,e[0],m()),e)],e.floor=(t,e)=>[t.run(E(t,e[0],g()),e)],e.identity=(t,e)=>[t.run(E(t,e[0],y()),e)],e.leakyRelu=(t,e,n)=>[t.run(E(t,e[0],v(n.alpha),n.cacheKey),e)],e.parseLeakyReluAttributes=t=>(0,r.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",.01)}),e.log=(t,e)=>[t.run(E(t,e[0],w()),e)],e.neg=(t,e)=>[t.run(E(t,e[0],x()),e)],e.not=(t,e)=>[t.run(E(t,e[0],O()),e)],e.relu=(t,e)=>[t.run(E(t,e[0],k()),e)],e.sigmoid=(t,e)=>[t.run(E(t,e[0],T()),e)],e.sin=(t,e)=>[t.run(E(t,e[0],S()),e)],e.sqrt=(t,e)=>[t.run(E(t,e[0],_()),e)],e.tan=(t,e)=>[t.run(E(t,e[0],I()),e)],e.tanh=(t,e)=>[t.run(E(t,e[0],C()),e)]},5611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const r=n(5060),i=n(2039),a=n(9390),s=n(2827),o={name:"unpack",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.createUnpackProgramInfo=(t,e)=>{const n=e.dims.length,u=(0,s.getChannels)("rc",n),c=u.slice(-2),l=(0,a.getCoordsDataType)(n),d=(0,s.unpackFromChannel)(),h=0===e.dims.length?"":function(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(n,u),p=n<=1?"rc":`vec2(${c.join(",")})`,f=`\n    ${d}\n    void main() {\n      ${l} rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(${h});\n\n       ${(0,r.getGlsl)(t.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${p}), 0, 0, 0);\n     }\n   `;return Object.assign(Object.assign({},o),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:i.TextureType.unpacked},shaderSource:f})},e.createUnpackProgramInfoLoader=(t,n)=>Object.assign(Object.assign({},o),{get:()=>(0,e.createUnpackProgramInfo)(t,n)})},8428:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const r=n(2517);e.unsqueeze=(t,e,n)=>{i(e);const a=r.ShapeUtil.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.unsqueezeV13=(t,n)=>(a(n),(0,e.unsqueeze)(t,[n[0]],Array.from(n[1].integerData))),e.parseUnsqueezeAttributes=t=>t.attributes.getInts("axes");const i=t=>{if(!t||1!==t.length)throw new Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},a=t=>{if(!t||2!==t.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},9793:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const r=n(246),i=n(5060),a=n(2039),s={name:"Upsample",inputNames:["X"],inputTypes:[a.TextureType.unpacked]};e.upsample=(t,n,r)=>((0,e.validateInputs)(n,r),[t.run(Object.assign(Object.assign({},s),{cacheHint:r.cacheKey,get:()=>o(t,n,r)}),n)]),e.parseUpsampleAttributesV7=t=>(0,e.parseUpsampleAttributes)(t,7),e.parseUpsampleAttributesV9=t=>(0,e.parseUpsampleAttributes)(t,9),e.parseUpsampleAttributes=(t,n)=>{const i=n>=10,a=t.attributes.getString("mode","nearest");if("nearest"!==a&&"linear"!==a&&(n<11||"cubic"!==a))throw new Error("unrecognized mode: "+a);let s=[];n<9&&(s=t.attributes.getFloats("scales"),(0,e.scalesValidation)(s,a,i));const o=t.attributes.getFloat("extrapolation_value",0),u=n>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u))throw new Error(`coordinate_transform_mode '${u}' is not supported`);const c="tf_crop_and_resize"===u,l=c,d="nearest"===a&&n>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(d))throw new Error(`nearest_mode '${d}' is not supported`);const h=t.attributes.getFloat("cubic_coeff_a",-.75),p=0!==t.attributes.getInt("exclude_outside",0);if(p&&"cubic"!==a)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const f=n<11||"nearest"===a&&"asymmetric"===u&&"floor"===d;let m=0,g=0,b=0;return n>10?t.inputs.length>2?(m=1,g=2,b=3):(g=1,b=2):9===n&&(g=1),(0,r.createAttributeWithCacheKey)({opset:n,isResize:i,mode:a,scales:s,extrapolationValue:o,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:c,nearestMode:d,cubicCoefficientA:h,excludeOutside:p,useNearest2xOptimization:f,roiInputIdx:m,scalesInputIdx:g,sizesInputIdx:b})};const o=(t,e,n)=>{const r=(0,i.getGlsl)(t.session.backend.glContext.version),[o,u]=t.calculateTextureWidthAndHeight(e[0].dims,a.TextureType.unpacked),c=e[0].dims.map((t,e)=>Math.floor(t*n.scales[e])),[l,d]=t.calculateTextureWidthAndHeight(c,a.TextureType.unpacked),h=c.length,p=new Array(h),f=new Array(h);let m=`\n      int output_pitches[${h}];\n      int input_pitches[${h}];\n      `;for(let i=h-1;i>=0;i--)p[i]=i===h-1?1:p[i+1]*c[i+1],f[i]=i===h-1?1:f[i+1]*e[0].dims[i+1],m+=`\n        output_pitches[${i}] = ${p[i]};\n        input_pitches[${i}] = ${f[i]};\n        `;const g=`\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ${o}, ${u});\n        float value = getColorAsFloat(${r.texture2D}(X, coords));\n        return value;\n      }\n      `,b="nearest"===n.mode?`\n    ${g}\n    float process(int indices[${h}]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${d});\n\n      ${m}\n\n      int d, m;\n      for (int dim = 0; dim < ${h}; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }`:4===h?`\n    ${g}\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${d});\n\n      ${m}\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }`:`\n    ${g}\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${d});\n\n      ${m}\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }`;return Object.assign(Object.assign({},s),{output:{dims:c,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:b,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map(t=>Math.ceil(t))}]})};e.validateInputs=(t,e)=>{if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if("string"===t[0].type)throw new Error("Invalid input tensor types.")},e.scalesValidation=(t,e,n)=>{if(n){for(const r of t)if(r<=0)throw new Error("Scale value should be greater than 0.")}else for(const r of t)if(r<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==e&&"cubic"!==e||2===t.length||4===t.length&&1===t[0]&&1===t[1]))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${n?"Resize":"Upsample"} opeartor.`)}},1958:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const r=n(1670),i=n(6231),a=n(8879),s=n(5060);e.ProgramManager=class{constructor(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,n){var r;this.profiler.event("op","ProgramManager.run "+(null!==(r=t.programInfo.name)&&void 0!==r?r:"unknown kernel"),()=>{var r;const a=this.glContext.gl,s=t.program;a.useProgram(s);try{this.bindOutput(n),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,null!==(r=t.programInfo.variables)&&void 0!==r?r:[],e)}catch(e){throw i.Logger.error("ProgramManager",t.programInfo.shaderSource),e}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,n){return this.profiler.event("backend","ProgramManager.build",()=>{const r=new a.GlslPreprocessor(this.glContext,t,e,n),i=r.preprocess(),s=this.compile(i);return{programInfo:t,program:s,uniformLocations:this.getUniformLocations(s,r.context.programInfo.inputNames,r.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(t){if(!this.vertexShader){i.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const t=(0,s.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(t,this.glContext.gl.VERTEX_SHADER)}r.env.debug&&i.Logger.verbose("ProrgramManager",`FragShader:\n${t}\n`);const e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),n=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),n}bindOutput(t){const e=t.width,n=t.height;i.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${n}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,n)}bindAttributes(t){const e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0}bindUniforms(t,e,n){var r;const i=this.glContext.gl;let a=0;for(const{name:s,type:o,location:u,arrayLength:c}of t){const t=null===(r=e.find(t=>t.name===s))||void 0===r?void 0:r.data;if("sampler2D"!==o&&!t)throw new Error(`variable '${s}' does not have data defined in program info`);switch(o){case"sampler2D":this.bindTexture(n[a],u,a),a++;break;case"float":c?i.uniform1fv(u,t):i.uniform1f(u,t);break;case"int":c?i.uniform1iv(u,t):i.uniform1i(u,t);break;default:throw new Error("Uniform not implemented: "+o)}}}bindTexture(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,n){const r=[];if(e)for(const i of e)r.push({name:i,type:"sampler2D",location:this.getUniformLocation(t,i)});if(n)for(const i of n)r.push(Object.assign(Object.assign({},i),{location:this.getUniformLocation(t,i.name)}));return r}getUniformLocation(t,e){const n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error(`Uniform ${e} not found.`);return n}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}},6416:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const r=n(6231),i=n(1047),a=n(8316),s=n(1640),o=n(1958),u=n(7859),c=n(5702);e.WebGLSessionHandler=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new u.PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new o.ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new c.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new a.WebGLInferenceHandler(this)}onGraphInitialized(t){const e=t.getValues().filter(t=>-1===t.from&&t.tensor).map(t=>t.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return!!this.initializers&&this.initializers.has(t)}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,n){const r=(0,i.resolveOperator)(t,e,s.WEBGL_OP_RESOLVE_RULES);return{impl:r.opImpl,context:r.opInit?r.opInit(t,n):t}}}},7769:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const r=n(6231);e.RedFloat32DataEncoder=class{constructor(t,e=1){if(1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: "+e);this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}encode(t,e){let n,i;return t.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(t)),e*this.channelSize>t.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),i=t,n=this.allocate(e*this.channelSize),i.forEach((t,e)=>n[e]=t)):(i=t,n=i),n}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter((t,e)=>e%4==0).subarray(0,e):t.subarray(0,e)}},e.RGBAFloatDataEncoder=class{constructor(t,e=1,n){if(1!==e&&4!==e)throw new Error("Invalid number of channels: "+e);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}encode(t,e){let n=t;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((t,e)=>n[4*e]=t)),n}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter((t,e)=>e%4==0).subarray(0,e):t.subarray(0,e)}},e.Uint8DataEncoder=class{constructor(t,e=1){if(this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: "+e);this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error("Invalid array type: "+t.constructor)}}},7859:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const r=n(6231),i=n(2517);function a(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||i?null:s(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(null!=a){if(a[o]===s&&1!==t[s])throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(null==a[o]||a[o]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function s(t,e){const n=e.length;return t=null==t?e.map((t,e)=>e):[].concat(t),(0,i.assert)(t.every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),(0,i.assert)(t.every(o),()=>"All values in axis param must be integers but got axis "+t),t.map(t=>t<0?n+t:t)}function o(t){return t%1==0}function u(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function c(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){if(0===t.length)return[1,1];const n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){const i=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((t,e)=>t*e),a=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((t,e)=>t*e);if(!(i>n||a>n))return[i,a];r.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`)}const i=t.reduce((t,e)=>t*e);let a=Math.floor(Math.sqrt(i));for(;a<n&&a<i&&i%a!=0;a++);if(a>=n||i%a!=0)throw new Error("The given dimensions are outside this GPU's boundaries: "+t);return[a,i/a]}},e.PreferLogicalStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){const n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n}computeTexture(t,e){const n=e&&e.isPacked;if(0===t.length)return n?[2,2]:[1,1];let i=this.maxTextureSize;if(e&&void 0!==e.breakAxis){const n=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((t,e)=>t*e),a=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((t,e)=>t*e);if(!(n>i||a>i))return[n,a];r.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`)}let s=t.slice(0);if(n&&(i*=2,s=s.map((t,e)=>e>=s.length-2?s[e]%2==0?s[e]:s[e]+1:s[e]),1===s.length&&(s=[2,s[0]])),2!==s.length){const t=a(s);s=t.newShape}const o=u(s);return s.length<=1&&o<=i?[1,o]:2===s.length&&s[0]<=i&&s[1]<=i?s:3===s.length&&s[0]*s[1]<=i&&s[2]<=i?[s[0]*s[1],s[2]]:3===s.length&&s[0]<=i&&s[1]*s[2]<=i?[s[0],s[1]*s[2]]:4===s.length&&s[0]*s[1]*s[2]<=i&&s[3]<=i?[s[0]*s[1]*s[2],s[3]]:4===s.length&&s[0]<=i&&s[1]*s[2]*s[3]<=i?[s[0],s[1]*s[2]*s[3]]:n?c(o/4).map(t=>2*t):c(o)}},e.squeezeShape=a,e.parseAxisParam=s,e.isInt=o,e.sizeFromShape=u,e.getRowsCols=function(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]},e.sizeToSquarishShape=c,e.getBatchDim=function(t,e=2){return u(t.slice(0,t.length-e))}},4057:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const r=n(2517),i=n(2039);e.createTextureLayoutFromTextureType=(t,n,r)=>{const a=r===i.TextureType.unpacked||r===i.TextureType.unpackedReversed?1:4,s=r===i.TextureType.packed,o=r===i.TextureType.unpackedReversed||r===i.TextureType.packed,u=r===i.TextureType.packedLastDimension?n.length-1:void 0,c=r===i.TextureType.packedLastDimension?n.map((t,e)=>e===n.length-1?4*t:t):void 0;return(0,e.createTextureLayoutFromShape)(t,n,a,c,{isPacked:s,reverseWH:o,breakAxis:u})},e.calculateTextureWidthAndHeight=(t,n,r)=>{const i=(0,e.createTextureLayoutFromTextureType)(t,n,r);return[i.width,i.height]},e.createTextureLayoutFromShape=(t,e,n=1,i,a)=>{const s=!(!a||!a.isPacked),[o,u]=t.computeTextureWH(s&&i||e,a),c=e.length;let l=e.slice(0);if(0===c&&(l=[1]),1===n)i=e;else if(s){if(4!==n)throw new Error("a packed texture must be 4-channel");i=e,c>0&&(l[c-1]=Math.ceil(l[c-1]/2)),c>1&&(l[c-2]=Math.ceil(l[c-2]/2))}else if(!i)throw new Error("Unpacked shape is needed when using channels > 1");return{width:o,height:u,channels:n,isPacked:s,shape:l,strides:r.ShapeUtil.computeStrides(l),unpackedShape:i,reversedWH:a&&a.reverseWH}}},5702:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const r=n(6231);e.TextureManager=class{constructor(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,n,i){const a=this.toEncoderType(t),s=this.glContext.getEncoder(a,e.channels||1,i);if(e.isPacked&&1===i)throw new Error("not implemented");const o=e.width,u=e.height;let c,l;if(this.config.reuseTextures){c=`${o}x${u}_${s.format}_${s.internalFormat}_${s.textureType}`,l=this.inUseTextures.get(c),l||(l=[],this.inUseTextures.set(c,l));const e=this.idleTextures.get(c);if(e&&e.length>0){const r=e.pop();return l.push(r),1===i&&this.glContext.updateTexture(r,o,u,s,this.toTextureData(t,n)),r}}r.Logger.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);const d=this.glContext.allocateTexture(o,u,s,this.toTextureData(t,n));return this.config.reuseTextures&&(l.push(d),this.textureLookup.set(d,c)),d}readTexture(t,e,n){return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const r=t.shape.reduce((t,e)=>t*e)*n,i=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n);return this.toTensorData(e,i)})}async readTextureAsync(t,e,n){const r=t.tensor.dataId;if(n||(n=1),this.pendingRead.has(r)){const t=this.pendingRead.get(r);return new Promise(e=>null==t?void 0:t.push(e))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(r,[]);const i=t.shape.reduce((t,e)=>t*e)*n;await this.glContext.createAndWaitForFence();const a=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),n),s=this.toTensorData(e,a),o=this.pendingRead.get(r);return this.pendingRead.delete(r),null==o||o.forEach(t=>t(s)),s})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const e=t.shape.reduce((t,e)=>t*e),n=this.glContext.readTexture(t.texture,t.width,t.height,4*e,"byte",4);return new Float32Array(n.buffer,n.byteOffset,e)})}releaseTexture(t,e){let n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture),n)){e&&this.textureLookup.delete(n);const r=this.inUseTextures.get(n);if(r){const e=r.indexOf(t.texture);if(-1!==e){r.splice(e,1);let i=this.idleTextures.get(n);i||(i=[],this.idleTextures.set(n,i)),i.push(t.texture)}}}n&&!e||(r.Logger.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},9390:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const r=n(2517);e.getPackedShape=function(t){const e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)},e.repeatedTry=async function(t,e=(t=>0),n){return new Promise((r,i)=>{let a=0;const s=()=>{if(t())return void r();a++;const o=e(a);null!=n&&a>=n?i():setTimeout(s,o)};s()})},e.generateShaderFuncNameFromInputSamplerName=function(t){return(0,r.assert)(void 0!==t&&0!==t.length,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(t){return(0,r.assert)(void 0!==t&&0!==t.length,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(t,e){let n=JSON.parse(JSON.stringify(t));return n=e,n},e.getSqueezedParams=function(t,e){return e.map(e=>t[e]).join(", ")},e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)},e.getGlChannels=function(t=6){return["x","y","z","w","u","v"].slice(0,t)}},7305:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const r=n(6231),i=n(1713),a={};function s(t){const e=function(){if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const t=document.createElement("canvas");return t.width=1,t.height=1,t}();let n;const a={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(n=e.getContext("webgl2",a),n))try{return new i.WebGLContext(n,2)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: "+t)}if((!t||"webgl"===t)&&(n=e.getContext("webgl",a)||e.getContext("experimental-webgl",a),n))try{return new i.WebGLContext(n,1)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: "+t)}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){let n;e&&"webgl2"!==e||!("webgl2"in a)?e&&"webgl"!==e||!("webgl"in a)||(n=a.webgl):n=a.webgl2,n=n||s(e),e=e||1===n.version?"webgl":"webgl2";const r=n.gl;return a[e]=n,r.isContextLost()?(delete a[e],t(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},e.createNewWebGLContext=s},1713:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const s=n(1670),o=a(n(7769)),u=n(9390);function c(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}e.linearSearchLastTrue=c,e.WebGLContext=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,n,r){const i=this.gl,a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);const s=r?n.encode(r,t*e):null;return i.texImage2D(i.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,s),this.checkError(),a}updateTexture(t,e,n,r,i){const a=this.gl;a.bindTexture(a.TEXTURE_2D,t);const s=r.encode(i,e*n);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,s),this.checkError()}attachFramebuffer(t,e,n){const r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)}readTexture(t,e,n,r,i,a){const s=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);const o=this.getEncoder(i,a),u=o.allocate(e*n);return s.bindTexture(s.TEXTURE_2D,t),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0),s.readPixels(0,0,e,n,s.RGBA,o.textureType,u),this.checkError(),o.decode(u,r)}isFramebufferReady(){return!0}getActiveTexture(){const t=this.gl;return"TEXTURE"+(t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){const n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){const n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r}compileShader(t,e){const n=this.gl,r=n.createShader(e);if(!r)throw new Error("createShader() returned null with type "+e);if(n.shaderSource(r,t),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${n.getShaderInfoLog(r)}\nShader source:\n${t}`);return r}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,n){const r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(s.env.debug){const t=this.gl,e=t.getError();let n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: "+e.toString(16)}throw new Error(n)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,n=0){if(2===this.version)return new o.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new o.RGBAFloatDataEncoder(this.gl,e):new o.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new o.Uint8DataEncoder(this.gl,e);default:throw new Error("Invalid dataType: "+t)}}clearActiveTextures(){const t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");const n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){const t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){const t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);const n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const t=this.gl;let e,n,r,i,a;try{e=t.createTexture(),n=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);const s=2===this.version?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,s,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),r=t.createShader(t.VERTEX_SHADER),!!r&&(t.shaderSource(r,"void main(){}"),t.compileShader(r),i=t.createShader(t.FRAGMENT_SHADER),!!i&&(t.shaderSource(i,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(i),a=t.createProgram(),!!a&&(t.attachShader(a,r),t.attachShader(a,i),t.linkProgram(a),t.useProgram(a),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)))}finally{t.disable(t.BLEND),a&&t.deleteProgram(a),r&&t.deleteShader(r),i&&t.deleteShader(i),n&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(n)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){const t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT)}}isTimerResultAvailable(t){let e=!1,n=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const r=this.gl,i=this.disjointTimerQueryWebgl2Extension;e=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(i.GPU_DISJOINT_EXT)}return e&&!n}getTimerResult(t){let e=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{const n=this.gl;e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t)}return e/1e6}async waitForQueryAndGetTime(t){return await(0,u.repeatedTry)(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e;const n=t,r=n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),e=null===r?()=>!0:()=>{const t=n.clientWaitSync(r,0,0);return t===n.ALREADY_SIGNALED||t===n.CONDITION_SATISFIED},{query:r,isFencePassed:e}}async pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=c(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||await(0,u.repeatedTry)(()=>(this.pollItems(),0===this.itemsToPoll.length))}}},1036:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const r=n(6231);class i{constructor(t,e){this.op=t,this.node=e}}e.ExecutionPlan=class{constructor(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{const e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((t,n)=>new i(t,e[n])),this.reset(),this._starter=[],this._ops.forEach((t,e)=>{let n=!0;for(const r of t.node.inputs)if(!this._values[r]&&-1===this.graph.getInputIndices().indexOf(r)){n=!1;break}n&&this._starter.push(e)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,e){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const n=t.createInferenceHandler(),i=this.graph.getInputIndices();if(e.length!==i.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${i.length}`);e.forEach((t,e)=>{const n=i[e];this._values[n]=t});const a=this._starter.slice(0),s=this.graph.getValues(),o=this.graph.getNodes();let u=0;for(;u<a.length;){const t=a[u++],e=this._ops[t],i=e.node.inputs.map(t=>this._values[t]);if(-1!==i.indexOf(void 0))throw new Error("unresolved input detected: op: "+e.node);const c=i;r.Logger.verbose("ExecPlan",`Runing op:${e.node.name} (${c.map((t,n)=>`'${e.node.inputs[n]}': ${t.type}[${t.dims.join(",")}]`).join(", ")})`);const l=await this.profiler.event("node",e.node.name,async()=>e.op.impl(n,c,e.op.context));if(l.length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");l.forEach((t,n)=>{const r=e.node.outputs[n];if(this._values[r])throw new Error(`output [${r}] already has value: op:${e.node.name}`);this._values[r]=t});const d=new Set;l.forEach((t,n)=>{const r=e.node.outputs[n];for(const e of s[r].to){const t=o[e];let n=!0;for(const e of t.inputs)if(!this._values[e]){n=!1;break}n&&d.add(e)}}),a.push(...d)}const c=[];for(let t=0;t<this.graph.getOutputIndices().length;t++){const e=this.graph.getOutputIndices()[t],n=this._values[e];if(void 0===n)throw new Error(`required output [${e}] does not have value`);0===e?await n.getData():n.data,c.push(n)}return r.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),c})}}},7070:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const r=n(1446),i=n(7778),a=n(9395),s=n(9162),o=n(2517);var u=a.onnxruntime.experimental.fbs;e.Graph={from:(t,e)=>new d(t,e)};class c{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=o.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}}class l{constructor(t,e){t instanceof r.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new i.Attribute(t.attribute)):t instanceof u.Node&&(this.name=null!=e?e:t.name(),this.opType=t.opType(),this.attributes=new i.Attribute(o.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class d{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof r.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof u.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}}buildGraphFromOnnxFormat(t){const e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const n=new Map;if(!t.input)throw new Error("missing information in graph: input");const r=[];for(const i of t.input){if(e.has(i.name))throw new Error("duplicated input name: "+i.name);const t=this._allData.push(new c(i))-1;e.set(i.name,t),r.push(i.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(const i of t.initializer){let t=e.get(i.name);if(void 0===t){const n=new c;n.type={shape:{dims:o.ProtoUtil.tensorDimsFromProto(i.dims)},tensorType:o.ProtoUtil.tensorDataTypeFromProto(i.dataType)},t=this._allData.push(n)-1,e.set(i.name,t)}this._allData[t]._from=-1,this._allData[t].tensor=s.Tensor.fromProto(i)}for(let i=0;i<this._allData.length;i++)this._allData[i].tensor||(this._allInputIndices.push(i),this._allInputNames.push(r[i]));if(!t.output)throw new Error("missing information in graph: output");for(const i of t.output){if(e.has(i.name))throw new Error("duplicated output name: "+i.name);const t=this._allData.push(new c(i))-1;e.set(i.name,t),this._allOutputIndices.push(t),this._allOutputNames.push(i.name)}if(!t.node)throw new Error("missing information in graph: node");for(const i of t.node){if(!i.name)for(let e=0;;e++){const t=`unnamed_${i.opType}_${e}`;if(!n.has(t)){i.name=t;break}}if(n.has(i.name))throw new Error("duplicated node name: "+i.name);const t=this._nodes.push(new l(i))-1;n.set(i.name,t)}for(let i=0;i<this._nodes.length;i++){const n=this._nodes[i],r=t.node[i];if(!r.output)throw new Error("missing output for node: "+r.name);for(const t of r.output){let a=e.get(t);if(void 0===a&&(a=this._allData.push(new c)-1,e.set(t,a)),n.outputs.push(a),void 0!==this._allData[a]._from)throw new Error("multiple nodes output to one data value: "+a);if(this._allData[a]._from=i,"Constant"===r.opType){if(!r.attribute||1!==r.attribute.length||!r.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!r.output||1!==r.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[a]._from=-1,this._allData[a].tensor=s.Tensor.fromProto(r.attribute[0].t)}}}for(let i=0;i<this._nodes.length;i++){const n=this._nodes[i],r=t.node[i];if(!r.input)throw new Error("missing input for node: "+r.name);for(const t of r.input){const a=e.get(t);if(void 0===a){if(""===t&&3===r.input.length&&"Resize"===r.opType)continue;throw new Error(`unrecognized input '${t}' for node: ${r.name}`)}n.inputs.push(a),this._allData[a]._to.push(i)}}return!0}buildGraphFromOrtFormat(t){var e,n,r;const i=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const a=new Map,d=[];for(let s=0;s<t.inputsLength();s++){const a=t.inputs(s);if(i.has(a))throw new Error("duplicated input name: "+a);for(let s=0;s<t.nodeArgsLength();s++)if((null===(e=t.nodeArgs(s))||void 0===e?void 0:e.name())===a){const e=new c;if((null===(r=null===(n=t.nodeArgs(s))||void 0===n?void 0:n.type())||void 0===r?void 0:r.valueType())!==u.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const l=t.nodeArgs(s).type().value(new u.TensorTypeAndShape),h=o.ProtoUtil.tensorDataTypeFromProto(l.elemType()),p=l.shape(),f=[];for(let t=0;t<p.dimLength();t++)f.push(o.LongUtil.longToNumber(p.dim(t).value().dimValue()));e.type={shape:{dims:f},tensorType:h};const m=this._allData.push(e)-1;i.set(a,m),d.push(a)}}for(let u=0;u<t.initializersLength();u++){const e=t.initializers(u);let n=i.get(e.name());if(void 0===n){const t=new c,r=o.ProtoUtil.tensorDimsFromORTFormat(e),a=o.ProtoUtil.tensorDataTypeFromProto(e.dataType());t.type={shape:{dims:r},tensorType:a},n=this._allData.push(t)-1,i.set(e.name(),n)}this._allData[n]._from=-1,this._allData[n].tensor=s.Tensor.fromOrtTensor(e)}for(let s=0;s<this._allData.length;s++)this._allData[s].tensor||(this._allInputIndices.push(s),this._allInputNames.push(d[s]));for(let s=0;s<t.outputsLength();s++){const e=t.outputs(s);if(i.has(e))throw new Error("duplicated output name: "+e);const n=this._allData.push(new c)-1;i.set(e,n),this._allOutputIndices.push(n),this._allOutputNames.push(e)}if(!t.nodes)throw new Error("missing information in graph: node");for(let s=0;s<t.nodesLength();s++){const e=t.nodes(s);let n=e.name();if(!n)for(let t=0;n=`unnamed_${e.opType()}_${t}`,a.has(n);t++);if(a.has(n))throw new Error("duplicated node name: "+n);const r=this._nodes.push(new l(e,n))-1;a.set(n,r)}for(let o=0;o<this._nodes.length;o++){const e=this._nodes[o],n=t.nodes(o);if(null==n)throw new Error("No node exists at index "+o);if(0===(null==n?void 0:n.outputsLength()))throw new Error("missing output for node: "+n.name);for(let t=0;t<(null==n?void 0:n.outputsLength());t++){const r=null==n?void 0:n.outputs(t);let a=i.get(r);if(void 0===a&&(a=this._allData.push(new c)-1,i.set(r,a)),e.outputs.push(a),void 0!==this._allData[a]._from)throw new Error("multiple nodes output to one data value: "+a);if(this._allData[a]._from=o,"Constant"===n.opType()){if(1!==n.attributesLength()||!n.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==n.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");e.outputs.pop(),e.executeNode=!1,this._allData[a]._from=-1,this._allData[a].tensor=s.Tensor.fromOrtTensor(n.attributes(0).t())}}}for(let s=0;s<this._nodes.length;s++){const e=this._nodes[s],n=t.nodes(s);if(0===n.inputsLength())throw new Error("missing input for node: "+n.name);for(let t=0;t<n.inputsLength();t++){const r=n.inputs(t),a=i.get(r);if(void 0===a)throw new Error(`unrecognized input '${r}' for node: ${n.name()}`);e.inputs.push(a),this._allData[a]._to.push(s)}}}checkIsAcyclic(){const t=new Set;this._allInputIndices.forEach(e=>{this._allData[e]._to.forEach(e=>{t.add(e)})});const e=Array.from(t),n=new Array(this._nodes.length).fill("white");for(;e.length>0;){const t=e.pop();"gray"===n[t]?n[t]="black":(e.push(t),n[t]="gray",this._nodes[t].outputs.forEach(r=>{const i=this._allData[r];if(void 0!==i.tensor)throw new Error("node outputs should not be initialized");if(i._from!==t)throw new Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach(t=>{if("gray"===n[t])throw new Error("model graph is cyclic");"white"===n[t]&&e.push(t)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0;for(let e=0;e<this._nodes.length;e++)this._nodes[e].executeNode?t>0&&(this._nodes[e].inputs.forEach(n=>{const r=this._allData[n]._to.indexOf(e+t);-1!==r&&(this._allData[n]._to[r]=e)}),this._nodes[e].outputs.forEach(n=>{this._allData[n]._from&&this._allData[n]._from===e+t&&(this._allData[n]._from=e)})):(t++,this._nodes[e].outputs.forEach(t=>{this._allData[t]._from=-2}),this._nodes.splice(e,1),e--);t=0;for(let e=0;e<this._allData.length;e++)if(-2!==this._allData[e].from||-1!==this._allOutputIndices.indexOf(e+t)){if(t>0){let n=-1;void 0!==this._allData[e].from&&-1!==this._allData[e].from?(n=this._nodes[this._allData[e].from].outputs.indexOf(e+t),-1!==n&&(this._nodes[this._allData[e].from].outputs[n]=e)):(n=this._allInputIndices.indexOf(e+t),-1!==n&&(this._allInputIndices[n]=e)),this._allData[e].to.forEach(r=>{n=this._nodes[r].inputs.indexOf(e+t),-1!==n&&(this._nodes[r].inputs[n]=e)}),0===this._allData[e].to.length&&(n=this._allOutputIndices.indexOf(e+t),-1!==n&&(this._allOutputIndices[n]=e))}}else t++,this._allData.splice(e,1),e--}deleteNode(t){const e=this._nodes[t];if(e.outputs.length>1)for(let o=1;o<e.outputs.length;o++)if(this._allData[e.outputs[o]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");e.executeNode=!1;const n=e.inputs[0],r=e.outputs[0],i=this._allData[r].to,a=this._allData[n].to.indexOf(t);if(-1===a)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[n].to.splice(a,1),this._allData[r]._to=[];const s=this._allOutputIndices.indexOf(r);if(-1!==s&&(this._allOutputIndices[s]=n),i&&i.length>0)for(const o of i){const t=this._nodes[o].inputs.indexOf(r);if(-1===t)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[o].inputs[t]=n,this._allData[n].to.push(o)}}removeAllDropoutNodes(){let t=0;for(const e of this._nodes){if("Dropout"===e.opType){if(1!==e.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==e.outputs.length&&2!==e.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===e.outputs.length&&0!==this._allData[e.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(const e of this._nodes)"Identity"===e.opType&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const t of this._nodes)if("Conv"===t.opType){const n=this._allData[t.outputs[0]]._to;if(1===n.length&&this.isActivation(this._nodes[n[0]])){const r=this._nodes[n[0]];if("Clip"===r.opType)if(1===r.inputs.length)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch(e){t.attributes.set("activation_params","floats",[o.MIN_CLIP,o.MAX_CLIP])}else{if(!(r.inputs.length>=3&&void 0!==this._allData[r.inputs[1]].tensor&&void 0!==this._allData[r.inputs[2]].tensor))continue;t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]])}t.attributes.set("activation","string",r.opType),this.deleteNode(n[0])}}}}},6231:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const n={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},r={none:new class{log(t,e,n){}},console:new class{log(t,e,n){console.log(`${this.color(t)} ${n?"[35m"+n+"[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error("unsupported severity: "+t)}}}},i={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let a={"":i};function s(t,e,n,r){if(void 0===e)return i=t,{verbose:s.verbose.bind(null,i),info:s.info.bind(null,i),warning:s.warning.bind(null,i),error:s.error.bind(null,i),fatal:s.fatal.bind(null,i)};if(void 0===n)o(t,e);else if("number"==typeof n&&void 0===r)o(t,e);else if("string"==typeof n&&void 0===r)o(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");o(t,n,0,e)}var i}function o(t,e,i,s){const o=a[s||""]||a[""];n[t]<n[o.minimalSeverity]||(o.logDateTime&&(e=`${(new Date).toISOString()}|${e}`),o.logSourceLocation,r[o.provider].log(t,e,s))}!function(t){function e(t){a={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{const e=a[t]||i;a[t]={provider:n.provider||e.provider,minimalSeverity:n.minimalSeverity||e.minimalSeverity,logDateTime:void 0===n.logDateTime?e.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?e.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.fatal=function(e,n){t("fatal",e,n)},t.reset=e,t.set=n,t.setWithEnv=function(t){const e={};t.logLevel&&(e.minimalSeverity=t.logLevel),n("",e)}}(s||(s={})),e.Logger=s;class u{constructor(t,e,n,r,i,a){this.category=t,this.name=e,this.startTime=n,this.endCallback=r,this.timer=i,this.ctx=a}end(){return this.endCallback(this)}async checkTimer(){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class c{constructor(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r}}e.Profiler=class{static create(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}constructor(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,n,r){const i=this._started?this.begin(t,e,r):void 0;let a=!1;const s=n();if(s&&"function"==typeof s.then)return a=!0,new Promise((t,e)=>{s.then(async e=>{i&&await i.end(),t(e)},async t=>{i&&await i.end(),e(t)})});if(!a&&i){const t=i.end();if(t&&"function"==typeof t.then)return new Promise((e,n)=>{t.then(()=>{e(s)},t=>{n(t)})})}return s}begin(t,n,r){if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){const r=(0,e.now)();return this.flush(r),new u(t,n,r,t=>this.endSync(t))}{const e=r.beginTimer();return new u(t,n,0,async t=>this.end(t),e,r)}}async end(t){const e=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new c(t.category,t.name,t.startTime,e)),this.flush(e))}endSync(t){const n=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new c(t.category,t.name,t.startTime,n)),this.flush(n))}logOneEvent(t){e.Logger.verbose("Profiler."+t.category,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(const t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now="undefined"!=typeof performance&&performance.now?()=>performance.now():Date.now},2644:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const r=n(5686),i=n(1446),a=n(7070),s=n(9395),o=n(2517);var u=s.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(t,e,n){if(!n)try{return void this.loadFromOnnxFormat(t,e)}catch(t){if(void 0!==n)throw t}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){const n=i.onnx.ModelProto.decode(t);if(o.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map(t=>({domain:t.domain,version:o.LongUtil.longToNumber(t.version)})),this._graph=a.Graph.from(n.graph,e)}loadFromOrtFormat(t,e){const n=new r.flatbuffers.ByteBuffer(t),i=u.InferenceSession.getRootAsInferenceSession(n).model();if(o.LongUtil.longToNumber(i.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let r=0;r<i.opsetImportLength();r++){const t=i.opsetImport(r);this._opsets.push({domain:null==t?void 0:t.domain(),version:o.LongUtil.longToNumber(t.version())})}this._graph=a.Graph.from(i.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(t,e)=>{"use strict";function n(t,e){if(e.endsWith("+")){const n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){const n=e.split("-"),r=Number.parseInt(n[0],10),i=Number.parseInt(n[1],10);return!isNaN(r)&&!isNaN(i)&&r<=t&&t<=i}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,r){for(const i of r){const r=i[0],a=i[1],s=i[2],o=i[3],u=i[4];if(t.opType===r)for(const t of e)if((t.domain===a||"ai.onnx"===t.domain&&""===a)&&n(t.version,s))return{opImpl:o,opInit:u}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(t=>`${t.domain||"ai.onnx"} v${t.version}`).join(", ")}`)}},9395:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const r=n(5686);var i,a;i=e.onnxruntime||(e.onnxruntime={}),function(t){let e;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.INT=2]="INT",t[t.STRING=3]="STRING",t[t.TENSOR=4]="TENSOR",t[t.GRAPH=5]="GRAPH",t[t.FLOATS=6]="FLOATS",t[t.INTS=7]="INTS",t[t.STRINGS=8]="STRINGS",t[t.TENSORS=9]="TENSORS",t[t.GRAPHS=10]="GRAPHS",t[t.SPARSE_TENSOR=11]="SPARSE_TENSOR",t[t.SPARSE_TENSORS=12]="SPARSE_TENSORS"}(e=t.AttributeType||(t.AttributeType={}))}((a=i.experimental||(i.experimental={})).fbs||(a.fbs={})),function(t){!function(t){!function(t){let e;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VALUE=1]="VALUE",t[t.PARAM=2]="PARAM"}(e=t.DimensionValueType||(t.DimensionValueType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.UINT8=2]="UINT8",t[t.INT8=3]="INT8",t[t.UINT16=4]="UINT16",t[t.INT16=5]="INT16",t[t.INT32=6]="INT32",t[t.INT64=7]="INT64",t[t.STRING=8]="STRING",t[t.BOOL=9]="BOOL",t[t.FLOAT16=10]="FLOAT16",t[t.DOUBLE=11]="DOUBLE",t[t.UINT32=12]="UINT32",t[t.UINT64=13]="UINT64",t[t.COMPLEX64=14]="COMPLEX64",t[t.COMPLEX128=15]="COMPLEX128",t[t.BFLOAT16=16]="BFLOAT16"}(e=t.TensorDataType||(t.TensorDataType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.Primitive=0]="Primitive",t[t.Fused=1]="Fused"}(e=t.NodeType||(t.NodeType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.NONE=0]="NONE",t[t.tensor_type=1]="tensor_type",t[t.sequence_type=2]="sequence_type",t[t.map_type=3]="map_type"}(e=t.TypeInfoValue||(t.TypeInfoValue={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsShape(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsShape(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}dim(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}dimLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startShape(t){t.startObject(1)}static addDim(t,e){t.addFieldOffset(0,e,0)}static createDimVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startDimVector(t,e){t.startVector(4,e,4)}static endShape(t){return t.endObject()}static createShape(t,e){return n.startShape(t),n.addDim(t,e),n.endShape(t)}}e.Shape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimension(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimension(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}value(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}denotation(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimension(t){t.startObject(2)}static addValue(t,e){t.addFieldOffset(0,e,0)}static addDenotation(t,e){t.addFieldOffset(1,e,0)}static endDimension(t){return t.endObject()}static createDimension(t,e,r){return n.startDimension(t),n.addValue(t,e),n.addDenotation(t,r),n.endDimension(t)}}e.Dimension=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimensionValue(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimensionValue(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}dimType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}dimParam(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimensionValue(t){t.startObject(3)}static addDimType(e,n){e.addFieldInt8(0,n,t.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static addDimParam(t,e){t.addFieldOffset(2,e,0)}static endDimensionValue(t){return t.endObject()}static createDimensionValue(t,e,r,i){return n.startDimensionValue(t),n.addDimType(t,e),n.addDimValue(t,r),n.addDimParam(t,i),n.endDimensionValue(t)}}e.DimensionValue=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensorTypeAndShape(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensorTypeAndShape(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}elemType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}shape(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startTensorTypeAndShape(t){t.startObject(2)}static addElemType(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(t,e){t.addFieldOffset(1,e,0)}static endTensorTypeAndShape(t){return t.endObject()}static createTensorTypeAndShape(t,e,r){return n.startTensorTypeAndShape(t),n.addElemType(t,e),n.addShape(t,r),n.endTensorTypeAndShape(t)}}e.TensorTypeAndShape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapType(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMapType(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}keyType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}valueType(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startMapType(t){t.startObject(2)}static addKeyType(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(t,e){t.addFieldOffset(1,e,0)}static endMapType(t){return t.endObject()}static createMapType(t,e,r){return n.startMapType(t),n.addKeyType(t,e),n.addValueType(t,r),n.endMapType(t)}}e.MapType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSequenceType(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSequenceType(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}elemType(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startSequenceType(t){t.startObject(1)}static addElemType(t,e){t.addFieldOffset(0,e,0)}static endSequenceType(t){return t.endObject()}static createSequenceType(t,e){return n.startSequenceType(t),n.addElemType(t,e),n.endSequenceType(t)}}e.SequenceType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){(t.fbs||(t.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(t,e,n,r){return t.prep(4,12),t.writeInt32(r),t.writeInt32(n),t.writeInt32(e),t.offset()}}}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNodeEdge(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNodeEdge(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}nodeIndex(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}inputEdges(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null}inputEdgesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}outputEdges(e,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null}outputEdgesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNodeEdge(t){t.startObject(3)}static addNodeIndex(t,e){t.addFieldInt32(0,e,0)}static addInputEdges(t,e){t.addFieldOffset(1,e,0)}static startInputEdgesVector(t,e){t.startVector(12,e,4)}static addOutputEdges(t,e){t.addFieldOffset(2,e,0)}static startOutputEdgesVector(t,e){t.startVector(12,e,4)}static endNodeEdge(t){return t.endObject()}static createNodeEdge(t,e,r,i){return n.startNodeEdge(t),n.addNodeIndex(t,e),n.addInputEdges(t,r),n.addOutputEdges(t,i),n.endNodeEdge(t)}}e.NodeEdge=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNode(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNode(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}sinceVersion(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0}index(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0}opType(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.NodeType.Primitive}executionProviderType(t){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}inputs(t,e){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}attributes(e,n){let r=this.bb.__offset(this.bb_pos,24);return r?(n||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}attributesLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCounts(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}inputArgCountsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCountsArray(){let t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}implicitInputs(t,e){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}implicitInputsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNode(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDomain(t,e){t.addFieldOffset(2,e,0)}static addSinceVersion(t,e){t.addFieldInt32(3,e,0)}static addIndex(t,e){t.addFieldInt32(4,e,0)}static addOpType(t,e){t.addFieldOffset(5,e,0)}static addType(e,n){e.addFieldInt32(6,n,t.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(t,e){t.addFieldOffset(7,e,0)}static addInputs(t,e){t.addFieldOffset(8,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(9,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addAttributes(t,e){t.addFieldOffset(10,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addInputArgCounts(t,e){t.addFieldOffset(11,e,0)}static createInputArgCountsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startInputArgCountsVector(t,e){t.startVector(4,e,4)}static addImplicitInputs(t,e){t.addFieldOffset(12,e,0)}static createImplicitInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startImplicitInputsVector(t,e){t.startVector(4,e,4)}static endNode(t){return t.endObject()}static createNode(t,e,r,i,a,s,o,u,c,l,d,h,p,f){return n.startNode(t),n.addName(t,e),n.addDocString(t,r),n.addDomain(t,i),n.addSinceVersion(t,a),n.addIndex(t,s),n.addOpType(t,o),n.addType(t,u),n.addExecutionProviderType(t,c),n.addInputs(t,l),n.addOutputs(t,d),n.addAttributes(t,h),n.addInputArgCounts(t,p),n.addImplicitInputs(t,f),n.endNode(t)}}e.Node=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsValueInfo(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsValueInfo(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startValueInfo(t){t.startObject(3)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldOffset(2,e,0)}static endValueInfo(t){return t.endObject()}static createValueInfo(t,e,r,i){return n.startValueInfo(t),n.addName(t,e),n.addDocString(t,r),n.addType(t,i),n.endValueInfo(t)}}e.ValueInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTypeInfo(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTypeInfo(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}denotation(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}valueType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.experimental.fbs.TypeInfoValue.NONE}value(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}static startTypeInfo(t){t.startObject(3)}static addDenotation(t,e){t.addFieldOffset(0,e,0)}static addValueType(e,n){e.addFieldInt8(1,n,t.experimental.fbs.TypeInfoValue.NONE)}static addValue(t,e){t.addFieldOffset(2,e,0)}static endTypeInfo(t){return t.endObject()}static createTypeInfo(t,e,r,i){return n.startTypeInfo(t),n.addDenotation(t,e),n.addValueType(t,r),n.addValue(t,i),n.endTypeInfo(t)}}e.TypeInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOperatorSetId(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOperatorSetId(t,n){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}domain(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}version(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}static startOperatorSetId(t){t.startObject(2)}static addDomain(t,e){t.addFieldOffset(0,e,0)}static addVersion(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static endOperatorSetId(t){return t.endObject()}static createOperatorSetId(t,n,r){return e.startOperatorSetId(t),e.addDomain(t,n),e.addVersion(t,r),e.endOperatorSetId(t)}}t.OperatorSetId=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensor(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensor(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}dataType(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}rawData(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}rawDataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}rawDataArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringData(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}stringDataLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}static startTensor(t){t.startObject(6)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static addDataType(e,n){e.addFieldInt32(3,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(t,e){t.addFieldOffset(4,e,0)}static createRawDataVector(t,e){t.startVector(1,e.length,1);for(let n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}static startRawDataVector(t,e){t.startVector(1,e,1)}static addStringData(t,e){t.addFieldOffset(5,e,0)}static createStringDataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startStringDataVector(t,e){t.startVector(4,e,4)}static endTensor(t){return t.endObject()}static createTensor(t,e,r,i,a,s,o){return n.startTensor(t),n.addName(t,e),n.addDocString(t,r),n.addDims(t,i),n.addDataType(t,a),n.addRawData(t,s),n.addStringData(t,o),n.endTensor(t)}}e.Tensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSparseTensor(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSparseTensor(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}values(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indices(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSparseTensor(t){t.startObject(3)}static addValues(t,e){t.addFieldOffset(0,e,0)}static addIndices(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static endSparseTensor(t){return t.endObject()}static createSparseTensor(t,e,r,i){return n.startSparseTensor(t),n.addValues(t,e),n.addIndices(t,r),n.addDims(t,i),n.endSparseTensor(t)}}e.SparseTensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAttribute(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsAttribute(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.AttributeType.UNDEFINED}f(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0}i(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}s(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}t(e){let n=this.bb.__offset(this.bb_pos,16);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}g(e){let n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}floats(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0}floatsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}floatsArray(){let t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}ints(t){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}intsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}strings(t,e){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}stringsLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}tensors(e,n){let r=this.bb.__offset(this.bb_pos,26);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}tensorsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}graphs(e,n){let r=this.bb.__offset(this.bb_pos,28);return r?(n||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}graphsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startAttribute(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(e,n){e.addFieldInt32(2,n,t.experimental.fbs.AttributeType.UNDEFINED)}static addF(t,e){t.addFieldFloat32(3,e,0)}static addI(t,e){t.addFieldInt64(4,e,t.createLong(0,0))}static addS(t,e){t.addFieldOffset(5,e,0)}static addT(t,e){t.addFieldOffset(6,e,0)}static addG(t,e){t.addFieldOffset(7,e,0)}static addFloats(t,e){t.addFieldOffset(8,e,0)}static createFloatsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()}static startFloatsVector(t,e){t.startVector(4,e,4)}static addInts(t,e){t.addFieldOffset(9,e,0)}static createIntsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startIntsVector(t,e){t.startVector(8,e,8)}static addStrings(t,e){t.addFieldOffset(10,e,0)}static createStringsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startStringsVector(t,e){t.startVector(4,e,4)}static addTensors(t,e){t.addFieldOffset(11,e,0)}static createTensorsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startTensorsVector(t,e){t.startVector(4,e,4)}static addGraphs(t,e){t.addFieldOffset(12,e,0)}static createGraphsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startGraphsVector(t,e){t.startVector(4,e,4)}static endAttribute(t){return t.endObject()}static createAttribute(t,e,r,i,a,s,o,u,c,l,d,h,p,f){return n.startAttribute(t),n.addName(t,e),n.addDocString(t,r),n.addType(t,i),n.addF(t,a),n.addI(t,s),n.addS(t,o),n.addT(t,u),n.addG(t,c),n.addFloats(t,l),n.addInts(t,d),n.addStrings(t,h),n.addTensors(t,p),n.addGraphs(t,f),n.endAttribute(t)}}e.Attribute=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraph(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGraph(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}initializers(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}initializersLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeArgs(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}nodeArgsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nodes(e,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}maxNodeIndex(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0}nodeEdges(e,n){let r=this.bb.__offset(this.bb_pos,12);return r?(n||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}nodeEdgesLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}inputs(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}sparseInitializers(e,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}sparseInitializersLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGraph(t){t.startObject(8)}static addInitializers(t,e){t.addFieldOffset(0,e,0)}static createInitializersVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInitializersVector(t,e){t.startVector(4,e,4)}static addNodeArgs(t,e){t.addFieldOffset(1,e,0)}static createNodeArgsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodeArgsVector(t,e){t.startVector(4,e,4)}static addNodes(t,e){t.addFieldOffset(2,e,0)}static createNodesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodesVector(t,e){t.startVector(4,e,4)}static addMaxNodeIndex(t,e){t.addFieldInt32(3,e,0)}static addNodeEdges(t,e){t.addFieldOffset(4,e,0)}static createNodeEdgesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodeEdgesVector(t,e){t.startVector(4,e,4)}static addInputs(t,e){t.addFieldOffset(5,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(6,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addSparseInitializers(t,e){t.addFieldOffset(7,e,0)}static createSparseInitializersVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startSparseInitializersVector(t,e){t.startVector(4,e,4)}static endGraph(t){return t.endObject()}static createGraph(t,e,r,i,a,s,o,u,c){return n.startGraph(t),n.addInitializers(t,e),n.addNodeArgs(t,r),n.addNodes(t,i),n.addMaxNodeIndex(t,a),n.addNodeEdges(t,s),n.addInputs(t,o),n.addOutputs(t,u),n.addSparseInitializers(t,c),n.endGraph(t)}}e.Graph=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModel(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}irVersion(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}opsetImport(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}opsetImportLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}producerName(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}producerVersion(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}modelVersion(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}docString(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}graph(e){let n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}graphDocString(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}static startModel(t){t.startObject(9)}static addIrVersion(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addOpsetImport(t,e){t.addFieldOffset(1,e,0)}static createOpsetImportVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOpsetImportVector(t,e){t.startVector(4,e,4)}static addProducerName(t,e){t.addFieldOffset(2,e,0)}static addProducerVersion(t,e){t.addFieldOffset(3,e,0)}static addDomain(t,e){t.addFieldOffset(4,e,0)}static addModelVersion(t,e){t.addFieldInt64(5,e,t.createLong(0,0))}static addDocString(t,e){t.addFieldOffset(6,e,0)}static addGraph(t,e){t.addFieldOffset(7,e,0)}static addGraphDocString(t,e){t.addFieldOffset(8,e,0)}static endModel(t){return t.endObject()}static createModel(t,e,r,i,a,s,o,u,c,l){return n.startModel(t),n.addIrVersion(t,e),n.addOpsetImport(t,r),n.addProducerName(t,i),n.addProducerVersion(t,a),n.addDomain(t,s),n.addModelVersion(t,o),n.addDocString(t,u),n.addGraph(t,c),n.addGraphDocString(t,l),n.endModel(t)}}e.Model=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKernelCreateInfos(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKernelCreateInfos(t,n){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}nodeIndices(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}nodeIndicesLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeIndicesArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}kernelDefHashes(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}kernelDefHashesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startKernelCreateInfos(t){t.startObject(2)}static addNodeIndices(t,e){t.addFieldOffset(0,e,0)}static createNodeIndicesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startNodeIndicesVector(t,e){t.startVector(4,e,4)}static addKernelDefHashes(t,e){t.addFieldOffset(1,e,0)}static createKernelDefHashesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startKernelDefHashesVector(t,e){t.startVector(8,e,8)}static endKernelCreateInfos(t){return t.endObject()}static createKernelCreateInfos(t,n,r){return e.startKernelCreateInfos(t),e.addNodeIndices(t,n),e.addKernelDefHashes(t,r),e.endKernelCreateInfos(t)}}t.KernelCreateInfos=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSubGraphSessionState(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSubGraphSessionState(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}graphId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}sessionState(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startSubGraphSessionState(t){t.startObject(2)}static addGraphId(t,e){t.addFieldOffset(0,e,0)}static addSessionState(t,e){t.addFieldOffset(1,e,0)}static endSubGraphSessionState(t){let e=t.endObject();return t.requiredField(e,4),e}static createSubGraphSessionState(t,e,r){return n.startSubGraphSessionState(t),n.addGraphId(t,e),n.addSessionState(t,r),n.endSubGraphSessionState(t)}}e.SubGraphSessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSessionState(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSessionState(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}kernels(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}subGraphSessionStates(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}subGraphSessionStatesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSessionState(t){t.startObject(2)}static addKernels(t,e){t.addFieldOffset(0,e,0)}static addSubGraphSessionStates(t,e){t.addFieldOffset(1,e,0)}static createSubGraphSessionStatesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startSubGraphSessionStatesVector(t,e){t.startVector(4,e,4)}static endSessionState(t){return t.endObject()}static createSessionState(t,e,r){return n.startSessionState(t),n.addKernels(t,e),n.addSubGraphSessionStates(t,r),n.endSessionState(t)}}e.SessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInferenceSession(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInferenceSession(t,e){return t.setPosition(t.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("ORTM")}ortVersion(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}model(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}sessionState(e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startInferenceSession(t){t.startObject(3)}static addOrtVersion(t,e){t.addFieldOffset(0,e,0)}static addModel(t,e){t.addFieldOffset(1,e,0)}static addSessionState(t,e){t.addFieldOffset(2,e,0)}static endInferenceSession(t){return t.endObject()}static finishInferenceSessionBuffer(t,e){t.finish(e,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(t,e){t.finish(e,"ORTM",!0)}static createInferenceSession(t,e,r,i){return n.startInferenceSession(t),n.addOrtVersion(t,e),n.addModel(t,r),n.addSessionState(t,i),n.endInferenceSession(t)}}e.InferenceSession=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const r=n(1670),i=n(9162);e.OnnxjsSessionHandler=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,e,n){const a=new Map;for(const r in t)if(Object.hasOwnProperty.call(t,r)){const e=t[r];a.set(r,new i.Tensor(e.dims,e.type,void 0,void 0,e.data))}const s=await this.session.run(a),o={};return s.forEach((t,e)=>{o[e]=new r.Tensor(t.type,t.data,t.dims)}),o}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const r=n(7067),i=n(1296),a=n(7091),s=n(1036),o=n(6231),u=n(2644);e.Session=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=o.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,e,n){await this.profiler.event("session","Session.loadModel",async()=>{const s=await(0,a.resolveBackend)(this.backendHint);if(this.sessionHandler=s.createSessionHandler(this.context),this._model=new u.Model,"string"==typeof t){const e=t.endsWith(".ort");if("undefined"==typeof fetch){const n=await(0,i.promisify)(r.readFile)(t);this.initialize(n,e)}else{const n=await fetch(t),r=await n.arrayBuffer();this.initialize(new Uint8Array(r),e)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{const r=new Uint8Array(t,e||0,n||t.byteLength);this.initialize(r)}})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const n=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,n,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new s.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const e=this.normalizeAndValidateInputs(t),n=await this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(n)})}normalizeAndValidateInputs(t){const e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);const n=new Array(t.size);let r=0;for(let i=0;i<e.length;++i){const a=t.get(e[i]);if(!a)throw new Error(`missing input tensor for: '${name}'`);n[r++]=a}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{const e=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),r=new Array(e.length);for(let i=0;i<e.length;++i){const a=n[e[i]];r[i]=a.type.shape.dims,this.context.graphInputTypes.push(a.type.tensorType),this.context.graphInputDims.push(t[i].dims)}this.validateInputTensorDims(r,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let n=0;n<e.length;n++){const r=t[n],i=e[n].type;if(r!==i)throw new Error(`input tensor[${n}] check failed: expected type '${r}' but got ${i}`)}}validateInputTensorDims(t,e,n){for(let r=0;r<e.length;r++){const i=t[r],a=e[r].dims;if(!this.compareTensorDims(i,a,n))throw new Error(`input tensor[${r}] check failed: expected shape '[${i.join(",")}]' but got [${a.join(",")}]`)}}compareTensorDims(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||0!==t[r]))return!1;return!0}createOutput(t){const e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");const n=new Map;for(let r=0;r<e.length;++r)n.set(e[r],t[r]);return n}initializeOps(t){const e=t.getNodes();this._ops=new Array(e.length);for(let n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)}}},9162:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const i=n(3442),a=r(n(3720)),s=n(1446),o=n(9395),u=n(2517);var c=o.onnxruntime.experimental.fbs;class l{get data(){if(void 0===this.cache){const t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[u.ShapeUtil.indicesToOffset(t,this.strides)]}set(t,e){this.data[u.ShapeUtil.indicesToOffset(t,this.strides)]=e}async getData(){return void 0===this.cache&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=u.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(t,e,n,r,a,s=i.Guid.create()){this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=r,this.cache=a,this.dataId=s,this.size=u.ShapeUtil.validateDimsAndCalcSize(t);const o=this.size,c=void 0===n&&void 0===r&&void 0===a;if(void 0!==a&&a.length!==o)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===a||Array.isArray(a)&&a.every(t=>"string"==typeof t)))throw new TypeError("cache should be a string array");c&&(this.cache=new Array(o))}else{if(void 0!==a){const t=h(e);if(!(a instanceof t))throw new TypeError("cache should be type "+t.name)}if(c){const t=new ArrayBuffer(o*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type "+t)}}(e));this.cache=function(t,e){return new(h(e))(t)}(t,e)}}}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");const e=u.ProtoUtil.tensorDataTypeFromProto(t.dataType),n=u.ProtoUtil.tensorDimsFromProto(t.dims),r=new l(n,e);if("string"===e)t.stringData.forEach((t,e)=>{r.data[e]=(0,u.decodeUtf8String)(t)});else if(t.rawData&&"number"==typeof t.rawData.byteLength&&t.rawData.byteLength>0){const e=r.data,n=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),i=d(t.dataType),a=t.rawData.byteLength/i;if(t.rawData.byteLength%i!=0)throw new Error("invalid buffer length");if(e.length!==a)throw new Error("buffer length mismatch");for(let r=0;r<a;r++){const a=f(n,t.dataType,r*i);e[r]=a}}else{let e;switch(t.dataType){case s.onnx.TensorProto.DataType.FLOAT:e=t.floatData;break;case s.onnx.TensorProto.DataType.INT32:case s.onnx.TensorProto.DataType.INT16:case s.onnx.TensorProto.DataType.UINT16:case s.onnx.TensorProto.DataType.INT8:case s.onnx.TensorProto.DataType.UINT8:case s.onnx.TensorProto.DataType.BOOL:e=t.int32Data;break;case s.onnx.TensorProto.DataType.INT64:e=t.int64Data;break;case s.onnx.TensorProto.DataType.DOUBLE:e=t.doubleData;break;case s.onnx.TensorProto.DataType.UINT32:case s.onnx.TensorProto.DataType.UINT64:e=t.uint64Data;break;default:throw new Error("unspecific error")}if(null==e)throw new Error("failed to populate data from a tensorproto value");const n=r.data;if(n.length!==e.length)throw new Error("array length mismatch");for(let r=0;r<e.length;r++){const i=e[r];a.default.isLong(i)?n[r]=p(i,t.dataType):n[r]=i}}return r}static fromData(t,e,n){return new l(e,n,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");const e=u.ProtoUtil.tensorDimsFromORTFormat(t),n=u.ProtoUtil.tensorDataTypeFromProto(t.dataType()),r=new l(e,n);if("string"===n)for(let i=0;i<t.stringDataLength();i++)r.data[i]=t.stringData(i);else if(t.rawDataArray()&&"number"==typeof t.rawDataLength()&&t.rawDataLength()>0){const e=r.data,n=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),i=d(t.dataType()),a=t.rawDataLength()/i;if(t.rawDataLength()%i!=0)throw new Error("invalid buffer length");if(e.length!==a)throw new Error("buffer length mismatch");for(let r=0;r<a;r++){const a=f(n,t.dataType(),r*i);e[r]=a}}return r}}function d(t){switch(t){case s.onnx.TensorProto.DataType.UINT8:case s.onnx.TensorProto.DataType.INT8:case s.onnx.TensorProto.DataType.BOOL:return 1;case s.onnx.TensorProto.DataType.UINT16:case s.onnx.TensorProto.DataType.INT16:return 2;case s.onnx.TensorProto.DataType.FLOAT:case s.onnx.TensorProto.DataType.INT32:case s.onnx.TensorProto.DataType.UINT32:return 4;case s.onnx.TensorProto.DataType.INT64:case s.onnx.TensorProto.DataType.DOUBLE:case s.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type "+s.onnx.TensorProto.DataType[t])}}function h(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function p(t,e){if(e===s.onnx.TensorProto.DataType.INT64||e===c.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==s.onnx.TensorProto.DataType.UINT32&&e!==c.TensorDataType.UINT32&&e!==s.onnx.TensorProto.DataType.UINT64&&e!==c.TensorDataType.UINT64)throw new TypeError("not a LONG type: "+s.onnx.TensorProto.DataType[e]);if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function f(t,e,n){switch(e){case s.onnx.TensorProto.DataType.BOOL:case s.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case s.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case s.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case s.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case s.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case s.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case s.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case s.onnx.TensorProto.DataType.INT64:return p(a.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case s.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case s.onnx.TensorProto.DataType.UINT64:return p(a.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error("cannot read from DataView for type "+s.onnx.TensorProto.DataType[e])}}e.Tensor=l},2517:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const i=n(5686),a=r(n(3720)),s=n(1446),o=n(9162);e.checkInputsShape=function(t,...e){if(!t||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].dims||t[n].dims.length!==e[n])return!1;return!0},e.assert=function(t,e){if(!t)throw new Error("string"==typeof e?e:e())},e.ArrayUtil=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}};class u{static preprocessInputShapes(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]}static postprocessOutputShape(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}}e.MatMulUtil=u;class c{static calcShape(t,e,n=!1){const r=t.length,i=e.length;if(0===r)return e;if(0===i)return t;const a=Math.max(t.length,e.length),s=new Array(a);if(n){if(r<2||i<2)return;const n=u.calcMatMulShape([t[r-2],t[r-1]],[e[i-2],e[i-1]]);if(void 0===n)return;[s[a-2],s[a-1]]=n}for(let o=n?3:1;o<=a;o++){const n=r-o<0?1:t[r-o],u=i-o<0?1:e[i-o];if(n!==u&&n>1&&u>1)return;s[a-o]=Math.max(n,u)}return s}static index(t,e){const n=new Array(e.length);return c.fillIndex(t,e,n),n}static fillIndex(t,e,n){const r=t.length-e.length;for(let i=0;i<e.length;i++)n[i]=t[r+i]%e[i]}static calc(t,e,n,r,i){const a=c.calcShape(t.dims,e.dims);if(a){if(r&&!h.areEqual(a,t.dims))return;const s=h.size(a),u=r?t:new o.Tensor(a,i||t.type);if(0===a.length)u.set([],n(t.get([]),e.get([])));else{const r=new Array(a.length),i=new Array(t.dims.length),o=new Array(e.dims.length);let l,d=0,h=0,p=!1,f=!1;0===t.dims.length&&(d=t.get([]),p=!0),0===e.dims.length&&(h=e.get([]),f=!0);for(let m=0;m<s;m++){l=m;for(let t=a.length-1;t>=0;t--)r[t]=l%a[t],l=Math.floor(l/a[t]);p||(c.fillIndex(r,t.dims,i),d=t.get(i)),f||(c.fillIndex(r,e.dims,o),h=e.get(o)),u.set(r,n(d,h))}}return u}}static isValidBroadcast(t,e){const n=t.length,r=e.length;if(n>r)return!1;for(let i=1;i<=n;i++)if(1!==t[n-i]&&t[n-i]!==e[r-i])return!1;return!0}static getBroadcastDims(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,s=t[a]||1;(e[e.length-1-i]||1)>1&&1===s&&r.unshift(a)}return r}}e.BroadcastUtil=c,e.arrayCopyHelper=function(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let a=0;a<i;a++)t[n+a]=e[r+a]},e.GemmUtil=class{static getShapeOfGemmResult(t,e,n,r,i){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");let a,s,o;e?(a=t[1],s=t[0]):(a=t[0],s=t[1]);let u=-1;if(r?(o=n[0],u=1):(o=n[1],u=0),n[u]!==s)throw new Error("dimension mismatch");if(a<=0||o<=0||s<=0)throw new Error("invalid shape specified");if(i&&!c.isValidBroadcast(i,[a,o]))throw new Error("gemm: invalid bias shape for broadcast");return[a,o,s]}};class l{static tensorDataTypeFromProto(t){switch(t){case s.onnx.TensorProto.DataType.INT8:return"int8";case s.onnx.TensorProto.DataType.UINT8:return"uint8";case s.onnx.TensorProto.DataType.BOOL:return"bool";case s.onnx.TensorProto.DataType.INT16:return"int16";case s.onnx.TensorProto.DataType.UINT16:return"uint16";case s.onnx.TensorProto.DataType.INT32:return"int32";case s.onnx.TensorProto.DataType.UINT32:return"uint32";case s.onnx.TensorProto.DataType.FLOAT:return"float32";case s.onnx.TensorProto.DataType.DOUBLE:return"float64";case s.onnx.TensorProto.DataType.STRING:return"string";case s.onnx.TensorProto.DataType.INT64:return"int32";case s.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: "+s.onnx.TensorProto.DataType[t])}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return s.onnx.TensorProto.DataType.INT8;case"uint8":return s.onnx.TensorProto.DataType.UINT8;case"bool":return s.onnx.TensorProto.DataType.BOOL;case"int16":return s.onnx.TensorProto.DataType.INT16;case"uint16":return s.onnx.TensorProto.DataType.UINT16;case"int32":return s.onnx.TensorProto.DataType.INT32;case"uint32":return s.onnx.TensorProto.DataType.UINT32;case"float32":return s.onnx.TensorProto.DataType.FLOAT;case"float64":return s.onnx.TensorProto.DataType.DOUBLE;case"string":return s.onnx.TensorProto.DataType.STRING;case"int64":return s.onnx.TensorProto.DataType.INT64;case"uint64":return s.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: "+t)}}static tensorDimsFromProto(t){return t.map(t=>a.default.isLong(t)?t.toNumber():t)}static tensorValueTypeFromProto(t){return{tensorType:l.tensorDataTypeFromProto(t.elemType),shape:{dims:l.tensorDimsFromProto(t.shape.dim.map(t=>t.dimValue))}}}static tensorDimsFromORTFormat(t){const e=[];for(let n=0;n<t.dimsLength();n++)e.push(d.longToNumber(t.dims(n)));return e}static tensorAttributesFromORTFormat(t){const e=[];for(let n=0;n<t.attributesLength();n++)e.push(t.attributes(n));return e}}e.ProtoUtil=l;class d{static longToNumber(t,e){return a.default.isLong(t)?t.toNumber():t instanceof i.flatbuffers.Long?a.default.fromValue({low:t.low,high:t.high,unsigned:null!=e&&e}).toNumber():t}static isLong(t){return a.default.isLong(t)||t instanceof i.flatbuffers.Long}}e.LongUtil=d;class h{static size(t){return h.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,e){if(e<0||e>t.length)throw new Error(`invalid dimension of ${e} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return h.getSizeFromDimensionRange(t,e,t.length)}static sizeToDimension(t,e){if(e<0||e>t.length)throw new Error(`invalid dimension of ${e} for sizeToDimension as Tensor has ${t.length} dimensions.`);return h.getSizeFromDimensionRange(t,0,e)}static getSizeFromDimensionRange(t,e,n){let r=1;for(let i=e;i<n;i++){if(t[i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[i]}return r}static computeStrides(t){const e=t.length;if(0===e)return[];if(1===e)return[1];const n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,e,n){void 0===n&&(n=t.length);let r=0;for(let i=0;i<n;++i)r+=e[i]*t[i];return r}static offsetToIndices(t,e){const n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];const r=new Array(e.length);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/e[i]),t-=r[i]*e[i];return r[r.length-1]=t,r}static normalizeAxis(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t}static normalizeAxes(t,e){return t.map(t=>this.normalizeAxis(t,e))}static incrementIndex(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(let r=n-1;r>=0&&(t[r]++,!(t[r]<e[r]));--r)t[r]=0}static calculateReshapedDims(t,e){if(0===e.length){if(0===t.length||1===h.size(t))return[];throw new Error("cannot reshape to a scalar Tensor")}const n=e.length,r=new Array(n);let i=-1,a=1;for(let o=0;o<n;o++){if(e[o]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===e[o]){if(-1!==i)throw new Error("at most one dimension in shape hints can be -1");i=o}else{if(0===e[o]){if(o>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");r[o]=t[o]}else r[o]=e[o];a*=r[o]}}const s=h.size(t);if(-1!==i){if(s%a!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${e}]`);r[i]=s/a}else if(a!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return r}static sortBasedOnPerm(t,e){return e?e.map(e=>t[e]):t.slice().reverse()}static padShape(t,e){const n=t.length;return t.map((t,r)=>t+e[r]+e[r+n])}static areEqual(t,e){return t.length===e.length&&t.every((t,n)=>t===e[n])}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let e=1;for(const n of t){if(!Number.isInteger(n))throw new TypeError(`Invalid shape: ${n} is not an integer`);if(n<0||n>2147483647)throw new TypeError(`Invalid shape: length ${n} is not allowed`);e*=n}return e}static flattenShape(t,e){e<0&&(e+=t.length);const n=t.reduce((t,e)=>t*e,1),r=t.slice(e).reduce((t,e)=>t*e,1);return[n/r,r]}static squeezeShape(t,e){const n=new Array;e=h.normalizeAxes(e,t.length);for(let r=0;r<t.length;r++){const i=e.indexOf(r)>=0;if(i&&1!==t[r])throw new Error("squeeze an axis of size different than 1");(0===e.length&&t[r]>1||e.length>0&&!i)&&n.push(t[r])}return n}static unsqueezeShape(t,e){const n=new Array(t.length+e.length);n.fill(0);for(let i=0;i<e.length;i++){const t=h.normalizeAxis(e[i],n.length);if(t>=n.length)throw new Error("'axes' has an out of range axis");if(0!==n[t])throw new Error("'axes' has a duplicate axis");n[t]=1}let r=0;for(let i=0;i<n.length;i++)0===n[i]&&(n[i]=t[r++]);if(r!==t.length)throw new Error("the unsqueezed dimension could not be established");return n}}e.ShapeUtil=h,e.MathUtil=class{static sqr(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let a=0;a<i;a++)t[n+a]+=Math.pow(e[r+a],2)}static axpy(t,e,n,r,i,a){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let s=0;s<i;s++)t[n+s]+=a*e[r+s]}static powx(t,e,n,r,i,a){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let s=0;s<i;s++)t[n+s]=Math.pow(e[r+s],a)}static mul(t,e,n,r,i){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+i>e.length)throw new Error("source indices to be copied are outside bounds");if(n+i>t.length)throw new Error("target array is too small to hold result");for(let a=0;a<i;a++)t[n+a]=e[r+a]*t[n+a]}};class p{static splitShape(t,e,n,r){if(0===n.length){if(!r)throw new Error("need to know number of outputs when the 'split' attribute is not specified");p.determineSplit(t[e],r,n)}const i=[],a=[0];for(let s=0;s<n.length;++s){0!==s&&a.push(a[s-1]+n[s-1]);const r=t.slice();r[e]=n[s],i.push(r)}return[i,a]}static determineSplit(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(let r=0;r<e;++r)n.push(t/e)}}e.SplitUtil=p;class f{static calcReduce(t,e,n,r,i){const a=t.dims.slice(0);0===e.length&&a.forEach((t,n)=>e.push(n));const s=f.calcReduceShape(a,e,!0),u=h.size(s),l=new o.Tensor(s,t.type),d=h.computeStrides(s),p=h.computeStrides(a),m=new Array(a.length);for(let o=0;o<u;o++){const n=h.offsetToIndices(o,d);c.fillIndex(n,a,m),l.set(n,f.calcReduceByAxis(t.numberData,e,a,0,h.indicesToOffset(m,p),r,i))}return n?l:new o.Tensor(f.calcReduceShape(a,e,n),l.type,void 0,void 0,l.data,l.dataId)}static calcReduceByAxis(t,e,n,r,i,a,s){let o=0;if(r>=e.length)return a(t[i]);const u=e[r],c=u>=n.length?1:h.size(n.slice(u+1));for(let l=0;l<n[u];l++)o=0===l?f.calcReduceByAxis(t,e,n,r+1,i,a,s):s(o,f.calcReduceByAxis(t,e,n,r+1,i,a,s)),i+=c;return o}static calcReduceShape(t,e,n){const r=t.slice();for(let i=0;i<e.length;i++)r[e[i]]=n?1:0;return r.filter(t=>0!==t)}}e.ReduceUtil=f;class m{static adjustPoolAttributes(t,e,n,r,i,a){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let s=0;s<e.length-2;s++)s>=n.length?n.push(e[s+2]):n[s]=e[s+2];for(let s=0;s<n.length;s++)if(s<r.length){if(r[s]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(let s=0;s<n.length;s++)if(s<i.length){if(i[s]<0)throw new Error("dilations should be greater than or equal to 1")}else i.push(1);for(let s=0;s<2*n.length;s++)if(s<a.length){if(a[s]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let s=0;s<n.length;s++){if(n[s]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[s]>=n[s]||a[s+n.length]>=n[s])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,e,n,r,i,a){if(a){if(i.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(e.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let s=0;s<t.length-2;s++)m.adjustPadAndReturnShape(t[s+2],e[s],n[s],r[s],i,s,s+t.length-2,a)}}static computePoolOutputShape(t,e,n,r,i,a,s){if(e.length<=0)throw new Error("input shape must be of size greater than 0");const o=[e[0],e[1]];return m.computeShapeHelper(t,e,o,n,r,i,a,s),o}static computeConvOutputShape(t,e,n,r,i,a,s){if(t.length<=0||e.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const o=[t[0],e[0]];return m.computeShapeHelper(!1,t,o,n,r,i,a,s),o}static computeShapeHelper(t,e,n,r,i,a,s,o){if(t)for(let u=0;u<e.length-2;u++)n.push(1);else for(let u=0;u<e.length-2;u++)n.push(m.adjustPadAndReturnShape(e[u+2],r[u],i[u],a[u],s,u,u+e.length-2,o))}static adjustPadAndReturnShape(t,e,n,r,i,a,s,o){const u=n*(r-1)+1;if(!o||"NOTSET"===o)return Math.floor((t+i[a]+i[s]-u)/e+1);switch(o){case"VALID":return i[a]=0,i[s]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const n=((t+e-1)/e-1)*e+r-t;return i[a]="SAME_LOWER"===o?Math.floor((n+1)/2):Math.floor(n/2),i[s]=n-i[a],Math.floor((t+n-r)/e+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=m,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(t){return(new TextDecoder).decode(t)}},7967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,i)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([t,a])=>{const s=n?n+t:t;if("object"==typeof a)(0,e.iterateExtraOptions)(a,s+".",r,i);else if("string"==typeof a||"number"==typeof a)i(s,a.toString());else{if("boolean"!=typeof a)throw new Error("Can't handle extra config type: "+typeof a);i(s,a?"1":"0")}})}},2157:function(t,e,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const o=n(1670),u=s(n(349)),c=n(6361),l=()=>!!o.env.wasm.proxy&&"undefined"!=typeof document;let d,h,p,f=!1,m=!1,g=!1;const b=[],y=[],v=[],w=[],x=[],O=[],S=()=>{if(f||!m||g||!d)throw new Error("worker not ready")},k=t=>{switch(t.data.type){case"init-wasm":f=!1,t.data.err?(g=!0,h[1](t.data.err)):(m=!0,h[0]());break;case"init-ort":t.data.err?p[1](t.data.err):p[0]();break;case"create_allocate":t.data.err?b.shift()[1](t.data.err):b.shift()[0](t.data.out);break;case"create_finalize":t.data.err?y.shift()[1](t.data.err):y.shift()[0](t.data.out);break;case"create":t.data.err?v.shift()[1](t.data.err):v.shift()[0](t.data.out);break;case"release":t.data.err?w.shift()[1](t.data.err):w.shift()[0]();break;case"run":t.data.err?x.shift()[1](t.data.err):x.shift()[0](t.data.out);break;case"end-profiling":t.data.err?O.shift()[1](t.data.err):O.shift()[0]()}},T="undefined"!=typeof document?null===(r=null===document||void 0===document?void 0:document.currentScript)||void 0===r?void 0:r.src:void 0;e.initWasm=async()=>{if(l()){if(m)return;if(f)throw new Error("multiple calls to 'initWasm()' detected.");if(g)throw new Error("previous call to 'initWasm()' failed.");return f=!0,void 0===o.env.wasm.wasmPaths&&T&&0!==T.indexOf("blob:")&&(o.env.wasm.wasmPaths=T.substr(0,+T.lastIndexOf("/")+1)),new Promise((t,e)=>{null==d||d.terminate(),d=n(9710).Z(),d.onmessage=k,h=[t,e];const r={type:"init-wasm",in:o.env.wasm};d.postMessage(r)})}return(0,c.initializeWebAssembly)(o.env.wasm)},e.initOrt=async(t,e)=>{if(l())return S(),new Promise((n,r)=>{p=[n,r];const i={type:"init-ort",in:{numThreads:t,loggingLevel:e}};d.postMessage(i)});u.initOrt(t,e)},e.createSessionAllocate=async t=>l()?(S(),new Promise((e,n)=>{b.push([e,n]);const r={type:"create_allocate",in:{model:t}};d.postMessage(r,[t.buffer])})):u.createSessionAllocate(t),e.createSessionFinalize=async(t,e)=>l()?(S(),new Promise((n,r)=>{y.push([n,r]);const i={type:"create_finalize",in:{modeldata:t,options:e}};d.postMessage(i)})):u.createSessionFinalize(t,e),e.createSession=async(t,e)=>l()?(S(),new Promise((n,r)=>{v.push([n,r]);const i={type:"create",in:{model:t,options:e}};d.postMessage(i,[t.buffer])})):u.createSession(t,e),e.releaseSession=async t=>{if(l())return S(),new Promise((e,n)=>{w.push([e,n]);const r={type:"release",in:t};d.postMessage(r)});u.releaseSession(t)},e.run=async(t,e,n,r,i)=>l()?(S(),new Promise((a,s)=>{x.push([a,s]);const o={type:"run",in:{sessionId:t,inputIndices:e,inputs:n,outputIndices:r,options:i}};d.postMessage(o,u.extractTransferableBuffers(n))})):u.run(t,e,n,r,i),e.endProfiling=async t=>{if(l())return S(),new Promise((e,n)=>{O.push([e,n]);const r={type:"end-profiling",in:t};d.postMessage(r)});u.endProfiling(t)}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(7967),i=n(4983),a=n(6361);e.setRunOptions=t=>{const e=(0,a.getInstance)();let n=0;const s=[],o=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))o.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: "+t.logSeverityLevel);if(void 0===(null==t?void 0:t.logVerbosityLevel))o.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: "+t.logVerbosityLevel);void 0===(null==t?void 0:t.terminate)&&(o.terminate=!1);let a=0;if(void 0!==(null==t?void 0:t.tag)&&(a=(0,i.allocWasmString)(t.tag,s)),n=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,a),0===n)throw new Error("Can't create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,(t,r)=>{const a=(0,i.allocWasmString)(t,s),o=(0,i.allocWasmString)(r,s);if(0!==e._OrtAddRunConfigEntry(n,a,o))throw new Error(`Can't set a run config entry: ${t} - ${r}`)}),[n,s]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),s.forEach(e._free),t}}},2306:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const r=n(2806),i=n(1670),a=n(2850),s=n(2157);let o;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(t){const e=await fetch(t),n=await e.arrayBuffer();return(0,s.createSessionAllocate)(new Uint8Array(n))}async loadModel(t,e){if(o||(await(0,s.initOrt)(i.env.wasm.numThreads,(t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: "+t)}})(i.env.logLevel)),o=!0),"string"==typeof t)if("undefined"==typeof fetch){const n=await(0,a.promisify)(r.readFile)(t);[this.sessionId,this.inputNames,this.outputNames]=await(0,s.createSession)(n,e)}else{const n=await this.createSessionAllocate(t);[this.sessionId,this.inputNames,this.outputNames]=await(0,s.createSessionFinalize)(n,e)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,s.createSession)(t,e)}async dispose(){return(0,s.releaseSession)(this.sessionId)}async run(t,e,n){const r=[],a=[];Object.entries(t).forEach(t=>{const e=t[0],n=t[1],i=this.inputNames.indexOf(e);if(-1===i)throw new Error(`invalid input '${e}'`);r.push(n),a.push(i)});const o=[];Object.entries(e).forEach(t=>{const e=t[0],n=this.outputNames.indexOf(e);if(-1===n)throw new Error(`invalid output '${e}'`);o.push(n)});const u=await(0,s.run)(this.sessionId,a,r.map(t=>[t.type,t.dims,t.data]),o,n),c={};for(let s=0;s<u.length;s++)c[this.outputNames[o[s]]]=new i.Tensor(u[s][0],u[s][2],u[s][1]);return c}startProfiling(){}endProfiling(){(0,s.endProfiling)(this.sessionId)}}},4919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(7967),i=n(4983),a=n(6361);e.setSessionOptions=t=>{const e=(0,a.getInstance)();let n=0;const s=[],o=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(o);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(o.graphOptimizationLevel="all");const u=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: "+t)}})(o.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(o.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(o.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(o.executionMode="sequential");const c=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: "+t)}})(o.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,i.allocWasmString)(t.logId,s)),void 0===(null==t?void 0:t.logSeverityLevel))o.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: "+t.logSeverityLevel);if(void 0===(null==t?void 0:t.logVerbosityLevel))o.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: "+t.logVerbosityLevel);if(void 0===(null==t?void 0:t.enableProfiling)&&(o.enableProfiling=!1),n=e._OrtCreateSessionOptions(u,!!o.enableCpuMemArena,!!o.enableMemPattern,c,!!o.enableProfiling,0,l,o.logSeverityLevel,o.logVerbosityLevel),0===n)throw new Error("Can't create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error("not supported EP: "+e)}const s=(0,i.allocWasmString)(e,n);if(0!==(0,a.getInstance)()._OrtAppendExecutionProvider(t,s))throw new Error("Can't append execution provider: "+e)}})(n,t.executionProviders,s),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,(t,r)=>{const a=(0,i.allocWasmString)(t,s),o=(0,i.allocWasmString)(r,s);if(0!==e._OrtAddSessionConfigEntry(n,a,o))throw new Error(`Can't set a session config entry: ${t} - ${r}`)}),[n,s]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),s.forEach(e._free),t}}},4983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(6361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),i=n.lengthBytesUTF8(t)+1,a=n._malloc(i);return n.stringToUTF8(t,a,i),e.push(a),a}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),i=n(4919),a=n(4983),s=n(6361);e.initOrt=(t,e)=>{const n=(0,s.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error("Can't initialize onnxruntime. error code = "+n)};const o=new Map;e.createSessionAllocate=t=>{const e=(0,s.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,s.getInstance)();let r=0,a=0,u=[];try{if([a,u]=(0,i.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],a),0===r)throw new Error("Can't create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(a),u.forEach(n._free)}const c=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),d=[],h=[],p=[],f=[];for(let i=0;i<c;i++){const t=n._OrtGetInputName(r,i);if(0===t)throw new Error("Can't get an input name");h.push(t),d.push(n.UTF8ToString(t))}for(let i=0;i<l;i++){const t=n._OrtGetOutputName(r,i);if(0===t)throw new Error("Can't get an output name");f.push(t),p.push(n.UTF8ToString(t))}return o.set(r,[r,h,f]),[r,d,p]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,s.getInstance)(),n=o.get(t);if(!n)throw new Error("invalid session id");const r=n[0],i=n[1],a=n[2];i.forEach(e._OrtFree),a.forEach(e._OrtFree),e._OrtReleaseSession(r),o.delete(t)};const u=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: "+t)}},c=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: "+t)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: "+t)}};e.run=(t,e,n,i,d)=>{const h=(0,s.getInstance)(),p=o.get(t);if(!p)throw new Error("invalid session id");const f=p[0],m=p[1],g=p[2],b=e.length,y=i.length;let v=0,w=[];const x=[],O=[];try{[v,w]=(0,r.setRunOptions)(d);for(let e=0;e<b;e++){const t=n[e][0],r=n[e][1],i=n[e][2];let s,o;if(Array.isArray(i)){o=4*i.length,s=h._malloc(o),O.push(s);let t=s/4;for(let e=0;e<i.length;e++){if("string"!=typeof i[e])throw new TypeError(`tensor data at index ${e} is not a string`);h.HEAPU32[t++]=(0,a.allocWasmString)(i[e],O)}}else o=i.byteLength,s=h._malloc(o),O.push(s),h.HEAPU8.set(new Uint8Array(i.buffer,i.byteOffset,o),s);const c=h.stackSave(),l=h.stackAlloc(4*r.length);try{let e=l/4;r.forEach(t=>h.HEAP32[e++]=t);const n=h._OrtCreateTensor(u(t),s,o,l,r.length);if(0===n)throw new Error("Can't create a tensor");x.push(n)}finally{h.stackRestore(c)}}const t=h.stackSave(),s=h.stackAlloc(4*b),o=h.stackAlloc(4*b),p=h.stackAlloc(4*y),S=h.stackAlloc(4*y);try{let n=s/4,r=o/4,a=p/4,u=S/4;for(let t=0;t<b;t++)h.HEAPU32[n++]=x[t],h.HEAPU32[r++]=m[e[t]];for(let t=0;t<y;t++)h.HEAPU32[a++]=0,h.HEAPU32[u++]=g[i[t]];let d=h._OrtRun(f,o,s,b,S,y,p,v);const w=[];if(0===d)for(let t=0;t<y;t++){const e=h.HEAPU32[p/4+t],n=h.stackSave(),r=h.stackAlloc(16);let i,a=0;try{if(d=h._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==d)throw new Error("Can't access output tensor data. error code = "+d);let t=r/4;const s=h.HEAPU32[t++];a=h.HEAPU32[t++];const o=h.HEAPU32[t++],u=h.HEAPU32[t++],p=[];for(let e=0;e<u;e++)p.push(h.HEAPU32[o/4+e]);h._OrtFree(o);const f=0===p.length?1:p.reduce((t,e)=>t*e);if(i=c(s),"string"===i){const t=[];let e=a/4;for(let n=0;n<f;n++){const r=h.HEAPU32[e++],i=n===f-1?void 0:h.HEAPU32[e]-r;t.push(h.UTF8ToString(r,i))}w.push([i,p,t])}else{const t=new(l(i))(f);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(h.HEAPU8.subarray(a,a+t.byteLength)),w.push([i,p,t])}}finally{h.stackRestore(n),"string"===i&&a&&h._free(a),h._OrtReleaseTensor(e)}}if(0===d)return w;throw new Error(`failed to call OrtRun(). error code = ${d}.`)}finally{h.stackRestore(t)}}finally{x.forEach(h._OrtReleaseTensor),O.forEach(h._free),h._OrtReleaseRunOptions(v),w.forEach(h._free)}},e.endProfiling=t=>{const e=(0,s.getInstance)(),n=o.get(t);if(!n)throw new Error("invalid session id");const r=n[0],i=e._OrtEndProfiling(r);if(0===i)throw new Error("Can't get an profile file name");e._OrtFree(i)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},6361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const o=a(n(6449)),u=s(n(932)),c=n(3474);let l,d=!1,h=!1,p=!1;const f=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(d)return Promise.resolve();if(h)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(p)throw new Error("previous call to 'initializeWebAssembly()' failed.");h=!0;const e=t.initTimeout,r=t.numThreads,i=t.simd,a=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),s=i&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),m="string"==typeof t.wasmPaths?t.wasmPaths:void 0,g=f(!1,a),b=f(s,a),y="object"==typeof t.wasmPaths?t.wasmPaths[b]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise(t=>{setTimeout(()=>{v=!0,t()},e)})),w.push(new Promise((t,e)=>{const r=a?c:u.default,i={locateFile:(t,e)=>a&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):t===g?null!=y?y:(null!=m?m:e)+b:e+t};if(a)if("undefined"==typeof Blob)i.mainScriptUrlOrBlob=o.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;i.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(i).then(e=>{h=!1,d=!0,l=e,t()},t=>{h=!1,p=!0,e(t)})})),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(d&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!d||h||p||(h=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,h=!1,d=!1,p=!0)}},9710:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(477),i=n.n(r);function a(){return i()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:t=>{"use strict";t.exports=function(t,e,n,r){var i=self||window;try{try{var a;try{a=new i.Blob([t])}catch(e){(a=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(t),a=a.getBlob()}var s=i.URL||i.webkitURL,o=s.createObjectURL(a),u=new i[e](o,n);return s.revokeObjectURL(o),u}catch(r){return new i[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new i[e](r,n)}}},4154:t=>{"use strict";t.exports='"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\n'},1670:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(t,e,n)=>{"use strict";n.r(e),n.d(e,{flatbuffers:()=>r});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(t,e){this.low=0|t,this.high=0|e},r.Long.create=function(t,e){return 0==t&&0==e?r.Long.ZERO:new r.Long(t,e)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(t){if(t)e=t;else var e=1024;this.bb=r.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},r.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},r.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},r.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},r.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},r.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},r.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},r.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},r.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},r.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},r.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},r.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},r.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},r.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},r.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},r.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=r.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(n+2)*r.SIZEOF_SHORT;this.addInt16(i);var a=0,s=this.space;t:for(e=0;e<this.vtables.length;e++){var o=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(o)){for(var u=r.SIZEOF_SHORT;u<i;u+=r.SIZEOF_SHORT)if(this.bb.readInt16(s+u)!=this.bb.readInt16(o+u))continue t;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},r.Builder.prototype.finish=function(t,e,n){var i=n?r.SIZE_PREFIX_LENGTH:0;if(e){var a=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+i),a.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var s=r.FILE_IDENTIFIER_LENGTH-1;s>=0;s--)this.writeInt8(a.charCodeAt(s))}this.prep(this.minalign,r.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},r.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")},r.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,i=t.charCodeAt(n++);(r=i<55296||i>=56320?i:(i<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var a=this.space,s=this.bb.bytes();n<e.length;n++)s[a++]=e[n];return this.endVector()},r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)},r.ByteBuffer=function(t){this.bytes_=t,this.position_=0},r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(t){this.position_=t},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},r.ByteBuffer.prototype.readFloat32=function(t){return r.int32[0]=this.readInt32(t),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(t){return r.int32[r.isLittleEndian?0:1]=this.readInt32(t),r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[r.isLittleEndian?0:1]),this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+e));return t},r.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},r.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",a=0;if(t+=r.SIZEOF_INT,e===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;a<n;){var s,o=this.readUint8(t+a++);if(o<192)s=o;else{var u=this.readUint8(t+a++);if(o<224)s=(31&o)<<6|63&u;else{var c=this.readUint8(t+a++);s=o<240?(15&o)<<12|(63&u)<<6|63&c:(7&o)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+a++)}}s<65536?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i},r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e))return!1;return!0},r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())}).call(this,__webpack_require__("4362"))},f3ae:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("deb3"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=null,n=!1){let o=Object(a["a"])(t,"x","prod");"bool"===o.dtype&&(o=Object(s["a"])(o,"int32"));const u={x:o},c={axis:e,keepDims:n};return r["a"].runKernel(i["mc"],u,c)}const c=Object(o["b"])({prod_:u})},f490:function(t,e,n){"use strict";(function(t,r){
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let i;function a(){if(null==i){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof t)e=t;else if("undefined"!==typeof r)e=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}i=e}return i}function s(){const t=a();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}function o(t,e){const n=s();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}))}).call(this,n("c8ba"),n("4362"))},f5df:function(t,e,n){var r=n("00ee"),i=n("1626"),a=n("c6b6"),s=n("b622"),o=s("toStringTag"),u=Object,c="Arguments"==a(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=r?a:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=u(t),o))?n:c?a(e):"Object"==(r=a(e))&&i(e.callee)?"Arguments":r}},f757:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("a3f7"),i=n("6ad5"),a=n("8ae0"),s=n("36e5"),o=n("c021"),u=n("ae6d"),c=n("54ef"),l=n("c9f1"),d=n("35c9"),h=n("015f"),p=n("163a"),f=n("93b2"),m=n("e053");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function g(t,e="euclidean",n=null,a=!1){t=Object(r["a"])(t,"x","norm");const o=b(t,e,n);let u=o.shape;if(a){const e=Object(i["H"])(n,t.shape);u=s["e"](o.shape,e)}return Object(d["a"])(o,u)}function b(t,e,n=null){if(0===t.rank)return Object(a["a"])(t);if(1!==t.rank&&null===n)return b(Object(d["a"])(t,[-1]),e,n);if(1===t.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===e)return Object(m["a"])(Object(a["a"])(t),n);if(e===1/0)return Object(o["a"])(Object(a["a"])(t),n);if(e===-1/0)return Object(u["a"])(Object(a["a"])(t),n);if("euclidean"===e||2===e)return Object(p["a"])(Object(m["a"])(Object(l["a"])(Object(a["a"])(t),Object(h["a"])(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(n)&&2===n.length){if(1===e)return Object(o["a"])(Object(m["a"])(Object(a["a"])(t),n[0]),n[1]-1);if(e===1/0)return Object(o["a"])(Object(m["a"])(Object(a["a"])(t),n[1]),n[0]);if(e===-1/0)return Object(u["a"])(Object(m["a"])(Object(a["a"])(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return Object(p["a"])(Object(m["a"])(Object(f["a"])(t),n));throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)}const y=Object(c["b"])({norm_:g})},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),a=r("keys");t.exports=function(t){return a[t]||(a[t]=i(t))}},f8bb:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _})),n.d(e,"i",(function(){return A})),n.d(e,"c",(function(){return E})),n.d(e,"f",(function(){return N})),n.d(e,"e",(function(){return $})),n.d(e,"d",(function(){return R})),n.d(e,"k",(function(){return P})),n.d(e,"g",(function(){return M})),n.d(e,"h",(function(){return L})),n.d(e,"j",(function(){return B})),n.d(e,"b",(function(){return z}));var r=n("fa11"),i=n("46cc"),a=n("d303"),s=n("526c"),o=n("aeab"),u=n("c8ad"),c=n("5874"),l=n("9489"),d=n("04b8"),h=n("f011"),p=n("d556"),f=n("3d50"),m=n("6e83"),g=n("29d8"),b=n("a80f"),y=n("673d"),v=n("3bfc"),w=n("31bb"),x=n("dbf3"),O=n("5f44"),S=n("113e"),k=n("1906"),T=n("9e7b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _{constructor(){const t=[o,u,c,l,d,h,p,f,m,g,b,y,v,w,x,O,S,k,T],e=[].concat(...t.map(t=>t.json));this.opMappers=e.reduce((t,e)=>(t[e.tfOpName]=e,t),{})}static get Instance(){return this._instance||(this._instance=new this)}transformGraph(t,e={}){const n=t.node,r=[],i=[],a=[],o=n.reduce((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")?r.push(t[e.name]):"Const"===e.op?i.push(t[e.name]):null!=e.input&&0!==e.input.length||a.push(t[e.name]),t),{});let u=[];const c=[];let l={},d={};null!=e&&(l=this.mapSignatureEntries(e.inputs),d=this.mapSignatureEntries(e.outputs));const h=Object.keys(o);h.forEach(t=>{const e=o[t];e.inputNames.forEach((t,n)=>{const[r,,i]=Object(s["b"])(t),a=o[r];if(null!=a.outputs){const t=a.outputs.indexOf(i);if(-1!==t){const i=`${r}:${t}`;e.inputNames[n]=i}}e.inputs.push(a),a.children.push(e)})}),0===Object.keys(d).length?h.forEach(t=>{const e=o[t];0===e.children.length&&c.push(e)}):Object.keys(d).forEach(t=>{const[e]=Object(s["b"])(t),n=o[e];null!=n&&(n.signatureKey=d[t],c.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(t=>{const[e]=Object(s["b"])(t),n=o[e];n&&(n.signatureKey=l[t],u.push(n))}):u=r;let p={};null!=t.library&&null!=t.library.function&&(p=t.library.function.reduce((t,e)=>(t[e.signature.name]=this.mapFunction(e),t),{}));const f={nodes:o,inputs:u,outputs:c,weights:i,placeholders:r,signature:e,functions:p};return a.length>0&&(f.initNodes=a),f}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,n)=>(e[t[n].name]=n,e),{})}mapNode(t){const e=Object(a["b"])(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(t=>t.startsWith("^")?t.slice(1):t),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((e,n)=>{const r=n.type;let i=void 0;switch(n.type){case"string":i=A(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=A(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=L(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=L(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=N(t.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=N(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=M(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=M(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=E(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=E(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=z(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=z(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=P(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=P(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=B(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=B(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=$(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=$(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=R(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=R(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=D(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=D(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:i,type:r},e},{})),n}mapFunction(t){const e=t.nodeDef,n=[],r=[];let i={};null!=e&&(i=e.reduce((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&r.push(t[e.name]),t),{}));const a=[],o=[];t.signature.inputArg.forEach(t=>{const[e]=Object(s["b"])(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:j(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,a.push(n),i[e]=n});const u=Object.keys(i);u.forEach(t=>{const e=i[t];e.inputNames.forEach((t,n)=>{const[r,,a]=Object(s["b"])(t),o=i[r];if(null!=o.outputs){const t=o.outputs.indexOf(a);if(-1!==t){const i=`${r}:${t}`;e.inputNames[n]=i}}e.inputs.push(o),o.children.push(e)})});const c=t.ret;t.signature.outputArg.forEach(t=>{const[e,n]=Object(s["b"])(c[t.name]),r=i[e];null!=r&&(r.defaultOutput=n,o.push(r))});const l=this.mapArgsToSignature(t);return{nodes:i,inputs:a,outputs:o,weights:r,placeholders:n,signature:l}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t),{}),outputs:t.signature.outputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function I(e){const n=Object(r["hf"])().global;if("undefined"!==typeof n.atob)return n.atob(e);if("undefined"!==typeof t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function C(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):I(t);return e?n:n.toLowerCase()}function A(t,e,n,r=!1){const i=t[e];return null!=i?C(i.s,r):n}function E(t,e,n){const r=t[e];return r?r.b:n}function N(t,e,n){const r=t[e]||{},i=null!=r["i"]?r["i"]:null!=r["f"]?r["f"]:n;return"number"===typeof i?i:parseInt(i,10)}function j(t){switch("string"===typeof t&&(t=i["a"][t]),t){case i["a"].DT_FLOAT:case i["a"].DT_HALF:return"float32";case i["a"].DT_INT32:case i["a"].DT_INT64:case i["a"].DT_INT8:case i["a"].DT_UINT8:return"int32";case i["a"].DT_BOOL:return"bool";case i["a"].DT_DOUBLE:return"float32";case i["a"].DT_STRING:return"string";default:return null}}function D(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function $(t,e,n){const r=t[e];return r&&r.type?j(r.type):n}function R(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(t=>j(t)):n}function F(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(t=>"number"===typeof t.size?t.size:parseInt(t.size,10)):[]}function P(t,e,n){const r=t[e];return r&&r.shape?F(r.shape):n}function M(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(t=>"number"===typeof t?t:parseInt(t,10)):n}function L(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(t=>C(t,r)):n}function B(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(t=>F(t)):n}function z(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n("b639").Buffer)},fa11:function(t,e,n){"use strict";n.d(e,"d",(function(){return T["d"]})),n.d(e,"e",(function(){return T["e"]})),n.d(e,"f",(function(){return T["f"]})),n.d(e,"g",(function(){return T["g"]})),n.d(e,"gc",(function(){return T["gc"]})),n.d(e,"rc",(function(){return T["rc"]})),n.d(e,"sc",(function(){return T["sc"]})),n.d(e,"zc",(function(){return T["zc"]})),n.d(e,"Uc",(function(){return T["Uc"]})),n.d(e,"zd",(function(){return T["zd"]})),n.d(e,"Ad",(function(){return T["Ad"]})),n.d(e,"Jd",(function(){return T["Jd"]})),n.d(e,"Ec",(function(){return T["Ec"]})),n.d(e,"ji",(function(){return T["ji"]})),n.d(e,"Hi",(function(){return T["Hi"]})),n.d(e,"Md",(function(){return T["Md"]})),n.d(e,"Nd",(function(){return T["Nd"]})),n.d(e,"Od",(function(){return T["Od"]})),n.d(e,"Pd",(function(){return T["Pd"]})),n.d(e,"Qd",(function(){return T["Qd"]})),n.d(e,"Rd",(function(){return T["Rd"]})),n.d(e,"Sd",(function(){return T["Sd"]})),n.d(e,"Td",(function(){return T["Td"]})),n.d(e,"Ud",(function(){return T["Ud"]})),n.d(e,"Vd",(function(){return T["Vd"]})),n.d(e,"Wd",(function(){return T["Wd"]})),n.d(e,"Xd",(function(){return T["Xd"]})),n.d(e,"Yd",(function(){return T["Yd"]})),n.d(e,"Zd",(function(){return T["Zd"]})),n.d(e,"ae",(function(){return T["ae"]})),n.d(e,"be",(function(){return T["be"]})),n.d(e,"ee",(function(){return T["ee"]})),n.d(e,"je",(function(){return T["je"]})),n.d(e,"fe",(function(){return T["fe"]})),n.d(e,"ge",(function(){return T["ge"]})),n.d(e,"he",(function(){return T["he"]})),n.d(e,"ie",(function(){return T["ie"]})),n.d(e,"ke",(function(){return T["ke"]})),n.d(e,"me",(function(){return T["me"]})),n.d(e,"ne",(function(){return T["ne"]})),n.d(e,"qe",(function(){return T["qe"]})),n.d(e,"re",(function(){return T["re"]})),n.d(e,"se",(function(){return T["se"]})),n.d(e,"te",(function(){return T["te"]})),n.d(e,"ue",(function(){return T["ue"]})),n.d(e,"ve",(function(){return T["ve"]})),n.d(e,"we",(function(){return T["we"]})),n.d(e,"xe",(function(){return T["xe"]})),n.d(e,"ye",(function(){return T["ye"]})),n.d(e,"ze",(function(){return T["ze"]})),n.d(e,"Ae",(function(){return T["Ae"]})),n.d(e,"Be",(function(){return T["Be"]})),n.d(e,"Ce",(function(){return T["Ce"]})),n.d(e,"De",(function(){return T["De"]})),n.d(e,"Ee",(function(){return T["Ee"]})),n.d(e,"Fe",(function(){return T["Fe"]})),n.d(e,"He",(function(){return T["He"]})),n.d(e,"Ie",(function(){return T["Ie"]})),n.d(e,"Ke",(function(){return T["Ke"]})),n.d(e,"Le",(function(){return T["Le"]})),n.d(e,"Ne",(function(){return T["Ne"]})),n.d(e,"Pe",(function(){return T["Pe"]})),n.d(e,"Qe",(function(){return T["Qe"]})),n.d(e,"Se",(function(){return T["Se"]})),n.d(e,"Te",(function(){return T["Te"]})),n.d(e,"Xe",(function(){return T["Xe"]})),n.d(e,"Ye",(function(){return T["Ye"]})),n.d(e,"Ze",(function(){return T["Ze"]})),n.d(e,"bf",(function(){return T["bf"]})),n.d(e,"cf",(function(){return T["cf"]})),n.d(e,"if",(function(){return T["if"]})),n.d(e,"jf",(function(){return T["jf"]})),n.d(e,"kf",(function(){return T["kf"]})),n.d(e,"lf",(function(){return T["lf"]})),n.d(e,"mf",(function(){return T["mf"]})),n.d(e,"nf",(function(){return T["nf"]})),n.d(e,"of",(function(){return T["of"]})),n.d(e,"qf",(function(){return T["qf"]})),n.d(e,"tf",(function(){return T["tf"]})),n.d(e,"uf",(function(){return T["uf"]})),n.d(e,"wf",(function(){return T["wf"]})),n.d(e,"Ff",(function(){return T["Ff"]})),n.d(e,"Gf",(function(){return T["Gf"]})),n.d(e,"If",(function(){return T["If"]})),n.d(e,"Nf",(function(){return T["Nf"]})),n.d(e,"Of",(function(){return T["Of"]})),n.d(e,"Pf",(function(){return T["Pf"]})),n.d(e,"Sf",(function(){return T["Sf"]})),n.d(e,"Tf",(function(){return T["Tf"]})),n.d(e,"Uf",(function(){return T["Uf"]})),n.d(e,"Wf",(function(){return T["Wf"]})),n.d(e,"Xf",(function(){return T["Xf"]})),n.d(e,"Yf",(function(){return T["Yf"]})),n.d(e,"Zf",(function(){return T["Zf"]})),n.d(e,"ag",(function(){return T["ag"]})),n.d(e,"bg",(function(){return T["bg"]})),n.d(e,"cg",(function(){return T["cg"]})),n.d(e,"dg",(function(){return T["dg"]})),n.d(e,"eg",(function(){return T["eg"]})),n.d(e,"fg",(function(){return T["fg"]})),n.d(e,"gg",(function(){return T["gg"]})),n.d(e,"ig",(function(){return T["ig"]})),n.d(e,"jg",(function(){return T["jg"]})),n.d(e,"lg",(function(){return T["lg"]})),n.d(e,"mg",(function(){return T["mg"]})),n.d(e,"ng",(function(){return T["ng"]})),n.d(e,"og",(function(){return T["og"]})),n.d(e,"pg",(function(){return T["pg"]})),n.d(e,"qg",(function(){return T["qg"]})),n.d(e,"sg",(function(){return T["sg"]})),n.d(e,"tg",(function(){return T["tg"]})),n.d(e,"ug",(function(){return T["ug"]})),n.d(e,"vg",(function(){return T["vg"]})),n.d(e,"wg",(function(){return T["wg"]})),n.d(e,"xg",(function(){return T["xg"]})),n.d(e,"zg",(function(){return T["zg"]})),n.d(e,"Ag",(function(){return T["Ag"]})),n.d(e,"Bg",(function(){return T["Bg"]})),n.d(e,"Cg",(function(){return T["Cg"]})),n.d(e,"Fg",(function(){return T["Fg"]})),n.d(e,"Gg",(function(){return T["Gg"]})),n.d(e,"Hg",(function(){return T["Hg"]})),n.d(e,"Ig",(function(){return T["Ig"]})),n.d(e,"Kg",(function(){return T["Kg"]})),n.d(e,"Lg",(function(){return T["Lg"]})),n.d(e,"Mg",(function(){return T["Mg"]})),n.d(e,"Ng",(function(){return T["Ng"]})),n.d(e,"Og",(function(){return T["Og"]})),n.d(e,"Pg",(function(){return T["Pg"]})),n.d(e,"Qg",(function(){return T["Qg"]})),n.d(e,"Rg",(function(){return T["Rg"]})),n.d(e,"Sg",(function(){return T["Sg"]})),n.d(e,"Tg",(function(){return T["Tg"]})),n.d(e,"Ug",(function(){return T["Ug"]})),n.d(e,"Wg",(function(){return T["Wg"]})),n.d(e,"Xg",(function(){return T["Xg"]})),n.d(e,"Yg",(function(){return T["Yg"]})),n.d(e,"Zg",(function(){return T["Zg"]})),n.d(e,"ah",(function(){return T["ah"]})),n.d(e,"bh",(function(){return T["bh"]})),n.d(e,"ch",(function(){return T["ch"]})),n.d(e,"dh",(function(){return T["dh"]})),n.d(e,"eh",(function(){return T["eh"]})),n.d(e,"gh",(function(){return T["gh"]})),n.d(e,"hh",(function(){return T["hh"]})),n.d(e,"lh",(function(){return T["lh"]})),n.d(e,"mh",(function(){return T["mh"]})),n.d(e,"oh",(function(){return T["oh"]})),n.d(e,"ph",(function(){return T["ph"]})),n.d(e,"qh",(function(){return T["qh"]})),n.d(e,"rh",(function(){return T["rh"]})),n.d(e,"sh",(function(){return T["sh"]})),n.d(e,"th",(function(){return T["th"]})),n.d(e,"vh",(function(){return T["vh"]})),n.d(e,"wh",(function(){return T["wh"]})),n.d(e,"xh",(function(){return T["xh"]})),n.d(e,"Bh",(function(){return T["Bh"]})),n.d(e,"Ch",(function(){return T["Ch"]})),n.d(e,"Gh",(function(){return T["Gh"]})),n.d(e,"Hh",(function(){return T["Hh"]})),n.d(e,"Ih",(function(){return T["Ih"]})),n.d(e,"Kh",(function(){return T["Kh"]})),n.d(e,"Lh",(function(){return T["Lh"]})),n.d(e,"Mh",(function(){return T["Mh"]})),n.d(e,"Nh",(function(){return T["Nh"]})),n.d(e,"Oh",(function(){return T["Oh"]})),n.d(e,"Ph",(function(){return T["Ph"]})),n.d(e,"Qh",(function(){return T["Qh"]})),n.d(e,"Sh",(function(){return T["Sh"]})),n.d(e,"Th",(function(){return T["Th"]})),n.d(e,"Uh",(function(){return T["Uh"]})),n.d(e,"pf",(function(){return T["pf"]})),n.d(e,"Hf",(function(){return T["Hf"]})),n.d(e,"Mf",(function(){return T["Mf"]})),n.d(e,"uh",(function(){return T["uh"]})),n.d(e,"Yh",(function(){return T["Yh"]})),n.d(e,"Zh",(function(){return T["Zh"]})),n.d(e,"ai",(function(){return T["ai"]})),n.d(e,"bi",(function(){return T["bi"]})),n.d(e,"ci",(function(){return T["ci"]})),n.d(e,"di",(function(){return T["di"]})),n.d(e,"ei",(function(){return T["ei"]})),n.d(e,"fi",(function(){return T["fi"]})),n.d(e,"hi",(function(){return T["hi"]})),n.d(e,"ii",(function(){return T["ii"]})),n.d(e,"ki",(function(){return T["ki"]})),n.d(e,"li",(function(){return T["li"]})),n.d(e,"mi",(function(){return T["mi"]})),n.d(e,"ni",(function(){return T["ni"]})),n.d(e,"oi",(function(){return T["oi"]})),n.d(e,"pi",(function(){return T["pi"]})),n.d(e,"qi",(function(){return T["qi"]})),n.d(e,"ri",(function(){return T["ri"]})),n.d(e,"si",(function(){return T["si"]})),n.d(e,"wi",(function(){return T["wi"]})),n.d(e,"yi",(function(){return T["yi"]})),n.d(e,"Bi",(function(){return T["Bi"]})),n.d(e,"Ci",(function(){return T["Ci"]})),n.d(e,"Fi",(function(){return T["Fi"]})),n.d(e,"Gi",(function(){return T["Gi"]})),n.d(e,"Ii",(function(){return T["Ii"]})),n.d(e,"Mi",(function(){return T["Mi"]})),n.d(e,"Pi",(function(){return T["Pi"]})),n.d(e,"Qi",(function(){return T["Qi"]})),n.d(e,"Ri",(function(){return T["Ri"]})),n.d(e,"Si",(function(){return T["Si"]})),n.d(e,"le",(function(){return T["le"]})),n.d(e,"Ai",(function(){return T["Ai"]})),n.d(e,"Eg",(function(){return T["Eg"]})),n.d(e,"yg",(function(){return T["yg"]})),n.d(e,"yh",(function(){return T["yh"]})),n.d(e,"Ah",(function(){return T["Ah"]})),n.d(e,"Wh",(function(){return T["Wh"]})),n.d(e,"xf",(function(){return T["xf"]})),n.d(e,"af",(function(){return T["af"]})),n.d(e,"ff",(function(){return T["ff"]})),n.d(e,"Je",(function(){return T["Je"]})),n.d(e,"Kf",(function(){return T["Kf"]})),n.d(e,"Jg",(function(){return T["Jg"]})),n.d(e,"oc",(function(){return T["oc"]})),n.d(e,"Jf",(function(){return T["Jf"]})),n.d(e,"Vf",(function(){return T["Vf"]})),n.d(e,"hg",(function(){return T["hg"]})),n.d(e,"Xh",(function(){return T["Xh"]})),n.d(e,"vf",(function(){return T["vf"]})),n.d(e,"Jh",(function(){return T["Jh"]})),n.d(e,"Vh",(function(){return T["Vh"]})),n.d(e,"gi",(function(){return T["gi"]})),n.d(e,"Ic",(function(){return T["Ic"]})),n.d(e,"zi",(function(){return T["zi"]})),n.d(e,"ef",(function(){return T["ef"]})),n.d(e,"df",(function(){return T["df"]})),n.d(e,"Ue",(function(){return T["Ue"]})),n.d(e,"Oe",(function(){return T["Oe"]})),n.d(e,"We",(function(){return T["We"]})),n.d(e,"gf",(function(){return T["gf"]})),n.d(e,"rg",(function(){return T["rg"]})),n.d(e,"Vg",(function(){return T["Vg"]})),n.d(e,"vi",(function(){return T["vi"]})),n.d(e,"Ve",(function(){return T["Ve"]})),n.d(e,"Qf",(function(){return T["Qf"]})),n.d(e,"xi",(function(){return T["xi"]})),n.d(e,"Eh",(function(){return T["Eh"]})),n.d(e,"fh",(function(){return T["fh"]})),n.d(e,"zf",(function(){return T["zf"]})),n.d(e,"nh",(function(){return T["nh"]})),n.d(e,"rf",(function(){return T["rf"]})),n.d(e,"sf",(function(){return T["sf"]})),n.d(e,"ih",(function(){return T["ih"]})),n.d(e,"ce",(function(){return T["ce"]})),n.d(e,"Fh",(function(){return T["Fh"]})),n.d(e,"Bf",(function(){return T["Bf"]})),n.d(e,"Af",(function(){return T["Af"]})),n.d(e,"Cf",(function(){return T["Cf"]})),n.d(e,"kh",(function(){return T["kh"]})),n.d(e,"jh",(function(){return T["jh"]})),n.d(e,"Ei",(function(){return T["Ei"]})),n.d(e,"Di",(function(){return T["Di"]})),n.d(e,"Ge",(function(){return T["Ge"]})),n.d(e,"Me",(function(){return T["Me"]})),n.d(e,"Df",(function(){return T["Df"]})),n.d(e,"Ef",(function(){return T["Ef"]})),n.d(e,"Ki",(function(){return T["Ki"]})),n.d(e,"Li",(function(){return T["Li"]})),n.d(e,"Ni",(function(){return T["Ni"]})),n.d(e,"gb",(function(){return T["gb"]})),n.d(e,"hf",(function(){return T["hf"]})),n.d(e,"cb",(function(){return T["cb"]})),n.d(e,"Oi",(function(){return T["Oi"]})),n.d(e,"Dg",(function(){return T["Dg"]})),n.d(e,"pe",(function(){return T["pe"]})),n.d(e,"Lf",(function(){return T["Lf"]})),n.d(e,"kg",(function(){return T["kg"]})),n.d(e,"Dh",(function(){return T["Dh"]})),n.d(e,"ui",(function(){return T["ui"]})),n.d(e,"Ji",(function(){return T["Ji"]})),n.d(e,"de",(function(){return T["de"]})),n.d(e,"oe",(function(){return T["oe"]})),n.d(e,"ti",(function(){return T["ti"]})),n.d(e,"Rh",(function(){return T["Rh"]})),n.d(e,"yf",(function(){return T["yf"]})),n.d(e,"zh",(function(){return T["zh"]})),n.d(e,"Re",(function(){return T["Re"]})),n.d(e,"Rf",(function(){return T["Rf"]})),n.d(e,"Fb",(function(){return T["Fb"]})),n.d(e,"S",(function(){return T["S"]})),n.d(e,"a",(function(){return T["a"]})),n.d(e,"b",(function(){return T["b"]})),n.d(e,"c",(function(){return T["c"]})),n.d(e,"h",(function(){return T["h"]})),n.d(e,"i",(function(){return T["i"]})),n.d(e,"j",(function(){return T["j"]})),n.d(e,"k",(function(){return T["k"]})),n.d(e,"l",(function(){return T["l"]})),n.d(e,"m",(function(){return T["m"]})),n.d(e,"n",(function(){return T["n"]})),n.d(e,"o",(function(){return T["o"]})),n.d(e,"p",(function(){return T["p"]})),n.d(e,"r",(function(){return T["r"]})),n.d(e,"q",(function(){return T["q"]})),n.d(e,"s",(function(){return T["s"]})),n.d(e,"v",(function(){return T["v"]})),n.d(e,"t",(function(){return T["t"]})),n.d(e,"u",(function(){return T["u"]})),n.d(e,"w",(function(){return T["w"]})),n.d(e,"x",(function(){return T["x"]})),n.d(e,"y",(function(){return T["y"]})),n.d(e,"A",(function(){return T["A"]})),n.d(e,"z",(function(){return T["z"]})),n.d(e,"B",(function(){return T["B"]})),n.d(e,"C",(function(){return T["C"]})),n.d(e,"D",(function(){return T["D"]})),n.d(e,"E",(function(){return T["E"]})),n.d(e,"F",(function(){return T["F"]})),n.d(e,"G",(function(){return T["G"]})),n.d(e,"H",(function(){return T["H"]})),n.d(e,"I",(function(){return T["I"]})),n.d(e,"J",(function(){return T["J"]})),n.d(e,"K",(function(){return T["K"]})),n.d(e,"L",(function(){return T["L"]})),n.d(e,"M",(function(){return T["M"]})),n.d(e,"N",(function(){return T["N"]})),n.d(e,"O",(function(){return T["O"]})),n.d(e,"Q",(function(){return T["Q"]})),n.d(e,"R",(function(){return T["R"]})),n.d(e,"P",(function(){return T["P"]})),n.d(e,"T",(function(){return T["T"]})),n.d(e,"U",(function(){return T["U"]})),n.d(e,"V",(function(){return T["V"]})),n.d(e,"W",(function(){return T["W"]})),n.d(e,"X",(function(){return T["X"]})),n.d(e,"Y",(function(){return T["Y"]})),n.d(e,"Z",(function(){return T["Z"]})),n.d(e,"bb",(function(){return T["bb"]})),n.d(e,"ab",(function(){return T["ab"]})),n.d(e,"Gc",(function(){return T["Gc"]})),n.d(e,"db",(function(){return T["db"]})),n.d(e,"eb",(function(){return T["eb"]})),n.d(e,"fb",(function(){return T["fb"]})),n.d(e,"ib",(function(){return T["ib"]})),n.d(e,"hb",(function(){return T["hb"]})),n.d(e,"jb",(function(){return T["jb"]})),n.d(e,"kb",(function(){return T["kb"]})),n.d(e,"lb",(function(){return T["lb"]})),n.d(e,"mb",(function(){return T["mb"]})),n.d(e,"nb",(function(){return T["nb"]})),n.d(e,"ob",(function(){return T["ob"]})),n.d(e,"pb",(function(){return T["pb"]})),n.d(e,"qb",(function(){return T["qb"]})),n.d(e,"sb",(function(){return T["sb"]})),n.d(e,"wb",(function(){return T["wb"]})),n.d(e,"vb",(function(){return T["vb"]})),n.d(e,"xb",(function(){return T["xb"]})),n.d(e,"yb",(function(){return T["yb"]})),n.d(e,"Ab",(function(){return T["Ab"]})),n.d(e,"zb",(function(){return T["zb"]})),n.d(e,"Bb",(function(){return T["Bb"]})),n.d(e,"Cb",(function(){return T["Cb"]})),n.d(e,"Db",(function(){return T["Db"]})),n.d(e,"Eb",(function(){return T["Eb"]})),n.d(e,"Ib",(function(){return T["Ib"]})),n.d(e,"Jb",(function(){return T["Jb"]})),n.d(e,"Kb",(function(){return T["Kb"]})),n.d(e,"Lb",(function(){return T["Lb"]})),n.d(e,"Mb",(function(){return T["Mb"]})),n.d(e,"Nb",(function(){return T["Nb"]})),n.d(e,"Pb",(function(){return T["Pb"]})),n.d(e,"Qb",(function(){return T["Qb"]})),n.d(e,"Rb",(function(){return T["Rb"]})),n.d(e,"Sb",(function(){return T["Sb"]})),n.d(e,"Ob",(function(){return T["Ob"]})),n.d(e,"Tb",(function(){return T["Tb"]})),n.d(e,"Gb",(function(){return T["Gb"]})),n.d(e,"Hb",(function(){return T["Hb"]})),n.d(e,"Ub",(function(){return T["Ub"]})),n.d(e,"ac",(function(){return T["ac"]})),n.d(e,"Vb",(function(){return T["Vb"]})),n.d(e,"Yb",(function(){return T["Yb"]})),n.d(e,"Wb",(function(){return T["Wb"]})),n.d(e,"Xb",(function(){return T["Xb"]})),n.d(e,"Zb",(function(){return T["Zb"]})),n.d(e,"bc",(function(){return T["bc"]})),n.d(e,"cc",(function(){return T["cc"]})),n.d(e,"dc",(function(){return T["dc"]})),n.d(e,"ec",(function(){return T["ec"]})),n.d(e,"fc",(function(){return T["fc"]})),n.d(e,"hc",(function(){return T["hc"]})),n.d(e,"ic",(function(){return T["ic"]})),n.d(e,"jc",(function(){return T["jc"]})),n.d(e,"nc",(function(){return T["nc"]})),n.d(e,"kc",(function(){return T["kc"]})),n.d(e,"lc",(function(){return T["lc"]})),n.d(e,"mc",(function(){return T["mc"]})),n.d(e,"qc",(function(){return T["qc"]})),n.d(e,"pc",(function(){return T["pc"]})),n.d(e,"tc",(function(){return T["tc"]})),n.d(e,"uc",(function(){return T["uc"]})),n.d(e,"vc",(function(){return T["vc"]})),n.d(e,"wc",(function(){return T["wc"]})),n.d(e,"xc",(function(){return T["xc"]})),n.d(e,"yc",(function(){return T["yc"]})),n.d(e,"Ac",(function(){return T["Ac"]})),n.d(e,"Bc",(function(){return T["Bc"]})),n.d(e,"Cc",(function(){return T["Cc"]})),n.d(e,"Dc",(function(){return T["Dc"]})),n.d(e,"Fc",(function(){return T["Fc"]})),n.d(e,"Hc",(function(){return T["Hc"]})),n.d(e,"Jc",(function(){return T["Jc"]})),n.d(e,"Lc",(function(){return T["Lc"]})),n.d(e,"Oc",(function(){return T["Oc"]})),n.d(e,"Pc",(function(){return T["Pc"]})),n.d(e,"Mc",(function(){return T["Mc"]})),n.d(e,"Nc",(function(){return T["Nc"]})),n.d(e,"Kc",(function(){return T["Kc"]})),n.d(e,"Qc",(function(){return T["Qc"]})),n.d(e,"Sc",(function(){return T["Sc"]})),n.d(e,"Tc",(function(){return T["Tc"]})),n.d(e,"Vc",(function(){return T["Vc"]})),n.d(e,"Wc",(function(){return T["Wc"]})),n.d(e,"Xc",(function(){return T["Xc"]})),n.d(e,"Yc",(function(){return T["Yc"]})),n.d(e,"dd",(function(){return T["dd"]})),n.d(e,"bd",(function(){return T["bd"]})),n.d(e,"cd",(function(){return T["cd"]})),n.d(e,"ad",(function(){return T["ad"]})),n.d(e,"Zc",(function(){return T["Zc"]})),n.d(e,"fd",(function(){return T["fd"]})),n.d(e,"nd",(function(){return T["nd"]})),n.d(e,"wd",(function(){return T["wd"]})),n.d(e,"gd",(function(){return T["gd"]})),n.d(e,"md",(function(){return T["md"]})),n.d(e,"ed",(function(){return T["ed"]})),n.d(e,"hd",(function(){return T["hd"]})),n.d(e,"id",(function(){return T["id"]})),n.d(e,"jd",(function(){return T["jd"]})),n.d(e,"kd",(function(){return T["kd"]})),n.d(e,"ld",(function(){return T["ld"]})),n.d(e,"pd",(function(){return T["pd"]})),n.d(e,"od",(function(){return T["od"]})),n.d(e,"rd",(function(){return T["rd"]})),n.d(e,"sd",(function(){return T["sd"]})),n.d(e,"td",(function(){return T["td"]})),n.d(e,"ud",(function(){return T["ud"]})),n.d(e,"vd",(function(){return T["vd"]})),n.d(e,"xd",(function(){return T["xd"]})),n.d(e,"yd",(function(){return T["yd"]})),n.d(e,"Bd",(function(){return T["Bd"]})),n.d(e,"Cd",(function(){return T["Cd"]})),n.d(e,"Dd",(function(){return T["Dd"]})),n.d(e,"Ed",(function(){return T["Ed"]})),n.d(e,"Fd",(function(){return T["Fd"]})),n.d(e,"Gd",(function(){return T["Gd"]})),n.d(e,"Hd",(function(){return T["Hd"]})),n.d(e,"Id",(function(){return T["Id"]})),n.d(e,"Kd",(function(){return T["Kd"]})),n.d(e,"qd",(function(){return T["qd"]})),n.d(e,"rb",(function(){return T["rb"]})),n.d(e,"Rc",(function(){return T["Rc"]})),n.d(e,"Ld",(function(){return T["Ld"]})),n.d(e,"tb",(function(){return T["tb"]})),n.d(e,"ub",(function(){return T["ub"]}));var r=n("6ae2"),i=(n("29a8"),n("b333")),a=n("c742"),s=n("ef0f"),o=n("5508");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class u{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){"undefined"!==typeof window&&Object(i["c"])().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",t=>{if(t.source===window&&t.data.name===this.messageName){t.stopPropagation();const e=this.functionRefs[t.data.index];e(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(t,e)}isTypedArray(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}}if(Object(i["c"])().get("IS_BROWSER")){Object(i["c"])().setPlatform("browser",new u);try{o["a"].registerManager(s["a"].URL_SCHEME,new s["b"])}catch(_){}try{o["a"].registerManager(a["a"].URL_SCHEME,new a["b"])}catch(_){}}n("4b05");var c=n("043e"),l=n("deb3"),d=n("f0a9"),h=n("7568"),p=n("34d7");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(r["b"])();const f={buffer:c["a"],cast:l["a"],clone:d["a"],print:h["a"]};Object(p["f"])(f);var m=n("9f31"),g=n("d0ca"),b=n("de1a"),y=n("92e0"),v=n("6336"),w=n("6eb5"),x=n("5fad"),O=n("6cae");
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const S=[m["a"],g["a"],b["a"],y["a"],v["a"],w["a"],x["a"]];function k(){for(const t of S)Object(O["registerClass"])(t)}var T=n("0ef4");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */k()},fc0b:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","isFinite"),n={x:e};return r["a"].runKernel(i["vb"],n)}const u=Object(s["b"])({isFinite_:o})},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fdbf:function(t,e,n){var r=n("04f8");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},ffb3:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(a["a"])(t,"x","sigmoid","float32"),n={x:e};return r["a"].runKernel(i["Jc"],n)}const u=Object(s["b"])({sigmoid_:o})}}]);
//# sourceMappingURL=chunk-vendors.4bd10382.js.map